(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[1],{"+1Zk":function(e,t,o){var n=t,r=o("oAGj");n.HostPlatformProtocol=r.defineProtocol("HostPlatformProtocol",{isWeb:"Boolean",isIOS:"Boolean",isAndroid:"Boolean",isService:"Boolean",isDesktop:"Boolean",isMobile:"Boolean"})},"+ASD":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("3DEm"),l=o("7hc0"),c=o("smUN"),u=o("sq5L"),p=o("Zifs");r.PGMDuotoneFilterSpec=(n=function e(t,o,n){this.darkColor=t,this.lightColor=o,this.intensity=n,c.PGMFilterSpec.call(this,e.TYPE)},i.defineClass({name:"PGMDuotoneFilterSpec",ctor:n,superName:"PGMFilterSpec",statics:{TYPE:"PGMDuotoneFilterSpec",PROP_DARK_COLOR:"darkColor",PROP_LIGHT_COLOR:"lightColor",PROP_INTENSITY:"intensity",decodeSpec:function(e,t){var o,r,a;return(o=p.SolidColor.decodeJson(i.as(e[n.PROP_DARK_COLOR],"AnyObject")))&&(r=p.SolidColor.decodeJson(i.as(e[n.PROP_LIGHT_COLOR],"AnyObject")))&&null!=(a=i.as(e[n.PROP_INTENSITY],"Double"))?new n(o,r,a):(t.error(u.PGMError.BAD_FILTER_SPEC,"PGMDuotoneFilterSpec: missing parameter(s)"),null)}},props:{encode:function(){var e=c.PGMFilterSpec.prototype.encode.call(this);return e[n.PROP_DARK_COLOR]=this.darkColor.encodeJson(),e[n.PROP_LIGHT_COLOR]=this.lightColor.encodeJson(),e[n.PROP_INTENSITY]=this.intensity,e},isEqualTo:function(e){return this===e||!!(t=i.as(e,n))&&i.eq(p._equality_SolidColor_SolidColor,this.darkColor,t.darkColor)&&i.eq(p._equality_SolidColor_SolidColor,this.lightColor,t.lightColor)&&s.MathUtils.absDouble(this.intensity-t.intensity)<1e-9;var t},interpolate:function(e,t){return t<=0?this:t>=1?e:(o=i.as(e,n))?new n(this.darkColor.interpolate(o.darkColor,t),this.lightColor.interpolate(o.lightColor,t),l.PGMAnimationUtils.interp(this.intensity,o.intensity,t)):(a.LegacyCoreAssert.fail("can't interpolate to a different function spec type",void 0,"PGMDuotoneFilterSpec.interpolate","PGMDuotoneFilterSpec.swift",85),this);var o}}}),n)},"+N83":function(e,t,o){var n,r,i,a=t,s=o("oAGj"),l=o("c9Jm"),c=o("yGNn"),u=o("jo4Y"),p=o("lmwz");a.DeleteImagesTest=(n=function(){this.actionSequence_Delete=[],this.page_=null,this.backgroundImages_=[],l.ActionTestBase.call(this)},s.defineClass({name:"DeleteImagesTest",ctor:n,superName:"ActionTestBase",props:{tearDown:function(){this.backgroundImages_=[],l.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return p.ImageFacade.getBackgroundImagesFromPage(o.firstPage).length>0},populateActionSequence:function(e,t,o){var n=this,r=s.clone(e);return this.backgroundImages_=s.clone(p.ImageFacade.getBackgroundImagesFromPage(o.firstPage)),this.backgroundImages_.length>0&&(r=r.concat([function(){return new u.DeleteAction(n.backgroundImages_)}])),c.CorePromise.resolve(r)},setUpActionSequence:function(e,t,o){this.page_=o.firstPage},validateAfterActionSequence:function(e,t){var o=s.clone(p.ImageFacade.getBackgroundImagesFromPage(this.page_));XCTAssertEqual(o.length,0)},validateAfterUndo:function(e,t){var o=s.clone(p.ImageFacade.getBackgroundImagesFromPage(this.page_));XCTAssertEqual(o.length,this.backgroundImages_.length)},validateAfterRedo:function(e,t){var o=s.clone(p.ImageFacade.getBackgroundImagesFromPage(this.page_));XCTAssertEqual(o.length,0)}}}),n),a.DeleteCellsTest=(r=function(){this.actionSequence_Delete=[],this.doc_=null,this.frameCells_=[],this.deleteableCells_=[],this.expectedRemainingCells_=0,l.ActionTestBase.call(this)},s.defineClass({name:"DeleteCellsTest",ctor:r,superName:"ActionTestBase",props:{tearDown:function(){this.frameCells_=[],this.deleteableCells_=[],l.ActionTestBase.prototype.tearDown.call(this)},getFrameCells:function(e){return this.allSelectableFormae(e,(function(e){return e.isGridCell()}))},deleteableFrameCells:function(e){var t;return this.getFrameCells(e).filter((function(e){return!(!(t=s.opt(e.controller,(function(e){return e.deleteable})))&&null==t)&&t}),this)},canRunActionSequence:function(e,t,o){var n=this.getFrameCells(o).length,r=this.deleteableFrameCells(o).length;return n>r&&r>0||r>1},populateActionSequence:function(e,t,o){var n=this,r=s.clone(e);this.frameCells_=s.clone(this.getFrameCells(o)),this.deleteableCells_=s.clone(this.deleteableFrameCells(o)),this.deleteableCells_.length==this.frameCells_.length&&this.deleteableCells_.splice(0,1),this.expectedRemainingCells_=this.frameCells_.length-this.deleteableCells_.length;for(var i=s.iter(s.range(1,this.deleteableCells_.length,!0));!i.done;i.next())r=r.concat([function(){var e=s.clone(n.deleteableFrameCells(n.doc_));return new u.DeleteAction([s.first(e)])}]);return c.CorePromise.resolve(r)},setUpActionSequence:function(e,t,o){this.doc_=o},validateAfterActionSequence:function(e,t){var o=s.clone(this.getFrameCells(this.doc_));XCTAssertEqual(o.length,this.expectedRemainingCells_)},validateAfterUndo:function(e,t){var o=s.clone(this.getFrameCells(this.doc_));XCTAssertEqual(o.length,this.frameCells_.length)},validateAfterRedo:function(e,t){var o=s.clone(this.getFrameCells(this.doc_));XCTAssertEqual(o.length,this.expectedRemainingCells_)}}}),r),a.DeleteItemsTest=(i=function(){this.actionSequence_Delete=[],this.doc_=null,this.floatingItems_=[],l.ActionTestBase.call(this)},s.defineClass({name:"DeleteItemsTest",ctor:i,superName:"ActionTestBase",props:{tearDown:function(){this.floatingItems_=[],l.ActionTestBase.prototype.tearDown.call(this)},getDeletableForma:function(e){return s.clone(this.allSelectableFormae(e,(function(e){return e.controller.canMultiSelect})))},populateActionSequence:function(e,t,o){var n=this,r=s.clone(e);return this.floatingItems_=s.clone(this.getDeletableForma(o)),this.floatingItems_.length>0&&(r=r.concat([function(){return new u.DeleteAction(n.floatingItems_)}])),c.CorePromise.resolve(r)},setUpActionSequence:function(e,t,o){this.doc_=o},validateAfterActionSequence:function(e,t){var o=s.clone(this.getDeletableForma(this.doc_));XCTAssertEqual(o.length,0)},validateAfterUndo:function(e,t){var o=s.clone(this.getDeletableForma(this.doc_));XCTAssertEqual(o.length,this.floatingItems_.length)},validateAfterRedo:function(e,t){var o=s.clone(this.getDeletableForma(this.doc_));XCTAssertEqual(o.length,0)}}}),i)},"//OJ":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"TheoPath":{"className":"TheoPath","type":"object","properties":{"type":{"type":"string","enum":["empty","rect","ellipse","arbitrary"]}}},"TheoPathTypes":{"oneOf":[{"$ref":"#/definitions/TheoEmptyPath"},{"$ref":"#/definitions/TheoRectanglePath"},{"$ref":"#/definitions/TheoEllipsePath"},{"$ref":"#/definitions/TheoArbitraryPath"}]},"TheoEmptyPath":{"className":"TheoEmptyPath","allOf":[{"$ref":"#/definitions/TheoPath"},{"className":"TheoEmptyPath","properties":{"type":{"enum":["empty"]}}}]},"TheoRectanglePath":{"className":"TheoRectanglePath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["rect"]},"coords":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoEllipsePath":{"className":"TheoEllipsePath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["ellipse"]},"coords":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoArbitraryPath":{"className":"TheoArbitraryPath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["arbitrary"]},"fillRule":{"type":"string","enum":["none","nonzero","evenodd"]},"endType":{"type":"string","enum":["butt","round","square"]},"joinType":{"type":"string","enum":["miter","round","bevel"]},"strokeWeight":{"type":"number"},"miterLimit":{"type":"number"},"ops":{"type":"array","items":{"oneOf":[{"type":"string"},{"type":"number"}]}}}}]},"TheoArtworkNode":{"className":"TheoArtworkNode","type":"object","properties":{"type":{"type":"string"}},"required":["type"]},"TheoArtworkNodeTypes":{"oneOf":[{"$ref":"#/definitions/TheoArtworkShape"},{"$ref":"#/definitions/TheoArtworkClipGroup"},{"$ref":"#/definitions/TheoArtworkGroup"}]},"TheoArtworkShape":{"className":"TheoArtworkShape","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["shape"]},"path":{"$ref":"#/definitions/TheoPathTypes"},"paths":{"type":"array","items":{"$ref":"#/definitions/TheoPathTypes"}},"fill-color-role":{"$ref":"Color.json#/definitions/ColorRole"},"stroke-color-role":{"$ref":"Color.json#/definitions/ColorRole"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"stroke-color":{"$ref":"Color.json#/definitions/SolidColor"},"stroke-width":{"type":"number","default":0},"override-bounds":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoArtworkGroup":{"className":"TheoArtworkGroup","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["group"]},"stroke-width":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"},"description":"The constant in code is defined as PROPERTY_NODES but its value is \\"stroke-width\\""}}}]},"TheoArtworkClipGroup":{"className":"TheoArtworkClipGroup","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["clip-group"]},"path":{"$ref":"#/definitions/TheoPathTypes"},"stroke-width":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"},"description":"The constant in code is defined as PROPERTY_NODES but its value is \\"stroke-width\\""}}}]}}}')},"/BuD":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("gXiO");r.ArtworkInfo=(n=function(e,t,o){this.artwork=e,this.sliceBox=t,this.contentRegion=o,a.CoreObject.call(this)},i.defineClass({name:"ArtworkInfo",ctor:n,superName:"CoreObject"}),n),r.HostPathUtilsProtocol=i.defineProtocol("HostPathUtilsProtocol",{artworkFromURL:"(String, Boolean) -> ArtworkInfo",parseSVGXMLData:"(String, SVGParser) -> Void",parseStringToDouble:"(String) -> Double",matchesForRegexInString:"(String, String) -> Array<String>",firstMatchForRegexInString:"(String, String) -> String",absolutePathFromURL:"(String) -> String",lastPathComponentFromURL:"(String) -> String"})},"/eOI":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("sWrh");r.PGMEasingType=i.defineEnum("PGMEasingType",{EaseIn:0,EaseOut:1,EaseInAndOut:2}),r.PGMSineEasingFunction=(n=function e(t,o,n){this.easing=t,a.PGMUnaryFunction.call(this,e.TYPE,o,n)},i.defineClass({name:"PGMSineEasingFunction",ctor:n,superName:"PGMUnaryFunction",statics:{TYPE:"pgm-sine-easing-fn",PROP_EASING:"easing",decodeFn:function(e,t,o){var a,s;return null!=(a=i.as(e[n.PROP_EASING],"Int"))&&null!=(s=r.PGMEasingType.toCaseValue(a))?new n(s,t,o):null}},props:{apply:function(e){var t=this.domain.boundedU(e);if(0==t||1==t)return this.range.applyU(t);switch(this.easing){case 0:return this.range.applyU(1-Math.cos(t*Math.PI*.5));case 1:return this.range.applyU(Math.sin(t*Math.PI*.5));case 2:return this.range.applyU(.5-.5*Math.cos(t*Math.PI))}},isEqualTo:function(e){var t;return!!(t=i.as(e,n))&&this.easing==t.easing&&a.PGMUnaryFunction.prototype.isEqualTo.call(this,e)},encode:function(){var e=a.PGMUnaryFunction.prototype.encode.call(this);return e[n.PROP_EASING]=this.easing,e}}}),n)},"02o7":function(e,t,o){var n=t,r=o("oAGj");n.HostDCXNode=r.defineProtocol("HostDCXNode",{nodeId:"String",getValue:"(String) -> AnyObject",setValue:"(String, AnyObject) -> Void",removeValue:"(String) -> Void",appendNode:"(String, String) -> HostDCXNode",removeNode:"(HostDCXNode) -> Void",children:"Array<HostDCXNode>",components:"Array<HostDCXComponent>",addComponent:"(String, String, String, String, String, StorageSpec) -> HostDCXComponent",moveComponent:"(HostDCXComponent) -> HostDCXComponent"})},"076U":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"Assets":{"read-data":false,"type":"object","properties":{"path":{"type":"string","enum":["assets"]}}},"LinkedObject":{"type":"object","properties":{"id":{"type":"string"},"type":{"type":"string"},"name":{"type":"string"},"path":{"type":"string"}}},"TheoSize":{"type":"array","minItems":2,"items":[{"type":"number","minimum":0,"description":"width"},{"type":"number","minimum":0,"description":"height"}]},"TheoPoint":{"type":"array","minItems":2,"items":[{"type":"number","description":"x"},{"type":"number","description":"y"}]},"TheoRect":{"anyOf":[{"type":"string","pattern":"^[-+]?\\\\d*\\\\.?\\\\d+([eE][-+]?\\\\d+)?(\\\\s*,\\\\s*[-+]?\\\\d*\\\\.?\\\\d+([eE][-+]?\\\\d+)?){3}$","description":"Comma-separated list of 4 doubles in minX, maxX, minY, maxY order"},{"type":"array","minItems":4,"items":[{"type":"number","description":"minX"},{"type":"number","description":"minY"},{"type":"number","description":"maxX"},{"type":"number","description":"maxY"}]}]},"Matrix2D":{"type":"array","minItems":6,"items":[{"type":"number","description":"a"},{"type":"number","description":"b"},{"type":"number","description":"c"},{"type":"number","description":"d"},{"type":"number","description":"tx"},{"type":"number","description":"ty"}]},"TheoTime":{"type":"array","minItems":2,"items":[{"type":"integer","description":"value"},{"type":"integer","description":"timescale"}]},"TheoDocumentData":{"className":"TheoDocumentData","type":"object","properties":{"shareData":{"type":"object","properties":{"scope":{"type":"string"}}}}},"ContentDocument":{"className":"ContentDocument","allOf":[{"$ref":"#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["content"]},"type":{"type":"string","default":"application/vnd.adobe.theo.content+dcx"},"children":{"type":"array","items":[{"$ref":"ContentNodes.json#/definitions/RootContentNode"}]}},"required":["id","path","type"]}]},"DocumentHistory":{"className":"DocumentHistory","allOf":[{"$ref":"#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["document-history"]},"entries":{"type":"array","items":{"type":"string"},"maxItems":100}},"required":["id","path","entries"]}]},"TheoDocument":{"className":"TheoDocument","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","default":"My Post"},"type":{"type":"string"},"format-version":{"type":"integer"},"watermark-enabled":{"type":"boolean","default":true},"shared":{"type":"boolean"},"modified-since-share":{"type":"boolean","default":false},"cp#assetId":{"type":"string"},"cp#shortId":{"type":"string"},"cp#publishedEtag":{"type":"string"},"cp#projectId":{"type":"string"},"cp#isExported":{"type":"boolean"},"authctx#ctxid":{"$comment":"should only be written as a string from now on, but earlier version have had this set to an object. Including object as a possible type to allow reading of older documents","anyOf":[{"type":"string"},{"type":"object"}]},"authctx#themeid":{"type":"string"},"authctx#uses-branded-elements":{"type":"boolean","description":"authoringContextID_.length > 0"},"doc#data":{"$ref":"#/definitions/TheoDocumentData"},"constrainedImages":{"type":"object","properties":{"stockImages":{"type":"object","properties":{"extended":{"type":"array","items":{"type":"string"}},"standard":{"type":"array","items":{"type":"string"}},"unlicensed":{"type":"array","items":{"type":"string"}}}}}},"children":{"type":"array","items":{"anyOf":[{"$ref":"Formae.json#/definitions/FormaPage"},{"$ref":"#/definitions/ContentDocument"},{"$ref":"Color.json#/definitions/ColorThemeDocument"},{"$ref":"#/definitions/DocumentHistory"},{"$ref":"#/definitions/Assets"}]},"uniqueItems":true}},"required":["id","format-version","doc#data"]}},"$ref":"#/definitions/TheoDocument"}')},"0GlD":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("tvh+");r.CoreContentBinary=(n=function e(t,o,n){void 0===n&&(n=null),this.data=t,a.CoreContent.call(this,e.KIND,o,n)},i.defineClass({name:"CoreContentBinary",ctor:n,superName:"CoreContent",statics:{KIND:"binary",decodePayload:function(e,t,o){var r;return null!=(r=e[a.CoreContent.KEY_DATA])?new n(r,t,o):null}},props:{encodePayload:function(e){e[a.CoreContent.KEY_DATA]=this.data},isEqualTo:function(e){return this===e}}}),n)},"0KSU":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"ContentNode":{"className":"ContentNode","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"tags":{"type":"object","patternProperties":{"^.*$":{"type":"string"}}}},"required":["id","path"]}]},"NonRootContentNodeTypes":{"oneOf":[{"$ref":"#/definitions/GroupContentNode"},{"$ref":"#/definitions/ImageContentNode"},{"$ref":"#/definitions/TextContentNode"},{"$ref":"#/definitions/VectorContentNode"},{"$ref":"#/definitions/VideoContentNode"}]},"GroupContentNodeBase":{"allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"children":{"type":"array","items":{"$ref":"#/definitions/NonRootContentNodeTypes"}}}}]},"GroupContentNode":{"className":"GroupContentNode","allOf":[{"$ref":"#/definitions/GroupContentNodeBase"},{"properties":{"kind":{"enum":["group"]}},"required":["kind"]}]},"RootContentNode":{"className":"RootContentNode","allOf":[{"$ref":"#/definitions/GroupContentNodeBase"},{"properties":{"kind":{"enum":["root"]}},"required":["kind"]}]},"ImageColorData":{"className":"ImageColorData","type":"object","properties":{"red":{"type":"number"},"green":{"type":"number"},"blue":{"type":"number"},"alpha":{"type":"number"},"coverage":{"type":"number"}}},"ImageContentNode":{"className":"ImageContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["image"]},"pixel-width":{"type":"integer"},"pixel-height":{"type":"integer"},"image-has_alpha":{"type":"boolean"},"image-color-data":{"type":"array","items":{"$ref":"#/definitions/ImageColorData"}},"saliency-width":{"type":"integer"},"saliency-height":{"type":"integer"},"saliency-data":{"type":"array","items":{"type":"number"}},"edge-data":{"type":"array","items":{"type":"number"}},"focus-region":{"$ref":"Root.json#/definitions/TheoRect"}},"required":["kind"]}]},"TextContentNode":{"className":"TextContentNode","allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"kind":{"enum":["text"]},"text-model":{"$ref":"Text.json#/definitions/ContentTextModel"}},"manifest-properties":["text-model"],"required":["kind"]}]},"MediaMetadata":{"className":"MediaMetadata","type":"object","properties":{"search":{"type":"string"},"type":{"type":"string"},"source_name":{"type":"string"},"source_url":{"type":"string"},"owner":{"type":"string"},"asset_id":{"type":"string"},"creator_user_id":{"type":"string"},"creator_display_name":{"type":"string"},"design_intent":{"type":"string"},"source":{"type":"string"},"photo_name":{"type":"string"},"tags":{"type":"string"},"library_id":{"type":"string"},"library_name":{"type":"string"},"created_date":{"type":"number"},"modified_date":{"type":"number"},"search_props":{"type":"string"}}},"URLBasedContentNode":{"className":"URLBasedContentNode","allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"data-url":{"type":"string"},"mimetype":{"type":"string"},"element-id":{"type":"string"},"roles":{"type":"array","items":{"type":"string"}},"components":{"type":"array","items":{"type":"object","properties":{"url":{"type":"string"},"id":{"type":"string"},"length":{"type":"integer"},"name":{"type":"string"},"path":{"type":"string"},"mimeType":{"type":"string"},"etag":{"type":"string"}}},"maxItems":1},"media-metadata":{"$ref":"#/definitions/MediaMetadata"},"local-identifier":{"type":"string"}},"manifest-properties":["media-metadata"]}]},"VectorContentNode":{"className":"VectorContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["vector"]},"size":{"$ref":"Root.json#/definitions/TheoSize"}},"required":["kind"]}]},"VideoContentNode":{"className":"VideoContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["video"]},"width":{"type":"integer"},"height":{"type":"integer"},"duration":{"$ref":"Root.json#/definitions/TheoTime"},"original-duration":{"$ref":"Root.json#/definitions/TheoTime"},"offset-in-original":{"$ref":"Root.json#/definitions/TheoTime"},"time-samples":{"type":"array","items":{"$ref":"Root.json#/definitions/TheoTime"}}},"required":["kind"]}]}}}')},"0OXu":function(e,t,o){var n=t,r=o("oAGj");n.HostDCXComposite=r.defineProtocol("HostDCXComposite",{current:"HostDCXBranch"})},"0PP3":function(e,t,o){var n=t,r=o("oAGj");n.IPGMMimicClient=r.defineProtocol("IPGMMimicClient",{bindDocument:"(PGMMimicDocument) -> IPGMMimicDocumentBinding",bindNode:"(PGMMimicNode, PGMMimicGroupNode) -> IPGMMimicNodeBinding"})},"0lVD":function(e,t,o){var n,r,i,a=t,s=o("oAGj"),l=o("fNpk"),c=o("jLWG"),u=o("rKjb"),p=o("dmHI"),d=o("tlHl"),h=o("a/9s"),f=o("n8f2"),m=o("V93b"),g=o("kEiY"),y=o("rtbu"),T=o("FR4n"),A=o("qEGv"),C=o("euLT"),_=o("Ucb9"),S=o("g6aL"),P=o("bAjp");a.PGMMimicConformerOptions=(n=function(e){void 0===e&&(e=!1),this.provideEndConformSummary=e},r={},s.defineClass({name:"PGMMimicConformerOptions",ctor:n,statics:{DEFAULT:{get:function(){return void 0===r.DEFAULT&&(r.DEFAULT=new n),r.DEFAULT}}}}),n),a.PGMMimicConformer=(i=function(e,t,o,n){this.document=e,this.fromState=t,this.state=o,this.options=n},s.defineClass({name:"PGMMimicConformer",ctor:i,statics:{conform:function(e,t,o,n){new i(e,t,o,n).conform()}},props:{conform:function(){var e=this;this.document.beginConform(this.fromState,this.state),s.opt(this.document.root,(function(t){return t.visit((function(t){return t.newConform(e.fromState,e.state,e.options),!1}))})),this.conformRecursive(this.state.graph.rootRef,null,0,this.document.root),this.state.time==this.fromState.time&&this.state.graph===this.fromState.graph||this.document.nodesWithAnimations.forEach((function(t){return t.applyAnimations(e.fromState.time,e.state.time)})),this.document.dirtyLocalCTMNodes.filter((function(e){return!e.hasCTMLocalDirtyAncestor}),this).forEach((function(e){return e.updateCTM()})),s.opt(this.document.root,(function(e){return e.markedBounds})),this.options.provideEndConformSummary&&s.opt(this.document.root,(function(e){return e.endConformSummary(!1)})),this.document.endConform(this.fromState,this.state)},isNodeValidForRef:function(e,t){return t.ref===e||t.ref.child===e.child||t.ref.child.entity==e.child.entity&&t.ref.child.type==e.child.type},conformRecursive:function(e,t,o,n){var r;if(r=n)if(this.isNodeValidForRef(e,r))r.ref===e||(r.ref.child===e.child?(r.ref=e,r.compositing=e.compositing):r.ref.child.entity==e.child.entity?(r.ref=e,this.conformSameEntity(e,r)):l.LegacyCoreAssert.fail("discrepancy in logic between conformRecursive and isNodeValidForRef",void 0,"PGMMimicConformer.conformRecursive","PGMMimicConformer.swift",162));else{var i;if(i=t)for(var a=s.iter(s.range(o+1,i.children.length,!1));!a.done;a.next()){var c=a.value,u=i.children[c];if(this.isNodeValidForRef(e,u))return i.insertChild(o,u),void this.conformRecursive(e,i,o,u)}this.conformMissing(e,t,o)}else this.conformMissing(e,t,o)},conformSameEntity:function(e,t){var o,n;if(o=s.as(e.child,u.PGMComposite))if(n=s.as(t,m.PGMMimicGroupNode)){for(var r=0;r<o.children.length;){var i=r<n.children.length?n.children[r]:null;this.conformRecursive(o.children[r],n,r,i),r+=1}for(l.LegacyCoreAssert.isTrue(n.children.length>=o.children.length,"somehow we failed to create corresponding mimic nodes?",void 0,"PGMMimicConformer.conformSameEntity","PGMMimicConformer.swift",220);n.children.length>o.children.length;){var a=n.children[o.children.length];n.removeChild(a),a.destroy()}}else l.LegacyCoreAssert.fail("how did we end up with a non-group mimic node bound to a composite PGM node?",void 0,"PGMMimicConformer.conformSameEntity","PGMMimicConformer.swift",229);t.importProperties(),t.compositing=e.compositing},conformMissing:function(e,t,o){var n,r,i,a=this;if(r=s.as(e.child,u.PGMComposite)){var F,v;null==(b=this.document.binding.createNode(this.document,e,this.options))||b instanceof m.PGMMimicGroupNode||(l.LegacyCoreAssert.fail("group node required for a composite reference; ignoring",void 0,"PGMMimicConformer.conformMissing","PGMMimicConformer.swift",254),b=null),(v=s.as(b,m.PGMMimicGroupNode))?F=v:e.child instanceof S.PGMSimpleGroup?F=new m.PGMMimicGroupNode(this.document,e,this.options,t):e.child instanceof p.PGMFilter?F=new f.PGMMimicFilterNode(this.document,e,this.options,t):e.child instanceof c.PGMClip?F=new h.PGMMimicClipNode(this.document,e,this.options,t):(l.LegacyCoreAssert.fail("looks like we have a new composite type?",void 0,"PGMMimicConformer.conformMissing","PGMMimicConformer.swift",269),F=new m.PGMMimicGroupNode(this.document,e,this.options,t));var R=0;r.children.forEach((function(e){a.conformMissing(e,F,R),R+=1})),n=F}else{var b;(b=this.document.binding.createNode(this.document,e,this.options))?n=b:e.child instanceof P.PGMText?n=new A.PGMMimicTextNode(this.document,e,this.options,t):e.child instanceof _.PGMShape?n=new T.PGMMimicShapeNode(this.document,e,this.options,t):e.child instanceof d.PGMMedia?n=new g.PGMMimicMediaNode(this.document,e,this.options,t):e.child instanceof C.PGMNullNode?n=new y.PGMNullMimicNode(this.document,e,this.options,t):(l.LegacyCoreAssert.fail("looks like we have a new leaf type?",void 0,"PGMMimicConformer.conformMissing","PGMMimicConformer.swift",293),n=new y.PGMMimicNode(this.document,e,this.options,t))}(i=t)?i.insertChild(o,n):this.document.root=n}}}),i)},"1NAc":function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("gXiO"),l=o("fNpk"),c=o("oKlP"),u=o("sIWg");i.TheoSize=(n=function(e,t){l.LegacyCoreAssert.isFalse(isNaN(e)||isNaN(t),"TheoSize initialized with NaN values",void 0,"TheoSize.init","TheoSize.swift",19),this.width=e,this.height=t,s.CoreObject.call(this)},r={},a.defineClass({name:"TheoSize",ctor:n,superName:"CoreObject",statics:{Zero:{get:function(){return void 0===r.Zero&&(r.Zero=new n(0,0)),r.Zero}},decodeJson:function(e){return null==e?null:(t=a.as(e,["Array","Double"]))?2!=t.length?(l.LegacyCoreAssert.fail("TheoSize.decodeJson: data is not an array with 2 elements",void 0,"TheoSize.decodeJson","TheoSize.swift",114),null):new n(t[0],t[1]):(o=a.as(e,["Array","Int"]))?2!=o.length?(l.LegacyCoreAssert.fail("TheoSize.decodeJson: data is not an array with 2 elements",void 0,"TheoSize.decodeJson","TheoSize.swift",123),null):new n(a.toDouble(o[0]),a.toDouble(o[1])):(l.LegacyCoreAssert.fail("TheoSize.decodeJson: data is not an array",void 0,"TheoSize.decodeJson","TheoSize.swift",129),null);var t,o},difference:function(e,t){return new n(e.width-t.width,e.height-t.height)}},props:{multiply:function(e){return new n(this.width*e,this.height*e)},hypotenuse:{get:function(){return Math.sqrt(this.width*this.width+this.height*this.height)}},area:{get:function(){return this.width*this.height}},myAspectRatioClosestCorner:function(e){var t=this.width*this.width+this.height*this.height,o=(this.width*e.width+this.height*e.height)/t;return new n(o*this.width,o*this.height)},myAspectRatioMatchArea:function(e){var t=Math.sqrt(e.width*this.width*(e.height/this.height)),o=Math.sqrt(e.height*this.height*(e.width/this.width));return new n(t,o)},myAspectRatioMatchPerimeter:function(e){var t=(e.width+e.height)/(this.width+this.height);return new n(t*this.width,t*this.height)},myAspectRatioFitWithin:function(e){return e.fitAspectRatioWithin(this.aspectRatio)},fitAspectRatioWithin:function(e){return this.aspectRatio<e?new n(this.width,this.width/e):new n(e*this.height,this.height)},myAspectRatioFillWithin:function(e){return e.fillAspectRatioWithin(this.aspectRatio)},fillAspectRatioWithin:function(e){return new n(this.width,this.width/e)},equal:function(e){return this.width==e.width&&this.height==e.height},equalWithAccuracy:function(e,t){return Math.abs(this.width-e.width)<t&&Math.abs(this.height-e.height)<t},aspectRatio:{get:function(){return 0==this.height?1:this.width/this.height}},angle:{get:function(){return Math.atan(this.aspectRatio)/Math.PI}},similarity:function(e){return u.TheoRect.fromSize(this).similarity(u.TheoRect.fromSize(e))},encode:function(){return l.LegacyCoreAssert.fail("TheoSize: Use encodeJson(), not encode()",void 0,"TheoSize.encode","TheoSize.swift",134),[]},encodeJson:function(){return a.as([this.width,this.height],"AnyObject")},print:function(){return this.asString},description:{get:function(){return this.asString}},asString:{get:function(){return a.toString("width: %g height %g",this.width,this.height)}},asPoint:{get:function(){return new c.TheoPoint(this.width,this.height)}}}}),n)},"1bhb":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("c9Jm"),s=o("SVjO"),l=o("iCxV"),c=o("K0Rh"),u=o("9YN4");r.ApplyTemplateTest=(n=function(){this.actionSequence_ApplyTemplate=[],this.testDoc_=null,this.rootForma_=null,a.ActionTestBase.call(this)},i.defineClass({name:"ApplyTemplateTest",ctor:n,superName:"ActionTestBase",props:{populateActionSequence:function(e,t,o){var n=this;return o.firstPage.root,XCTAssertNotNil(l.Host.actionTesting),l.Host.actionTesting.templateForDocument(o).then((function(t){var o;return(o=i.as(t,u.TheoDocument))?e.concat([function(){return s.ApplyTemplateAction.init_fc36(o,n.rootForma_,1,n.rootForma_,[])}]):(XCTFail("Could not get Design Template for ApplyTemplateTest"),[])}))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.rootForma_=i.as(o.firstPage.root,c.RootForma)},validateAfterActionSequence:function(e,t){},validateAfterUndo:function(e,t){},validateAfterRedo:function(e,t){}}}),n)},"1vuF":function(e,t,o){var n,r,i,a,s,l=t,c=o("oAGj"),u=o("c9Jm"),p=o("yGNn"),d=o("sTUO"),h=o("MYNe");l.LayerTest=(n=function(){this.actionSequence_LayerTest=[],this.testDoc_=null,this.initialFormaIndex_=0,this.finalFormaIndex_=0,u.ActionTestBase.call(this)},c.defineClass({name:"LayerTest",ctor:n,superName:"ActionTestBase",props:{tearDown:function(){this.initialLayerItem_=null,u.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){var n;return this.testDoc_=o,!!(n=this.getLayerItem())&&(this.initialLayerItem_=n,h.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)>1)},populateActionSequence:function(e,t,o){var n=this;this.initialFormaIndex_=h.LayerFacade.getZOrder(this.initialLayerItem_);var r=h.LayerFacade.getMinLayerIndex(this.initialLayerItem_),i=h.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)+r-1;return this.initialFormaIndex_<i?this.finalFormaIndex_=this.initialFormaIndex_+1:this.initialFormaIndex_>r?this.finalFormaIndex_=this.initialFormaIndex_-1:XCTFail("Not enough items to change zorder"),p.CorePromise.resolve([function(){return new d.ChangeZOrderAction(n.finalFormaIndex_)}])},setUpActionSequence:function(e,t,o){o.controller.selection.replaceSelection(this.initialLayerItem_)},validateAfterActionSequence:function(e,t){var o=h.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},validateAfterUndo:function(e,t){var o=h.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.initialFormaIndex_)},validateAfterRedo:function(e,t){var o=h.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},getLayerItem:function(){var e=null,t=c.clone(this.allSelectableFormae(this.testDoc_,(function(e){return 1==e.controller.floating})));return t.length>0&&(e=c.first(t)),e}}}),n),l.SendForwardTest=(r=function(){this.actionSequence_SendForwardTest=[],this.testDoc_=null,this.initialFormaIndex_=0,this.finalFormaIndex_=0,u.ActionTestBase.call(this)},c.defineClass({name:"SendForwardTest",ctor:r,superName:"ActionTestBase",props:{tearDown:function(){this.initialLayerItem_=null,u.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){var n;return this.testDoc_=o,!!(n=this.getLayerItem())&&(this.initialLayerItem_=n,h.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)>1)},populateActionSequence:function(e,t,o){var n=this;this.initialFormaIndex_=h.LayerFacade.getZOrder(this.initialLayerItem_);var r=h.LayerFacade.getMinLayerIndex(this.initialLayerItem_),i=h.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)+r-1;this.initialFormaIndex_>i||this.initialFormaIndex_<r?XCTFail("Selected forma index is out-of-bounds for z-order index. Cannot change z-order."):this.initialFormaIndex_==i?this.finalFormaIndex_=this.initialFormaIndex_:this.initialFormaIndex_>=r&&(this.finalFormaIndex_=this.initialFormaIndex_+1);var a=h.ZOrderEnum.Forward;return p.CorePromise.resolve([function(){return new d.SendForwardBackwardAction(a,[n.initialLayerItem_])}])},validateAfterActionSequence:function(e,t){var o=h.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},validateAfterUndo:function(e,t){var o=h.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.initialFormaIndex_)},validateAfterRedo:function(e,t){var o=h.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},getLayerItem:function(){var e=null,t=c.clone(this.allSelectableFormae(this.testDoc_,(function(e){return 1==e.controller.floating})));return t.length>0&&(e=c.first(t)),e}}}),r),l.SendBackwardTest=(i=function(){this.actionSequence_SendBackwardTest=[],this.testDoc_=null,this.initialFormaIndex_=0,this.finalFormaIndex_=0,u.ActionTestBase.call(this)},c.defineClass({name:"SendBackwardTest",ctor:i,superName:"ActionTestBase",props:{tearDown:function(){this.initialLayerItem_=null,u.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){var n;return this.testDoc_=o,!!(n=this.getLayerItem())&&(this.initialLayerItem_=n,h.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)>1)},populateActionSequence:function(e,t,o){var n=this;this.initialFormaIndex_=h.LayerFacade.getZOrder(this.initialLayerItem_);var r=h.LayerFacade.getMinLayerIndex(this.initialLayerItem_),i=h.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)+r-1;this.initialFormaIndex_>i||this.initialFormaIndex_<r?XCTFail("Selected forma index is out-of-bounds for z-order index. Cannot change z-order."):this.initialFormaIndex_==r?this.finalFormaIndex_=this.initialFormaIndex_:this.initialFormaIndex_<=i&&(this.finalFormaIndex_=this.initialFormaIndex_-1);var a=h.ZOrderEnum.Backward;return p.CorePromise.resolve([function(){return new d.SendForwardBackwardAction(a,[n.initialLayerItem_])}])},validateAfterActionSequence:function(e,t){var o=h.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},validateAfterUndo:function(e,t){var o=h.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.initialFormaIndex_)},validateAfterRedo:function(e,t){var o=h.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},getLayerItem:function(){var e=null,t=c.clone(this.allSelectableFormae(this.testDoc_,(function(e){return 1==e.controller.floating})));return t.length>0&&(e=c.first(t)),e}}}),i),l.SendToFrontTest=(a=function(){this.actionSequence_SendToFrontTest=[],this.testDoc_=null,this.initialFormaIndex_=0,this.finalFormaIndex_=0,u.ActionTestBase.call(this)},c.defineClass({name:"SendToFrontTest",ctor:a,superName:"ActionTestBase",props:{tearDown:function(){this.initialLayerItem_=null,u.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){var n;return this.testDoc_=o,!!(n=this.getLayerItem())&&(this.initialLayerItem_=n,h.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)>1)},populateActionSequence:function(e,t,o){var n=this;this.initialFormaIndex_=h.LayerFacade.getZOrder(this.initialLayerItem_);var r=h.LayerFacade.getMinLayerIndex(this.initialLayerItem_),i=h.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)+r-1;this.initialFormaIndex_>i||this.initialFormaIndex_<r?XCTFail("Selected forma index is out-of-bounds for z-order index. Cannot change z-order."):this.initialFormaIndex_==i?this.finalFormaIndex_=this.initialFormaIndex_:this.initialFormaIndex_>=r&&(this.finalFormaIndex_=i);var a=h.ZOrderEnum.Front;return p.CorePromise.resolve([function(){return new d.SendForwardBackwardAction(a,[n.initialLayerItem_])}])},validateAfterActionSequence:function(e,t){var o=h.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},validateAfterUndo:function(e,t){var o=h.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.initialFormaIndex_)},validateAfterRedo:function(e,t){var o=h.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},getLayerItem:function(){var e=null,t=c.clone(this.allSelectableFormae(this.testDoc_,(function(e){return 1==e.controller.floating})));return t.length>0&&(e=c.first(t)),e}}}),a),l.SendToBackTest=(s=function(){this.actionSequence_SendToBackTest=[],this.testDoc_=null,this.initialFormaIndex_=0,this.finalFormaIndex_=0,u.ActionTestBase.call(this)},c.defineClass({name:"SendToBackTest",ctor:s,superName:"ActionTestBase",props:{tearDown:function(){this.initialLayerItem_=null,u.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){var n;return this.testDoc_=o,!!(n=this.getLayerItem())&&(this.initialLayerItem_=n,h.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)>1)},populateActionSequence:function(e,t,o){var n=this;this.initialFormaIndex_=h.LayerFacade.getZOrder(this.initialLayerItem_);var r=h.LayerFacade.getMinLayerIndex(this.initialLayerItem_),i=h.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)+r-1;this.initialFormaIndex_>i||this.initialFormaIndex_<r?XCTFail("Selected forma index is out-of-bounds for z-order index. Cannot change z-order."):this.initialFormaIndex_==r?this.finalFormaIndex_=this.initialFormaIndex_:this.initialFormaIndex_<=i&&(this.finalFormaIndex_=r);var a=h.ZOrderEnum.Back;return p.CorePromise.resolve([function(){return new d.SendForwardBackwardAction(a,[n.initialLayerItem_])}])},validateAfterActionSequence:function(e,t){var o=h.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},validateAfterUndo:function(e,t){var o=h.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.initialFormaIndex_)},validateAfterRedo:function(e,t){var o=h.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},getLayerItem:function(){var e=null,t=c.clone(this.allSelectableFormae(this.testDoc_,(function(e){return 1==e.controller.floating})));return t.length>0&&(e=c.first(t)),e}}}),s)},"2Knw":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"ImageFilter":{"className":"ImageFilter","type":"object","properties":{"kind":{"type":"string"},"name":{"type":"string","default":""}}},"ImageFilterTypes":{"oneOf":[{"$ref":"#/definitions/AlphaBlendFilter"},{"$ref":"#/definitions/CompositeFilter"}]},"AlphaBlendFilter":{"className":"AlphaBlendFilter","allOf":[{"$ref":"#/definitions/ImageFilter"},{"properties":{"kind":{"enum":["AlphaBlend"]},"mix":{"type":"number"},"filter1":{"$ref":"#/definitions/ImageFilterTypes"},"filter2":{"$ref":"#/definitions/ImageFilterTypes"}},"required":["kind"]}]},"CompositeFilter":{"className":"CompositeFilter","allOf":[{"$ref":"#/definitions/ImageFilter"},{"properties":{"kind":{"enum":["CompositeFilter"]},"mix":{"type":"number","default":1},"blend":{"type":"string","default":"normal"},"grayscale":{"type":"boolean","default":false},"contrast":{"type":"number","default":1},"color-operation":{"type":"string","default":""},"saturation-offset":{"type":"number","default":0},"brightness-offset":{"type":"number","default":0},"blur-radius":{"type":"number","default":0},"reduce-contrast":{"type":"boolean","description":"If true, contrast == 0.5"}},"required":["kind"]}]}}}')},"2S5s":function(e,t,o){var n,r,i,a,s,l,c,u,p,d,h,f,m,g,y,T,A,C,_,S,P,F,v,R,b,E,N,k,D,I,M,x=t,w=o("oAGj"),O=o("Tq01"),L=o("4mEG"),B=o("c9Jm"),G=o("Aj/e"),q=o("yGNn"),j=o("ascj"),X=o("FNB+"),$=o("pnSN"),U=o("iCxV"),H=o("3lr5"),Y=o("c+uM"),V=o("434x"),z=o("35Q0"),K=o("cRpU"),W=o("enh0"),J=o("Vm85"),Z=o("VJ9E"),Q=o("8t9B"),ee=o("oKlP"),te=o("oKI3"),oe=o("uUew"),ne=o("h8Q5");x.SetTextTest=(n=function e(){this.actionSequence_SetText=[function(){return new L.AddTextContentAction(e.initialText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,B.ActionTestBase.call(this)},w.defineClass({name:"SetTextTest",ctor:n,superName:"ActionTestBase",statics:{initialText_:"Some text",changedText_:"New text"},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var r=this;return q.CorePromise.resolve(e.concat([function(){return new K.SetTextAction(n.changedText_,r.textForma)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var r=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(r===this.textForma),XCTAssertEqual(w.opt(w.opt(r,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(r,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),n.changedText_)},validateAfterUndo:function(e,t){var o=this;XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)})))},validateAfterRedo:function(e,t){var o=this,r=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(r),XCTAssertEqual(w.opt(w.opt(r,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(r,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),n.changedText_)}}}),n),x.SetTextCollapseTest=(r=function(){this.actionSequence_SetTextCollapse=[],this.testDoc_=null,this.testPage_=null,B.ActionTestBase.call(this)},w.defineClass({name:"SetTextCollapseTest",ctor:r,superName:"ActionTestBase",statics:{initialText_:"Initial text",firstChangedText_:"First text",secondChangedText_:"Second text",thirdChangedText_:"Third text"},props:{tearDown:function(){this.lockupForma_=null,B.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(o,(function(e){return w.opt(e.controller,(function(e){return e.kind==Q.TypeLockupController.KIND}))}))),null!=this.lockupForma_},prepareDocument:function(e,t){var o,n=[];return(o=this.lockupForma_)&&n.push((function(){return new K.SetTextCollapseAction(r.firstChangedText_,o,"FirstScope")})),q.CorePromise.resolve(n)},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve(e.concat([function(){return new K.SetTextCollapseAction(r.secondChangedText_,n.lockupForma_,"SecondScope")}]).concat([function(){return new K.SetTextCollapseAction(r.thirdChangedText_,n.lockupForma_,"SecondScope")}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertEqual(w.opt(w.opt(this.lockupForma_,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(this.lockupForma_,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),r.thirdChangedText_)},validateAfterUndo:function(e,t){XCTAssertEqual(w.opt(w.as(w.opt(this.lockupForma_,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),r.firstChangedText_)},validateAfterRedo:function(e,t){XCTAssertNotNil(this.lockupForma_),XCTAssertEqual(w.opt(w.opt(this.lockupForma_,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(this.lockupForma_,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),r.thirdChangedText_)}}}),r),x.SetFontTest=(i=function e(){this.actionSequence_SetFont=[function(){return new L.AddTextContentAction(e.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldFont_=null,B.ActionTestBase.call(this)},w.defineClass({name:"SetFontTest",ctor:i,superName:"ActionTestBase",statics:{testText_:"Some text",testFont_:"Bellfort",getTheoFont:function(e){var t=Z.TheoFont.init_9e5c(U.Host.fontProvider.getIncludedFonts(H.ANY_DOCUMENT).find((function(t){return t.postScriptName==e})));return XCTAssertEqual(t.fontData.postScriptName,e),t}},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve(e.concat([function(){return n.oldFont_=w.opt(w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.font})),(function(e){return e.fontData.postScriptName})),w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)})),new K.SetFontAction(i.getTheoFont(i.testFont_))}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),i.testText_),XCTAssertEqual(w.opt(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.font})),(function(e){return e.fontData.postScriptName})),i.testFont_)},validateAfterUndo:function(e,t){var o=this;XCTAssertEqual(w.opt(w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.font})),(function(e){return e.fontData.postScriptName})),this.oldFont_),XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)})))},validateAfterRedo:function(e,t){var o=this,n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(n),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),i.testText_),XCTAssertEqual(w.opt(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.font})),(function(e){return e.fontData.postScriptName})),i.testFont_)}}}),i),x.ReplaceMissingFontsTest=(a=function(){this.actionSequence_ReplacingMissingFonts=[],this.testDoc_=null,B.ActionTestBase.call(this)},w.defineClass({name:"ReplaceMissingFontsTest",ctor:a,superName:"ActionTestBase",props:{canRunActionSequence:function(e,t,o){var n=this;return o.firstPage.root.visitAll(X.FormaTraversal.PreOrder,(function(e){var t;if(null==n.psName_&&(t=w.as(e.controller,Q.TypeLockupController))){var r=w.opt(w.opt(t.lockupStyle,(function(e){return e.font})),(function(e){return e.fontData.postScriptName}));null!=r&&r!=U.Host.textModelUtils.defaultFont().postScriptName&&(o.recordMissingFont(r),n.psName_=r,n.lockupForma_=e,n.testDoc_=o)}})),null!=this.psName_},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve([function(){return new V.NudgeAction(new ee.TheoPoint(10,0),[n.lockupForma_])},function(){return new V.NudgeAction(new ee.TheoPoint(-10,0),[n.lockupForma_])},function(){return new K.ReplaceMissingFontsAction},function(){return new V.NudgeAction(new ee.TheoPoint(10,0),[n.lockupForma_])},function(){return new V.NudgeAction(new ee.TheoPoint(-10,0),[n.lockupForma_])}])},getFontRefCount:function(e){var t=this,o=0;return this.testDoc_.firstPage.root.visitAll(X.FormaTraversal.PreOrder,(function(e){var n,r;if(n=w.as(e.style,Y.LockupStyle)){var i=w.opt(n.font,(function(e){return e.fontData.postScriptName}));i==t.psName_&&(o+=1),(i=w.opt(w.opt(n.characterStyles[Q.TypeLockupController.HIGHLIGHT_STYLE],(function(e){return e.font})),(function(e){return e.fontData.postScriptName})))==t.psName_&&(o+=1)}(r=w.as(e,W.TextForma))&&r.fontDescriptor.postScriptName==t.psName_&&(o+=1)})),o},validateAfterActionSequence:function(e,t){XCTAssertEqual(this.getFontRefCount(this.psName_),0)},validateAfterUndo:function(e,t){XCTAssertTrue(this.getFontRefCount(this.psName_)>0)},validateAfterRedo:function(e,t){XCTAssertEqual(this.getFontRefCount(this.psName_),0)}}}),a),x.ChangeTextAlignmentTest=(s=function e(){this.actionSequence_ChangeTextAlignment=[function(){return new L.AddTextContentAction(e.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldLayout_=null,this.newLayout_=null,this.oldAlignment_=null,this.newAlignment_=null,B.ActionTestBase.call(this)},w.defineClass({name:"ChangeTextAlignmentTest",ctor:s,superName:"ActionTestBase",statics:{testText_:"Some text to align"},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve(e.concat([function(){return n.oldLayout_=w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.layout})),n.newLayout_=n.oldLayout_==Y.LockupLayout.Standard?Y.LockupLayout.FitJustified:Y.LockupLayout.Standard,n.oldAlignment_=w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.alignment})),n.newLayout_==Y.LockupLayout.FitJustified?n.newAlignment_=Y.LockupAlignment.UNSET:n.newAlignment_=n.oldAlignment_==Y.LockupAlignment.Right?Y.LockupAlignment.Left:Y.LockupAlignment.Right,w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)})),new K.ChangeTextLayoutAndAlignmentAction(n.newLayout_,n.newAlignment_)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),s.testText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.layout})),this.newLayout_)},validateAfterUndo:function(e,t){var o=this;XCTAssertEqual(w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.layout})),this.oldLayout_),XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)})))},validateAfterRedo:function(e,t){var o=this,n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(n),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),s.testText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.layout})),this.newLayout_)}}}),s),x.AutoTextLayoutFromStandardTest=(l=function e(){this.actionSequence_ChangeTextAlignment=[function(){return new L.AddTextContentAction(e.layoutText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldLayout_=null,this.newLayout_=null,this.oldAlignment_=null,this.newAlignment_=null,B.ActionTestBase.call(this)},w.defineClass({name:"AutoTextLayoutFromStandardTest",ctor:l,superName:"ActionTestBase",statics:{layoutText_:"Now is the winter of our discontent"},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve(e.concat([function(){n.oldLayout_=w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.layout})),n.newLayout_=Y.LockupLayout.Auto,n.oldAlignment_=w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.alignment})),n.newAlignment_=Y.LockupAlignment.Triplet;var e=new oe.TextRange(11,17);return w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(t){return t.applyCharStyleDirectly(e,e,Q.CharStyleApplyMode.Toggle)})),w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)})),new K.ChangeTextLayoutAndAlignmentAction(n.newLayout_,n.newAlignment_)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),l.layoutText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.layout})),this.newLayout_)},validateAfterUndo:function(e,t){var o=this;XCTAssertEqual(w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.layout})),this.oldLayout_),XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)})))},validateAfterRedo:function(e,t){var o=this,n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(n),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),l.layoutText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.layout})),this.newLayout_)}}}),l),x.AutoTextLayoutShuffleTest=(c=function e(){this.actionSequence_ChangeTextAlignment=[function(){return new L.AddTextContentAction(e.layoutText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldLayout_=null,this.newLayout_=null,this.oldAlignment_=null,this.newAlignment_=null,this.oldTextLook_=null,this.newTextLook_=null,this.lastChildForma_=null,B.ActionTestBase.call(this)},w.defineClass({name:"AutoTextLayoutShuffleTest",ctor:c,superName:"ActionTestBase",statics:{layoutText_:"Now is the winter of our discontent"},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve(e.concat([function(){return n.oldLayout_=w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.layout})),n.newLayout_=Y.LockupLayout.Auto,n.oldAlignment_=w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.alignment})),n.newAlignment_=Y.LockupAlignment.TripletRotatedMiddle,w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)})),new K.ChangeTextLayoutAndAlignmentAction(n.newLayout_,n.newAlignment_)}]).concat([function(){return n.newAlignment_=Y.LockupAlignment.DropCapFit,w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)})),new K.ChangeTextLayoutAndAlignmentAction(n.newLayout_,n.newAlignment_)}]).concat([function(){return n.newAlignment_=Y.LockupAlignment.RotateAndFit,w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)})),new K.ChangeTextLayoutAndAlignmentAction(n.newLayout_,n.newAlignment_)}]).concat([function(){n.newAlignment_=Y.LockupAlignment.RotateTopEnd,w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)}));var e,t=[new oe.TextRange(0,4),new oe.TextRange(11,18)];if(e=w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController))for(var o=w.iter(t);!o.done;o.next()){var r=o.value;e.applyCharStyleDirectly(r,r,Q.CharStyleApplyMode.Apply)}return new K.ChangeTextLayoutAndAlignmentAction(n.newLayout_,n.newAlignment_)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),c.layoutText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.layout})),this.newLayout_)},validateAfterUndo:function(e,t){var o=this;XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)})))},validateAfterRedo:function(e,t){var o=this,n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(n),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),c.layoutText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.layout})),this.newLayout_)}}}),c),x.ChangeTextLineSpacingTest=(u=function e(){this.actionSequence_ChangeTextLineSpacing=[function(){return new L.AddTextContentAction(e.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldSpacing_=null,this.newSpacing_=null,B.ActionTestBase.call(this)},w.defineClass({name:"ChangeTextLineSpacingTest",ctor:u,superName:"ActionTestBase",statics:{testText_:"Some text that should be long enough to have multiple lines"},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve(e.concat([function(){return n.oldSpacing_=w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.spacing})),n.newSpacing_=2*n.oldSpacing_,w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)})),new K.ChangeTextLineSpacingAction(n.newSpacing_)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),u.testText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.spacing})),this.newSpacing_)},validateAfterUndo:function(e,t){var o=this;XCTAssertEqual(w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.spacing})),this.oldSpacing_),XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)})))},validateAfterRedo:function(e,t){var o=this,n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(n),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),u.testText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.spacing})),this.newSpacing_)}}}),u),x.ChangeTextAttributesTest=(p=function e(){this.actionSequence_ChangeTextAttributes=[function(){return new L.AddTextContentAction(e.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldSpacing_=null,this.newSpacing_=null,this.oldLayout_=null,this.newLayout_=null,this.oldAlignment_=null,this.newAlignment_=null,B.ActionTestBase.call(this)},w.defineClass({name:"ChangeTextAttributesTest",ctor:p,superName:"ActionTestBase",statics:{testText_:"Some text that should be long enough to have multiple lines"},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve(e.concat([function(){return n.oldSpacing_=w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.spacing})),n.newSpacing_=2*n.oldSpacing_,n.oldLayout_=w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.layout})),n.newLayout_=n.oldLayout_==Y.LockupLayout.Standard?Y.LockupLayout.FitJustified:Y.LockupLayout.Standard,n.oldAlignment_=w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.alignment})),n.newLayout_==Y.LockupLayout.FitJustified?n.newAlignment_=Y.LockupAlignment.UNSET:n.newAlignment_=n.oldAlignment_==Y.LockupAlignment.Right?Y.LockupAlignment.Left:Y.LockupAlignment.Right,w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)})),new K.ChangeTextAttributesAction(n.newLayout_,n.newAlignment_,n.newSpacing_)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),p.testText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.layout})),this.newLayout_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.spacing})),this.newSpacing_)},validateAfterUndo:function(e,t){var o=this;XCTAssertEqual(w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.spacing})),this.oldSpacing_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.layout})),this.oldLayout_),XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)})))},validateAfterRedo:function(e,t){var o=this,n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(n),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),p.testText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.layout})),this.newLayout_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.spacing})),this.newSpacing_)}}}),p),x.MatchSizeTest=(d=function e(){this.actionSequence_SetSize=[function(){return new L.AddTextContentAction(e.testText_)}],this.actionSequence_MatchSize=[function(){return new L.AddTextContentAction(e.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.snapValues_=null,this.oldSize_=null,this.newSize_=null,B.ActionTestBase.call(this)},w.defineClass({name:"MatchSizeTest",ctor:d,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve(e.concat([function(){var e;return(e=w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController))&&(n.snapValues_=w.clone(e.getFontSizeSnapValues()),n.oldSize_=e.getSizeSliderValue()),w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)})),new K.MatchSizeAction("actionSequence_SetSize"==t?n.snapValues_[0]:NaN,n.snapValues_,ee.TheoPoint.ZERO)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),this.newSize_=w.opt(w.as(this.lastActionResult,O.DoubleActionResult),(function(e){return e.value})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_),XCTAssertNotNil(this.newSize_);var n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),d.testText_),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.getSizeSliderValue()})),this.newSize_,.03)},validateAfterUndo:function(e,t){var o=this;XCTAssertEqual(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.getSizeSliderValue()})),this.oldSize_),XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)})))},validateAfterRedo:function(e,t){var o=this,n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(n),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),d.testText_),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.getSizeSliderValue()})),this.newSize_,.03)}}}),d),x.SetLineBreakTest=(h=function e(){this.actionSequence_SetLineBreak=[function(){return new L.AddTextContentAction(e.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldLineBreak_=null,B.ActionTestBase.call(this)},w.defineClass({name:"SetLineBreakTest",ctor:h,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve(e.concat([function(){return n.oldLineBreak_=w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.lineBreakAtCharacterStyleSizeChange})),w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)})),new K.SetLineBreakAction(!n.oldLineBreak_)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),h.testText_),XCTAssertNotEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.lineBreakAtCharacterStyleSizeChange})),this.oldLineBreak_)},validateAfterUndo:function(e,t){var o=this;XCTAssertEqual(w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.lineBreakAtCharacterStyleSizeChange})),this.oldLineBreak_),XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)})))},validateAfterRedo:function(e,t){var o=this,n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(n),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),h.testText_),XCTAssertNotEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.lineBreakAtCharacterStyleSizeChange})),this.oldLineBreak_)}}}),h),x.SetNextSpacingSequenceTest=(f=function e(){this.actionSequence_SetNextSpacingSequence=[function(){return new L.AddTextContentAction(e.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,B.ActionTestBase.call(this)},w.defineClass({name:"SetNextSpacingSequenceTest",ctor:f,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve(e.concat([function(){return w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)})),new K.SetNextSpacingSequenceAction(J.SpacingSequence.NextLetterTracking)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),f.testText_)},validateAfterUndo:function(e,t){var o=this;XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)})))},validateAfterRedo:function(e,t){var o=this,n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(n),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),f.testText_)}}}),f),x.SetTrackingTest=(m=function e(){this.actionSequence_SetTracking=[function(){return new L.AddTextContentAction(e.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldTracking_=null,this.newTracking_=null,B.ActionTestBase.call(this)},w.defineClass({name:"SetTrackingTest",ctor:m,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve(e.concat([function(){return n.oldTracking_=w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.tracking})),n.newTracking_=2*n.oldTracking_,w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)})),new K.SetTrackingAction(n.newTracking_,ee.TheoPoint.ZERO)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),m.testText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.tracking})),this.newTracking_)},validateAfterUndo:function(e,t){var o=this;XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}))),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.tracking})),this.oldTracking_)},validateAfterRedo:function(e,t){var o=this,n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(n),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),m.testText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.tracking})),this.newTracking_)}}}),m),x.SetLeadingTest=(g=function e(){this.actionSequence_SetLeading=[function(){return new L.AddTextContentAction(e.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldLeading_=null,this.newLeading_=null,B.ActionTestBase.call(this)},w.defineClass({name:"SetLeadingTest",ctor:g,superName:"ActionTestBase",statics:{testText_:"Some text that should be long enough to have multiple lines"},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve(e.concat([function(){return n.oldLeading_=w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.spacing})),n.newLeading_=.5*n.oldLeading_,w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)})),new K.SetLeadingAction(n.newLeading_,ee.TheoPoint.ZERO)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),g.testText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.spacing})),this.newLeading_)},validateAfterUndo:function(e,t){var o=this;XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}))),XCTAssertTrue(w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.spacing}))==this.oldLeading_)},validateAfterRedo:function(e,t){var o=this,n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(n),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),g.testText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.spacing})),this.newLeading_)}}}),g),x.SetPaddingTest=(y=function e(){this.actionSequence_SetPadding=[function(){return new L.AddTextContentAction(e.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldPadding_=null,this.newPadding_=null,B.ActionTestBase.call(this)},w.defineClass({name:"SetPaddingTest",ctor:y,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve(e.concat([function(){return new G.ChangeBackgroundShapeAction([n.textForma],Y.LockupBacking.Box,"square_001",!1)},function(){return n.oldPadding_=w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.padding})),n.newPadding_=Math.min(2*n.oldPadding_,1),w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)})),new K.SetPaddingAction(n.newPadding_)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),y.testText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.padding})),this.newPadding_)},validateAfterUndo:function(e,t){var o=this;XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}))),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.padding})),this.oldPadding_)},validateAfterRedo:function(e,t){var o=this,n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(n),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),y.testText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.padding})),this.newPadding_)}}}),y),x.SetTextLookTest=(T=function e(){this.actionSequence_SetTextLook=[function(){return new L.AddTextContentAction(e.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldTextLook_=null,this.newTextLook_=null,B.ActionTestBase.call(this)},w.defineClass({name:"SetTextLookTest",ctor:T,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var n,r=this;return q.CorePromise.resolve(e.concat([function(){return r.oldTextLook_=w.opt(w.opt(w.as(w.opt(r.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.textLook})),r.newTextLook_=(n=Y.LockupTextLook.toCaseValue(r.oldTextLook_+1))||null!=n?n:Y.LockupTextLook.KnockoutAndShadow,w.opt(w.opt(r.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(r.textForma)})),new K.SetTextLookAction(r.newTextLook_)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),T.testText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.textLook})),this.newTextLook_)},validateAfterUndo:function(e,t){var o=this;XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}))),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.textLook})),this.oldTextLook_)},validateAfterRedo:function(e,t){var o=this,n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(n),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),T.testText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.textLook})),this.newTextLook_)}}}),T),x.SetTextEffectsAttributesTest=(A=function e(){this.actionSequence_SetTextEffectsAttributes=[function(){return new L.AddTextContentAction(e.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldStrokeWeight_=null,this.oldShadowOffset_=null,this.oldShadowAngle_=null,this.newStrokeWeight_=null,this.newShadowOffset_=null,this.newShadowAngle_=null,B.ActionTestBase.call(this)},w.defineClass({name:"SetTextEffectsAttributesTest",ctor:A,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve(e.concat([function(){return n.oldStrokeWeight_=w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.strokeWeight})),n.oldShadowOffset_=w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.shadowOffset})),n.oldShadowAngle_=w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.shadowAngle})),w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)})),new K.SetTextLookAction(Y.LockupTextLook.ShadowAndOutline)},function(){return n.newStrokeWeight_=Math.min(2*n.oldStrokeWeight_,1),n.newShadowOffset_=Math.min(4*n.oldShadowOffset_,1),n.newShadowAngle_=n.oldShadowAngle_>315?n.oldShadowAngle_-315:n.oldShadowAngle_+45,new K.SetTextEffectsAttributesAction(n.newStrokeWeight_,n.newShadowOffset_,n.newShadowAngle_)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),A.testText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.strokeWeight})),this.newStrokeWeight_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.shadowOffset})),this.newShadowOffset_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.shadowAngle})),this.newShadowAngle_)},validateAfterUndo:function(e,t){var o=this;XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}))),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.strokeWeight})),this.oldStrokeWeight_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.shadowOffset})),this.oldShadowOffset_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.shadowAngle})),this.oldShadowAngle_)},validateAfterRedo:function(e,t){var o=this,n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(n),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),A.testText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.strokeWeight})),this.newStrokeWeight_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.shadowOffset})),this.newShadowOffset_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.shadowAngle})),this.newShadowAngle_)}}}),A),x.ApplyTextStyleSuggestionTest=(C=function e(){this.actionSequence_ApplyTextStyleSuggestion=[function(){return new L.AddTextContentAction(e.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldFont_=null,this.firstAppliedFont_=null,B.ActionTestBase.call(this)},w.defineClass({name:"ApplyTextStyleSuggestionTest",ctor:C,superName:"ActionTestBase",statics:{testText_:"Some text",testFont_:"Bellfort",getTheoFont:function(e){var t=Z.TheoFont.init_9e5c(U.Host.fontProvider.getIncludedFonts(H.ANY_DOCUMENT).find((function(t){return t.postScriptName==e})));return XCTAssertEqual(t.fontData.postScriptName,e),t}},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve(e.concat([function(){n.oldFont_=w.opt(w.opt(w.opt(w.as(w.opt(n.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.font})),(function(e){return e.fontData.postScriptName})),w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)}));var e=j.ColorTable.init_25f6([{key:j.ColorRole.FieldPrimary,value:"themeColor0"},{key:j.ColorRole.FieldSecondary,value:"themeColor1"}]),t=Y.LockupStyle.init_f3fd(1,1,e,C.getTheoFont(C.testFont_),Y.LockupStyle.DEFAULT_SPACING,Y.LockupStyle.DEFAULT_TRACKING,Y.LockupStyle.DEFAULT_PADDING,Y.LockupBacking.BannerVertical,null,135,Y.LockupLayout.FitJustified,Y.LockupAlignment.UNSET,Y.LockupTextLook.Shadow,Y.LockupStyle.DEFAULT_SHADOWOFFSET,Y.LockupStyle.DEFAULT_STROKEWEIGHT,void 0,void 0,!1);return new K.ApplyTextStyleSuggestionAction(t,n.textForma,new ne.WheelSuggestionEvaluator(n.textForma),!1)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n=w.as(this.lastActionResult,O.LockupStyleActionResult);this.firstAppliedFont_=w.opt(w.opt(w.opt(n,(function(e){return e.style})),(function(e){return e.font})),(function(e){return e.fontData.postScriptName}));var r=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(r===this.textForma),XCTAssertEqual(w.opt(w.opt(r,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(r,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),C.testText_),w.opt(n,(function(e){return null!=e.style}))&&XCTAssertEqual(w.opt(w.opt(w.opt(w.as(w.opt(r,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.font})),(function(e){return e.fontData.postScriptName})),this.firstAppliedFont_)},validateAfterUndo:function(e,t){var o=this;XCTAssertEqual(w.opt(w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.font})),(function(e){return e.fontData.postScriptName})),this.oldFont_),XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)})))},validateAfterRedo:function(e,t){var o=this,n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(n),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),C.testText_),null!=this.firstAppliedFont_&&XCTAssertEqual(w.opt(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.font})),(function(e){return e.fontData.postScriptName})),this.firstAppliedFont_)}}}),C),x.ApplyNextTextEmphasisSuggestionTest=(_=function e(){this.actionSequence_ApplyNextTextEmphasisSuggestion=[function(){return new L.AddTextContentAction(e.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,B.ActionTestBase.call(this)},w.defineClass({name:"ApplyNextTextEmphasisSuggestionTest",ctor:_,superName:"ActionTestBase",statics:{testText_:"Even after the glitter fades the feeling remains",testFont_:"Bellfort",getTheoFont:function(e){var t=Z.TheoFont.init_9e5c(U.Host.fontProvider.getIncludedFonts(H.ANY_DOCUMENT).find((function(t){return t.postScriptName==e})));return XCTAssertEqual(t.fontData.postScriptName,e),t}},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve(e.concat([function(){w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)}));var e=new ne.WheelSuggestionEvaluator(n.textForma);return e.postTextStylesServiceInterface.resetEmphasisSuggestions(!1),new K.ApplyNextTextEmphasisSuggestionAction(n.textForma,e)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),_.testText_);var r=n.controller;XCTAssertTrue(r.charStyleRanges.length>0)},validateAfterUndo:function(e,t){var o=this;XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)})));var n=this.textForma.controller;XCTAssertTrue(0==n.charStyleRanges.length)},validateAfterRedo:function(e,t){var o=this,n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(n),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),_.testText_);var r=n.controller;XCTAssertTrue(r.charStyleRanges.length>0)}}}),_),x.ChangeBackgroundShapeTest=(S=function e(){this.actionSequence_ChangeBackgroundShape=[function(){return new L.AddTextContentAction(e.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldBacking_=Y.LockupBacking.None,this.oldBackingArtworkID_="",this.newBacking_=Y.LockupBacking.None,this.newBackingArtworkID_="",B.ActionTestBase.call(this)},w.defineClass({name:"ChangeBackgroundShapeTest",ctor:S,superName:"ActionTestBase",statics:{testText_:"The quick brown fox"},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var n,r,i,a,s=this;return q.CorePromise.resolve(e.concat([function(){return s.oldBacking_=(n=w.opt(w.opt(w.as(w.opt(s.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.backing})))||null!=n?n:Y.LockupBacking.None,s.oldBackingArtworkID_=(r=w.opt(w.opt(w.as(w.opt(s.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.backingArtworkID})))||null!=r?r:"",s.oldBacking_=(i=w.opt(w.opt(w.as(w.opt(s.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.backing})))||null!=i?i:Y.LockupBacking.None,s.oldBackingArtworkID_=(a=w.opt(w.opt(w.as(w.opt(s.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.backingArtworkID})))||null!=a?a:"",s.newBacking_=Y.LockupBacking.SVGBackground,s.newBackingArtworkID_="button",w.opt(w.opt(s.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(s.textForma)})),new G.ChangeBackgroundShapeAction([s.textForma],s.newBacking_,s.newBackingArtworkID_,!1)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),S.testText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.backing})),this.newBacking_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.backingArtworkID})),this.newBackingArtworkID_)},validateAfterUndo:function(e,t){var o,n,r=this,i=(o=w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.backing})))||null!=o?o:Y.LockupBacking.None;XCTAssertEqual(i,this.oldBacking_);var a=(n=w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.backingArtworkID})))||null!=n?n:"";XCTAssertEqual(i,this.oldBacking_),XCTAssertEqual(a,this.oldBackingArtworkID_),XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(r.testFormaID_)})))},validateAfterRedo:function(e,t){var o=this,n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),S.testText_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.backing})),this.newBacking_),XCTAssertEqual(w.opt(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.backingArtworkID})),this.newBackingArtworkID_)}}}),S),x.ChangeBackgroundShapeCharStyleTest=(P=function e(){this.actionSequence_ChangeBackgroundShapeCharStyle=[function(){return new L.AddTextContentAction(e.testRangeText_)}],this.testDoc_=null,this.testPage_=null,this.rootForma_=null,this.testFormaID_=null,this.oldBacking_=Y.LockupBacking.None,this.oldBackingArtworkID_="",this.newBacking_=Y.LockupBacking.None,this.newBackingArtworkID_="",this.originalDocumentHasCharStyleAppliedToText_=!1,B.ActionTestBase.call(this)},w.defineClass({name:"ChangeBackgroundShapeCharStyleTest",ctor:P,superName:"ActionTestBase",statics:{testRangeText_:"The quick brown fox jumps over the lazy dog."},props:{textForma:{get:function(){return w.first(w.opt(w.as(this.getActionResult(0),O.FormaActionResult),(function(e){return e.formae})))}},hasTextWithCharStyle:function(){var e=!1;return w.opt(this.rootForma_,(function(t){return t.visitAll(X.FormaTraversal.PreOrder,(function(t){var o,n;(o=w.as(t,$.GroupForma))&&w.as(o.controller,Q.TypeLockupController)&&(n=w.opt(w.opt(w.as(o.controller,Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.characterStyles[Q.TypeLockupController.HIGHLIGHT_STYLE]})))&&n.description.length>0&&(e=!0)}))})),e},matchingLockupStyles:function(e){var t=0;return w.opt(this.rootForma_,(function(o){return o.visitAll(X.FormaTraversal.PreOrder,(function(o){var n,r;(n=w.as(o,$.GroupForma))&&w.as(n.controller,Q.TypeLockupController)&&(r=w.opt(w.opt(w.as(n.controller,Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.characterStyles[Q.TypeLockupController.HIGHLIGHT_STYLE]})))&&r.description==e.description&&(t+=1)}))})),t},populateActionSequence:function(e,t,o){var n,r,i,a=this;return q.CorePromise.resolve(e.concat([function(){a.oldBacking_=(n=w.opt(w.opt(w.as(w.opt(a.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.backing})))||null!=n?n:Y.LockupBacking.None,a.oldBackingArtworkID_=(r=w.opt(w.opt(w.as(w.opt(a.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.backingArtworkID})))||null!=r?r:"",a.newBacking_=Y.LockupBacking.SVGBackground,a.newBackingArtworkID_="button",w.opt(w.opt(a.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(a.textForma)}));var e=w.opt(w.opt(w.as(w.opt(a.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.characterStyles[Q.TypeLockupController.HIGHLIGHT_STYLE]}));XCTAssertTrue(null==e||a.originalDocumentHasCharStyleAppliedToText_&&a.matchingLockupStyles(e)>1);var t=w.clone(w.opt(w.as(w.opt(a.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.charStyleRanges})));return XCTAssertTrue(!(i=0==t.length)&&null==i||i),new K.EnterCharStyleModeAction(a.textForma)},function(){return new G.ChangeBackgroundShapeAction([a.textForma],a.newBacking_,a.newBackingArtworkID_,!0)},function(){return new K.ExitCharStyleModeAction(a.textForma)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage,this.rootForma_=o.firstPage.root,this.originalDocumentHasCharStyleAppliedToText_=this.hasTextWithCharStyle()},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=w.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),P.testRangeText_);var r=w.opt(n,(function(e){return e.controller})),i=w.opt(r.lockupStyle,(function(e){return e.characterStyles[Q.TypeLockupController.HIGHLIGHT_STYLE]}));XCTAssertNotEqual(i,null);var a=w.clone(r.charStyleRanges);XCTAssertFalse(0==a.length),XCTAssertTrue(a.length<P.testRangeText_.length);var s=r.getCharacterStyle(Q.TypeLockupController.HIGHLIGHT_STYLE);XCTAssertEqual(s.backing,this.newBacking_),XCTAssertEqual(s.backingArtworkID,this.newBackingArtworkID_)},validateAfterUndo:function(e,t){var o,n,r,i=this,a=(o=w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.backing})))||null!=o?o:Y.LockupBacking.None;XCTAssertEqual(a,this.oldBacking_);var s=(n=w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.backingArtworkID})))||null!=n?n:"",l=w.opt(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.characterStyles[Q.TypeLockupController.HIGHLIGHT_STYLE]}));XCTAssertTrue(null==l||this.originalDocumentHasCharStyleAppliedToText_&&this.matchingLockupStyles(l)>0);var c=w.clone(w.opt(w.as(w.opt(this.textForma,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.charStyleRanges})));XCTAssertTrue(!(r=0==c.length)&&null==r||r),XCTAssertEqual(a,this.oldBacking_),XCTAssertEqual(s,this.oldBackingArtworkID_),XCTAssertNil(w.opt(this.testPage_,(function(e){return e.formaByID(i.testFormaID_)})))},validateAfterRedo:function(e,t){var o=this,n=w.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(w.opt(w.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),Q.TypeLockupController.KIND),XCTAssertEqual(w.opt(w.as(w.opt(n,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.text})),P.testRangeText_);var r=w.opt(n,(function(e){return e.controller})),i=w.opt(r.lockupStyle,(function(e){return e.characterStyles[Q.TypeLockupController.HIGHLIGHT_STYLE]}));XCTAssertNotEqual(i,null);var a=w.clone(r.charStyleRanges);XCTAssertFalse(0==a.length),XCTAssertTrue(a.length<P.testRangeText_.length);var s=r.getCharacterStyle(Q.TypeLockupController.HIGHLIGHT_STYLE);XCTAssertEqual(s.backing,this.newBacking_),XCTAssertEqual(s.backingArtworkID,this.newBackingArtworkID_)}}}),P),x.SetFontSizeTest=(F=function(){this.actionSequence_SetFontSize=[],B.ActionTestBase.call(this)},w.defineClass({name:"SetFontSizeTest",ctor:F,superName:"ActionTestBase",props:{tearDown:function(){this.lockupForma_=null,B.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){var n;return this.lockupForma_=w.first(this.allSelectableFormae(o,(function(e){return w.opt(e.controller,(function(e){return e.kind==Q.TypeLockupController.KIND}))}))),!!(n=this.lockupForma_)&&(this.tlc_=w.as(n.controller,Q.TypeLockupController),!0)},prepareDocument:function(e,t){var o,n=[];if(o=this.lockupForma_){var r=J.TextFacade.getLayoutForForma(o),i=J.TextFacade.getAlignmentForForma(o),a=Y.LockupLayout.Standard,s=i==Y.LockupAlignment.Right?Y.LockupAlignment.Left:Y.LockupAlignment.Right;e.controller.selection.replaceSelection(o),n.push((function(){return new K.ChangeTextLayoutAndAlignmentAction(a,s)})),n.push((function(){return new K.ChangeTextLayoutAndAlignmentAction(r,i)}))}return q.CorePromise.resolve(n)},populateActionSequence:function(e,t,o){var n=this;this.initialSize_=this.tlc_.getCurrentFontSize();var r=J.TextFacade.toUserFontSize(this.initialSize_,this.lockupForma_.page);return this.finalSize_=r<75?100:50,q.CorePromise.resolve([function(){return new K.SetFontSizeAction(n.finalSize_,void 0,[n.lockupForma_])}])},validateAfterActionSequence:function(e,t){var o=J.TextFacade.toUserFontSize(this.tlc_.getCurrentFontSize(),this.lockupForma_.page);XCTAssertEqual(o,this.finalSize_,.01)},validateAfterUndo:function(e,t){XCTAssertEqual(this.tlc_.getCurrentFontSize(),this.initialSize_)},validateAfterRedo:function(e,t){var o=J.TextFacade.toUserFontSize(this.tlc_.getCurrentFontSize(),this.lockupForma_.page);XCTAssertEqual(o,this.finalSize_,.01)}}}),F),x.SetRelativeFontScaleTest=(v=function(){this.actionSequence_SetRelativeFontScale=[],this.testDoc_=null,B.ActionTestBase.call(this)},w.defineClass({name:"SetRelativeFontScaleTest",ctor:v,superName:"ActionTestBase",props:{tearDown:function(){this.lockupForma_=null,B.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){var n;return this.lockupForma_=w.first(this.allSelectableFormae(o,(function(e){return w.opt(e.controller,(function(e){return e.kind==Q.TypeLockupController.KIND}))}))),!!(n=this.lockupForma_)&&(this.tlc_=w.as(n.controller,Q.TypeLockupController),!0)},setUpActionSequence:function(e,t,o){this.testDoc_=o},prepareDocument:function(e,t){var o,n=[];if(o=this.lockupForma_){var r=J.TextFacade.getLayoutForForma(o),i=J.TextFacade.getAlignmentForForma(o),a=Y.LockupLayout.Standard,s=i==Y.LockupAlignment.Right?Y.LockupAlignment.Left:Y.LockupAlignment.Right;e.controller.selection.replaceSelection(o),n.push((function(){return new K.ChangeTextLayoutAndAlignmentAction(a,s)})),n.push((function(){return new K.ChangeTextLayoutAndAlignmentAction(r,i)}))}return q.CorePromise.resolve(n)},populateActionSequence:function(e,t,o){var n=this;return this.initialFontScale_=J.TextFacade.getRelativeFontScaleForForma(this.tlc_.forma),this.finalFontScale_=.5,q.CorePromise.resolve([function(){return w.opt(w.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.lockupForma_)})),new K.SetRelativeFontScaleAction(n.finalFontScale_)}])},validateAfterActionSequence:function(e,t){var o=J.TextFacade.getRelativeFontScaleForForma(this.tlc_.forma);XCTAssertEqual(o,this.finalFontScale_,.01)},validateAfterUndo:function(e,t){var o=J.TextFacade.getRelativeFontScaleForForma(this.tlc_.forma);XCTAssertEqual(o,this.initialFontScale_)},validateAfterRedo:function(e,t){var o=J.TextFacade.getRelativeFontScaleForForma(this.tlc_.forma);XCTAssertEqual(o,this.finalFontScale_,.01)}}}),v),x.ChangeTextLayoutToPathTest=(R=function(){this.actionSequence_ChangeTextLayoutToPath=[],B.ActionTestBase.call(this)},w.defineClass({name:"ChangeTextLayoutToPathTest",ctor:R,superName:"ActionTestBase",props:{tearDown:function(){this.lockupForma_=null,B.ActionTestBase.prototype.tearDown.call(this)},textLen:{get:function(){return w.opt(this.lockupForma_,(function(e){return e.controller})).text.length}},canRunActionSequence:function(e,t,o){var n;return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(o,(function(e){return w.opt(e.controller,(function(e){return e.kind==Q.TypeLockupController.KIND}))}))),!!(n=this.lockupForma_)&&(this.initialLayout_=J.TextFacade.getLayoutForForma(n),this.initialAlignment_=J.TextFacade.getAlignmentForForma(n),!0)},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve([function(){return w.opt(o.controller,(function(e){return e.selection.replaceSelection(n.lockupForma_)})),new K.ChangeTextLayoutAndAlignmentAction(Y.LockupLayout.Path,Y.LockupAlignment.UNSET,void 0,te.TextPathID.Circle)}])},validateAfterActionSequence:function(e,t){XCTAssertEqual(J.TextFacade.getLayoutForForma(this.lockupForma_),Y.LockupLayout.Path),XCTAssertEqual(J.TextFacade.getAlignmentForForma(this.lockupForma_),Y.LockupAlignment.UNSET)},validateAfterUndo:function(e,t){XCTAssertEqual(J.TextFacade.getLayoutForForma(this.lockupForma_),this.initialLayout_)},validateAfterRedo:function(e,t){XCTAssertEqual(J.TextFacade.getLayoutForForma(this.lockupForma_),Y.LockupLayout.Path),XCTAssertEqual(J.TextFacade.getAlignmentForForma(this.lockupForma_),Y.LockupAlignment.UNSET)}}}),R),x.EditCurvedTextShortTest=(b=function(){this.actionSequence_EditCurvedTextShort=[],B.ActionTestBase.call(this)},w.defineClass({name:"EditCurvedTextShortTest",ctor:b,superName:"ActionTestBase",statics:{testText_:"A"},props:{tearDown:function(){this.lockupForma_=null,B.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(o,(function(e){return w.opt(e.controller,(function(e){return e.kind==Q.TypeLockupController.KIND}))}))),null!=this.lockupForma_},prepareDocument:function(e,t){var o,n=this,r=[];return J.TextFacade.getLayoutForForma(this.lockupForma_)!=Y.LockupLayout.Path&&((o=w.as(w.opt(this.lockupForma_,(function(e){return e.style})),Y.LockupStyle))&&(z.ShapeLibrary.isBackingShapePathCompatible(te.TextPathID.Circle,o.backing,o.backingArtworkID)||r.push((function(){return new G.ChangeBackgroundShapeAction([n.lockupForma_],Y.LockupBacking.None,"",!1)}))),r.push((function(){return w.opt(e.controller,(function(e){return e.selection.replaceSelection(n.lockupForma_)})),new K.ChangeTextLayoutAndAlignmentAction(Y.LockupLayout.Path,Y.LockupAlignment.UNSET,void 0,te.TextPathID.Circle)}))),q.CorePromise.resolve(r)},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve(e.concat([function(){return w.opt(o.controller,(function(e){return e.selection.replaceSelection(n.lockupForma_)})),new K.SetTextAction(b.testText_,n.lockupForma_)}]))}}}),b),x.EditCurvedTextLongTest=(E=function(){this.actionSequence_EditCurvedTextLong=[],B.ActionTestBase.call(this)},w.defineClass({name:"EditCurvedTextLongTest",ctor:E,superName:"ActionTestBase",statics:{testText_:"We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness."},props:{tearDown:function(){this.lockupForma_=null,B.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(o,(function(e){return w.opt(e.controller,(function(e){return e.kind==Q.TypeLockupController.KIND}))}))),null!=this.lockupForma_},prepareDocument:function(e,t){var o,n=this,r=[];return J.TextFacade.getLayoutForForma(this.lockupForma_)!=Y.LockupLayout.Path&&((o=w.as(w.opt(this.lockupForma_,(function(e){return e.style})),Y.LockupStyle))&&(z.ShapeLibrary.isBackingShapePathCompatible(te.TextPathID.Circle,o.backing,o.backingArtworkID)||r.push((function(){return new G.ChangeBackgroundShapeAction([n.lockupForma_],Y.LockupBacking.None,"",!1)}))),r.push((function(){return w.opt(e.controller,(function(e){return e.selection.replaceSelection(n.lockupForma_)})),new K.ChangeTextLayoutAndAlignmentAction(Y.LockupLayout.Path,Y.LockupAlignment.UNSET,void 0,te.TextPathID.Circle)}))),q.CorePromise.resolve(r)},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve(e.concat([function(){return w.opt(o.controller,(function(e){return e.selection.replaceSelection(n.lockupForma_)})),new K.SetTextAction(E.testText_,n.lockupForma_)}]))}}}),E),x.ChangeCurvedTextTrackingTest=(N=function(){this.actionSequence_ChangeCurvedTextTracking=[],this.initialTracking_=0,this.finalTracking_=0,B.ActionTestBase.call(this)},w.defineClass({name:"ChangeCurvedTextTrackingTest",ctor:N,superName:"ActionTestBase",props:{tearDown:function(){this.lockupForma_=null,B.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(o,(function(e){return w.opt(e.controller,(function(e){return e.kind==Q.TypeLockupController.KIND}))}))),null!=this.lockupForma_},prepareDocument:function(e,t){var o,n=this,r=[];return J.TextFacade.getLayoutForForma(this.lockupForma_)!=Y.LockupLayout.Path&&((o=w.as(w.opt(this.lockupForma_,(function(e){return e.style})),Y.LockupStyle))&&(z.ShapeLibrary.isBackingShapePathCompatible(te.TextPathID.Circle,o.backing,o.backingArtworkID)||r.push((function(){return new G.ChangeBackgroundShapeAction([n.lockupForma_],Y.LockupBacking.None,"",!1)}))),r.push((function(){return w.opt(e.controller,(function(e){return e.selection.replaceSelection(n.lockupForma_)})),new K.ChangeTextLayoutAndAlignmentAction(Y.LockupLayout.Path,Y.LockupAlignment.UNSET,void 0,te.TextPathID.Circle)}))),q.CorePromise.resolve(r)},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve([function(){return w.opt(o.controller,(function(e){return e.selection.replaceSelection(n.lockupForma_)})),n.initialTracking_=J.TextFacade.getTrackingForForma(n.lockupForma_),n.finalTracking_=2*n.initialTracking_+.35,new K.SetTrackingAction(n.finalTracking_,new ee.TheoPoint(.5,.5))}])},validateAfterActionSequence:function(e,t){XCTAssertEqual(J.TextFacade.getTrackingForForma(this.lockupForma_),this.finalTracking_)},validateAfterUndo:function(e,t){XCTAssertEqual(J.TextFacade.getTrackingForForma(this.lockupForma_),this.initialTracking_)},validateAfterRedo:function(e,t){XCTAssertEqual(J.TextFacade.getTrackingForForma(this.lockupForma_),this.finalTracking_)}}}),N),x.ChangeTextLayoutToLetterGridTest=(k=function(){this.actionSequence_ChangeTextLayoutToLetterGrid=[],B.ActionTestBase.call(this)},w.defineClass({name:"ChangeTextLayoutToLetterGridTest",ctor:k,superName:"ActionTestBase",props:{tearDown:function(){this.lockupForma_=null,B.ActionTestBase.prototype.tearDown.call(this)},textLen:{get:function(){return w.opt(this.lockupForma_,(function(e){return e.controller})).text.length}},canRunActionSequence:function(e,t,o){var n;return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(o,(function(e){return w.opt(e.controller,(function(e){return e.kind==Q.TypeLockupController.KIND}))}))),!!(n=this.lockupForma_)&&(this.initialLayout_=J.TextFacade.getLayoutForForma(n),this.initialAlignment_=J.TextFacade.getAlignmentForForma(n),!0)},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve([function(){return w.opt(o.controller,(function(e){return e.selection.replaceSelection(n.lockupForma_)})),new K.ChangeTextLayoutAndAlignmentAction(Y.LockupLayout.LetterGrid,Y.LockupAlignment.SKIP)}])},validateAfterActionSequence:function(e,t){XCTAssertEqual(J.TextFacade.getLayoutForForma(this.lockupForma_),Y.LockupLayout.LetterGrid),XCTAssertEqual(J.TextFacade.getAlignmentForForma(this.lockupForma_),this.initialAlignment_)},validateAfterUndo:function(e,t){XCTAssertEqual(J.TextFacade.getLayoutForForma(this.lockupForma_),this.initialLayout_),XCTAssertEqual(J.TextFacade.getAlignmentForForma(this.lockupForma_),this.initialAlignment_)},validateAfterRedo:function(e,t){XCTAssertEqual(J.TextFacade.getLayoutForForma(this.lockupForma_),Y.LockupLayout.LetterGrid),XCTAssertEqual(J.TextFacade.getAlignmentForForma(this.lockupForma_),this.initialAlignment_)}}}),k),x.ChangeLetterGridShapeTest=(D=function(){this.actionSequence_ChangeLetterGridShape=[],this.initialBacking_=null,this.initialArtworkId_=null,this.finalBacking_=null,this.finalArtworkId_=null,B.ActionTestBase.call(this)},w.defineClass({name:"ChangeLetterGridShapeTest",ctor:D,superName:"ActionTestBase",props:{tearDown:function(){this.lockupForma_=null,B.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(o,(function(e){return w.opt(e.controller,(function(e){return e.kind==Q.TypeLockupController.KIND}))}))),null!=this.lockupForma_},prepareDocument:function(e,t){var o=this,n=[];return J.TextFacade.getLayoutForForma(this.lockupForma_)!=Y.LockupLayout.Path&&n.push((function(){return w.opt(e.controller,(function(e){return e.selection.replaceSelection(o.lockupForma_)})),new K.ChangeTextLayoutAndAlignmentAction(Y.LockupLayout.LetterGrid,Y.LockupAlignment.SKIP)})),q.CorePromise.resolve(n)},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve([function(){return w.opt(o.controller,(function(e){return e.selection.replaceSelection(n.lockupForma_)})),n.initialBacking_=n.lockupForma_.style.backing,n.initialArtworkId_=n.lockupForma_.style.backingArtworkID,n.finalBacking_=Y.LockupBacking.SVGBackground,n.finalArtworkId_="circle_001"==n.initialArtworkId_?"square_001":"circle_001",new G.ChangeBackgroundShapeAction([n.lockupForma_],n.finalBacking_,n.finalArtworkId_,!1)}])},validateAfterActionSequence:function(e,t){XCTAssertEqual(this.lockupForma_.style.backing,this.finalBacking_),XCTAssertEqual(this.lockupForma_.style.backingArtworkID,this.finalArtworkId_)},validateAfterUndo:function(e,t){XCTAssertEqual(this.lockupForma_.style.backing,this.initialBacking_),XCTAssertEqual(this.lockupForma_.style.backingArtworkID,this.initialArtworkId_)},validateAfterRedo:function(e,t){XCTAssertEqual(this.lockupForma_.style.backing,this.finalBacking_),XCTAssertEqual(this.lockupForma_.style.backingArtworkID,this.finalArtworkId_)}}}),D),x.ChangeLetterGridTrackingTest=(I=function(){this.actionSequence_ChangeLetterGridTracking=[],this.initialTracking_=0,this.finalTracking_=0,B.ActionTestBase.call(this)},w.defineClass({name:"ChangeLetterGridTrackingTest",ctor:I,superName:"ActionTestBase",props:{tearDown:function(){this.lockupForma_=null,B.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(o,(function(e){return w.opt(e.controller,(function(e){return e.kind==Q.TypeLockupController.KIND}))}))),null!=this.lockupForma_},prepareDocument:function(e,t){var o,n=this,r=[];return J.TextFacade.getLayoutForForma(this.lockupForma_)!=Y.LockupLayout.LetterGrid&&((o=w.as(w.opt(this.lockupForma_,(function(e){return e.style})),Y.LockupStyle))&&(z.ShapeLibrary.isBackingShapeLetterGridCompatible(o.backing,o.backingArtworkID)||r.push((function(){return new G.ChangeBackgroundShapeAction([n.lockupForma_],Y.LockupBacking.None,"",!1)}))),r.push((function(){return w.opt(e.controller,(function(e){return e.selection.replaceSelection(n.lockupForma_)})),new K.ChangeTextLayoutAndAlignmentAction(Y.LockupLayout.LetterGrid,Y.LockupAlignment.SKIP)}))),q.CorePromise.resolve(r)},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve([function(){return w.opt(o.controller,(function(e){return e.selection.replaceSelection(n.lockupForma_)})),n.initialTracking_=J.TextFacade.getTrackingForForma(n.lockupForma_),n.finalTracking_=2*n.initialTracking_+.35,new K.SetTrackingAction(n.finalTracking_,new ee.TheoPoint(.5,.5))}])},validateAfterActionSequence:function(e,t){XCTAssertEqual(J.TextFacade.getTrackingForForma(this.lockupForma_),this.finalTracking_)},validateAfterUndo:function(e,t){XCTAssertEqual(J.TextFacade.getTrackingForForma(this.lockupForma_),this.initialTracking_)},validateAfterRedo:function(e,t){XCTAssertEqual(J.TextFacade.getTrackingForForma(this.lockupForma_),this.finalTracking_)}}}),I),x.ChangeLetterGridSpacingTest=(M=function(){this.actionSequence_ChangeLetterGridSpacing=[],this.initialLineSpacing_=0,this.finalLineSpacing_=0,B.ActionTestBase.call(this)},w.defineClass({name:"ChangeLetterGridSpacingTest",ctor:M,superName:"ActionTestBase",props:{tearDown:function(){this.lockupForma_=null,B.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(o,(function(e){return w.opt(e.controller,(function(e){return e.kind==Q.TypeLockupController.KIND}))}))),null!=this.lockupForma_},prepareDocument:function(e,t){var o,n=this,r=[];return J.TextFacade.getLayoutForForma(this.lockupForma_)!=Y.LockupLayout.LetterGrid&&((o=w.as(w.opt(this.lockupForma_,(function(e){return e.style})),Y.LockupStyle))&&(z.ShapeLibrary.isBackingShapeLetterGridCompatible(o.backing,o.backingArtworkID)||r.push((function(){return new G.ChangeBackgroundShapeAction([n.lockupForma_],Y.LockupBacking.None,"",!1)}))),r.push((function(){return w.opt(e.controller,(function(e){return e.selection.replaceSelection(n.lockupForma_)})),new K.ChangeTextLayoutAndAlignmentAction(Y.LockupLayout.LetterGrid,Y.LockupAlignment.SKIP)}))),q.CorePromise.resolve(r)},populateActionSequence:function(e,t,o){var n=this;return q.CorePromise.resolve([function(){return w.opt(o.controller,(function(e){return e.selection.replaceSelection(n.lockupForma_)})),n.initialLineSpacing_=J.TextFacade.getLineSpacingForForma(n.lockupForma_),n.finalLineSpacing_=2*n.initialLineSpacing_+.35,new K.SetLeadingAction(n.finalLineSpacing_,new ee.TheoPoint(.5,.5))}])},hasMultipleLines:function(){var e;return((e=w.opt(w.as(w.opt(this.lockupForma_,(function(e){return e.controller})),Q.TypeLockupController),(function(e){return e.numLines()})))||null!=e?e:1)>1},validateAfterActionSequence:function(e,t){this.hasMultipleLines()&&XCTAssertEqual(J.TextFacade.getLineSpacingForForma(this.lockupForma_),this.finalLineSpacing_)},validateAfterUndo:function(e,t){XCTAssertEqual(J.TextFacade.getLineSpacingForForma(this.lockupForma_),this.initialLineSpacing_)},validateAfterRedo:function(e,t){this.hasMultipleLines()&&XCTAssertEqual(J.TextFacade.getLineSpacingForForma(this.lockupForma_),this.finalLineSpacing_)}}}),M)},"2eFH":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("c9Jm"),s=o("yGNn"),l=o("FNB+"),c=o("cEBg");r.RecordCreateFromRemixTest=(n=function(){this.actionSequence_RecordRemix=[],this.testDoc_=null,this.wasRemixed_=!1,a.ActionTestBase.call(this)},i.defineClass({name:"RecordCreateFromRemixTest",ctor:n,superName:"ActionTestBase",props:{setUpActionSequence:function(e,t,o){var n;this.testDoc_=o,this.wasRemixed_=!1;for(var r=i.iter(this.testDoc_.firstPage.root.visitAsArray(l.FormaTraversal.PreOrder));!r.done;r.next())"true"==((n=r.value.getTag(l.Forma.TAG_CREATED_FROM_REMIX))||null!=n?n:"false")&&(this.wasRemixed_=!0)},populateActionSequence:function(e,t,o){var n=this;return s.CorePromise.resolve([function(){return new c.RecordCreateFromRemixAction(n.testDoc_.firstPage)}])},validateAfterActionSequence:function(e,t){var o;XCTAssertNotNil(this.testDoc_);for(var n=i.iter(this.testDoc_.firstPage.root.visitAsArray(l.FormaTraversal.PreOrder));!n.done;n.next()){var r=n.value;XCTAssertTrue("true"==((o=r.getTag(l.Forma.TAG_CREATED_FROM_REMIX))||null!=o?o:"false"))}},validateAfterUndo:function(e,t){var o;if(!this.wasRemixed_)for(var n=i.iter(this.testDoc_.firstPage.root.visitAsArray(l.FormaTraversal.PreOrder));!n.done;n.next()){var r=n.value;XCTAssertFalse("true"==((o=r.getTag(l.Forma.TAG_CREATED_FROM_REMIX))||null!=o?o:"false"))}},validateAfterRedo:function(e,t){for(var o,n=i.iter(this.testDoc_.firstPage.root.visitAsArray(l.FormaTraversal.PreOrder));!n.done;n.next()){var r=n.value;XCTAssertTrue("true"==((o=r.getTag(l.Forma.TAG_CREATED_FROM_REMIX))||null!=o?o:"false"))}}}}),n)},"2rlr":function(e,t,o){var n=t,r=o("oAGj");n.HostImageAnalysisProtocol=r.defineProtocol("HostImageAnalysisProtocol",{createHostImage:"(String, Boolean, ImageContentNode) -> HostImage",useCache:"(Boolean) -> Void",createTempMaskURL:"(HostDataProtocol) -> String",disposeTempMaskURL:"(String) -> Void",isTempMaskURL:"(String) -> Boolean",setShapeFormaTransparencyMask:"(ShapeForma, Integer) -> Void",getSaliencyAPIEndpoint:"() -> CorePromise",getSaliencyAPIKey:"() -> CorePromise"}),n.HostImage=r.defineProtocol("HostImage",{getUrl:"() -> String",getWidth:"() -> Integer",getHeight:"() -> Integer",loaded:"() -> Boolean",whenLoaded:"() -> CorePromise",whenAsyncFeaturesLoaded:"() -> CorePromise",hasAlpha:"() -> Boolean",getFocus:"() -> TheoRect",getTrimmedBounds:"() -> TheoRect",getImageColors:"(Integer) -> Array<SolidColor>",getImageColorData:"(Integer) -> Array<ImageColorData>",getAverageColor:"(TheoRect, ImageStyle) -> SolidColor",getFaceIntersections:"(TheoRect) -> Double",getFilterColor:"(SolidColor, ImageStyle) -> SolidColor",getSaliencyData:"(Integer, Integer) -> Array<Double>",getEdgeData:"(Integer, Integer) -> Array<Double>",getStoragePath:"(ImageContentNode) -> String",getImageRepresentationData:"(String, Integer) -> CorePromise"})},"2ur0":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"FontDescriptor":{"className":"FontDescriptor","type":"object","properties":{"postscript-name":{"type":"string"}},"required":["postscript-name"]},"TheoFont":{"className":"TheoFont","type":"object","properties":{"postscript-name":{"type":"string"},"sparkElementID":{"type":"string"},"sparkRoles":{"type":"array","items":{"type":"string"}}},"required":["postscript-name"]},"TextRange":{"type":"array","items":{"type":"integer"},"maxItems":2,"minItems":2},"TextAttribute":{"className":"TextAttribute","type":"object","properties":{"start":{"type":"integer"},"length":{"type":"integer"},"value":{"type":["string","object","number","integer"]}},"required":["start","length","value"]},"TextAttributeTypes":{"oneOf":[{"$ref":"#/definitions/UTF16Attribute"},{"$ref":"#/definitions/FontDescriptorAttribute"},{"$ref":"#/definitions/FontSizeAttribute"},{"$ref":"#/definitions/FontColorAttribute"},{"$ref":"#/definitions/FontStrokeColorAttribute"},{"$ref":"#/definitions/FontStrokeWidthAttribute"},{"$ref":"#/definitions/TextLookAttribute"}]},"UTF16Attribute":{"className":"UTF16Attribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"string"}}}]},"FontDescriptorAttribute":{"className":"FontDescriptorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"#/definitions/FontDescriptor"}}}]},"FontSizeAttribute":{"className":"FontSizeAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"number"}}}]},"FontColorAttribute":{"className":"FontColorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"Color.json#/definitions/SolidColor"}}}]},"FontStrokeColorAttribute":{"className":"FontStrokeColorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"Color.json#/definitions/SolidColor"}}}]},"FontStrokeWidthAttribute":{"className":"FontStrokeWidthAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"number"}}}]},"TextLookAttribute":{"className":"TextLookAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"integer"}}}]},"TextModel":{"className":"TextModel","type":"object","properties":{"text":{"type":"array","items":{"$ref":"#/definitions/UTF16Attribute"},"maxItems":1},"font-name":{"type":"array","items":{"$ref":"#/definitions/FontDescriptorAttribute"},"maxItems":1},"font-size":{"type":"array","items":{"$ref":"#/definitions/FontSizeAttribute"},"maxItems":1},"font-color":{"type":"array","items":{"$ref":"#/definitions/FontColorAttribute"},"maxItems":1},"font-strokecolor":{"type":"array","items":{"$ref":"#/definitions/FontStrokeColorAttribute"},"maxItems":1},"font-strokewidth":{"type":"array","items":{"$ref":"#/definitions/FontStrokeWidthAttribute"},"maxItems":1},"text-look":{"type":"array","items":{"$ref":"#/definitions/TextLookAttribute"},"maxItems":1}}}}}')},"3lr5":function(e,t,o){var n=t,r=o("oAGj");n.ANY_DOCUMENT=null,n.HostFontProviderProtocol=r.defineProtocol("HostFontProviderProtocol",{descriptorForPostScriptName:"(String, TheoDocument) -> FontDescriptor",loadFont:"(FontDescriptor, () -> Void, () -> Void) -> Void",getIncludedFonts:"(TheoDocument) -> OrderedFontSet",getSuggestableFonts:"(TheoDocument) -> OrderedFontSet",refreshBrandkitFonts:"(String) -> Void",registerBrandFonts:"(String) -> Void"})},"4ByH":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"ContentNode":{"className":"ContentNode","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"tags":{"type":"object","patternProperties":{"^.*$":{"type":"string"}}}},"required":["id","path"]}]},"NonRootContentNodeTypes":{"oneOf":[{"$ref":"#/definitions/GroupContentNode"},{"$ref":"#/definitions/ImageContentNode"},{"$ref":"#/definitions/TextContentNode"},{"$ref":"#/definitions/VectorContentNode"},{"$ref":"#/definitions/VideoContentNode"}]},"GroupContentNodeBase":{"allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"children":{"type":"array","items":{"$ref":"#/definitions/NonRootContentNodeTypes"}}}}]},"GroupContentNode":{"className":"GroupContentNode","allOf":[{"$ref":"#/definitions/GroupContentNodeBase"},{"properties":{"kind":{"enum":["group"]}},"required":["kind"]}]},"RootContentNode":{"className":"RootContentNode","allOf":[{"$ref":"#/definitions/GroupContentNodeBase"},{"properties":{"kind":{"enum":["root"]}},"required":["kind"]}]},"ImageColorData":{"className":"ImageColorData","type":"object","properties":{"red":{"type":"number"},"green":{"type":"number"},"blue":{"type":"number"},"alpha":{"type":"number"},"coverage":{"type":"number"}}},"ImageContentNode":{"className":"ImageContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["image"]},"pixel-width":{"type":"integer"},"pixel-height":{"type":"integer"},"image-has_alpha":{"type":"boolean"},"image-color-data":{"type":"array","items":{"$ref":"#/definitions/ImageColorData"}},"saliency-width":{"type":"integer"},"saliency-height":{"type":"integer"},"saliency-data":{"type":"array","items":{"type":"number"}},"edge-data":{"type":"array","items":{"type":"number"}},"focus-region":{"$ref":"Root.json#/definitions/TheoRect"}},"required":["kind"]}]},"TextContentNode":{"className":"TextContentNode","allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"kind":{"enum":["text"]},"text-model":{"$ref":"Text.json#/definitions/ContentTextModel"}},"required":["kind"]}]},"MediaMetadata":{"className":"MediaMetadata","type":"object","properties":{"search":{"type":"string"},"type":{"type":"string"},"source_name":{"type":"string"},"source_url":{"type":"string"},"owner":{"type":"string"},"asset_id":{"type":"string"},"creator_user_id":{"type":"string"},"creator_display_name":{"type":"string"},"design_intent":{"type":"string"},"source":{"type":"string"},"photo_name":{"type":"string"},"tags":{"type":"string"}}},"URLBasedContentNode":{"className":"URLBasedContentNode","allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"data-url":{"type":"string"},"mimetype":{"type":"string"},"element-id":{"type":"string"},"roles":{"type":"array","items":{"type":"string"}},"components":{"type":"array","items":{"type":"object","properties":{"url":{"type":"string"},"id":{"type":"string"},"length":{"type":"integer"},"name":{"type":"string"},"path":{"type":"string"},"mimeType":{"type":"string"},"etag":{"type":"string"}}},"maxItems":1},"media-metadata":{"$ref":"#/definitions/MediaMetadata"}}}]},"VectorContentNode":{"className":"VectorContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["vector"]},"size":{"$ref":"Root.json#/definitions/TheoSize"}},"required":["kind"]}]},"VideoContentNode":{"className":"VideoContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["video"]},"width":{"type":"integer"},"height":{"type":"integer"},"duration":{"$ref":"Root.json#/definitions/TheoTime"},"time-samples":{"type":"array","items":{"$ref":"Root.json#/definitions/TheoTime"}}},"required":["kind"]}]}}}')},"4JYN":function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("gXiO"),l=o("Zifs");i.Duotone=a.defineEnum("Duotone",{SHADOWS:0,HIGHLIGHTS:1}),i.DuotonePreset=(n=function(e,t,o){void 0===o&&(o=""),this.shadows=e,this.highlights=t,this.category=o,s.CoreObject.call(this)},r={},a.defineClass({name:"DuotonePreset",ctor:n,superName:"CoreObject",statics:{DEFAULT:{get:function(){return void 0===r.DEFAULT&&(r.DEFAULT=new n(l.SolidColor.BLACK,l.SolidColor.WHITE)),r.DEFAULT}},fromArray:function(e){return 2!=e.length?n.DEFAULT:(t=a.as(e[0],l.SolidColor))&&(o=a.as(e[1],l.SolidColor))?new n(t,o,""):n.DEFAULT;var t,o}},props:{isEqual:function(e){var t;return!!(t=a.as(e,n))&&this.shadows.isEqual(t.shadows)&&this.highlights.isEqual(t.highlights)},description:{get:function(){return this.asString}},asString:{get:function(){return"Shadows: "+this.shadows.rgbHex+", Highlights: "+this.highlights.rgbHex+" Category: "+this.category}},asArray:{get:function(){return[this.shadows,this.highlights]}},swap:function(){return new n(this.highlights,this.shadows,this.category)}}}),n),i._equality_DuotonePreset_DuotonePreset=function(e,t){return e.isEqual(t)}},"4lnG":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"FontDescriptor":{"className":"FontDescriptor","type":"object","properties":{"postscript-name":{"type":"string"}},"required":["postscript-name"]},"TheoFont":{"className":"TheoFont","type":"object","properties":{"postscript-name":{"type":"string"},"sparkElementID":{"type":"string"},"sparkRoles":{"type":"array","items":{"type":"string"}}},"required":["postscript-name"]},"TextRange":{"type":"array","items":{"type":"integer"},"maxItems":2,"minItems":2},"TextAttribute":{"className":"TextAttribute","type":"object","properties":{"start":{"type":"integer"},"length":{"type":"integer"},"value":{"type":["string","object","number","integer"]}},"required":["start","length","value"]},"TextAttributeTypes":{"oneOf":[{"$ref":"#/definitions/UTF16Attribute"},{"$ref":"#/definitions/FontDescriptorAttribute"},{"$ref":"#/definitions/FontSizeAttribute"},{"$ref":"#/definitions/FontColorAttribute"},{"$ref":"#/definitions/FontStrokeColorAttribute"},{"$ref":"#/definitions/FontStrokeWidthAttribute"},{"$ref":"#/definitions/TextLookAttribute"}]},"UTF16Attribute":{"className":"UTF16Attribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"string"}}}]},"FontDescriptorAttribute":{"className":"FontDescriptorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"#/definitions/FontDescriptor"}}}]},"FontSizeAttribute":{"className":"FontSizeAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"number"}}}]},"FontColorAttribute":{"className":"FontColorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"Color.json#/definitions/SolidColor"}}}]},"FontStrokeColorAttribute":{"className":"FontStrokeColorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"Color.json#/definitions/SolidColor"}}}]},"FontStrokeWidthAttribute":{"className":"FontStrokeWidthAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"number"}}}]},"TextLookAttribute":{"className":"TextLookAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"integer"}}}]},"TextModel":{"className":"TextModel","type":"object","properties":{"text":{"type":"array","items":{"$ref":"#/definitions/UTF16Attribute"},"maxItems":1},"font-name":{"type":"array","items":{"$ref":"#/definitions/FontDescriptorAttribute"},"maxItems":1},"font-size":{"type":"array","items":{"$ref":"#/definitions/FontSizeAttribute"},"maxItems":1},"font-color":{"type":"array","items":{"$ref":"#/definitions/FontColorAttribute"},"maxItems":1},"font-strokecolor":{"type":"array","items":{"$ref":"#/definitions/FontStrokeColorAttribute"},"maxItems":1},"font-strokewidth":{"type":"array","items":{"$ref":"#/definitions/FontStrokeWidthAttribute"},"maxItems":1},"text-look":{"type":"array","items":{"$ref":"#/definitions/TextLookAttribute"},"maxItems":1}}}}}')},"4zuo":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("c9Jm"),s=o("pnSN"),l=o("434x"),c=o("8t9B"),u=o("oKlP"),p=o("sIWg");r.NudgeTest=(n=function(){this.actionSequence_NudgeUpRight=[function(){return new l.NudgeAction(new u.TheoPoint(10,0),null)},function(){return new l.NudgeAction(new u.TheoPoint(0,-10),null)}],this.formaToNudge_=null,this.initialBounds_=p.TheoRect.Zero,this.postNudgeBounds_=p.TheoRect.Zero,a.ActionTestBase.call(this)},i.defineClass({name:"NudgeTest",ctor:n,superName:"ActionTestBase",props:{tearDown:function(){this.formaToNudge_=null,a.ActionTestBase.prototype.tearDown.call(this)},setUpActionSequence:function(e,t,o){this.formaToNudge_=i.last(this.allSelectableFormae(o,(function(e){return e instanceof s.GroupForma&&e.controller.kind==c.TypeLockupController.KIND}))),XCTAssertNotNil(this.formaToNudge_),null!=this.formaToNudge_&&(o.controller.selection.replaceSelection(this.formaToNudge_),this.initialBounds_=this.formaToNudge_.finalFrame)},validateAfterActionSequence:function(e,t){this.postNudgeBounds_=this.formaToNudge_.finalFrame,XCTAssertFalse(this.postNudgeBounds_.equal(this.initialBounds_))},validateAfterUndo:function(e,t){var o=this.formaToNudge_.finalFrame;XCTAssertTrue(this.initialBounds_.equal(o))},validateAfterRedo:function(e,t){var o=this.formaToNudge_.finalFrame;XCTAssertTrue(o.equal(this.postNudgeBounds_))}}}),n)},"56Cz":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"Assets":{"read-data":false,"type":"object","properties":{"path":{"type":"string","enum":["assets"]}}},"LinkedObject":{"type":"object","properties":{"id":{"type":"string"},"type":{"type":"string"},"name":{"type":"string"},"path":{"type":"string"}}},"TheoSize":{"type":"array","minItems":2,"items":[{"type":"number","minimum":0,"description":"width"},{"type":"number","minimum":0,"description":"height"}]},"TheoPoint":{"type":"array","minItems":2,"items":[{"type":"number","description":"x"},{"type":"number","description":"y"}]},"TheoRect":{"anyOf":[{"type":"string","pattern":"^[-+]?\\\\d*\\\\.?\\\\d+([eE][-+]?\\\\d+)?(\\\\s*,\\\\s*[-+]?\\\\d*\\\\.?\\\\d+([eE][-+]?\\\\d+)?){3}$","description":"Comma-separated list of 4 doubles in minX, maxX, minY, maxY order"},{"type":"array","minItems":4,"items":[{"type":"number","description":"minX"},{"type":"number","description":"minY"},{"type":"number","description":"maxX"},{"type":"number","description":"maxY"}]}]},"Matrix2D":{"type":"array","minItems":6,"items":[{"type":"number","description":"a"},{"type":"number","description":"b"},{"type":"number","description":"c"},{"type":"number","description":"d"},{"type":"number","description":"tx"},{"type":"number","description":"ty"}]},"TheoTime":{"type":"array","minItems":2,"items":[{"type":"integer","description":"value"},{"type":"integer","description":"timescale"}]},"TheoDocumentData":{"className":"TheoDocumentData","type":"object","properties":{"shareData":{"type":"object","properties":{"scope":{"type":"string"}}}}},"ContentDocument":{"className":"ContentDocument","allOf":[{"$ref":"#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["content"]},"type":{"type":"string","default":"application/vnd.adobe.theo.content+dcx"},"children":{"type":"array","items":[{"$ref":"ContentNodes.json#/definitions/RootContentNode"}]}},"required":["id","path","type"]}]},"DocumentHistory":{"className":"DocumentHistory","allOf":[{"$ref":"#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["document-history"]},"entries":{"type":"array","items":{"type":"string"},"maxItems":100}},"required":["id","path","entries"]}]},"TheoDocument":{"className":"TheoDocument","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","default":"theo-document"},"type":{"type":"string"},"format-version":{"type":"integer"},"watermark-enabled":{"type":"boolean","default":true},"shared":{"type":"boolean"},"modified-since-share":{"type":"boolean","default":false},"cp#assetId":{"type":"string"},"cp#shortId":{"type":"string"},"cp#publishedEtag":{"type":"string"},"cp#projectId":{"type":"string"},"cp#isExported":{"type":"boolean"},"authctx#ctxid":{"$comment":"should only be written as a string from now on, but earlier version have had this set to an object. Including object as a possible type to allow reading of older documents","anyOf":[{"type":"string"},{"type":"object"}]},"authctx#themeid":{"type":"string"},"authctx#uses-branded-elements":{"type":"boolean","description":"authoringContextID_.length > 0"},"doc#data":{"$ref":"#/definitions/TheoDocumentData"},"constrainedImages":{"type":"object","properties":{"stockImages":{"type":"object","properties":{"extended":{"type":"array","items":{"type":"string"}},"standard":{"type":"array","items":{"type":"string"}},"unlicensed":{"type":"array","items":{"type":"string"}}}}}},"children":{"type":"array","items":{"anyOf":[{"$ref":"Formae.json#/definitions/FormaPage"},{"$ref":"#/definitions/ContentDocument"},{"$ref":"Color.json#/definitions/ColorThemeDocument"},{"$ref":"#/definitions/DocumentHistory"},{"$ref":"#/definitions/Assets"}]},"uniqueItems":true}},"required":["id","format-version","doc#data"]}},"$ref":"#/definitions/TheoDocument"}')},"5D0C":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("9MJV"),s=o("sq5L"),l=o("wH/i"),c=o("WUDy"),u=o("9K9k"),p=o("f/aw"),d=o("zW52"),h=o("mj5y"),f=o("sWrh");r.PGMAnimation=(n=function(e,t){this.type=e,this.timeFn=t},i.defineClass({name:"PGMAnimation",ctor:n,statics:{PROP_TYPE:"type",PROP_TIME_FN:"time-fn",decode:function(e,t,o){var r;if(r=e){var h,m;if(null==(h=i.as(r[n.PROP_TYPE],"String"))||!(m=f.PGMUnaryFunction.decode(i.as(r[n.PROP_TIME_FN],["Dictionary","String","Any"]),o)))return o.error(s.PGMError.BAD_ANIMATION,"Couldn't get a required dict entry"),null;switch(h){case"PGMTransformAnimation":return d.PGMTransformAnimation.decodeAnimation(r,m,o);case"pgm-anim-text":return p.PGMTextAnimation.decodeAnimation(r,m,t,o);case"pgm-anim-shape":return u.PGMShapeAnimation.decodeAnimation(r,m,o);case"PGMFilterAnimation":return a.PGMFilterAnimation.decodeAnimation(r,m,o);case"pgm-anim-media-play":return l.PGMMediaPlayAnimation.decodeAnimation(r,m,o);case"pgm-anim-opacity":return c.PGMOpacityAnimation.decodeAnimation(r,m,o);default:return o.error(s.PGMError.UNKNOWN_ANIMATION,"Don't know how to decode a "+h),null}}return null}},props:{encode:function(){var e={};return e[n.PROP_TYPE]=this.type,e[n.PROP_TIME_FN]=this.timeFn.encode(),e},asString:{get:function(){return"PGMFilter("+h.PGMUtils.stringify(this.encode())+")"}},isEqualTo:function(e){return this===e||this.type==e.type&&this.timeFn.isEqualTo(e.timeFn)}}}),n)},"5VwO":function(e,t,o){var n=t,r=o("oAGj");n.HostExceptionProtocol=r.defineProtocol("HostExceptionProtocol",{executeWithExceptionHandler:"(() -> Void, (Any) -> Void) -> Void"})},"6ftY":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("WF+G"),s=o("GINV");r.StorageSpecCommunityPlatform=(n=function e(t,o,n,r){void 0===r&&(r="prod"),this.assetID=t,this.absPath=o,this.version=n,this.env=r,s.StorageSpec.call(this,e.KIND)},i.defineClass({name:"StorageSpecCommunityPlatform",ctor:n,superName:"StorageSpec",statics:{KIND:"cp",KEY_ASSET_ID:"asset-id",KEY_ABSPATH:"abspath",KEY_VERSION:"version",KEY_ENV:"env",decodeSpec:function(e){var t,o,r;if(null!=(o=i.as(e[n.KEY_ASSET_ID],"String"))&&null!=(r=i.as(e[n.KEY_ABSPATH],"String"))){var s=i.as(e[n.KEY_VERSION],"Int"),l=i.as(e[n.KEY_ENV],"String");return new n(o,new a.CorePath(r).forceAbsolute,s,(t=l)||null!=t?t:"prod")}return null}},props:{encode:function(){var e,t={};return t[s.StorageSpec.KEY_KIND]=n.KIND,t[n.KEY_ASSET_ID]=this.assetID,t[n.KEY_ABSPATH]=this.absPath.forceAbsolute.asString,null!=(e=this.version)&&(t[n.KEY_VERSION]=e),"prod"!=this.env&&(t[n.KEY_ENV]=this.env),t},readUsingAPI:function(e){return e.readComponent(this.assetID,this.absPath.asString)},canRead:function(){return!0},readUsingContext:function(e){return this.readUsingAPI(e.cpAPI)},isEqualTo:function(e){var t;return!!(t=i.as(e,n))&&this.assetID==t.assetID&&this.absPath.isEqualTo(t.absPath)&&this.version==t.version&&this.env==t.env&&s.StorageSpec.prototype.isEqualTo.call(this,e)}}}),n)},"7YiD":function(e,t,o){var n=t;o("oAGj");n.transpilerVersion=function(){return"2.187"}},"7hc0":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("tGKA");r.PGMAnimationUtils=(n=function(){},i.defineClass({name:"PGMAnimationUtils",ctor:n,statics:{interp:function(e,t,o){return e+(t-e)*o},bound01:function(e){return e<=0?0:e>=1?1:e},transformValuesToMatrix:function(e){return e.ordering==s.TransformValuesOrdering.SKRT?s.Matrix2D.Identity.scaleXY(e.xscale,e.yscale).skewTo(e.skew).rotate(e.rotCosine,e.rotSine).translateXY(e.tx,e.ty):s.Matrix2D.Identity.rotate(e.rotCosine,e.rotSine).skewTo(e.skew).scaleXY(e.xscale,e.yscale).translateXY(e.tx,e.ty)},interpolateBetweenXFormedBounds:function(e,t,o){var r;if(o<=0)r=e.placement;else if(o>=1)r=t.placement;else{var i=e.placement.transformValues,l=t.placement.transformValues,c=Math.atan2(i.rotSine,i.rotCosine),u=Math.atan2(l.rotSine,l.rotCosine)-c;u>Math.PI?u-=Math.PI:u<-Math.PI&&(u+=Math.PI);var p=c+o*u;a.LegacyCoreAssert.isTrue(i.ordering==l.ordering,"can't interpolate between different orderings",void 0,"PGMAnimationUtils.interpolateBetweenXFormedBounds","PGMAnimationUtils.swift",80);var d=new s.TransformValues(i.ordering,n.interp(i.xscale,l.xscale,o),n.interp(i.yscale,l.yscale,o),n.interp(i.skew,l.skew,o),Math.cos(p),Math.sin(p),0,0),h=n.transformValuesToMatrix(d),f=e.bounds.interpolate(t.bounds,o),m=e.placement.transformPoint(e.bounds.center),g=t.placement.transformPoint(t.bounds.center),y=h.transformPoint(f.center),T=m.interpolate(g,o);r=h.translate(T.subtract(y))}return r}}}),n)},"7pIX":function(e,t,o){var n=t,r=o("oAGj");n.StockUserEntitlement=r.defineEnum("StockUserEntitlement",{onlyGlobalFree:0,onlyFree:1,limited:2}),n.HostStockLicenseProtocol=r.defineProtocol("HostStockLicenseProtocol",{getUserEntitlement:"() -> StockUserEntitlement",asyncGetMetadataForAssetIDs:"(Array<String>, (Array<Dictionary<String>>) -> Void, (PreflightResultCode) -> Void) -> Void",asyncGetLicensesForAssetIDs:"(Dictionary<String>, (Dictionary<String>) -> Void, (PreflightResultCode, Dictionary<String>) -> Void) -> Void"})},"8vXU":function(e,t,o){var n,r,i,a,s=t,l=o("oAGj"),c=o("iCxV"),u=o("fNpk");s.LogLevelEnum=l.defineEnum("LogLevelEnum",{INFO_LEVEL:0,WARN_LEVEL:1,ERROR_LEVEL:2}),s.HostLoggingProtocol=l.defineProtocol("HostLoggingProtocol",{logForCategory:"(String, String, LogLevelEnum) -> Void",isCategoryEnabled:"(String, LogLevelEnum) -> Boolean",isCategoryTimed:"(String) -> Boolean",info:"(String) -> Void",warning:"(String) -> Void",error:"(String) -> Void",logAssertFailure:"(String, Dictionary<String>) -> Void",logToAnalytics:"(String, Dictionary<String>) -> Void",logToNewRelic:"(String, Dictionary<String>) -> Void",logBreadcrumbToNewRelic:"(String, Dictionary<String>) -> Void",newLog:"(String) -> CoreLog",beginTrace:"(String) -> Void",endTrace:"() -> Void",timeStamp:"() -> String",getCurrentTime:"() -> Double",platformID:"() -> String",additionalPlatformInfo:"() -> String",getObjectClassNameForSingletonTracking:"(AnyObject) -> String"}),s.ICoreLogImpl=l.defineProtocol("ICoreLogImpl",{info:"(String, String) -> Void",warning:"(String, String) -> Void",error:"(String, String, String, String, Integer) -> Void",beginTrace:"(String, String) -> Void",endTrace:"(String) -> Void"}),s.CoreLog=(n=function(e,t){this.channel=e,this.impl=t},l.defineClass({name:"CoreLog",ctor:n,superName:"CoreObject",props:{info:function(e){this.impl.info(this.channel,e)},warning:function(e){this.impl.warning(this.channel,e)},beginTrace:function(e){this.impl.beginTrace(this.channel,e)},endTrace:function(){this.impl.endTrace(this.channel)},error:function(e,t,o,n){void 0===t&&(t="CoreLog.error"),void 0===o&&(o="HostLoggingProtocol.swift"),void 0===n&&(n=164),this.impl.error(this.channel,e,t,o,n)}}}),n),s.CoreLogToCoreAssert=(r=function(){this.traceStack=[]},i={},l.defineClass({name:"CoreLogToCoreAssert",ctor:r,statics:{INSTANCE:{get:function(){return void 0===i.INSTANCE&&(i.INSTANCE=new r),i.INSTANCE}},_implements:function(e){return"ICoreLogImpl"==e}},props:{info:function(e,t){var o=l.toString("- ",this.traceStack.length);l.opt(c.Host.logging,(function(n){return n.info(e+": "+o+t)}))},warning:function(e,t){l.opt(c.Host.logging,(function(o){return o.warning(e+": "+t)}))},error:function(e,t,o,n,r){u.LegacyCoreAssert.fail(e+": "+t,void 0,o,n,r)},beginTrace:function(e,t){this.info(e,"begin trace: "+t),this.traceStack.push(t)},endTrace:function(e){if(this.traceStack.length>0){var t=this.traceStack.pop();this.info(e,"end trace: "+t)}}}}),r),s.RemoteLoggingEvent=(a=function(){},l.defineClass({name:"RemoteLoggingEvent",ctor:a,statics:{CUTOUT_SUCCESS:"cutout_success",CUTOUT_RETRY:"cutout_retry",CUTOUT_RETRY_SUCCESS:"cutout_retry_success",CUTOUT_ERROR:"cutout_error",CUTOUT_ERROR_AFTER_REPLACE:"cutout_error_after_replace",ADD_TEXT_FONT_UNAVAILABLE_ERROR:"add_text_font_unavailable_error"}}),a)},"8yDY":function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("yGNn");i.HostCCStorageAPI=a.defineProtocol("HostCCStorageAPI",{readComponent:"(String, String, String) -> CorePromise",pushNewComponent:"(String, String, String, CoreContent) -> CorePromise",updateComponent:"(String, String, String, CoreContent) -> CorePromise"}),i.HostCCStorageAPINullImpl=(n=function(){},r={},a.defineClass({name:"HostCCStorageAPINullImpl",ctor:n,statics:{INSTANCE:{get:function(){return void 0===r.INSTANCE&&(r.INSTANCE=new n),r.INSTANCE}},_implements:function(e){return"HostCCStorageAPI"==e}},props:{readComponent:function(e,t,o){return s.CorePromise.reject("HostCCStorageAPINullImpl can't read components")},pushNewComponent:function(e,t,o,n){return s.CorePromise.reject("HostCCStorageAPINullImpl can't write components")},updateComponent:function(e,t,o,n){return s.CorePromise.reject("HostCCStorageAPINullImpl can't write components")}}}),n)},"90dd":function(e,t,o){var n,r,i,a,s=t,l=o("oAGj"),c=o("gXiO"),u=o("iCxV"),p=o("8vXU"),d=o("rxGp");s.TheoMessageStatisticsEntry=(n=function(){this.instantiationCount=0,this.publishCount=0,this.dispatchCount=0},l.defineClass({name:"TheoMessageStatisticsEntry",ctor:n}),n),s.TheoMessageStatistics=(r=function(){this.lookup_={},this.totalInstantiations_=0,this.totalPublications_=0},i={},l.defineClass({name:"TheoMessageStatistics",ctor:r,statics:{instance:{get:function(){return void 0===i.instance&&(i.instance=new r),i.instance}}},props:{inited:function(e){},published:function(e,t){},dumpStats:function(){if(u.Host.logging.isCategoryEnabled(d.LogCategories.kTheoMessage,p.LogLevelEnum.INFO_LEVEL)){u.Host.logging.logForCategory(d.LogCategories.kTheoMessage,"TheoMessageStatistics:",p.LogLevelEnum.INFO_LEVEL),u.Host.logging.logForCategory(d.LogCategories.kTheoMessage,"- Total messages created/published: "+this.totalInstantiations_+" / "+this.totalPublications_,p.LogLevelEnum.INFO_LEVEL);for(var e=l.iter(this.lookup_);!e.done;e.next()){var t=e.key,o=e.value;u.Host.logging.logForCategory(d.LogCategories.kTheoMessage,"- "+t+": "+o.instantiationCount+" / "+o.publishCount+" -> "+o.dispatchCount,p.LogLevelEnum.INFO_LEVEL)}}}}}),r),s.TheoMessage=(a=function(e,t){this.type=e,this.publisher=t,c.CoreObject.call(this),s.TheoMessageStatistics.instance.inited(this)},l.defineClass({name:"TheoMessage",ctor:a,superName:"CoreObject"}),a),s.TheoMessageSubscription=l.defineProtocol("TheoMessageSubscription",{unsubscribe:"() -> Void"}),s.TheoMessagePublisher=l.defineProtocol("TheoMessagePublisher",{subscribeWithCallback:"((TheoMessage) -> Void, String) -> TheoMessageSubscription",subscribe:"(TheoMessageSubscriber, String) -> TheoMessageSubscription",unsubscribe:"(TheoMessageSubscription) -> Void"}),s.TheoMessageSubscriber=l.defineProtocol("TheoMessageSubscriber",{onMessage:"(TheoMessage) -> Void"})},"9K9k":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("5D0C"),s=o("7hc0"),l=o("sq5L"),c=o("Zifs"),u=o("sIWg");r.PGMShapeAnimation=(n=function e(t,o,n,r,i){this.startColor=o,this.startBounds=n,this.endColor=r,this.endBounds=i,a.PGMAnimation.call(this,e.TYPE,t)},i.defineClass({name:"PGMShapeAnimation",ctor:n,superName:"PGMAnimation",statics:{TYPE:"pgm-anim-shape",PROP_START_COLOR:"startColor",PROP_START_BOUNDS:"startBounds",PROP_END_COLOR:"endColor",PROP_END_BOUNDS:"endBounds",decodeAnimation:function(e,t,o){var r,a,s,p;return(r=c.SolidColor.decodeJson(i.as(e[n.PROP_START_COLOR],"AnyObject")))&&(a=u.TheoRect.decodeJson(i.as(e[n.PROP_START_BOUNDS],"AnyObject")))&&(s=c.SolidColor.decodeJson(i.as(e[n.PROP_END_COLOR],"AnyObject")))&&(p=u.TheoRect.decodeJson(i.as(e[n.PROP_END_BOUNDS],"AnyObject")))?new n(t,r,a,s,p):(o.error(l.PGMError.BAD_SHAPE_ANIMATION,"Couldn't decode a required parameter."),null)}},props:{encode:function(){var e=a.PGMAnimation.prototype.encode.call(this);return e[n.PROP_START_COLOR]=this.startColor.encodeJson(),e[n.PROP_START_BOUNDS]=this.startBounds.encodeJson(),e[n.PROP_END_COLOR]=this.endColor.encodeJson(),e[n.PROP_END_BOUNDS]=this.endBounds.encodeJson(),e},isEqualTo:function(e){return this===e||!!(t=i.as(e,n))&&i.eq(c._equality_SolidColor_SolidColor,this.startColor,t.startColor)&&i.eq(c._equality_SolidColor_SolidColor,this.endColor,t.endColor)&&this.startBounds.equal(t.startBounds)&&this.endBounds.equal(t.endBounds)&&a.PGMAnimation.prototype.isEqualTo.call(this,e);var t},interpolate:function(e){var t=s.PGMAnimationUtils.bound01(this.timeFn.apply(e));return{bounds:this.startBounds.interpolate(this.endBounds,t),color:this.startColor.interpolate(this.endColor,t)}}}}),n)},"9MJV":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("5D0C"),s=o("7hc0"),l=o("smUN"),c=o("sq5L");r.PGMFilterAnimation=(n=function e(t,o,n){this.startSpec=o,this.endSpec=n,a.PGMAnimation.call(this,e.TYPE,t)},i.defineClass({name:"PGMFilterAnimation",ctor:n,superName:"PGMAnimation",statics:{TYPE:"PGMFilterAnimation",PROP_START_SPEC:"start-spec",PROP_END_SPEC:"end-spec",decodeAnimation:function(e,t,o){var r,a;return(r=l.PGMFilterSpec.decode(i.as(e[n.PROP_START_SPEC],["Dictionary","String","Any"]),o))&&(a=l.PGMFilterSpec.decode(i.as(e[n.PROP_END_SPEC],["Dictionary","String","Any"]),o))?new n(t,r,a):(o.error(c.PGMError.BAD_FILTER_ANIMATION,"Missing required parameter(s)"),null)}},props:{encode:function(){var e=a.PGMAnimation.prototype.encode.call(this);return e[n.PROP_START_SPEC]=this.startSpec.encode(),e[n.PROP_END_SPEC]=this.endSpec.encode(),e},interpolate:function(e){var t=s.PGMAnimationUtils.bound01(this.timeFn.apply(e));return this.startSpec.interpolate(this.endSpec,t)},isEqualTo:function(e){return this===e||!!(t=i.as(e,n))&&this.timeFn.isEqualTo(t.timeFn)&&this.startSpec.isEqualTo(t.startSpec)&&this.endSpec.isEqualTo(t.endSpec);var t}}}),n)},"9RBh":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"Forma":{"className":"Forma","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"placement":{"$ref":"Root.json#/definitions/Matrix2D"},"animation":{"$ref":"Animation.json#/definitions/FormaAnimation"},"moveable":{"type":"boolean"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"controller-kind":{"type":"string","default":""},"controller-metadata":{"$ref":"#/definitions/ControllerMetadata"},"intent":{"type":"string","enum":["logo","pattern","icon","floating-shape","grid-cell","sticker"]},"source":{"type":"string"}},"required":["id","path","placement"]}]},"ControllerMetadata":{"className":"ControllerMetadata","type":"object","properties":{"size":{"$ref":"Root.json#/definitions/TheoSize"},"backing-shape-id":{"type":"string"},"content-id":{"type":"string"},"wrapper-id":{"type":"string"},"highlightMethod":{"type":"integer"},"charstyle-ranges":{"type":"object","properties":{"Highlight":{"type":"array","items":{"type":"integer"}}}}}},"NonRootFormaTypes":{"oneOf":[{"$ref":"#/definitions/GroupForma"},{"$ref":"#/definitions/TextForma"},{"$ref":"#/definitions/ShapeForma"},{"$ref":"#/definitions/FrameForma"},{"$ref":"#/definitions/ImageForma"},{"$ref":"#/definitions/VectorForma"},{"$ref":"#/definitions/VideoForma"},{"$ref":"#/definitions/SmartGroupForma"}]},"GroupFormaBase":{"allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"character-styles":{"type":"object","description":"lockupStyle.characterStyles","patternProperties":{"^.*$":{"$ref":"Styles.json#/definitions/LockupStyle"}}},"character-ranges":{"type":"object","description":"lockupStyle.characterStyles","patternProperties":{"^.*$":{"type":"array","items":{"type":"integer"}}}},"children":{"type":"array","items":{"$ref":"#/definitions/NonRootFormaTypes"}}}}]},"GroupForma":{"className":"GroupForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"kind":{"enum":["group"]}},"required":["kind"]}]},"RootForma":{"className":"RootForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"root-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"kind":{"enum":["Root"]}},"required":["kind"]}]},"FrameForma":{"className":"FrameForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"clipmode":{"type":"boolean","default":true},"kind":{"enum":["Frame"]}},"required":["kind"]}]},"SmartGroupForma":{"className":"SmartGroupForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"kind":{"enum":["smart-group"]}},"required":["kind"]}]},"ImageFormaBase":{"allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"image-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"content-id":{"type":"string","default":""}}}]},"ImageForma":{"className":"ImageForma","allOf":[{"$ref":"#/definitions/ImageFormaBase"},{"properties":{"kind":{"enum":["Image"]}},"required":["kind"]}]},"VideoForma":{"className":"VideoForma","allOf":[{"$ref":"#/definitions/ImageFormaBase"},{"properties":{"video-content-id":{"type":"string","default":""},"kind":{"enum":["Video"]}},"required":["kind"]}]},"ShapeForma":{"className":"ShapeForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"artwork":{"$ref":"Artwork.json#/definitions/TheoArtworkNodeTypes"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"content-id":{"type":"string","default":""},"shape-id":{"type":"string"},"size":{"$ref":"Root.json#/definitions/TheoSize"},"slice-box":{"$ref":"Root.json#/definitions/TheoRect"},"content-region":{"$ref":"Root.json#/definitions/TheoRect"},"text-box":{"$ref":"Root.json#/definitions/TheoRect"},"prescale":{"type":"number"},"kind":{"enum":["Shape"]}},"required":["kind"]}]},"TextForma":{"className":"TextForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"text":{"$ref":"Text.json#/definitions/TextModel"},"text-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"range-in-lockup":{"$ref":"Text.json#/definitions/TextRange"},"row-index":{"type":"integer","default":0},"kind":{"enum":["Text"]}},"required":["text","kind"]}]},"VectorForma":{"className":"VectorForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"content-id":{"type":"string","default":""},"size":{"$ref":"Root.json#/definitions/TheoSize"},"color":{"$ref":"Color.json#/definitions/SolidColor"},"kind":{"enum":["Vector"]}},"required":["kind"]}]},"FormaPage":{"className":"FormaPage","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["forma-document"]},"kind":{"type":"string"},"template-id":{"type":"string","default":""},"size":{"$ref":"Root.json#/definitions/TheoSize"},"size-id":{"type":"string","default":"Instagram"},"custom-size-format":{"type":"integer","default":0},"custom-size-ppi":{"type":"number","default":300},"export-data":{"$ref":"#/definitions/FormaPageExportData"},"color-library":{"$ref":"Color.json#/definitions/ColorLibrary"},"children":{"type":"array","items":{"$ref":"#/definitions/RootForma"},"maxItems":1}},"required":["id","color-library","size-id"]}]},"FormaPageExportData":{"className":"FormaPageExportData","type":"object","properties":{"dimensions":{"$ref":"Root.json#/definitions/TheoSize"},"format":{"type":"integer","default":0},"ppi":{"type":"number"}}}}}')},"9lcg":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("kpMz"),s=o("fNpk");r.HostFileUtils=(n=function(){},i.defineClass({name:"HostFileUtils",ctor:n,statics:{getFolderAtPath:function(e,t,o){if(0==t.depth)return e;for(var n=e,r=i.iter(t.parts);!r.done;r.next()){var l,c=r.value;if(l=n.find((function(e){return e.filename==c}))){var u;if(!(u=i.as(l,a.HostFSFolder)))return s.LegacyCoreAssert.fail("Non-folder along path",void 0,"HostFileUtils.getFolderAtPath","HostFileUtils.swift",30),null;n=u}else if(o){var p;if(!(p=n.createFolder(c)))return s.LegacyCoreAssert.fail("Couldn't create intermediate folder",{part:c},"HostFileUtils.getFolderAtPath","HostFileUtils.swift",37),null;n=p}}return n},getFileAtPath:function(e,t,o){var r,l,c;if(null!=(r=t.lastPart))if(l=t.parent){if(c=n.getFolderAtPath(e,l,o)){var u,p;if((u=c.find((function(e){return e.filename==r})))&&(p=i.as(u,a.HostFSFile)))return p;if(o)return c.createFile(r)}}else s.LegacyCoreAssert.fail("Unexpected internal conflict with paths",void 0,"HostFileUtils.getFileAtPath","HostFileUtils.swift",67);else s.LegacyCoreAssert.fail("Can't get or create a file from an empty path.",void 0,"HostFileUtils.getFileAtPath","HostFileUtils.swift",70);return null},findRecursive:function(e,t){var o,r=null;return t(e)?r=e:(o=i.as(e,a.HostFSFolder))&&o.find((function(e){return null!=(r=n.findRecursive(e,t))})),r}}}),n)},"A+jl":function(e,t,o){var n=t,r=o("oAGj");n.HostPersistUtilsProtocol=r.defineProtocol("HostPersistUtilsProtocol",{useJsonDocumentEncoding:"() -> Boolean",mimeTypeForFileAtPath:"(String) -> String",writeJsonContentToTempFile:"(AnyObject) -> String",readJsonContentFromFile:"(String) -> AnyObject",fileUrlForPath:"(String) -> String",fileExists:"(String) -> Boolean"}),n.HostAsyncPersistProtocol=r.defineProtocol("HostAsyncPersistProtocol",{saveStateAsync:"(String) -> CorePromise"}),n.HostDocumentComposite=r.defineProtocol("HostDocumentComposite",{current:"HostDocumentBranch",localStoragePath:"String"}),n.HostDocumentBranch=r.defineProtocol("HostDocumentBranch",{root:"HostDocumentNode",allComponents:"Array<HostDocumentComponent>",getValue:"(String) -> AnyObject",setValue:"(String, AnyObject) -> Void",appendNode:"(String, String, HostDocumentNode) -> HostDocumentNode",removeNode:"(HostDocumentNode) -> Void",getNodeWithAbsolutePath:"(String) -> HostDocumentNode",getChildrenOfNode:"(HostDocumentNode) -> Array<HostDocumentNode>",getComponentsOfNode:"(HostDocumentNode) -> Array<HostDocumentComponent>",getComponentWithId:"(String) -> HostDocumentComponent",getPathForComponent:"(HostDocumentComponent) -> String",getComponentWithAbsolutePath:"(String) -> HostDocumentComponent",addComponent:"(String, String, String, String, String, HostDocumentNode, String, Boolean, String) -> HostDocumentComponent",moveComponent:"(HostDocumentComponent, HostDocumentNode) -> HostDocumentComponent",updateComponent:"(HostDocumentComponent, String, Boolean) -> HostDocumentComponent"}),n.HostDocumentNode=r.defineProtocol("HostDocumentNode",{nodeId:"String",path:"String",getValue:"(String) -> AnyObject",setValue:"(String, AnyObject) -> Void",removeValue:"(String) -> Void"}),n.HostDocumentComponent=r.defineProtocol("HostDocumentComponent",{componentId:"String",name:"String",path:"String",type:"String",etag:"String",relationship:"String",mutableCopy:"HostDocumentComponent",setValue:"(String, AnyObject) -> Void"})},A49l:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"LinkedObject":{"type":"object","properties":{"id":{"type":"string"},"type":{"type":"string"},"name":{"type":"string"},"path":{"type":"string"}}},"TheoSize":{"type":"array","minItems":2,"items":[{"type":"number","minimum":0,"description":"width"},{"type":"number","minimum":0,"description":"height"}]},"TheoPoint":{"type":"array","minItems":2,"items":[{"type":"number","description":"x"},{"type":"number","description":"y"}]},"TheoRect":{"anyOf":[{"type":"string","pattern":"^[-+]?\\\\d*\\\\.?\\\\d+([eE][-+]?\\\\d+)?(\\\\s*,\\\\s*[-+]?\\\\d*\\\\.?\\\\d+([eE][-+]?\\\\d+)?){3}$","description":"Comma-separated list of 4 doubles in minX, maxX, minY, maxY order"},{"type":"array","minItems":4,"items":[{"type":"number","description":"minX"},{"type":"number","description":"minY"},{"type":"number","description":"maxX"},{"type":"number","description":"maxY"}]}]},"Matrix2D":{"type":"array","minItems":6,"items":[{"type":"number","description":"a"},{"type":"number","description":"b"},{"type":"number","description":"c"},{"type":"number","description":"d"},{"type":"number","description":"tx"},{"type":"number","description":"ty"}]},"TheoTime":{"type":"array","minItems":2,"items":[{"type":"integer","description":"value"},{"type":"integer","description":"timescale"}]}},"$ref":"Document.json#/definitions/TheoDocument"}')},ABa3:function(e,t,o){var n,r,i,a=t,s=o("oAGj"),l=o("WF+G"),c=o("yGNn");a.HostFSEntityInMemory=(n=function(e,t){var o;this.absPath_=e,this.filename_=(o=this.absPath_.lastPart)||null!=o?o:"",this.parent_=t},s.defineClass({name:"HostFSEntityInMemory",ctor:n,superName:"CoreObject",statics:{_implements:function(e){return"HostFSEntity"==e}},props:{filename:{get:function(){return this.filename_}},absPath:{get:function(){return this.absPath_}},parent:{get:function(){return this.parent_}}}}),n),a.HostFSFileInMemory=(r=function(e,t){this.content_=null,a.HostFSEntityInMemory.call(this,e,t)},s.defineClass({name:"HostFSFileInMemory",ctor:r,superName:"HostFSEntityInMemory",statics:{_implements:function(e){return"HostFSEntity"==e||"HostFSFile"==e}},props:{read:function(){return c.CorePromise.resolve(this.content_)},write:function(e){return this.content_=e,c.CorePromise.resolve(null)}}}),r),a.HostFSFolderInMemory=(i=function(e,t){this.files_=[],a.HostFSEntityInMemory.call(this,e,t)},s.defineClass({name:"HostFSFolderInMemory",ctor:i,superName:"HostFSEntityInMemory",statics:{createRoot:function(){return new i(l.CorePath.ROOT,null)},_implements:function(e){return"HostFSEntity"==e||"HostFSFolder"==e}},props:{find:function(e){return this.files_.find(e,this)},createFolder:function(e){var t=new i(this.absPath.append(new l.CorePath(e)),this);return this.files_.push(t),t},createFile:function(e){var t=new a.HostFSFileInMemory(this.absPath.append(new l.CorePath(e)),this);return this.files_.push(t),t},delete:function(e){var t;return!!(t=this.files_.find((function(t){return t.filename==e}),this))&&(s.remove(this.files_,t),!0)}}}),i)},ALtN:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("cZuM"),s=o("lbYW"),l=o("c9Jm"),c=o("6Rk9"),u=o("sIWg");r.AlignTest=(n=function(){this.actionSequence_AlignRightAndBottom=[function(){return new s.AlignFormaeAction(a.AlignmentType.Right)},function(){return new s.AlignFormaeAction(a.AlignmentType.Bottom)}],this.formaeToAlign_=[],this.initialBounds_=u.TheoRect.Zero,this.postAlignBounds_=u.TheoRect.Zero,this.epsilon=1e-8,l.ActionTestBase.call(this)},i.defineClass({name:"AlignTest",ctor:n,superName:"ActionTestBase",props:{setUpActionSequence:function(e,t,o){var n=c.GeometryFacade.getFormaeBounds([o.firstPage.root],!0);this.formaeToAlign_=i.clone(this.allSelectableFormae(o,(function(e){return 1==e.controller.floating&&n.contains(c.GeometryFacade.getFormaeBounds([e],!0))}))),XCTAssertNotNil(this.formaeToAlign_),this.formaeToAlign_.length>0&&(o.controller.selection.replaceSelectionWithFormae(this.formaeToAlign_),this.initialBounds_=c.GeometryFacade.getFormaeBounds(this.formaeToAlign_,!0))},validateAfterActionSequence:function(e,t){this.postAlignBounds_=c.GeometryFacade.getFormaeBounds(this.formaeToAlign_,!0),this.validatePostAlignmentRightAndBottom()},validateAfterUndo:function(e,t){var o=c.GeometryFacade.getFormaeBounds(this.formaeToAlign_,!0);XCTAssertTrue(this.initialBounds_.equal(o))},validateAfterRedo:function(e,t){this.postAlignBounds_=c.GeometryFacade.getFormaeBounds(this.formaeToAlign_,!0),this.validatePostAlignmentRightAndBottom()},validatePostAlignmentRightAndBottom:function(){for(var e=i.iter(this.formaeToAlign_);!e.done;e.next()){var t=e.value,o=this.postAlignBounds_.evalXY(1,1),n=c.GeometryFacade.getFormaeBounds([t],!0).evalXY(1,1);XCTAssertTrue(o.equalWithAccuracy(n,this.epsilon))}},tearDown:function(){this.formaeToAlign_=[],l.ActionTestBase.prototype.tearDown.call(this)}}}),n)},APum:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"ImageFilter":{"className":"ImageFilter","type":"object","properties":{"kind":{"type":"string"},"name":{"type":"string","default":""}}},"ImageFilterTypes":{"oneOf":[{"$ref":"#/definitions/AlphaBlendFilter"},{"$ref":"#/definitions/CompositeFilter"}]},"AlphaBlendFilter":{"className":"AlphaBlendFilter","allOf":[{"$ref":"#/definitions/ImageFilter"},{"properties":{"kind":{"enum":["AlphaBlend"]},"mix":{"type":"number"},"filter1":{"$ref":"#/definitions/ImageFilterTypes"},"filter2":{"$ref":"#/definitions/ImageFilterTypes"}},"required":["kind"]}]},"CompositeFilter":{"className":"CompositeFilter","allOf":[{"$ref":"#/definitions/ImageFilter"},{"properties":{"kind":{"enum":["CompositeFilter"]},"mix":{"type":"number","default":1},"blend":{"type":"string","default":"normal"},"grayscale":{"type":"boolean","default":false},"contrast":{"type":"number","default":1},"color-operation":{"type":"string","default":""},"saturation-offset":{"type":"number","default":0},"brightness-offset":{"type":"number","default":0},"blur-radius":{"type":"number","default":0},"reduce-contrast":{"type":"boolean","description":"If true, contrast == 0.5"}},"required":["kind"]}]}}}')},Aj79:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("Ird5"),s=o("jfma"),l=o("sq5L");r.PGMReference=(n=function(e,t,o){void 0===t&&(t=s.PGMCompositingParams.DEFAULT),void 0===o&&(o=a.PGMAnimationList.EMPTY),this.child=e,this.compositing=t,this.animations=o},i.defineClass({name:"PGMReference",ctor:n,statics:{PROP_REF_ENTITY:"entity",PROP_COMPOSITING_DEPRECATED:"placement",PROP_COMPOSITING:"compositing",PROP_ANIMATIONS:"animations",decode:function(e,t,o){var r,c,u;if(r=e)if(null!=(c=i.as(r[n.PROP_REF_ENTITY],"String"))){if(u=t.constructNode(c,o)){var p=s.PGMCompositingParams.decode(i.as(r[n.PROP_COMPOSITING],["Dictionary","String","Any"]),o),d=a.PGMAnimationList.decode(i.as(r[n.PROP_ANIMATIONS],["Array","Any"]),t,o);return new n(u,p||s.PGMCompositingParams.DEFAULT,d)}}else o.error(l.PGMError.BAD_REFERENCE,"Missing id and/or entity");else o.error(l.PGMError.BAD_REFERENCE,"Not a dictionary");return null}},props:{withPlacement:function(e){return this.withCompositing(this.compositing.withPlacement(e))},withChild:function(e){return e===this.child?this:new n(e,this.compositing,this.animations)},withCompositing:function(e){return e===this.compositing?this:new n(this.child,e,this.animations)},withAnimations:function(e){return e===this.animations?this:new n(this.child,this.compositing,e)},visit:function(e){e(this),this.child.visitByRef(e)},encode:function(){var e={};return e[n.PROP_REF_ENTITY]=this.child.entity,this.compositing.isDefault()||(e[n.PROP_COMPOSITING]=this.compositing.encode()),this.animations.isEmpty||(e[n.PROP_ANIMATIONS]=this.animations.encode()),e},isEqualTo:function(e){return this===e||this.child.isEqualTo(e.child)&&this.compositing.equal(e.compositing)&&this.animations.isEqualTo(e.animations)}}}),n)},As7j:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"TheoPath":{"className":"TheoPath","type":"object","properties":{"type":{"type":"string","enum":["empty","rect","ellipse","arbitrary"]}}},"TheoPathTypes":{"oneOf":[{"$ref":"#/definitions/TheoEmptyPath"},{"$ref":"#/definitions/TheoRectanglePath"},{"$ref":"#/definitions/TheoEllipsePath"},{"$ref":"#/definitions/TheoArbitraryPath"}]},"TheoEmptyPath":{"className":"TheoEmptyPath","allOf":[{"$ref":"#/definitions/TheoPath"},{"className":"TheoEmptyPath","properties":{"type":{"enum":["empty"]}}}]},"TheoRectanglePath":{"className":"TheoRectanglePath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["rect"]},"coords":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoEllipsePath":{"className":"TheoEllipsePath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["ellipse"]},"coords":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoArbitraryPath":{"className":"TheoArbitraryPath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["arbitrary"]},"fillRule":{"type":"string","enum":["none","nonzero","evenodd"]},"endType":{"type":"string","enum":["butt","round","square"]},"joinType":{"type":"string","enum":["miter","round","bevel"]},"strokeWeight":{"type":"number"},"miterLimit":{"type":"number"},"ops":{"type":"array","items":{"oneOf":[{"type":"string"},{"type":"number"}]}}}}]},"TheoArtworkNode":{"className":"TheoArtworkNode","type":"object","properties":{"type":{"type":"string"}},"required":["type"]},"TheoArtworkNodeTypes":{"oneOf":[{"$ref":"#/definitions/TheoArtworkShape"},{"$ref":"#/definitions/TheoArtworkClipGroup"},{"$ref":"#/definitions/TheoArtworkGroup"}]},"TheoArtworkShape":{"className":"TheoArtworkShape","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["shape"]},"path":{"$ref":"#/definitions/TheoPathTypes"},"paths":{"type":"array","items":{"$ref":"#/definitions/TheoPathTypes"}},"fill-color-role":{"$ref":"Color.json#/definitions/ColorRole"},"stroke-color-role":{"$ref":"Color.json#/definitions/ColorRole"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"stroke-color":{"$ref":"Color.json#/definitions/SolidColor"},"stroke-width":{"type":"number","default":0},"override-bounds":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoArtworkGroup":{"className":"TheoArtworkGroup","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["group"]},"stroke-width":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"},"description":"The constant in code is defined as PROPERTY_NODES but its value is \\"stroke-width\\""},"nodes":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"}}}}]},"TheoArtworkClipGroup":{"className":"TheoArtworkClipGroup","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["clip-group"]},"path":{"$ref":"#/definitions/TheoPathTypes"},"stroke-width":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"},"description":"The constant in code is defined as PROPERTY_NODES but its value is \\"stroke-width\\""},"nodes":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"}}}}]}}}')},BnJw:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("sWrh");r.PGMPeriodicWaveform=i.defineEnum("PGMPeriodicWaveform",{Sine:0}),r.PGMPeriodicFunction=(n=function e(t,o,n,r){this.waveform=n,this.period=r,a.PGMUnaryFunction.call(this,e.TYPE,t,o)},i.defineClass({name:"PGMPeriodicFunction",ctor:n,superName:"PGMUnaryFunction",statics:{TYPE:"pgm-periodic-fn",PROP_WAVEFORM:"waveform",PROP_PERIOD:"period",decodeFn:function(e,t,o){var a,s,l;return null!=(a=i.as(e[n.PROP_WAVEFORM],"Int"))&&null!=(s=r.PGMPeriodicWaveform.toCaseValue(a))&&null!=(l=i.as(e[n.PROP_PERIOD],"Double"))?new n(t,o,s,l):null}},props:{apply:function(e){var t=(e-this.domain.start)%this.period/this.period;switch(this.waveform){case 0:return this.range.applyU(.5+.5*Math.sin(t*Math.PI*2))}},isEqualTo:function(e){var t;return!!(t=i.as(e,n))&&this.waveform==t.waveform&&this.period==t.period&&a.PGMUnaryFunction.prototype.isEqualTo.call(this,e)},encode:function(){var e=a.PGMUnaryFunction.prototype.encode.call(this);return e[n.PROP_WAVEFORM]=this.waveform,e[n.PROP_PERIOD]=this.period,e}}}),n)},CSb8:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("c9Jm"),s=o("yGNn"),l=o("pjjd"),c=o("FNB+"),u=o("pnSN"),p=o("8t9B");r.DuplicateTest=(n=function(){this.actionSequence_DuplicateAllText=[],this.doc_=null,this.initialCounts_={},a.ActionTestBase.call(this)},i.defineClass({name:"DuplicateTest",ctor:n,superName:"ActionTestBase",props:{tearDown:function(){this.initialCounts_={},a.ActionTestBase.prototype.tearDown.call(this)},countDuplicates:function(e){var t,o=0;return(t=i.as(e.controller,p.TypeLockupController))&&i.opt(this.doc_,(function(e){return e.firstPage.root.visit(c.FormaTraversal.PreOrder,(function(e,n,r){var a,s;return(a=i.as(e,u.GroupForma))&&(s=i.as(a.controller,p.TypeLockupController))&&s.text==t.text&&(o+=1),!1}))})),o},populateActionSequence:function(e,t,o){for(var n=i.clone(this.allSelectableFormae(o,(function(e){return e instanceof u.GroupForma&&e.controller.kind==p.TypeLockupController.KIND}))),r=i.iter(n);!r.done;r.next()){var a=r.value;this.initialCounts_[a]=1}return s.CorePromise.resolve([function(){return new l.DuplicateAction(n,!0,!1,!1)}])},setUpActionSequence:function(e,t,o){for(var n=i.iter(i.keys(this.initialCounts_));!n.done;n.next()){var r=n.value;this.initialCounts_[r]=this.countDuplicates(r)}},validateAfterActionSequence:function(e,t){for(var o=i.iter(i.keys(this.initialCounts_));!o.done;o.next()){var n=o.value;XCTAssertTrue(this.countDuplicates(n)==2*this.initialCounts_[n])}},validateAfterUndo:function(e,t){for(var o=i.iter(i.keys(this.initialCounts_));!o.done;o.next()){var n=o.value;XCTAssertTrue(this.countDuplicates(n)==this.initialCounts_[n])}},validateAfterRedo:function(e,t){for(var o=i.iter(i.keys(this.initialCounts_));!o.done;o.next()){var n=o.value;XCTAssertTrue(this.countDuplicates(n)==2*this.initialCounts_[n])}}}}),n)},F13m:function(e,t,o){var n=t,r=o("oAGj");n.HostBrandkitManagerProtocol=r.defineProtocol("HostBrandkitManagerProtocol",{brandkitForDocument:"(TheoDocument) -> IAuthoringContext",brandkitForElement:"(String, String) -> IAuthoringContext",getFilePathForEncodedURL:"(String) -> String",authoringContextManager:"IAuthoringContextManager",adobeID:"String",isBrandkitEnabled:"Boolean",activateBrand:"(String) -> Void",sendDefaultBrandChangedNotification:"(String) -> Void",sendActiveBrandChangedNotification:"(String) -> Void",shouldForceIncompleteBrand:"Boolean",fakeBrandkitForElementsForTesting:"IAuthoringContext"})},F6ga:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"FormaStyleBase":{"type":"object","properties":{"opacity":{"type":"number"},"color-table":{"$ref":"Color.json#/definitions/ColorTable"},"filter":{"$ref":"Filters.json#/definitions/ImageFilterTypes"}}},"FormaStyle":{"className":"FormaStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"type":"string","enum":["FormaStyle"]}},"required":["kind"]}]},"FormaStyleTypes":{"oneOf":[{"$ref":"#/definitions/RootStyle"},{"$ref":"#/definitions/ShapeStyle"},{"$ref":"#/definitions/TextStyle"},{"$ref":"#/definitions/ImageStyle"},{"$ref":"#/definitions/VideoStyle"},{"$ref":"#/definitions/LockupStyle"},{"$ref":"#/definitions/GridStyle"},{"$ref":"#/definitions/FormaStyle"}]},"RootStyle":{"className":"RootStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["RootStyle"]},"color":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"}},"required":["kind"]}]},"ShapeStyle":{"className":"ShapeStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["ShapeStyle"]},"colors":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"}},"required":["kind"]}]},"TextStyle":{"className":"TextStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["TextStyle"]}},"required":["kind"]}]},"ImageStyleBase":{"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"name":{"type":"string","default":"None"},"colors":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"},"filter-name":{"type":"string","description":"Deprecated"}}}]},"ImageStyle":{"className":"ImageStyle","allOf":[{"$ref":"#/definitions/ImageStyleBase"},{"properties":{"kind":{"enum":["ImageStyle"]}},"required":["kind"]}]},"VideoStyle":{"className":"VideoStyle","allOf":[{"$ref":"#/definitions/ImageStyleBase"},{"properties":{"kind":{"enum":["VideoStyle"]}},"required":["kind"]}]},"LockupStyleBase":{"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["LockupStyle"]},"fonts":{"type":"array","items":{"$ref":"Text.json#/definitions/TheoFont"}},"backingArtworkID":{"type":"string"},"colors":{"allOf":[{"$ref":"Color.json#/definitions/ColorTable"},{"description":"Deprecated"}]}},"required":["kind"]}]},"LockupStyle":{"className":"LockupStyle","allOf":[{"$ref":"#/definitions/LockupStyleBase"},{"properties":{"spacing":{"type":"number","default":0.35},"tracking":{"type":"number","default":0},"padding":{"type":"number","default":0.65},"strokeWeight":{"type":"number","default":0.1},"backing":{"type":"integer","default":0},"layout":{"type":"integer","default":0},"opacityRule":{"type":"integer","default":0},"shadowAngle":{"type":"number","default":135},"shadowOffset":{"type":"number","default":0.5},"backing-opacity":{"type":"number","default":1},"opacity":{"type":"number","default":1},"knockout":{"type":"integer","default":0},"character-styles":{"type":"object","patternProperties":{"^.*$":{"$ref":"#/definitions/CharacterStyle"}}}}}]},"CharacterStyle":{"className":"CharacterStyle","allOf":[{"$ref":"#/definitions/LockupStyleBase"},{"properties":{"spacing":{"type":"number","default":-1},"tracking":{"type":"number","default":-99},"padding":{"type":"number","default":0},"strokeWeight":{"type":"number","default":-1},"backing":{"type":"integer","default":0},"layout":{"type":"integer","default":-1},"opacityRule":{"type":"integer","default":-1},"shadowAngle":{"type":"number","default":-1},"shadowOffset":{"type":"number","default":-1},"text-opacity":{"type":"number","description":"Deprecated"},"backing-opacity":{"type":"number","default":-1},"opacity":{"type":"number","description":"Deprecated"},"knockout":{"type":"integer","default":-1}}}]},"GridStyle":{"className":"GridStyle","definitions":{"GridCell":{"type":"array","items":[{"$ref":"Root.json#/definitions/TheoRect"},{"type":"number"},{"type":"string"}]}},"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["GridStyle"]},"name":{"type":"string","default":"None"},"category":{"type":"string"},"spacing":{"type":"number","default":0},"crop-type":{"type":"integer"},"grid-cells":{"type":"array","items":{"$ref":"#/definitions/GridStyle/definitions/GridCell"}},"forma-mapping":{"type":"array","items":{"type":"array","items":[{"type":"string"},{"$ref":"#/definitions/GridStyle/definitions/GridCell"}]}}},"required":["kind"]}]}}}')},FR4n:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("rtbu"),l=o("Ucb9"),c=o("9K9k"),u=o("Zifs"),p=o("hgLm"),d=o("sIWg");r.PGMMimicShapeNode=(n=function(e,t,o,n){var r;(r=i.as(t.child,l.PGMShape))?(this._paths=i.clone(r.paths),this._color=r.color,this._bounds=r.bounds):(a.LegacyCoreAssert.fail("wrong pgm node type",void 0,"PGMMimicShapeNode.init","PGMMimicShapeNode.swift",28),this._paths=[],this._color=u.SolidColor.BLACK,this._bounds=d.TheoRect.Zero),s.PGMMimicNode.call(this,e,t,o,n)},i.defineClass({name:"PGMMimicShapeNode",ctor:n,superName:"PGMMimicNode",statics:{PROP_PATHS:"paths",PROP_COLOR:"color",PROP_BOUNDS:"bounds"},props:{importProperties:function(){var e;this.startPropertyMutation(),(e=i.as(this.ref.child,l.PGMShape))?(this.paths=i.clone(e.paths),this.color=e.color,this.bounds=e.bounds):a.LegacyCoreAssert.fail("wrong pgm node type",void 0,"PGMMimicShapeNode.importProperties","PGMMimicShapeNode.swift",44),this.endPropertyMutation()},applyAnimation:function(e,t){var o;if(s.PGMMimicNode.prototype.applyAnimation.call(this,e,t),o=i.as(e,c.PGMShapeAnimation)){var n=o.interpolate(t);this.color=n.color,this.bounds=n.bounds}},calculateMarkedBounds:function(){return this.bounds},paths:{get:function(){return this._paths},set:function(e){p.TheoPath.arraysEqual(this._paths,e)||(this._paths=i.clone(e),this.mutateProperty(n.PROP_PATHS))}},bounds:{get:function(){return this._bounds},set:function(e){e.equal(this._bounds)||(this._bounds=e,this.mutateProperty(n.PROP_BOUNDS),this.invalidateMarkedBounds())}},color:{get:function(){return this._color},set:function(e){e!==this._color&&(this._color=e,this.mutateProperty(n.PROP_COLOR))}}}}),n)},FtYp:function(e,t,o){var n=t,r=o("oAGj");n.HostCryptoProtocol=r.defineProtocol("HostCryptoProtocol",{md5:"(String) -> String"})},FumV:function(e,t,o){var n=t,r=o("oAGj");n.HostLearningProtocol=r.defineProtocol("HostLearningProtocol",{loadLayoutSuggestionModel:"() -> LayoutSuggestionsLinearModel",loadFontSuggestionLinearModel:"() -> FontLinearModel",loadNNJSON:"(String) -> Dictionary<String>",updateFontSuggestionLinearModel:"(FontLinearModel) -> Void",updateFontSuggestionNNModel:"(MLPModel) -> Void",getHostPredictionCache:"() -> RolePredictionCache"}),n.getHostPredictionCache=function(){return null}},G7Wc:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("8yDY"),s=o("Gn25"),l=o("II88"),c=o("n3Td");r.StorageSpecReadWriteContext=(n=function(e,t,o,n){void 0===e&&(e=c.HostFSFolderNullImpl.INSTANCE),void 0===t&&(t=l.HostDCXCompositeNullImpl.INSTANCE),void 0===o&&(o=a.HostCCStorageAPINullImpl.INSTANCE),void 0===n&&(n=s.HostCommunityPlatformAPINullImpl.INSTANCE),this.localFolder=e,this.composite=t,this.ccAPI=o,this.cpAPI=n},i.defineClass({name:"StorageSpecReadWriteContext",ctor:n}),n)},GDe9:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("Qlvz"),s=o("fNpk"),l=o("3DEm"),c=o("7hc0"),u=o("smUN");r.PGMColorAdjustmentFilterSpec=(n=function e(t,o,n,r,i,a,s,l,c,p){this.shadows=t,this.highlights=o,this.saturation=n,this.brightness=r,this.exposure=i,this.contrast=a,this.warmth=s,this.tint=l,this.fade=c,this.vibrance=p,u.PGMFilterSpec.call(this,e.TYPE)},i.defineClass({name:"PGMColorAdjustmentFilterSpec",ctor:n,superName:"PGMFilterSpec",statics:{TYPE:"PGMColorAdjustmentFilterSpec",PROP_SHADOWS:"shadows",PROP_HIGHLIGHTS:"highlights",PROP_SATURATION:"saturation",PROP_BRIGHTNESS:"brightness",PROP_EXPOSURE:"exposure",PROP_CONTRAST:"contrast",PROP_WARMTH:"warmth",PROP_TINT:"tint",PROP_FADE:"fade",PROP_VIBRANCE:"vibrance",decodeSpec:function(e,t){var o,r,s,l,c,u,p,d,h,f,m=a.ImageAdjustments.createDefault(),g=e,y=(o=i.as(g[n.PROP_SHADOWS],"Double"))||null!=o?o:m.shadows,T=(r=i.as(g[n.PROP_HIGHLIGHTS],"Double"))||null!=r?r:m.highlights,A=(s=i.as(g[n.PROP_SATURATION],"Double"))||null!=s?s:m.saturation,C=(l=i.as(g[n.PROP_BRIGHTNESS],"Double"))||null!=l?l:m.brightness,_=(c=i.as(g[n.PROP_EXPOSURE],"Double"))||null!=c?c:m.exposure,S=(u=i.as(g[n.PROP_CONTRAST],"Double"))||null!=u?u:m.contrast,P=(p=i.as(g[n.PROP_WARMTH],"Double"))||null!=p?p:m.warmth,F=(d=i.as(g[n.PROP_TINT],"Double"))||null!=d?d:m.tint,v=(h=i.as(g[n.PROP_FADE],"Double"))||null!=h?h:m.fade,R=(f=i.as(g[n.PROP_VIBRANCE],"Double"))||null!=f?f:m.vibrance;return new n(y,T,A,C,_,S,P,F,v,R)}},props:{encode:function(){var e=u.PGMFilterSpec.prototype.encode.call(this);return e[n.PROP_SHADOWS]=this.shadows,e[n.PROP_HIGHLIGHTS]=this.highlights,e[n.PROP_SATURATION]=this.saturation,e[n.PROP_BRIGHTNESS]=this.brightness,e[n.PROP_EXPOSURE]=this.exposure,e[n.PROP_CONTRAST]=this.contrast,e[n.PROP_WARMTH]=this.warmth,e[n.PROP_TINT]=this.tint,e[n.PROP_FADE]=this.fade,e[n.PROP_VIBRANCE]=this.vibrance,e},isEqualTo:function(e){return e===this||!!(t=i.as(e,n))&&(l.MathUtils.absDouble(t.shadows-this.shadows)<1e-9&&l.MathUtils.absDouble(t.highlights-this.highlights)<1e-9&&l.MathUtils.absDouble(t.saturation-this.saturation)<1e-9&&l.MathUtils.absDouble(t.brightness-this.brightness)<1e-9&&l.MathUtils.absDouble(t.exposure-this.exposure)<1e-9&&l.MathUtils.absDouble(t.contrast-this.contrast)<1e-9&&l.MathUtils.absDouble(t.warmth-this.warmth)<1e-9&&l.MathUtils.absDouble(t.tint-this.tint)<1e-9&&l.MathUtils.absDouble(t.fade-this.fade)<1e-9&&l.MathUtils.absDouble(t.vibrance-this.vibrance)<1e-9);var t},interpolate:function(e,t){return t<=0?this:t>=1?e:(o=i.as(e,n))?new n(c.PGMAnimationUtils.interp(this.shadows,o.shadows,t),c.PGMAnimationUtils.interp(this.highlights,o.highlights,t),c.PGMAnimationUtils.interp(this.saturation,o.saturation,t),c.PGMAnimationUtils.interp(this.brightness,o.brightness,t),c.PGMAnimationUtils.interp(this.exposure,o.exposure,t),c.PGMAnimationUtils.interp(this.contrast,o.contrast,t),c.PGMAnimationUtils.interp(this.warmth,o.warmth,t),c.PGMAnimationUtils.interp(this.tint,o.tint,t),c.PGMAnimationUtils.interp(this.fade,o.fade,t),c.PGMAnimationUtils.interp(this.vibrance,o.vibrance,t)):(s.LegacyCoreAssert.fail("can't interpolate to a different function spec type",void 0,"PGMColorAdjustmentFilterSpec.interpolate","PGMColorAdjustmentFilterSpec.swift",149),this);var o}}}),n)},GINV:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("tvh+"),s=o("yGNn"),l=o("fNpk"),c=o("RiZt"),u=o("t+nd"),p=o("fnrT"),d=o("KQHZ"),h=o("6ftY"),f=o("uYSz"),m=o("VXZl"),g=o("KDc2"),y=o("GOtr"),T=o("k6St"),A=o("ll2+");r.StorageSpec=(n=function(e){this.kind=e},i.defineClass({name:"StorageSpec",ctor:n,superName:"CoreObject",statics:{KEY_KIND:"kind",decodeFromEncodedURL:function(e){return l.LegacyCoreAssert.fail("will do this as part of gluing legacy encoded-urls to new storage mechanisms",void 0,"StorageSpec.decodeFromEncodedURL","StorageSpec.swift",24),null},decode:function(e){var t;if(null!=(t=i.as(e.kind,"String"))){var o;switch(t){case"invalid":o=new g.StorageSpecInvalid;break;case"content-literal":o=d.StorageSpecContentLiteral.decodeSpec(e);break;case"http":o=m.StorageSpecHTTP.decodeSpec(e);break;case"local-file":o=A.StorageSpecLocalFile.decodeSpec(e);break;case"local-composite":o=y.StorageSpecLocalComposite.decodeSpec(e);break;case"local-multi":o=T.StorageSpecLocalCompositeMulti.decodeSpec(e);break;case"external-cc":o=f.StorageSpecExternalCC.decodeSpec(e);break;case"cp":o=h.StorageSpecCommunityPlatform.decodeSpec(e);break;case"acp":o=c.StorageSpecAdobeContentPlatform.decodeSpec(e);break;case"app-resource":o=p.StorageSpecApplicationResource.decodeSpec(e);break;case"adobe-font":o=u.StorageSpecAdobeFont.decodeSpec(e);break;default:o=null}return l.LegacyCoreAssert.isTrue(null!=o,"unrecognized encoding",{encoded:e},"StorageSpec.decode","StorageSpec.swift",60),o||new g.StorageSpecInvalid}return l.LegacyCoreAssert.fail("unrecognized encoding",{encoded:e},"StorageSpec.decode","StorageSpec.swift",64),new g.StorageSpecInvalid}},props:{encode:function(){return l.LegacyCoreAssert.fail("must override",void 0,"StorageSpec.encode","StorageSpec.swift",70),{}},canRead:function(){return!1},canWrite:function(){return!1},readUsingContext:function(e){return this.canRead()?s.CorePromise.reject("no impl for read() for "+this.kind):s.CorePromise.reject("StorageSpec "+this.kind+" does not support reading")},writeUsingContext:function(e,t){return this.canWrite()?s.CorePromise.reject("no impl for write() for "+this.kind):s.CorePromise.reject("StorageSpec "+this.kind+" does not support writing")},transferUsingContext:function(e,t){return this.transferUsingContexts(e,t,e)},transferUsingContexts:function(e,t,o){var n=this;return t.readUsingContext(e).then((function(e){var t;return(t=i.as(e,a.CoreContent))?n.writeUsingContext(o,t):s.CorePromise.reject("read did not result in a CoreContent")}))},isEqualTo:function(e){return this.kind==e.kind}}}),n)},GOtr:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("yGNn"),s=o("GINV"),l=o("KQHZ");r.StorageSpecLocalComposite=(n=function e(t,o){void 0===o&&(o=null),this.componentID=t,this.contentType=o,s.StorageSpec.call(this,e.KIND)},i.defineClass({name:"StorageSpecLocalComposite",ctor:n,superName:"StorageSpec",statics:{KIND:"local-composite",KEY_COMPONENTID:"component-id",KEY_CONTENT_TYPE:"content-type",decodeSpec:function(e){var t;if(null!=(t=i.as(e[n.KEY_COMPONENTID],"String"))){var o=i.as(e[n.KEY_CONTENT_TYPE],"String");return new n(t,o)}return null}},props:{encode:function(){var e={};return e[s.StorageSpec.KEY_KIND]=n.KIND,e[n.KEY_COMPONENTID]=this.componentID,null!=this.contentType&&(e[n.KEY_CONTENT_TYPE]=this.contentType),e},isEqualTo:function(e){return e===this||!!(t=i.as(e,n))&&this.componentID==t.componentID&&s.StorageSpec.prototype.isEqualTo.call(this,e);var t},canRead:function(){return!0},readUsingContext:function(e){var t;return(t=e.composite.current.getComponentWithId(this.componentID))?t.storage.readUsingContext(e):a.CorePromise.reject("read: local composite does not have component with ID  "+this.componentID)},canWrite:function(){return!0},writeUsingContext:function(e,t){var o;return(o=e.composite.current.getComponentWithId(this.componentID))?(o.updateContent(new l.StorageSpecContentLiteral(t)),a.CorePromise.resolve(null)):a.CorePromise.reject("write: local composite does not have component with ID "+this.componentID)}}}),n)},Gn25:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("yGNn");i.HostCommunityPlatformAPI=a.defineProtocol("HostCommunityPlatformAPI",{readComponent:"(String, String) -> CorePromise"}),i.HostCommunityPlatformAPINullImpl=(n=function(){},r={},a.defineClass({name:"HostCommunityPlatformAPINullImpl",ctor:n,statics:{INSTANCE:{get:function(){return void 0===r.INSTANCE&&(r.INSTANCE=new n),r.INSTANCE}},_implements:function(e){return"HostCommunityPlatformAPI"==e}},props:{readComponent:function(e,t){return s.CorePromise.reject("HostCommunityPlatformAPINullImpl can't read components")}}}),n)},GtBD:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("WF+G"),s=o("yGNn"),l=o("fNpk"),c=o("GINV");r.StorageSpecLocalIdentifier=(n=function e(t,o){void 0===o&&(o=null),this.localIdentifier=t,this.backupAbsPath=o,c.StorageSpec.call(this,e.KIND)},i.defineClass({name:"StorageSpecLocalIdentifier",ctor:n,superName:"StorageSpec",statics:{KIND:"local-identifier",KEY_LOCAL_IDENTIFIER:"key-local-identifier",KEY_BACKUP_ABSPATH:"backup-abspath",decodeSpec:function(e){var t;if(null!=(t=i.as(e[n.KEY_LOCAL_IDENTIFIER],"String"))){var o,r=null;return null!=(o=i.as(e[n.KEY_BACKUP_ABSPATH],"String"))&&(r=new a.CorePath(o)),new n(t,r)}return l.LegacyCoreAssert.fail("no "+n.KEY_LOCAL_IDENTIFIER+" parameter found",void 0,"StorageSpecLocalIdentifier.decodeSpec","StorageSpecLocalIdentifier.swift",36),null}},props:{encode:function(){var e,t={};return t[c.StorageSpec.KEY_KIND]=n.KIND,t[n.KEY_LOCAL_IDENTIFIER]=this.localIdentifier,null!=(e=i.opt(this.backupAbsPath,(function(e){return e.asString})))&&(t[n.KEY_BACKUP_ABSPATH]=e),t},read:function(){return s.CorePromise.reject("StorageSpecLocalIdentifier: read is a todo")},canRead:function(){return!0},readUsingContext:function(e){return this.read()},isEqualTo:function(e){return e===this||!!(t=i.as(e,n))&&(((o=this.backupAbsPath)&&(r=t.backupAbsPath)?o.isEqualTo(r):this.backupAbsPath==t.backupAbsPath)&&this.localIdentifier==t.localIdentifier&&c.StorageSpec.prototype.isEqualTo.call(this,e));var t,o,r}}}),n)},II88:function(e,t,o){var n,r,i,a=t,s=o("oAGj");a.HostDCXCompositeNullImpl=(n=function(){this.current_=new a.HostDCXBranchNullImpl},r={},s.defineClass({name:"HostDCXCompositeNullImpl",ctor:n,statics:{INSTANCE:{get:function(){return void 0===r.INSTANCE&&(r.INSTANCE=new n),r.INSTANCE}},_implements:function(e){return"HostDCXComposite"==e}},props:{current:{get:function(){return this.current_}}}}),n),a.HostDCXBranchNullImpl=(i=function(){},s.defineClass({name:"HostDCXBranchNullImpl",ctor:i,statics:{_implements:function(e){return"HostDCXBranch"==e}},props:{root:{get:function(){return a.HostDCXNodeNullImpl.INSTANCE}},allComponents:{get:function(){return[]}},getNodeWithAbsolutePath:function(e){return null},getComponentWithId:function(e){return null},getComponentWithAbsolutePath:function(e){return null}}}),i),a.HostDCXNodeNullImpl=function(){var e=function(){},t={};return s.defineClass({name:"HostDCXNodeNullImpl",ctor:e,statics:{INSTANCE:{get:function(){return void 0===t.INSTANCE&&(t.INSTANCE=new e),t.INSTANCE}},_implements:function(e){return"HostDCXNode"==e}},props:{nodeId:{get:function(){return""}},getValue:function(e){return null},setValue:function(e,t){},removeValue:function(e){},appendNode:function(e,t){return null},removeNode:function(e){},children:{get:function(){return[]}},components:{get:function(){return[]}},addComponent:function(e,t,o,n,r,i){return null},moveComponent:function(e){return null}}}),e}()},IUM5:function(e,t,o){var n=t,r=o("oAGj");n.CATEGORY_ID_IMAGE="image",n.CATEGORY_ID_IMAGES="images",n.CATEGORY_ID_SHAPE="shape",n.CATEGORY_ID_FONT="font",n.CATEGORY_ID_RASTER_MASK="raster",n.CATEGORY_ID_LOOK="look",n.FONT_RESOURCE_ID_EMBEDDED_PREFIX="embedded-font:",n.FONT_RESOURCE_ID_SPARK_PREFIX="spark-font:",n.HostResourceUtilsProtocol=r.defineProtocol("HostResourceUtilsProtocol",{makeGUID:"() -> String",urlForResource:"(String, String) -> String"})},Ird5:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("5D0C"),l=o("mj5y");i.PGMAnimationList=(n=function(e){this.animations=a.clone(e),this.isEmpty=0==e.length},r={},a.defineClass({name:"PGMAnimationList",ctor:n,statics:{EMPTY:{get:function(){return void 0===r.EMPTY&&(r.EMPTY=new n([])),r.EMPTY}},decode:function(e,t,o){if(null==e||0==e.length)return n.EMPTY;for(var r=[],i=a.iter(e);!i.done;i.next()){var l,c=i.value;if(!(l=s.PGMAnimation.decode(a.as(c,["Dictionary","String","Any"]),t,o)))return n.EMPTY;r.push(l)}return new n(r)},fromArray:function(e){return 0==e.length?n.EMPTY:new n(e)}},props:{asString:{get:function(){return"PGMAnimationList("+l.PGMUtils.stringify(this.encode())+")"}},forEach:function(e){this.animations.forEach(e)},encode:function(){for(var e=[],t=a.iter(this.animations);!t.done;t.next()){var o=t.value;e.push(o.encode())}return e},merge:function(e){if(this.isEmpty)return e;if(e.isEmpty)return this;var t=this.animations.concat(e.animations);return new n(t)},append:function(e){var t=this.animations.concat([e]);return new n(t)},isEqualTo:function(e){if(this===e)return!0;if(this.animations.length!=e.animations.length)return!1;for(var t=a.iter(a.range(0,this.animations.length,!1));!t.done;t.next()){var o=t.value;if(!this.animations[o].isEqualTo(e.animations[o]))return!1}return!0}}}),n)},Iv44:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("Qlvz"),s=o("fNpk"),l=o("smUN");r.PGMBlurFilterSpec=(n=function e(t,o,n){this.edgeClamp=t,this.scaledBlur=o,this.originalImageEntity=n,l.PGMFilterSpec.call(this,e.TYPE)},i.defineClass({name:"PGMBlurFilterSpec",ctor:n,superName:"PGMFilterSpec",statics:{TYPE:"PGMBlurFilterSpec",PROP_SCALED_BLUR:"blur",PROP_ORIG_IMG_ENTITY:"origImageEntity",PROP_EDGE_CLAMP:"edgeClamp",decodeSpec:function(e,t){var o,r,s,l=a.ImageAdjustments.createDefault(),c=!(!(o=i.as(e[n.PROP_EDGE_CLAMP],"Bool"))&&null==o)&&o,u=(r=i.as(e[n.PROP_SCALED_BLUR],"Double"))||null!=r?r:l.scaledBlur,p=(s=i.as(e[n.PROP_ORIG_IMG_ENTITY],"String"))||null!=s?s:"";return new n(c,u,p)}},props:{encode:function(){var e=l.PGMFilterSpec.prototype.encode.call(this);return e[n.PROP_EDGE_CLAMP]=this.edgeClamp,e[n.PROP_SCALED_BLUR]=this.scaledBlur,e[n.PROP_ORIG_IMG_ENTITY]=this.originalImageEntity,e},isEqualTo:function(e){return e===this||!!(t=i.as(e,n))&&this.edgeClamp==t.edgeClamp&&this.scaledBlur==t.scaledBlur&&this.originalImageEntity==t.originalImageEntity;var t},interpolate:function(e,t){if(t<=0)return this;if(t>=1)return e;var o;if(o=i.as(e,n)){var r=(1-t)*this.scaledBlur+t*o.scaledBlur;return new n(this.edgeClamp,r,this.originalImageEntity)}return s.LegacyCoreAssert.fail("can't interpolate to another filter spec type",void 0,"PGMBlurFilterSpec.interpolate","PGMBlurFilterSpec.swift",94),this}}}),n)},JQ9Y:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("smUN"),l=o("sq5L"),c=o("Zifs");r.PGMScreenFilterSpec=(n=function e(t){this.filterColor=t,s.PGMFilterSpec.call(this,e.TYPE)},i.defineClass({name:"PGMScreenFilterSpec",ctor:n,superName:"PGMFilterSpec",statics:{TYPE:"PGMScreenFilterSpec",PROP_FILTER_COLOR:"filterColor",decodeSpec:function(e,t){var o;return(o=c.SolidColor.decodeJson(i.as(e[n.PROP_FILTER_COLOR],"AnyObject")))?new n(o):(t.error(l.PGMError.BAD_FILTER_SPEC,"PGMScreenFilterSpec: missing parameter(s)"),null)}},props:{encode:function(){var e=s.PGMFilterSpec.prototype.encode.call(this);return e[s.PGMFilterSpec.PROP_TYPE]=n.TYPE,e[n.PROP_FILTER_COLOR]=this.filterColor.encodeJson(),e},isEqualTo:function(e){return this===e||!!(t=i.as(e,n))&&i.eq(c._equality_SolidColor_SolidColor,this.filterColor,t.filterColor);var t},interpolate:function(e,t){return t<=0?this:t>=1?e:(o=i.as(e,n))?new n(this.filterColor.interpolate(o.filterColor,t)):(a.LegacyCoreAssert.fail("can't interpolate to a different function spec type",void 0,"PGMScreenFilterSpec.interpolate","PGMScreenFilterSpec.swift",73),this);var o}}}),n)},Jdq6:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"FormaAnimation":{"className":"FormaAnimation","type":"object","properties":{"kind":{"type":"string","enum":["FormaAnimation"]},"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"end-time":{"$ref":"Root.json#/definitions/TheoTime"},"key-frames":{"type":"array","items":{"$ref":"#/definitions/KeyFrame"}},"animation-style":{"$ref":"#/definitions/AnimationStyle"},"name":{"type":"string"}},"required":["start-time","end-time","key-frames"]},"KeyFrame":{"className":"KeyFrame","type":"object","properties":{"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"timing-function":{"type":"string"},"placement":{"$ref":"Root.json#/definitions/Matrix2D"},"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"}}},"AnimationStyle":{"className":"AnimationStyle","type":"object","properties":{"name":{"type":"string"},"variant":{"type":"integer"},"variant-count":{"type":"integer"},"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"end-time":{"$ref":"Root.json#/definitions/TheoTime"},"category":{"type":"string"},"looping":{"type":"boolean","default":false},"text-style":{"type":"boolean"},"image-style":{"type":"boolean"}},"required":["name","variant","variant-count"]}}}')},Jgdj:function(e,t,o){var n,r,i,a,s=t,l=o("oAGj"),c=o("c9Jm"),u=o("yGNn"),p=o("lqhW"),d=o("ylxa"),h=o("cEBg"),f=o("1NAc");s.PageSizeLetterTest=(n=function(){this.actionSequence_PageSizeLetter=[],this.testDoc_=null,this.testPage_=null,this.initialPageSizeID_="",this.initialPageSizePPI_=d.FormaPageExportData.DEFAULT_PPI,this.initialPageSizeFormat_=d.PageExportFormat.PIXELS,c.ActionTestBase.call(this)},l.defineClass({name:"PageSizeLetterTest",ctor:n,superName:"ActionTestBase",props:{setUpActionSequence:function(e,t,o){var n,r,i;this.testDoc_=o,this.testPage_=o.firstPage,this.initialPageSizeID_=(n=l.opt(this.testPage_,(function(e){return e.sizeID})))||null!=n?n:"",this.initialPageSizePPI_=(r=l.opt(this.testPage_,(function(e){return e.customSizePPI})))||null!=r?r:300,this.initialPageSizeFormat_=(i=l.opt(this.testPage_,(function(e){return e.customSizeFormat})))||null!=i?i:d.PageExportFormat.PIXELS},populateActionSequence:function(e,t,o){var n=this,r=p.DesignSizeLibrary.getById("Letter");return u.CorePromise.resolve([function(){return new h.ChangePageSizeAction(n.testPage_,r)}])},validateAfterActionSequence:function(e,t){var o=l.opt(this.testPage_,(function(e){return e.sizeID})),n=l.opt(this.testPage_,(function(e){return e.customSizePPI})),r=l.opt(this.testPage_,(function(e){return e.customSizeFormat}));XCTAssertTrue("Letter"==o),XCTAssertTrue(300==n),XCTAssertTrue(r==d.PageExportFormat.INCHES),XCTAssertTrue(this.testPage_.getPageExportData().pointDimensions.equal(new f.TheoSize(8.5,11).multiply(d.FormaPageExportData.POINTS_PER_INCH)))},validateAfterUndo:function(e,t){var o=l.opt(this.testPage_,(function(e){return e.sizeID})),n=l.opt(this.testPage_,(function(e){return e.customSizePPI})),r=l.opt(this.testPage_,(function(e){return e.customSizeFormat}));XCTAssertTrue(o==this.initialPageSizeID_),XCTAssertTrue(n==this.initialPageSizePPI_),XCTAssertTrue(r==this.initialPageSizeFormat_)},validateAfterRedo:function(e,t){var o=l.opt(this.testPage_,(function(e){return e.sizeID})),n=l.opt(this.testPage_,(function(e){return e.customSizePPI})),r=l.opt(this.testPage_,(function(e){return e.customSizeFormat}));XCTAssertTrue("Letter"==o),XCTAssertTrue(300==n),XCTAssertTrue(r==d.PageExportFormat.INCHES),XCTAssertTrue(this.testPage_.getPageExportData().pointDimensions.equal(new f.TheoSize(8.5,11).multiply(d.FormaPageExportData.POINTS_PER_INCH)))}}}),n),s.PageSizeCustomTest=(r=function(){this.actionSequence_PageSizeCustom=[],this.testDoc_=null,this.testPage_=null,this.initialPageSizeID_="",this.initialPageSizePPI_=d.FormaPageExportData.DEFAULT_PPI,this.initialPageSizeFormat_=d.PageExportFormat.PIXELS,c.ActionTestBase.call(this)},l.defineClass({name:"PageSizeCustomTest",ctor:r,superName:"ActionTestBase",props:{setUpActionSequence:function(e,t,o){var n,r,i;this.testDoc_=o,this.testPage_=o.firstPage,this.initialPageSizeID_=(n=l.opt(this.testPage_,(function(e){return e.sizeID})))||null!=n?n:"",this.initialPageSizePPI_=(r=l.opt(this.testPage_,(function(e){return e.customSizePPI})))||null!=r?r:300,this.initialPageSizeFormat_=(i=l.opt(this.testPage_,(function(e){return e.customSizeFormat})))||null!=i?i:d.PageExportFormat.PIXELS},populateActionSequence:function(e,t,o){var n=this,r=p.DesignSizeLibrary.getCustomSize(1011,990,d.PageExportFormat.PIXELS,d.FormaPageExportData.DEFAULT_PPI);return u.CorePromise.resolve([function(){return new h.ChangePageSizeAction(n.testPage_,r)}])},validateAfterActionSequence:function(e,t){var o=l.opt(this.testPage_,(function(e){return e.sizeID})),n=l.opt(this.testPage_,(function(e){return e.customSizePPI})),r=l.opt(this.testPage_,(function(e){return e.customSizeFormat}));XCTAssertTrue("Custom"==o),XCTAssertTrue(300==n),XCTAssertTrue(r==d.PageExportFormat.PIXELS),XCTAssertTrue(this.testPage_.getPageExportData().pixelDimensions.equal(new f.TheoSize(1011,990)))},validateAfterUndo:function(e,t){var o=l.opt(this.testPage_,(function(e){return e.sizeID})),n=l.opt(this.testPage_,(function(e){return e.customSizePPI})),r=l.opt(this.testPage_,(function(e){return e.customSizeFormat}));XCTAssertTrue(o==this.initialPageSizeID_),XCTAssertTrue(n==this.initialPageSizePPI_),XCTAssertTrue(r==this.initialPageSizeFormat_)},validateAfterRedo:function(e,t){var o=l.opt(this.testPage_,(function(e){return e.sizeID})),n=l.opt(this.testPage_,(function(e){return e.customSizePPI})),r=l.opt(this.testPage_,(function(e){return e.customSizeFormat}));XCTAssertTrue("Custom"==o),XCTAssertTrue(300==n),XCTAssertTrue(r==d.PageExportFormat.PIXELS),XCTAssertTrue(this.testPage_.getPageExportData().pixelDimensions.equal(new f.TheoSize(1011,990)))}}}),r),s.PageSizeA4Test=(i=function(){this.actionSequence_PageSizeA4=[],this.testDoc_=null,this.testPage_=null,this.initialPageSizeID_="",this.initialPageSizePPI_=d.FormaPageExportData.DEFAULT_PPI,this.initialPageSizeFormat_=d.PageExportFormat.PIXELS,c.ActionTestBase.call(this)},l.defineClass({name:"PageSizeA4Test",ctor:i,superName:"ActionTestBase",props:{setUpActionSequence:function(e,t,o){var n,r,i;this.testDoc_=o,this.testPage_=o.firstPage,this.initialPageSizeID_=(n=l.opt(this.testPage_,(function(e){return e.sizeID})))||null!=n?n:"",this.initialPageSizePPI_=(r=l.opt(this.testPage_,(function(e){return e.customSizePPI})))||null!=r?r:300,this.initialPageSizeFormat_=(i=l.opt(this.testPage_,(function(e){return e.customSizeFormat})))||null!=i?i:d.PageExportFormat.PIXELS},populateActionSequence:function(e,t,o){var n=this,r=p.DesignSizeLibrary.getById("A4");return u.CorePromise.resolve([function(){return new h.ChangePageSizeAction(n.testPage_,r)}])},validateAfterActionSequence:function(e,t){var o=l.opt(this.testPage_,(function(e){return e.sizeID})),n=l.opt(this.testPage_,(function(e){return e.customSizePPI})),r=l.opt(this.testPage_,(function(e){return e.customSizeFormat}));XCTAssertTrue("A4"==o),XCTAssertTrue(300==n),XCTAssertTrue(r==d.PageExportFormat.MILLIMETERS),XCTAssertTrue(this.testPage_.getPageExportData().pointDimensions.equal(new f.TheoSize(210,297).multiply(d.FormaPageExportData.POINTS_PER_INCH*d.FormaPageExportData.MM_TO_INCHES)))},validateAfterUndo:function(e,t){var o=l.opt(this.testPage_,(function(e){return e.sizeID})),n=l.opt(this.testPage_,(function(e){return e.customSizePPI})),r=l.opt(this.testPage_,(function(e){return e.customSizeFormat}));XCTAssertTrue(o==this.initialPageSizeID_),XCTAssertTrue(n==this.initialPageSizePPI_),XCTAssertTrue(r==this.initialPageSizeFormat_)},validateAfterRedo:function(e,t){var o=l.opt(this.testPage_,(function(e){return e.sizeID})),n=l.opt(this.testPage_,(function(e){return e.customSizePPI})),r=l.opt(this.testPage_,(function(e){return e.customSizeFormat}));XCTAssertTrue("A4"==o),XCTAssertTrue(300==n),XCTAssertTrue(r==d.PageExportFormat.MILLIMETERS),XCTAssertTrue(this.testPage_.getPageExportData().pointDimensions.equal(new f.TheoSize(210,297).multiply(d.FormaPageExportData.POINTS_PER_INCH*d.FormaPageExportData.MM_TO_INCHES)))}}}),i),s.PageSizePhoneTest=(a=function(){this.actionSequence_PageSizePhone=[],this.testDoc_=null,this.testPage_=null,this.initialPageSizeID_="",this.initialPageSizePPI_=d.FormaPageExportData.DEFAULT_PPI,this.initialPageSizeFormat_=d.PageExportFormat.PIXELS,c.ActionTestBase.call(this)},l.defineClass({name:"PageSizePhoneTest",ctor:a,superName:"ActionTestBase",props:{setUpActionSequence:function(e,t,o){var n,r,i;this.testDoc_=o,this.testPage_=o.firstPage,this.initialPageSizeID_=(n=l.opt(this.testPage_,(function(e){return e.sizeID})))||null!=n?n:"",this.initialPageSizePPI_=(r=l.opt(this.testPage_,(function(e){return e.customSizePPI})))||null!=r?r:300,this.initialPageSizeFormat_=(i=l.opt(this.testPage_,(function(e){return e.customSizeFormat})))||null!=i?i:d.PageExportFormat.PIXELS},populateActionSequence:function(e,t,o){var n=this,r=p.DesignSizeLibrary.getById("iPhone");return u.CorePromise.resolve([function(){return new h.ChangePageSizeAction(n.testPage_,r)}])},validateAfterActionSequence:function(e,t){var o=l.opt(this.testPage_,(function(e){return e.sizeID})),n=l.opt(this.testPage_,(function(e){return e.customSizePPI})),r=l.opt(this.testPage_,(function(e){return e.customSizeFormat}));XCTAssertTrue("iPhone"==o),XCTAssertTrue(300==n),XCTAssertTrue(r==d.PageExportFormat.PIXELS),XCTAssertTrue(this.testPage_.getPageExportData().pixelDimensions.equal(new f.TheoSize(1080,1920)))},validateAfterUndo:function(e,t){var o=l.opt(this.testPage_,(function(e){return e.sizeID})),n=l.opt(this.testPage_,(function(e){return e.customSizePPI})),r=l.opt(this.testPage_,(function(e){return e.customSizeFormat}));XCTAssertTrue(o==this.initialPageSizeID_),XCTAssertTrue(n==this.initialPageSizePPI_),XCTAssertTrue(r==this.initialPageSizeFormat_)},validateAfterRedo:function(e,t){var o=l.opt(this.testPage_,(function(e){return e.sizeID})),n=l.opt(this.testPage_,(function(e){return e.customSizePPI})),r=l.opt(this.testPage_,(function(e){return e.customSizeFormat}));XCTAssertTrue("iPhone"==o),XCTAssertTrue(300==n),XCTAssertTrue(r==d.PageExportFormat.PIXELS),XCTAssertTrue(this.testPage_.getPageExportData().pixelDimensions.equal(new f.TheoSize(1080,1920)))}}}),a)},K22b:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"FontDescriptor":{"className":"FontDescriptor","type":"object","properties":{"postscript-name":{"type":"string"}},"required":["postscript-name"]},"TheoFont":{"className":"TheoFont","type":"object","properties":{"postscript-name":{"type":"string"},"sparkElementID":{"type":"string"},"sparkRoles":{"type":"array","items":{"type":"string"}}},"required":["postscript-name"]},"TextRange":{"type":"array","items":{"type":"integer"},"maxItems":2,"minItems":2},"TextAttribute":{"className":"TextAttribute","type":"object","properties":{"start":{"type":"integer"},"length":{"type":"integer"},"value":{"type":["string","object","number","integer"]}},"required":["start","length","value"]},"TextAttributeTypes":{"oneOf":[{"$ref":"#/definitions/UTF16Attribute"},{"$ref":"#/definitions/FontDescriptorAttribute"},{"$ref":"#/definitions/FontSizeAttribute"},{"$ref":"#/definitions/FontColorAttribute"},{"$ref":"#/definitions/FontStrokeColorAttribute"},{"$ref":"#/definitions/FontStrokeWidthAttribute"},{"$ref":"#/definitions/TextLookAttribute"},{"$ref":"#/definitions/TrackingAttribute"}]},"UTF16Attribute":{"className":"UTF16Attribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"string"}}}]},"FontDescriptorAttribute":{"className":"FontDescriptorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"#/definitions/FontDescriptor"}}}]},"FontSizeAttribute":{"className":"FontSizeAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"number"}}}]},"FontColorAttribute":{"className":"FontColorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"Color.json#/definitions/SolidColor"}}}]},"FontStrokeColorAttribute":{"className":"FontStrokeColorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"Color.json#/definitions/SolidColor"}}}]},"FontStrokeWidthAttribute":{"className":"FontStrokeWidthAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"number"}}}]},"TextLookAttribute":{"className":"TextLookAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"integer"}}}]},"TrackingAttribute":{"className":"TrackingAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"number"}}}]},"TextModel":{"className":"TextModel","type":"object","properties":{"text":{"type":"array","items":{"$ref":"#/definitions/UTF16Attribute"},"maxItems":1},"font-name":{"type":"array","items":{"$ref":"#/definitions/FontDescriptorAttribute"},"maxItems":1},"font-size":{"type":"array","items":{"$ref":"#/definitions/FontSizeAttribute"},"maxItems":1},"font-color":{"type":"array","items":{"$ref":"#/definitions/FontColorAttribute"},"maxItems":1},"font-strokecolor":{"type":"array","items":{"$ref":"#/definitions/FontStrokeColorAttribute"},"maxItems":1},"font-strokewidth":{"type":"array","items":{"$ref":"#/definitions/FontStrokeWidthAttribute"},"maxItems":1},"text-look":{"type":"array","items":{"$ref":"#/definitions/TextLookAttribute"},"maxItems":1},"tracking":{"type":"array","items":{"$ref":"#/definitions/TrackingAttribute"},"maxItems":1}}},"ContentTextModel":{"className":"ContentTextModel","type":"object","properties":{"text":{"type":"array","items":{"$ref":"#/definitions/UTF16Attribute"},"maxItems":1}}}}}')},K8xQ:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"Assets":{"read-data":false,"type":"object","properties":{"path":{"type":"string","enum":["assets"]}}},"TheoDocumentData":{"className":"TheoDocumentData","type":"object","properties":{"shareData":{"type":"object","properties":{"scope":{"type":"string"}}}}},"ContentDocument":{"className":"ContentDocument","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["content"]},"type":{"type":"string","default":"application/vnd.adobe.theo.content+dcx"},"children":{"type":"array","items":[{"$ref":"ContentNodes.json#/definitions/RootContentNode"}]}},"required":["id","path","type"]}]},"DocumentHistory":{"className":"DocumentHistory","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["document-history"]},"entries":{"type":"array","items":{"type":"string"},"maxItems":100}},"required":["id","path","entries"]}]},"TheoDocument":{"className":"TheoDocument","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","default":"My Post"},"type":{"type":"string"},"format-version":{"type":"integer"},"watermark-enabled":{"type":"boolean","default":true},"shared":{"type":"boolean"},"modified-since-share":{"type":"boolean","default":false},"cp#assetId":{"type":"string"},"cp#shortId":{"type":"string"},"cp#publishedEtag":{"type":"string"},"cp#projectId":{"type":"string"},"cp#isExported":{"type":"boolean"},"authctx#ctxid":{"type":"string"},"authctx#ctxurn":{"type":"string"},"authctx#ctxname":{"type":"string"},"authctx#themeid":{"type":"string"},"authctx#uses-branded-elements":{"type":"boolean","description":"authoringContextID_.length > 0"},"doc#data":{"$ref":"#/definitions/TheoDocumentData"},"constrainedImages":{"type":"object","properties":{"stockImages":{"type":"object","properties":{"extended":{"type":"array","items":{"type":"string"}},"standard":{"type":"array","items":{"type":"string"}},"unlicensed":{"type":"array","items":{"type":"string"}}}}}},"children":{"type":"array","items":{"anyOf":[{"$ref":"Formae.json#/definitions/FormaPage"},{"$ref":"#/definitions/ContentDocument"},{"$ref":"Color.json#/definitions/ColorThemeDocument"},{"$ref":"#/definitions/DocumentHistory"},{"$ref":"#/definitions/Assets"}]},"uniqueItems":true,"maxItems":5}},"manifest-properties":["format-version","cp#assetId","cp#shortId","cp#publishedEtag","cp#projectId","cp#isExported","authctx#ctxid","authctx#ctxname","authctx#ctxurn","authctx#themeid","authctx#uses-branded-elements"],"required":["id","format-version","doc#data"]}}}')},KB91:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("sJQG"),l=o("sWrh");i.TIME_PRECISION=1e-4,i.PGMLoopingFunction=(n=function e(t,o){this.childFn=o,l.PGMUnaryFunction.call(this,e.TYPE,t,o.range)},r={},a.defineClass({name:"PGMLoopingFunction",ctor:n,superName:"PGMUnaryFunction",statics:{TYPE:"pgm-looping-function",PROP_CHILD_FUNC:{get:function(){return void 0===r.PROP_CHILD_FUNC&&(r.PROP_CHILD_FUNC=n.TYPE+"-childFn"),r.PROP_CHILD_FUNC}},create:function(e,t,o){var r=e+(o.domain.end-o.domain.start)*a.toDouble(t);return new n(new s.PGMRange(e,r),o)},decodeFn:function(e,t,o,r){var i;return(i=l.PGMUnaryFunction.decode(a.as(e[n.PROP_CHILD_FUNC],["Dictionary","String","Any"]),r))?new n(t,i):null}},props:{applyU:function(e){return this.childFn.domain.applyU(e)-this.childFn.domain.start},apply:function(e){var t=this.childFn.domain.end-this.childFn.domain.start;if(t<i.TIME_PRECISION)return this.childFn.apply(e);var o=this.domain.boundedU(e),n=(o=(o=this.domain.applyU(o))-this.domain.start-this.childFn.domain.start)%t;return n<0&&(n=t+n),n<i.TIME_PRECISION&&e>this.domain.start&&(n=t),n+=this.childFn.domain.start,this.childFn.apply(n)},isEqualTo:function(e){var t;return!!(t=a.as(e,n))&&t.childFn.isEqualTo(this.childFn)&&l.PGMUnaryFunction.prototype.isEqualTo.call(this,e)},encode:function(){var e=l.PGMUnaryFunction.prototype.encode.call(this);return e[n.PROP_CHILD_FUNC]=this.childFn.encode(),e}}}),n)},KDc2:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("GINV");r.StorageSpecInvalid=(n=function e(){a.StorageSpec.call(this,e.KIND)},i.defineClass({name:"StorageSpecInvalid",ctor:n,superName:"StorageSpec",statics:{KIND:"invalid"}}),n)},KGt1:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"ImageAdjustments":{"className":"ImageAdjustments","type":"object","properties":{"blur":{"type":"number"},"sharpness":{"type":"number"},"shadows":{"type":"number"},"highlights":{"type":"number"},"saturation":{"type":"number"},"brightness":{"type":"number"},"exposure":{"type":"number"},"contrast":{"type":"number"},"warmth":{"type":"number"},"tint":{"type":"number"},"fade":{"type":"number"},"vibrance":{"type":"number"}}},"FormaStyleBase":{"type":"object","properties":{"opacity":{"type":"number"},"color-table":{"$ref":"Color.json#/definitions/ColorTable"},"filter":{"$ref":"Filters.json#/definitions/ImageFilterTypes"},"adjustments":{"$ref":"#/definitions/ImageAdjustments"},"blend-mode":{"type":"string","enum":["normal","screen","multiply","overlay","softlight","hardlight","colordodge","colorburn","darken","lighten","difference","exclusion","hue","saturation","color","luminosity"]}}},"FormaStyle":{"className":"FormaStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"type":"string","enum":["FormaStyle"]}},"required":["kind"]}]},"FormaStyleTypes":{"oneOf":[{"$ref":"#/definitions/RootStyle"},{"$ref":"#/definitions/ShapeStyle"},{"$ref":"#/definitions/TextStyle"},{"$ref":"#/definitions/ImageStyle"},{"$ref":"#/definitions/VideoStyle"},{"$ref":"#/definitions/LockupStyle"},{"$ref":"#/definitions/GridStyle"},{"$ref":"#/definitions/FrameStyle"},{"$ref":"#/definitions/FormaStyle"}]},"RootStyle":{"className":"RootStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["RootStyle"]},"color":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"}},"required":["kind"]}]},"ShapeStyle":{"className":"ShapeStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["ShapeStyle"]},"colors":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"}},"required":["kind"]}]},"TextStyle":{"className":"TextStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["TextStyle"]}},"required":["kind"]}]},"FrameStyle":{"className":"FrameStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["FrameStyle"]},"cutout-mode":{"type":"integer","default":0}},"required":["kind","cutout-mode"]}]},"ImageStyleBase":{"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"name":{"type":"string","default":"None"},"colors":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"},"filter-name":{"type":"string","description":"Deprecated"}}}]},"ImageStyle":{"className":"ImageStyle","allOf":[{"$ref":"#/definitions/ImageStyleBase"},{"properties":{"kind":{"enum":["ImageStyle"]}},"required":["kind"]}]},"VideoStyle":{"className":"VideoStyle","allOf":[{"$ref":"#/definitions/ImageStyleBase"},{"properties":{"kind":{"enum":["VideoStyle"]},"volume":{"type":"number"},"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"duration":{"$ref":"Root.json#/definitions/TheoTime"}},"required":["kind"]}]},"LockupStyleBase":{"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["LockupStyle"]},"fonts":{"type":"array","items":{"$ref":"Text.json#/definitions/TheoFont"}},"linebreak":{"type":"boolean"},"backingArtworkID":{"type":"string"},"colors":{"allOf":[{"$ref":"Color.json#/definitions/ColorTable"},{"description":"Deprecated"}]}},"required":["kind"]}]},"TextPath":{"type":"object","properties":{"flex":{"type":"number","default":1},"segment":{"type":"array","items":{"$ref":"#/definitions/TextPathSegment"}}}},"TextPathSegment":{"type":"object","properties":{"p0":{"$ref":"Root.json#/definitions/TheoPoint"},"p1":{"$ref":"Root.json#/definitions/TheoPoint"},"p2":{"$ref":"Root.json#/definitions/TheoPoint"},"p3":{"$ref":"Root.json#/definitions/TheoPoint"}}},"LockupStyle":{"className":"LockupStyle","allOf":[{"$ref":"#/definitions/LockupStyleBase"},{"properties":{"spacing":{"type":"number","default":0.35},"tracking":{"type":"number","default":0},"relativeFontScale":{"type":"number","default":1},"padding":{"type":"number","default":0.65},"strokeWeight":{"type":"number","default":0.1},"backing":{"type":"integer","default":0},"layout":{"type":"integer","default":0},"alignment":{"type":"integer","default":-1},"verticalAlignment":{"type":"integer","default":3},"pathID":{"type":"integer","default":-1},"customPath":{"$ref":"#/definitions/TextPath"},"shadowAngle":{"type":"number","default":135},"shadowOffset":{"type":"number","default":0.5},"text-opacity":{"type":"number","default":1,"description":"Deprecated"},"backing-opacity":{"type":"number","default":1},"opacity":{"type":"number","description":"Deprecated"},"knockout":{"type":"integer","default":0},"wheel-used":{"type":"boolean","default":false},"character-styles":{"type":"object","patternProperties":{"^.*$":{"$ref":"#/definitions/CharacterStyle"}}}}}]},"CharacterStyle":{"className":"CharacterStyle","allOf":[{"$ref":"#/definitions/LockupStyleBase"},{"properties":{"spacing":{"type":"number","default":-1},"tracking":{"type":"number","default":-99},"padding":{"type":"number","default":0},"strokeWeight":{"type":"number","default":-1},"backing":{"type":"integer","default":0},"layout":{"type":"integer","default":-1},"alignment":{"type":"integer","default":-1},"verticalAlignment":{"type":"integer","default":3},"pathID":{"type":"integer","default":-1},"customPath":{"$ref":"#/definitions/TextPath"},"shadowAngle":{"type":"number","default":-1},"shadowOffset":{"type":"number","default":-1},"text-opacity":{"type":"number","default":-1,"description":"Deprecated"},"backing-opacity":{"type":"number","default":-1},"opacity":{"type":"number","description":"Deprecated"},"knockout":{"type":"integer","default":-1}}}]},"GridStyle":{"className":"GridStyle","definitions":{"GridCell":{"type":"array","items":[{"$ref":"Root.json#/definitions/TheoRect"},{"type":"number"},{"type":"string"}]}},"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["GridStyle"]},"name":{"type":"string","default":"None"},"category":{"type":"string"},"spacing":{"type":"number","default":0},"crop-type":{"type":"integer"},"grid-cells":{"type":"array","items":{"$ref":"#/definitions/GridStyle/definitions/GridCell"}},"forma-mapping":{"type":"array","items":{"type":"array","items":[{"type":"string"},{"$ref":"#/definitions/GridStyle/definitions/GridCell"}]}}},"required":["kind"]}]}}}')},KQHZ:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("tvh+"),s=o("yGNn"),l=o("fNpk"),c=o("GINV");r.StorageSpecContentLiteral=(n=function e(t){this.content=t,c.StorageSpec.call(this,e.KIND)},i.defineClass({name:"StorageSpecContentLiteral",ctor:n,superName:"StorageSpec",statics:{KIND:"content-literal",KEY_CONTENT:"content",decodeSpec:function(e){var t,o;return(t=i.as(e[n.KEY_CONTENT],["Dictionary","String","Any"]))?(o=a.CoreContent.decode(t))?new n(o):(l.LegacyCoreAssert.fail("Could not decode content",void 0,"StorageSpecContentLiteral.decodeSpec","StorageSpecContentLiteral.swift",35),null):(l.LegacyCoreAssert.fail("missing required parameter",void 0,"StorageSpecContentLiteral.decodeSpec","StorageSpecContentLiteral.swift",38),null)}},props:{encode:function(){var e={};return e[c.StorageSpec.KEY_KIND]=n.KIND,e[n.KEY_CONTENT]=this.content.encode(),e},read:function(){return s.CorePromise.resolve(this.content)},canRead:function(){return!0},readUsingContext:function(e){return s.CorePromise.resolve(this.content)},isEqualTo:function(e){var t;return!!(t=i.as(e,n))&&this.content.isEqualTo(t.content)&&c.StorageSpec.prototype.isEqualTo.call(this,e)}}}),n)},Kkml:function(e,t,o){var n,r,i,a=t,s=o("oAGj"),l=o("iCxV");a.CollapseBehavior=s.defineEnum("CollapseBehavior",{NEVER:0,ALWAYS:1,GESTURE_DEPENDENT:2}),a.UserAction=(n=function(e,t,o,n,r){void 0===t&&(t=a.CollapseBehavior.NEVER),void 0===o&&(o=!0),void 0===n&&(n=null),void 0===r&&(r=!0),this.description=e,this.undoable=r,this.collapseSequential=t,this.compounding=o,this.scope=n,null!=n||o&&t!=a.CollapseBehavior.ALWAYS||s.opt(l.Host.logging,(function(e){return e.warning("scope is required for non-compounding and collapse-sequential user actions")}))},s.defineClass({name:"UserAction",ctor:n,statics:{SCOPE_DOCUMENT:"document"}}),n),a.ChangeBrandingUserAction=(r=function(e,t,o){this.fromDocBrandID=e,this.fromActiveBrandID=t,this.toBrandID=o,a.UserAction.call(this,"k_branding_change",void 0,!0,null)},s.defineClass({name:"ChangeBrandingUserAction",ctor:r,superName:"UserAction"}),r),a.UserActions=(i=function(){},s.defineClass({name:"UserActions",ctor:i,statics:{ApplyTemplate:function(){return new a.UserAction("k_apply_template",void 0,!1,a.UserAction.SCOPE_DOCUMENT)},SetColorTheme:function(){return new a.UserAction("k_set_color_palette",void 0,!1,a.UserAction.SCOPE_DOCUMENT)},ShuffleColorTheme:function(){return new a.UserAction("k_shuffle_color_palette")},ChangePageSize:function(){return new a.UserAction("k_change_page_size",void 0,!1,a.UserAction.SCOPE_DOCUMENT)},RecordOriginalPageSize:function(){return new a.UserAction("k_record_size",void 0,void 0,void 0,!1)},RecordCreateFromRemix:function(){return new a.UserAction("k_record_create_from_remix",void 0,void 0,void 0,!1)},SetGridStyle:function(){return new a.UserAction("k_set_grid_layout",void 0,!1,a.UserAction.SCOPE_DOCUMENT)},EnterGridLayoutMode:function(){return new a.UserAction("k_enter_grid_mode",void 0,void 0,void 0,!1)},ChangeBackgroundShape:function(e){return new a.UserAction("k_change_background_shape",void 0,!1,e)},SetTextLook:function(e){return new a.UserAction("k_set_text_look",void 0,!1,e)},SetTextEffectsAttributes:function(){return new a.UserAction("k_set_text_effects",a.CollapseBehavior.GESTURE_DEPENDENT)},ModifyColorTheme:function(){return new a.UserAction("k_palette_change")},AddBranding:function(){return new a.UserAction("k_branding_add",void 0,!0,null)},ChangeBranding:function(e,t,o){return new a.ChangeBrandingUserAction(e,t,o)},RemoveBranding:function(){return new a.UserAction("k_branding_remove",void 0,!0,null)},ChangeColor:function(e){return new a.UserAction("k_change_color",void 0,void 0,e)},SetFont:function(e){return new a.UserAction("k_set_font",void 0,!1,e)},ReplaceMissingFonts:function(){return new a.UserAction("k_replace_missing_fonts",void 0,void 0,void 0,!1)},ChangeTextAlignment:function(e){return new a.UserAction("k_text_alignment",void 0,!1,e)},ChangeTextColor:function(e){return new a.UserAction("k_change_text_color",void 0,void 0,e)},SetHighlightMethod:function(e){return new a.UserAction("k_highlight_method",void 0,!1,e)},EnterCharStyleMode:function(e){return new a.UserAction("k_enter_char_style",void 0,void 0,void 0,e)},ExitCharStyleMode:function(){return new a.UserAction("k_exit_char_style",void 0,void 0,void 0,!1)},ApplyCharStyle:function(){return new a.UserAction("k_apply_char_style")},ApplyCharStyleWithoutUI:function(){return new a.UserAction("k_apply_char_style_without_ui")},ApplyFilter:function(){return new a.UserAction("k_apply_filter")},ShuffleFilter:function(){return new a.UserAction("k_shuffle_filter")},SetImageCutout:function(){return new a.UserAction("k_set_image_cutout")},SetBackgroundOpacity:function(){return new a.UserAction("k_set_background_opacity")},ChangeBlendMode:function(){return new a.UserAction("k_set_blendmode")},DeleteItem:function(e){return new a.UserAction("k_delete",void 0,void 0,void 0,e)},ReplaceImageWithShape:function(){return new a.UserAction("k_replace_image_with_shape")},ResizeItem:function(){return new a.UserAction("k_resize",a.CollapseBehavior.GESTURE_DEPENDENT)},MoveItem:function(){return new a.UserAction("k_move",a.CollapseBehavior.GESTURE_DEPENDENT)},AdjustScale:function(){return new a.UserAction("k_scale")},AdjustRotation:function(){return new a.UserAction("k_rotate")},ChangeImageAdjustments:function(){return new a.UserAction("k_image_adjustments",a.CollapseBehavior.GESTURE_DEPENDENT)},ChangeVideoVolume:function(){return new a.UserAction("k_video volume")},ChangeVideoTimes:function(){return new a.UserAction("k_video times")},AddText:function(){return new a.UserAction("k_add_text")},AddTextUI:function(){return new a.UserAction("k_add_text_ui",void 0,void 0,void 0,!1)},AddBadge:function(){return new a.UserAction("k_add_badge")},SetText:function(e){return new a.UserAction("k_set_text",void 0,!1,e)},SetTextCollapse:function(e){return new a.UserAction("k_set_text",a.CollapseBehavior.ALWAYS,!1,e)},ShuffleBackgroundShape:function(e){return new a.UserAction("k_shuffle_background_shape",void 0,void 0,e)},SetTracking:function(){return new a.UserAction("k_set_tracking",a.CollapseBehavior.GESTURE_DEPENDENT)},ChangeLineSpacing:function(){return new a.UserAction("k_change_line_spacing")},SetLeading:function(){return new a.UserAction("k_set_leading",a.CollapseBehavior.GESTURE_DEPENDENT)},SetPadding:function(){return new a.UserAction("k_padding",a.CollapseBehavior.GESTURE_DEPENDENT)},SetRelativeFontScale:function(){return new a.UserAction("k_set_relative_font_scale",a.CollapseBehavior.GESTURE_DEPENDENT)},ChangeTextAttributes:function(){return new a.UserAction("k_change_text_attributes")},SetFontSize:function(){return new a.UserAction("k_set_font_size",a.CollapseBehavior.GESTURE_DEPENDENT)},MatchSize:function(){return new a.UserAction("k_match_size")},ToggleLineBreak:function(){return new a.UserAction("k_toggle_line_break")},SetNextSpacingSequence:function(){return new a.UserAction("k_set_next_spacing_sequence")},ChangeOpacity:function(){return new a.UserAction("k_change_opacity",a.CollapseBehavior.GESTURE_DEPENDENT)},AlignFormae:function(){return new a.UserAction("k_align_item")},DistributeFormae:function(){return new a.UserAction("k_distribute_item")},ChangeZOrder:function(){return new a.UserAction("k_change_zorder",a.CollapseBehavior.GESTURE_DEPENDENT)},SendForwardBackward:function(){return new a.UserAction("k_send_forward_backward")},ShuffleColor:function(){return new a.UserAction("k_shuffle_color")},AddLogo:function(){return new a.UserAction("k_add_logo")},AddImage:function(){return new a.UserAction("k_add_image")},AddIcon:function(){return new a.UserAction("k_add_icon")},AddShape:function(){return new a.UserAction("k_add_shape")},AddVideo:function(){return new a.UserAction("k_add_video")},ReplaceVideoContent:function(){return new a.UserAction("k_replace_video_content")},TrimVideo:function(){return new a.UserAction("k_trim_video")},ReplaceImage:function(){return new a.UserAction("k_replace_image")},ReplaceIcon:function(){return new a.UserAction("k_replace_icon")},FitImageToFrame:function(){return new a.UserAction("k_fit_image")},ChangeTextStyle:function(){return new a.UserAction("k_change_text_style")},ShuffleGridStyle:function(){return new a.UserAction("k_shuffle_grid_layout")},SetLayoutMargin:function(){return new a.UserAction("k_set_layout_spacing",a.CollapseBehavior.GESTURE_DEPENDENT)},CreateCollage:function(){return new a.UserAction("k_create_collage")},DeleteSection:function(){return new a.UserAction("k_delete_section")},ApplyTextStyleSuggestion:function(e){return new a.UserAction("k_apply_text_style_wheel",void 0,void 0,e)},ApplyTextEmphasisSuggestion:function(e){return new a.UserAction("k_apply_text_emphasis_suggestion",void 0,void 0,e)},ChangeBordersMargins:function(){return new a.UserAction("k_change_borders_margins")},DuplicateItems:function(e){return new a.UserAction("k_duplicate_item")},GroupItems:function(){return new a.UserAction("k_group")},UngroupItems:function(){return new a.UserAction("k_ungroup")},FlipItem:function(){return new a.UserAction("k_flip_item")},NudgeItem:function(e){return new a.UserAction("k_nudge_item",a.CollapseBehavior.ALWAYS,void 0,e)},RotateItem:function(){return new a.UserAction("k_rotate_item",a.CollapseBehavior.GESTURE_DEPENDENT)},ScaleItem:function(){return new a.UserAction("k_scale_item",a.CollapseBehavior.GESTURE_DEPENDENT)},RescueItem:function(){return new a.UserAction("k_rescue",void 0,void 0,void 0,!1)},BrandDocument:function(){return new a.UserAction("k_brandify")},SetWatermark:function(){return new a.UserAction("k_set_watermark")},ApplyAnimationStyle:function(){return new a.UserAction("k_apply_animation_style")},ApplyAnimationStyleForPlayback:function(){return new a.UserAction("k_animation_style_for_playback",void 0,void 0,void 0,!1)},ResetAnimation:function(){return new a.UserAction("k_reset_animation",void 0,void 0,void 0,!1)},ShuffleAnimationStyle:function(){return new a.UserAction("k_shuffle_animation")},ApplyAndPrepareAnimationAction:function(){return new a.UserAction("k_apply_and_prepare_animation")},SwapCells:function(){return new a.UserAction("k_swap_cells")},SwapGridCells:function(){return new a.UserAction("k_swap_grid_cells")},ModifyStyleRanges:function(){return new a.UserAction("k_modify_char_style_range",a.CollapseBehavior.GESTURE_DEPENDENT)},VisualizeStructure:function(){return new a.UserAction("k_visualize_structure")},Test:function(){return new a.UserAction("k_test_case")},SetImageAsFloating:function(){return new a.UserAction("k_set_floating")},SetImageAsBackground:function(){return new a.UserAction("k_set_background")},AddHiddenImageToGrid:function(){return new a.UserAction("k_add_hidden_image_to_grid")},EnterCropMode:function(){return new a.UserAction("k_enter_crop_mode")},ExitCropMode:function(){return new a.UserAction("k_exit_crop_mode")},EnterRefineCutoutMode:function(){return new a.UserAction("k_enter_refine_cutout_mode")},ExitRefineCutoutMode:function(){return new a.UserAction("k_exit_refine_cutout_mode")},UpdateCutoutMask:function(){return new a.UserAction("k_update_cutout_mask")},RemoveCutoutMaskCompletely:function(){return new a.UserAction("k_remove_cutout_mask_completely")},InvertCutoutMask:function(){return new a.UserAction("k_invert_cutout_mask")},ToggleRefineCutoutFullImage:function(){return new a.UserAction("k_toggle_refine_cutout_full_image",void 0,void 0,void 0,!1)},ApplyCutoutMaskToImage:function(){return new a.UserAction("k_applycutoutmask")},ApplyRasterMaskToImage:function(){return new a.UserAction("k_applyrastermask")},ApplyShapeMaskToImage:function(){return new a.UserAction("k_applyshapemask",void 0,!1,a.UserAction.SCOPE_DOCUMENT)},SetImageCropToFreeform:function(){return new a.UserAction("k_set_imagecrop_to_freeform",void 0,!1,a.UserAction.SCOPE_DOCUMENT)},CropImageToRatio:function(){return new a.UserAction("k_crop_image_to_ratio",void 0,!1,a.UserAction.SCOPE_DOCUMENT)}}}),i)},KyAS:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("c9Jm"),l=o("9tXS");i.EnableWatermarkTest=(n=function(){this.actionSequence_TurnOnWatermark=[function(){return new l.SetWatermarkAction(!0)}],this.testDoc_=null,this.wasEnabled_=!1,s.ActionTestBase.call(this)},a.defineClass({name:"EnableWatermarkTest",ctor:n,superName:"ActionTestBase",props:{setUpActionSequence:function(e,t,o){this.testDoc_=o,this.wasEnabled_=o.watermarkEnabled},validateAfterActionSequence:function(e,t){XCTAssertNotNil(this.testDoc_),XCTAssertFalse(this.testDoc_.watermarkEnabled)},validateAfterUndo:function(e,t){XCTAssertTrue(this.testDoc_.watermarkEnabled==this.wasEnabled_)},validateAfterRedo:function(e,t){XCTAssertFalse(this.testDoc_.watermarkEnabled)}}}),n),i.DisableWatermarkTest=(r=function(){this.actionSequence_TurnOffWatermark=[function(){return new l.SetWatermarkAction(!1)}],this.testDoc_=null,this.wasEnabled_=!1,s.ActionTestBase.call(this)},a.defineClass({name:"DisableWatermarkTest",ctor:r,superName:"ActionTestBase",props:{setUpActionSequence:function(e,t,o){this.testDoc_=o,this.wasEnabled_=o.watermarkEnabled},validateAfterActionSequence:function(e,t){XCTAssertNotNil(this.testDoc_),XCTAssertFalse(this.testDoc_.watermarkEnabled)},validateAfterUndo:function(e,t){XCTAssertTrue(this.testDoc_.watermarkEnabled==this.wasEnabled_)},validateAfterRedo:function(e,t){XCTAssertFalse(this.testDoc_.watermarkEnabled)}}}),r)},KyrH:function(e,t,o){o("oAGj")},L74r:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"ImageAdjustments":{"className":"ImageAdjustments","type":"object","properties":{"blur":{"type":"number"},"sharpness":{"type":"number"},"shadows":{"type":"number"},"highlights":{"type":"number"},"saturation":{"type":"number"},"brightness":{"type":"number"},"exposure":{"type":"number"},"contrast":{"type":"number"},"warmth":{"type":"number"},"tint":{"type":"number"},"fade":{"type":"number"},"vibrance":{"type":"number"}}},"FormaStyleBase":{"type":"object","properties":{"opacity":{"type":"number"},"color-table":{"$ref":"Color.json#/definitions/ColorTable"},"filter":{"$ref":"Filters.json#/definitions/ImageFilterTypes"},"adjustments":{"$ref":"#/definitions/ImageAdjustments"}}},"FormaStyle":{"className":"FormaStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"type":"string","enum":["FormaStyle"]}},"required":["kind"]}]},"FormaStyleTypes":{"oneOf":[{"$ref":"#/definitions/RootStyle"},{"$ref":"#/definitions/ShapeStyle"},{"$ref":"#/definitions/TextStyle"},{"$ref":"#/definitions/ImageStyle"},{"$ref":"#/definitions/VideoStyle"},{"$ref":"#/definitions/LockupStyle"},{"$ref":"#/definitions/GridStyle"},{"$ref":"#/definitions/FrameStyle"},{"$ref":"#/definitions/FormaStyle"}]},"RootStyle":{"className":"RootStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["RootStyle"]},"color":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"}},"required":["kind"]}]},"ShapeStyle":{"className":"ShapeStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["ShapeStyle"]},"colors":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"}},"required":["kind"]}]},"TextStyle":{"className":"TextStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["TextStyle"]}},"required":["kind"]}]},"FrameStyle":{"className":"FrameStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["FrameStyle"]},"cutout-mode":{"type":"integer","default":0}},"required":["kind","cutout-mode"]}]},"ImageStyleBase":{"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"name":{"type":"string","default":"None"},"colors":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"},"filter-name":{"type":"string","description":"Deprecated"}}}]},"ImageStyle":{"className":"ImageStyle","allOf":[{"$ref":"#/definitions/ImageStyleBase"},{"properties":{"kind":{"enum":["ImageStyle"]}},"required":["kind"]}]},"VideoStyle":{"className":"VideoStyle","allOf":[{"$ref":"#/definitions/ImageStyleBase"},{"properties":{"kind":{"enum":["VideoStyle"]},"volume":{"type":"number"},"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"duration":{"$ref":"Root.json#/definitions/TheoTime"}},"required":["kind"]}]},"LockupStyleBase":{"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["LockupStyle"]},"fonts":{"type":"array","items":{"$ref":"Text.json#/definitions/TheoFont"}},"linebreak":{"type":"boolean"},"backingArtworkID":{"type":"string"},"colors":{"allOf":[{"$ref":"Color.json#/definitions/ColorTable"},{"description":"Deprecated"}]}},"required":["kind"]}]},"TextPath":{"type":"object","properties":{"flex":{"type":"number","default":1},"segment":{"type":"array","items":{"$ref":"#/definitions/TextPathSegment"}}}},"TextPathSegment":{"type":"object","properties":{"p0":{"$ref":"Root.json#/definitions/TheoPoint"},"p1":{"$ref":"Root.json#/definitions/TheoPoint"},"p2":{"$ref":"Root.json#/definitions/TheoPoint"},"p3":{"$ref":"Root.json#/definitions/TheoPoint"}}},"LockupStyle":{"className":"LockupStyle","allOf":[{"$ref":"#/definitions/LockupStyleBase"},{"properties":{"spacing":{"type":"number","default":0.35},"tracking":{"type":"number","default":0},"relativeFontScale":{"type":"number","default":1},"padding":{"type":"number","default":0.65},"strokeWeight":{"type":"number","default":0.1},"backing":{"type":"integer","default":0},"layout":{"type":"integer","default":0},"alignment":{"type":"integer","default":-1},"verticalAlignment":{"type":"integer","default":3},"pathID":{"type":"integer","default":-1},"customPath":{"$ref":"#/definitions/TextPath"},"opacityRule":{"type":"integer","default":0},"shadowAngle":{"type":"number","default":135},"shadowOffset":{"type":"number","default":0.5},"text-opacity":{"type":"number","default":1,"description":"Deprecated"},"backing-opacity":{"type":"number","default":1},"opacity":{"type":"number","description":"Deprecated"},"knockout":{"type":"integer","default":0},"wheel-used":{"type":"boolean","default":false},"character-styles":{"type":"object","patternProperties":{"^.*$":{"$ref":"#/definitions/CharacterStyle"}}}}}]},"CharacterStyle":{"className":"CharacterStyle","allOf":[{"$ref":"#/definitions/LockupStyleBase"},{"properties":{"spacing":{"type":"number","default":-1},"tracking":{"type":"number","default":-99},"padding":{"type":"number","default":0},"strokeWeight":{"type":"number","default":-1},"backing":{"type":"integer","default":0},"layout":{"type":"integer","default":-1},"alignment":{"type":"integer","default":-1},"verticalAlignment":{"type":"integer","default":3},"pathID":{"type":"integer","default":-1},"customPath":{"$ref":"#/definitions/TextPath"},"opacityRule":{"type":"integer","default":-1},"shadowAngle":{"type":"number","default":-1},"shadowOffset":{"type":"number","default":-1},"text-opacity":{"type":"number","default":-1,"description":"Deprecated"},"backing-opacity":{"type":"number","default":-1},"opacity":{"type":"number","description":"Deprecated"},"knockout":{"type":"integer","default":-1}}}]},"GridStyle":{"className":"GridStyle","definitions":{"GridCell":{"type":"array","items":[{"$ref":"Root.json#/definitions/TheoRect"},{"type":"number"},{"type":"string"}]}},"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["GridStyle"]},"name":{"type":"string","default":"None"},"category":{"type":"string"},"spacing":{"type":"number","default":0},"crop-type":{"type":"integer"},"grid-cells":{"type":"array","items":{"$ref":"#/definitions/GridStyle/definitions/GridCell"}},"forma-mapping":{"type":"array","items":{"type":"array","items":[{"type":"string"},{"$ref":"#/definitions/GridStyle/definitions/GridCell"}]}}},"required":["kind"]}]}}}')},MO6F:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("gXiO"),l=o("fNpk"),c=o("90dd");i.TheoBaseSubscription=(n=function(e,t,o,n){this.active=!0,this.publisher=e,this.msgType=t,this.cbfn=o,this.subscriber=n},a.defineClass({name:"TheoBaseSubscription",ctor:n,superName:"CoreObject",statics:{_implements:function(e){return"TheoMessageSubscription"==e}},props:{unsubscribe:function(){var e=this;this.active&&a.opt(this.publisher,(function(t){return t.unsubscribe(e)}))}}}),n),i.TheoBasePublishing=(r=function(){this.subscriptions_={},s.CoreObject.call(this)},a.defineClass({name:"TheoBasePublishing",ctor:r,superName:"CoreObject",props:{subscribeWithCallback:function(e,t){null==this.subscriptions_[t]&&(this.subscriptions_[t]=[]);var o=new i.TheoBaseSubscription(this.owner,t,e,null);return this.subscriptions_[t].push(o),o},subscribe:function(e,t){null==this.subscriptions_[t]&&(this.subscriptions_[t]=[]);var o=new i.TheoBaseSubscription(this.owner,t,null,e);return this.subscriptions_[t].push(o),o},unsubscribe:function(e){var t,o,n;(t=a.as(e,i.TheoBaseSubscription))&&(o=this.subscriptions_[t.msgType])?null!=(n=a.indexOf(o,t))?(this.subscriptions_[t.msgType].splice(n,1),t.active=!1):l.LegacyCoreAssert.fail("TheoBasePublisher: trying to unsubscribe a subscription that isn't active",void 0,"TheoBasePublishing.unsubscribe","TheoBasePublishing.swift",117):l.LegacyCoreAssert.fail("TheoBasePublisher: trying to unsubscribe a subscription that isn't mine!",void 0,"TheoBasePublishing.unsubscribe","TheoBasePublishing.swift",120)},publish:function(e){var t;if(t=this.subscriptions_[e.type]){c.TheoMessageStatistics.instance.published(e,t.length);for(var o=a.iter(t);!o.done;o.next()){var n=o.value;null!=n&&(null!=n.cbfn?n.cbfn(e):null!=n.subscriber&&n.subscriber.onMessage(e))}}else c.TheoMessageStatistics.instance.published(e,0)}}}),r)},MnRR:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("gXiO"),s=o("fNpk"),l=o("oKlP");r.TheoLine=(n=function(e,t){void 0===t&&(t=null),this.p1=e,this.p2=t||e,a.CoreObject.call(this)},i.defineClass({name:"TheoLine",ctor:n,superName:"CoreObject",props:{midpoint:function(){return this.eval(.5)},angleWith:function(e){var t=this.p2.subtract(this.p1),o=e.p2.subtract(e.p1),n=Math.atan2(t.crossProduct(o),t.dotProduct(o));return s.LegacyCoreAssert.isFalse(isNaN(n),"line angle computation returned NaN",void 0,"TheoLine.angleWith","TheoLine.swift",30),n},length:{get:function(){return this.p2.subtract(this.p1).length()}},distanceToPoint:function(e){return this.projectionOffset(e).length()},projectionOffset:function(e){return this.projectedPoint(e).subtract(e)},projectedPoint:function(e){return this.eval(this.locate(e))},transform:function(e){var t=i.clone(e.transformPoints([this.p1,this.p2]));return new n(t[0],t[1])},reverse:function(){return new n(this.p2,this.p1)},projectedPosition:function(e){var t=this.projectedPoint(e);return Math.max((t.x-this.p2.x)/(this.p1.x-this.p2.x+1e-4),(t.y-this.p2.y)/(this.p1.y-this.p2.y+1e-4))},unionWith:function(e){var t=this.locate(e.p1),o=this.locate(e.p2),r=Math.min(0,t,o),i=Math.max(1,t,o);return new n(this.eval(r),this.eval(i))},intersection:function(e){var t=(this.p1.x-this.p2.x)*(e.p1.y-e.p2.y)-(this.p1.y-this.p2.y)*(e.p1.x-e.p2.x);if(0!=t){var o=(this.p1.x*this.p2.y-this.p1.y*this.p2.x)*(e.p1.x-e.p2.x)-(this.p1.x-this.p2.x)*(e.p1.x*e.p2.y-e.p1.y*e.p2.x),n=(this.p1.x*this.p2.y-this.p1.y*this.p2.x)*(e.p1.y-e.p2.y)-(this.p1.y-this.p2.y)*(e.p1.x*e.p2.y-e.p1.y*e.p2.x);return new l.TheoPoint(o/t,n/t)}return null},extendByFactor:function(e){return new n(this.eval(-e),this.eval(1+e))},extendByFixedLength:function(e){var t=e/this.length;return new n(this.eval(-t),this.eval(1+t))},extendRayByFixedLength:function(e){var t=e/this.length;return new n(this.p1,this.eval(1+t))},eval:function(e){return new l.TheoPoint(this.p1.x*(1-e)+this.p2.x*e,this.p1.y*(1-e)+this.p2.y*e)},locate:function(e){var t=this.p2.subtract(this.p1),o=e.subtract(this.p1);return t.dotProduct(o)/t.dotProduct(t)},asString:{get:function(){return i.toString("p1:%g %g, p2:%g %g",this.p1.x,this.p1.y,this.p2.x,this.p2.y)}},description:{get:function(){return i.toString("(%g,%g)..(%g,%g)",this.p1.x,this.p1.y,this.p2.x,this.p2.y)}},equalTo:function(e){return this.p1.equal(e.p1)&&this.p2.equal(e.p2)}}}),n),r._equality_TheoLine_TheoLine=function(e,t){return e.equalTo(t)}},Ms5S:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"FormaStyleBase":{"type":"object","properties":{"opacity":{"type":"number"},"color-table":{"$ref":"Color.json#/definitions/ColorTable"},"filter":{"$ref":"Filters.json#/definitions/ImageFilterTypes"}}},"FormaStyle":{"className":"FormaStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"type":"string","enum":["FormaStyle"]}},"required":["kind"]}]},"FormaStyleTypes":{"oneOf":[{"$ref":"#/definitions/RootStyle"},{"$ref":"#/definitions/ShapeStyle"},{"$ref":"#/definitions/TextStyle"},{"$ref":"#/definitions/ImageStyle"},{"$ref":"#/definitions/VideoStyle"},{"$ref":"#/definitions/LockupStyle"},{"$ref":"#/definitions/GridStyle"},{"$ref":"#/definitions/FormaStyle"}]},"RootStyle":{"className":"RootStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["RootStyle"]},"color":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"}},"required":["kind"]}]},"ShapeStyle":{"className":"ShapeStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["ShapeStyle"]},"colors":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"}},"required":["kind"]}]},"TextStyle":{"className":"TextStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["TextStyle"]}},"required":["kind"]}]},"ImageStyleBase":{"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"name":{"type":"string","default":"None"},"colors":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"},"filter-name":{"type":"string","description":"Deprecated"}}}]},"ImageStyle":{"className":"ImageStyle","allOf":[{"$ref":"#/definitions/ImageStyleBase"},{"properties":{"kind":{"enum":["ImageStyle"]}},"required":["kind"]}]},"VideoStyle":{"className":"VideoStyle","allOf":[{"$ref":"#/definitions/ImageStyleBase"},{"properties":{"kind":{"enum":["VideoStyle"]}},"required":["kind"]}]},"LockupStyleBase":{"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["LockupStyle"]},"fonts":{"type":"array","items":{"$ref":"Text.json#/definitions/TheoFont"}},"backingArtworkID":{"type":"string"},"colors":{"allOf":[{"$ref":"Color.json#/definitions/ColorTable"},{"description":"Deprecated"}]}},"required":["kind"]}]},"LockupStyle":{"className":"LockupStyle","allOf":[{"$ref":"#/definitions/LockupStyleBase"},{"properties":{"spacing":{"type":"number","default":0.35},"tracking":{"type":"number","default":0},"padding":{"type":"number","default":0.65},"strokeWeight":{"type":"number","default":0.1},"backing":{"type":"integer","default":0},"layout":{"type":"integer","default":0},"opacityRule":{"type":"integer","default":0},"shadowAngle":{"type":"number","default":135},"shadowOffset":{"type":"number","default":0.5},"text-opacity":{"type":"number","default":1,"description":"Deprecated"},"backing-opacity":{"type":"number","default":1},"opacity":{"type":"number","description":"Deprecated"},"knockout":{"type":"integer","default":0},"character-styles":{"type":"object","patternProperties":{"^.*$":{"$ref":"#/definitions/CharacterStyle"}}}}}]},"CharacterStyle":{"className":"CharacterStyle","allOf":[{"$ref":"#/definitions/LockupStyleBase"},{"properties":{"spacing":{"type":"number","default":-1},"tracking":{"type":"number","default":-99},"padding":{"type":"number","default":0},"strokeWeight":{"type":"number","default":-1},"backing":{"type":"integer","default":0},"layout":{"type":"integer","default":-1},"opacityRule":{"type":"integer","default":-1},"shadowAngle":{"type":"number","default":-1},"shadowOffset":{"type":"number","default":-1},"text-opacity":{"type":"number","default":-1,"description":"Deprecated"},"backing-opacity":{"type":"number","default":-1},"opacity":{"type":"number","description":"Deprecated"},"knockout":{"type":"integer","default":-1}}}]},"GridStyle":{"className":"GridStyle","definitions":{"GridCell":{"type":"array","items":[{"$ref":"Root.json#/definitions/TheoRect"},{"type":"number"},{"type":"string"}]}},"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["GridStyle"]},"name":{"type":"string","default":"None"},"category":{"type":"string"},"spacing":{"type":"number","default":0},"crop-type":{"type":"integer"},"grid-cells":{"type":"array","items":{"$ref":"#/definitions/GridStyle/definitions/GridCell"}},"forma-mapping":{"type":"array","items":{"type":"array","items":[{"type":"string"},{"$ref":"#/definitions/GridStyle/definitions/GridCell"}]}}},"required":["kind"]}]}}}')},NUIx:function(e,t,o){var n=t,r=o("oAGj");n.HostTextModelUtilsProtocol=r.defineProtocol("HostTextModelUtilsProtocol",{measureBoundsForLayout:"(String, FontDescriptor, Double, Double) -> TheoRect",measureDrawBounds:"(String, Double, PGMTextStyle) -> TheoRect",getGlyphPositions:"(String, FontDescriptor, Double, Boolean) -> Array<Double>",fontHasClockwiseOutlines:"(FontDescriptor) -> Boolean",textOutlines:"(String, FontDescriptor, Double, Double) -> TheoPath",rewindPath:"(TheoPath) -> TheoPath",useOutlinesForKnockouts:"() -> Boolean",usePGMRenderer:"() -> Boolean",measureBaselineBounds:"(String, FontDescriptor, Double, Double) -> TheoRect",measureCapHeight:"(FontDescriptor, Double) -> Double",measureCapHeightPerPointSize:"(FontDescriptor) -> Double",splitOnWhiteSpace:"(String) -> Array<TextRange>",getWordClassRanges:"(String, Integer) -> Array<TextRange>",defaultFont:"() -> FontDescriptor",defaultFontSize:"() -> Double",defaultColor:"() -> SolidColor",calcFontMetrics:"(String, Integer, FontMetricsParams) -> TextToken"})},NzMI:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"ImageFilter":{"className":"ImageFilter","type":"object","properties":{"kind":{"type":"string"},"name":{"type":"string","default":""}}},"ImageFilterTypes":{"oneOf":[{"$ref":"#/definitions/AlphaBlendFilter"},{"$ref":"#/definitions/CompositeFilter"}]},"AlphaBlendFilter":{"className":"AlphaBlendFilter","allOf":[{"$ref":"#/definitions/ImageFilter"},{"properties":{"kind":{"enum":["AlphaBlend"]},"mix":{"type":"number"},"filter1":{"$ref":"#/definitions/ImageFilterTypes"},"filter2":{"$ref":"#/definitions/ImageFilterTypes"}},"required":["kind"]}]},"CompositeFilter":{"className":"CompositeFilter","allOf":[{"$ref":"#/definitions/ImageFilter"},{"properties":{"kind":{"enum":["CompositeFilter"]},"mix":{"type":"number","default":1},"blend":{"type":"string","default":"normal"},"grayscale":{"type":"boolean","default":false},"contrast":{"type":"number","default":1},"color-operation":{"type":"string","default":""},"saturation-offset":{"type":"number","default":0},"brightness-offset":{"type":"number","default":0},"blur-radius":{"type":"number","default":0},"reduce-contrast":{"type":"boolean","description":"If true, contrast == 0.5"}},"required":["kind"]}]}}}')},OFP5:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"SolidColor":{"className":"SolidColor","type":"object","properties":{"red":{"type":"number"},"green":{"type":"number"},"blue":{"type":"number"},"alpha":{"type":"number"}},"required":["red","green","blue","alpha"]},"TheoColor":{"className":"TheoColor","type":"object","properties":{"red":{"type":"number","description":"rgbcolor.red"},"green":{"type":"number","description":"rgbcolor.green"},"blue":{"type":"number","description":"rgbcolor.blue"},"alpha":{"type":"number","description":"rgbcolor.alpha"},"sparkElementID":{"type":"string"},"sparkRoles":{"type":"array","items":{"type":"string"}}},"required":["red","green","blue","alpha"]},"ColorSwatch":{"className":"ColorSwatch","type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"numTags":{"type":"integer"}},"patternProperties":{"key-[0-9]*":{"type":"string","description":"tags_[key-N] = value-N"},"value-[0-9]*":{"type":"string","description":"tags_[key-N] = value-N"}},"required":["id","path"]},"ColorSwatchTypes":{"oneOf":[{"$ref":"#/definitions/SimpleSwatch"}]},"ColorThemeDocument":{"className":"ColorThemeDocument","type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["colortheme"]},"type":{"type":"string","default":"application/vnd.adobe.theo.color+dcx","enum":["application/vnd.adobe.theo.color+dcx"]},"children":{"type":"array","items":{"$ref":"#/definitions/ColorSwatchTypes"}}},"required":["id","path"]},"PaletteID":{"anyOf":[{"type":"string"},{"type":"integer"}]},"ColorLibrary":{"className":"ColorLibrary","type":"object","properties":{"palette:id":{"$ref":"#/definitions/PaletteID"},"entries":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"color":{"$ref":"#/definitions/TheoColor"}}}}}},"SimpleSwatch":{"className":"SimpleSwatch","allOf":[{"$ref":"#/definitions/ColorSwatch"},{"properties":{"kind":{"type":"string","enum":["simple"]},"color":{"$ref":"#/definitions/SolidColor"}}}]},"ColorTableEntry":{"className":"ColorTableEntry","type":"object","properties":{"color-id":{"type":"string"},"color":{"$ref":"#/definitions/SolidColor"},"theme-index":{"type":"integer"}}},"ColorRole":{"type":"string","enum":["field-primary","field-secondary","border"]},"ColorTable":{"className":"ColorTable","type":"object","properties":{"entries":{"type":"array","items":{"type":"object","properties":{"role":{"$ref":"#/definitions/ColorRole"},"color-id":{"type":"string"},"color":{"$ref":"#/definitions/SolidColor"},"theme-index":{"type":"integer"}}}}}}}}')},"P/P9":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"SolidColor":{"className":"SolidColor","type":"object","properties":{"red":{"type":"number"},"green":{"type":"number"},"blue":{"type":"number"},"alpha":{"type":"number"}},"required":["red","green","blue","alpha"]},"TheoColor":{"className":"TheoColor","type":"object","properties":{"red":{"type":"number","description":"rgbcolor.red"},"green":{"type":"number","description":"rgbcolor.green"},"blue":{"type":"number","description":"rgbcolor.blue"},"alpha":{"type":"number","description":"rgbcolor.alpha"},"sparkElementID":{"type":"string"},"sparkRoles":{"type":"array","items":{"type":"string"}}},"required":["red","green","blue","alpha"]},"ColorSwatch":{"className":"ColorSwatch","type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"numTags":{"type":"integer"}},"patternProperties":{"key-[0-9]*":{"type":"string","description":"tags_[key-N] = value-N"},"value-[0-9]*":{"type":"string","description":"tags_[key-N] = value-N"}},"required":["id","path"]},"ColorSwatchTypes":{"oneOf":[{"$ref":"#/definitions/SimpleSwatch"}]},"ColorThemeDocument":{"className":"ColorThemeDocument","type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["colortheme"]},"type":{"type":"string","enum":["application/vnd.adobe.theo.color+dcx"]},"children":{"type":"array","items":{"$ref":"#/definitions/ColorSwatchTypes"}}},"required":["id","path","type"]},"PaletteID":{"anyOf":[{"type":"string"},{"type":"integer"}]},"ColorLibrary":{"className":"ColorLibrary","type":"object","properties":{"palette:id":{"$ref":"#/definitions/PaletteID"},"entries":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"color":{"$ref":"#/definitions/TheoColor"}}}}}},"SimpleSwatch":{"className":"SimpleSwatch","allOf":[{"$ref":"#/definitions/ColorSwatch"},{"properties":{"kind":{"type":"string","enum":["simple"]},"color":{"$ref":"#/definitions/SolidColor"}}}]},"ColorTableEntry":{"className":"ColorTableEntry","type":"object","properties":{"color-id":{"type":"string"},"color":{"$ref":"#/definitions/SolidColor"},"theme-index":{"type":"integer"}}},"ColorRole":{"type":"string","enum":["field-primary","field-secondary","border"]},"ColorTable":{"className":"ColorTable","type":"object","properties":{"entries":{"type":"array","items":{"type":"object","properties":{"role":{"$ref":"#/definitions/ColorRole"},"color-id":{"type":"string"},"color":{"$ref":"#/definitions/SolidColor"},"theme-index":{"type":"integer"}}}}}}}}')},PCN2:function(e,t,o){var n,r=t,i=o("oAGj");r.IPGMMimicNodeBinding=i.defineProtocol("IPGMMimicNodeBinding",{destroy:"(PGMMimicNode) -> Void",insertChild:"(PGMMimicGroupNode, Integer, PGMMimicNode) -> Void",reinsertChild:"(PGMMimicGroupNode, Integer, PGMMimicNode) -> Void",removeChild:"(PGMMimicGroupNode, Integer, PGMMimicNode) -> Void",changeCompositing:"(PGMMimicNode, PGMCompositingParams, PGMCompositingParams) -> Void",changePlacement:"(PGMMimicNode, Matrix2D, Matrix2D) -> Void",changeBlendMode:"(PGMMimicNode, PGMBlendModeEnum, PGMBlendModeEnum) -> Void",changeOpacity:"(PGMMimicNode, Double, Double) -> Void",changeCTM:"(PGMMimicNode, Matrix2D, Matrix2D) -> Void",changeProperties:"(PGMMimicNode, Array<String>) -> Void",endConformSummary:"(PGMMimicNode, Array<String>, Boolean) -> Void"}),r.PGMNullMimicNodeBinding=(n=function(){},i.defineClass({name:"PGMNullMimicNodeBinding",ctor:n,statics:{_implements:function(e){return"IPGMMimicNodeBinding"==e}},props:{destroy:function(e){},insertChild:function(e,t,o){},reinsertChild:function(e,t,o){},removeChild:function(e,t,o){},changeCompositing:function(e,t,o){},changePlacement:function(e,t,o){},changeBlendMode:function(e,t,o){},changeOpacity:function(e,t,o){},changeCTM:function(e,t,o){},changeProperties:function(e,t){},endConformSummary:function(e,t,o){}}}),n)},PKUs:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"FormaStyleBase":{"type":"object","properties":{"opacity":{"type":"number"},"color-table":{"$ref":"Color.json#/definitions/ColorTable"},"filter":{"$ref":"Filters.json#/definitions/ImageFilterTypes"}}},"FormaStyle":{"className":"FormaStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"type":"string","enum":["FormaStyle"]}},"required":["kind"]}]},"FormaStyleTypes":{"oneOf":[{"$ref":"#/definitions/RootStyle"},{"$ref":"#/definitions/ShapeStyle"},{"$ref":"#/definitions/TextStyle"},{"$ref":"#/definitions/ImageStyle"},{"$ref":"#/definitions/VideoStyle"},{"$ref":"#/definitions/LockupStyle"},{"$ref":"#/definitions/GridStyle"},{"$ref":"#/definitions/FormaStyle"}]},"RootStyle":{"className":"RootStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["RootStyle"]},"color":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"}},"required":["kind"]}]},"ShapeStyle":{"className":"ShapeStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["ShapeStyle"]},"colors":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"}},"required":["kind"]}]},"TextStyle":{"className":"TextStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["TextStyle"]}},"required":["kind"]}]},"ImageStyleBase":{"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"name":{"type":"string","default":"None"},"colors":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"},"filter-name":{"type":"string","description":"Deprecated"}}}]},"ImageStyle":{"className":"ImageStyle","allOf":[{"$ref":"#/definitions/ImageStyleBase"},{"properties":{"kind":{"enum":["ImageStyle"]}},"required":["kind"]}]},"VideoStyle":{"className":"VideoStyle","allOf":[{"$ref":"#/definitions/ImageStyleBase"},{"properties":{"kind":{"enum":["VideoStyle"]}},"required":["kind"]}]},"LockupStyleBase":{"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["LockupStyle"]},"fonts":{"type":"array","items":{"$ref":"Text.json#/definitions/TheoFont"}},"backingArtworkID":{"type":"string"},"colors":{"allOf":[{"$ref":"Color.json#/definitions/ColorTable"},{"description":"Deprecated"}]}},"required":["kind"]}]},"LockupStyle":{"className":"LockupStyle","allOf":[{"$ref":"#/definitions/LockupStyleBase"},{"properties":{"spacing":{"type":"number","default":0.35},"tracking":{"type":"number","default":0},"padding":{"type":"number","default":0.65},"strokeWeight":{"type":"number","default":0.1},"backing":{"type":"integer","default":0},"layout":{"type":"integer","default":0},"opacityRule":{"type":"integer","default":0},"shadowAngle":{"type":"number","default":135},"shadowOffset":{"type":"number","default":0.5},"text-opacity":{"type":"number","description":"Deprecated"},"backing-opacity":{"type":"number","default":1},"opacity":{"type":"number","description":"Deprecated"},"knockout":{"type":"integer","default":0},"character-styles":{"type":"object","patternProperties":{"^.*$":{"$ref":"#/definitions/CharacterStyle"}}}}}]},"CharacterStyle":{"className":"CharacterStyle","allOf":[{"$ref":"#/definitions/LockupStyleBase"},{"properties":{"spacing":{"type":"number","default":-1},"tracking":{"type":"number","default":-99},"padding":{"type":"number","default":0},"strokeWeight":{"type":"number","default":-1},"backing":{"type":"integer","default":0},"layout":{"type":"integer","default":-1},"opacityRule":{"type":"integer","default":-1},"shadowAngle":{"type":"number","default":-1},"shadowOffset":{"type":"number","default":-1},"text-opacity":{"type":"number","description":"Deprecated"},"backing-opacity":{"type":"number","default":-1},"opacity":{"type":"number","description":"Deprecated"},"knockout":{"type":"integer","default":-1}}}]},"GridStyle":{"className":"GridStyle","definitions":{"GridCell":{"type":"array","items":[{"$ref":"Root.json#/definitions/TheoRect"},{"type":"number"},{"type":"string"}]}},"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["GridStyle"]},"name":{"type":"string","default":"None"},"category":{"type":"string"},"spacing":{"type":"number","default":0},"crop-type":{"type":"integer"},"grid-cells":{"type":"array","items":{"$ref":"#/definitions/GridStyle/definitions/GridCell"}},"forma-mapping":{"type":"array","items":{"type":"array","items":[{"type":"string"},{"$ref":"#/definitions/GridStyle/definitions/GridCell"}]}}},"required":["kind"]}]}}}')},PlOi:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("fNpk"),l=o("GINV"),c=o("KDc2");i.PGMResourceProvider=(n=function(e,t){this.contentType=e,this.storage=t},r={},a.defineClass({name:"PGMResourceProvider",ctor:n,statics:{PROP_CONTENT_TYPE:"content-type",PROP_STORAGE:"storage",INVALID:{get:function(){return void 0===r.INVALID&&(r.INVALID=new n("invalid",new c.StorageSpecInvalid)),r.INVALID}},decode:function(e){var t,o,r,i;return(t=e)?null!=(o=a.as(t[n.PROP_CONTENT_TYPE],"String"))&&(r=a.as(t[n.PROP_STORAGE],["Dictionary","String","Any"]))&&(i=l.StorageSpec.decode(r))?new n(o,i):(s.LegacyCoreAssert.fail("couldn't decode",void 0,"PGMResourceProvider.decode","PGMResourceProvider.swift",61),null):null}},props:{isEqualTo:function(e){return e===this||this.contentType==e.contentType&&this.storage.isEqualTo(e.storage)},encode:function(){var e={};return e[n.PROP_CONTENT_TYPE]=this.contentType,e[n.PROP_STORAGE]=this.storage.encode(),e}}}),n)},PmNR:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"ContentNode":{"className":"ContentNode","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"tags":{"type":"object","patternProperties":{"^.*$":{"type":"string"}}}},"required":["id","path"]}]},"NonRootContentNodeTypes":{"oneOf":[{"$ref":"#/definitions/GroupContentNode"},{"$ref":"#/definitions/ImageContentNode"},{"$ref":"#/definitions/TextContentNode"},{"$ref":"#/definitions/VectorContentNode"},{"$ref":"#/definitions/VideoContentNode"}]},"GroupContentNodeBase":{"allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"children":{"type":"array","items":{"$ref":"#/definitions/NonRootContentNodeTypes"}}}}]},"GroupContentNode":{"className":"GroupContentNode","allOf":[{"$ref":"#/definitions/GroupContentNodeBase"},{"properties":{"kind":{"enum":["group"]}},"required":["kind"]}]},"RootContentNode":{"className":"RootContentNode","allOf":[{"$ref":"#/definitions/GroupContentNodeBase"},{"properties":{"kind":{"enum":["root"]}},"required":["kind"]}]},"ImageColorData":{"className":"ImageColorData","type":"object","properties":{"red":{"type":"number"},"green":{"type":"number"},"blue":{"type":"number"},"alpha":{"type":"number"},"coverage":{"type":"number"}}},"ImageContentNode":{"className":"ImageContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["image"]},"pixel-width":{"type":"integer"},"pixel-height":{"type":"integer"},"image-has_alpha":{"type":"boolean"},"image-color-data":{"type":"array","items":{"$ref":"#/definitions/ImageColorData"}}},"required":["kind"]}]},"TextContentNode":{"className":"TextContentNode","allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"kind":{"enum":["text"]},"text-model":{"$ref":"Text.json#/definitions/TextModel"}},"required":["kind"]}]},"MediaMetadata":{"className":"MediaMetadata","type":"object","properties":{"search":{"type":"string"},"type":{"type":"string"},"source_name":{"type":"string"},"source_url":{"type":"string"},"owner":{"type":"string"},"asset_id":{"type":"string"},"creator_user_id":{"type":"string"},"creator_display_name":{"type":"string"},"design_intent":{"type":"string"},"source":{"type":"string"},"photo_name":{"type":"string"},"tags":{"type":"string"}}},"URLBasedContentNode":{"className":"URLBasedContentNode","allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"data-url":{"type":"string"},"mimetype":{"type":"string"},"element-id":{"type":"string"},"roles":{"type":"array","items":{"type":"string"}},"components":{"type":"array","items":{"type":"object","properties":{"url":{"type":"string"},"id":{"type":"string"},"length":{"type":"integer"},"name":{"type":"string"},"path":{"type":"string"},"mimeType":{"type":"string"},"etag":{"type":"string"}}},"maxItems":1},"media-metadata":{"$ref":"#/definitions/MediaMetadata"}}}]},"VectorContentNode":{"className":"VectorContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["vector"]},"size":{"$ref":"Root.json#/definitions/TheoSize"}},"required":["kind"]}]},"VideoContentNode":{"className":"VideoContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["video"]},"width":{"type":"integer"},"height":{"type":"integer"},"duration":{"$ref":"Root.json#/definitions/TheoTime"},"time-samples":{"type":"array","items":{"$ref":"Root.json#/definitions/TheoTime"}}},"required":["kind"]}]}}}')},PvbB:function(e,t,o){var n=t,r=o("oAGj");n.HostFeatureFlagsProtocol=r.defineProtocol("HostFeatureFlagsProtocol",{isWatermarkUnlocked:"() -> Boolean",flagExists:"(String) -> Boolean",isBoolFlagEnabled:"(String) -> Boolean",isRemoveBackgroundCCStorageDisabled:"() -> Boolean"})},"Q+4n":function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("gXiO");i.TheoInsets=(n=function(e,t,o,n){this.top=e,this.left=t,this.bottom=o,this.right=n,s.CoreObject.call(this)},r={},a.defineClass({name:"TheoInsets",ctor:n,superName:"CoreObject",statics:{Zero:{get:function(){return void 0===r.Zero&&(r.Zero=new n(0,0,0,0)),r.Zero}}},props:{equal:function(e){return this.top==e.top&&this.left==e.left&&this.bottom==e.bottom&&this.right==e.right},invert:function(){return new n(-this.top,-this.left,-this.bottom,-this.right)},description:{get:function(){return this.asString}},asString:{get:function(){return a.toString("top: %g left: %g bottom: %g right: %g",this.top,this.left,this.bottom,this.right)}}}}),n),i._negate_TheoInsets=function(e){return e.invert()}},"Q0b+":function(e,t,o){var n,r=t,i=o("oAGj");r.IPGMMimicDocumentBinding=i.defineProtocol("IPGMMimicDocumentBinding",{createNode:"(PGMMimicDocument, PGMReference, PGMMimicConformerOptions) -> PGMMimicNode",beginConform:"(PGMMimicDocument, PGMMimicDisplayState, PGMMimicDisplayState) -> Void",endConform:"(PGMMimicDocument, PGMMimicDisplayState, PGMMimicDisplayState) -> Void",setRoot:"(PGMMimicDocument, PGMMimicNode) -> Void"}),r.PGMNullDocumentMimicBinding=(n=function(){},i.defineClass({name:"PGMNullDocumentMimicBinding",ctor:n,statics:{_implements:function(e){return"IPGMMimicDocumentBinding"==e}},props:{createNode:function(e,t,o){return null},beginConform:function(e,t,o){},endConform:function(e,t,o){},setRoot:function(e,t){}}}),n)},QO3H:function(e,t,o){var n,r,i,a,s,l,c,u,p,d,h,f,m,g,y,T,A,C,_,S,P=t,F=o("oAGj"),v=o("Tq01"),R=o("KgU+"),b=o("KSe6"),E=o("VQVe"),N=o("c9Jm"),k=o("yGNn");P.AnimateTest=(n=function(){this.actionSequence_Animation=[],this.testDoc_=null,this.testPage_=null,this.initialAnimationStyle_=null,this.initialAnimationVariant_=null,this.appliedAnimationStyle_=null,N.ActionTestBase.call(this)},F.defineClass({name:"AnimateTest",ctor:n,superName:"ActionTestBase",props:{shuffledAnimationStyle_:{get:function(){return F.opt(F.as(this.getActionResult(0),v.AnimationStyleActionResult),(function(e){return e.style}))}},tearDown:function(){this.initialAnimationStyle_=null,this.appliedAnimationStyle_=null,N.ActionTestBase.prototype.tearDown.call(this)},populateActionSequence:function(e,t,o){var n=this;if(this.testDoc_=o,this.testPage_=o.firstPage,this.initialAnimationStyle_=o.firstPage.animationController.animationStyle,this.initialAnimationVariant_=F.opt(this.initialAnimationStyle_,(function(e){return e.variant})),null!=this.initialAnimationStyle_)return k.CorePromise.resolve(e.concat([function(){return new R.ShuffleAnimationStyleAction(n.initialAnimationStyle_,n.testPage_)},function(){return new R.ApplyAnimationStyleAction(n.shuffledAnimationStyle_,n.testPage_)}]));var r=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(this.testPage_.root));return r.length>1?(this.appliedAnimationStyle_=F.last(r),null==this.appliedAnimationStyle_&&XCTAssertNotEqual(this.appliedAnimationStyle_,null),k.CorePromise.resolve(e.concat([function(){return new R.ApplyAnimationStyleAction(n.appliedAnimationStyle_,n.testPage_)}]))):(XCTFail("Could not get style for AnimateTest"),k.CorePromise.resolve([]))},validateAfterActionSequence:function(e,t){if(null!=this.initialAnimationStyle_){var o=(i=F.opt(this.testPage_,(function(e){return e.animationController.animationStyle}))).variant,n=i.variantCount,r=this.testPage_.animationLibrary.getNextAnimationStyleOfSameType(this.initialAnimationStyle_);XCTAssertEqual(r.name,this.initialAnimationStyle_.name),XCTAssertEqual(i.name,this.initialAnimationStyle_.name),XCTAssertEqual(o,this.initialAnimationVariant_+1%n)}else if(null!=this.appliedAnimationStyle_){var i;o=(i=F.opt(this.testPage_,(function(e){return e.animationController.animationStyle}))).variant,XCTAssertEqual(i.name,this.appliedAnimationStyle_.name),XCTAssertEqual(o,0)}},validateAfterUndo:function(e,t){if(null!=this.initialAnimationStyle_){var o=(n=F.opt(this.testPage_,(function(e){return e.animationController.animationStyle}))).variant;XCTAssertEqual(n.name,this.initialAnimationStyle_.name),XCTAssertEqual(o,this.initialAnimationVariant_)}else if(null!=this.appliedAnimationStyle_){var n=F.opt(this.testPage_,(function(e){return e.animationController.animationStyle}));XCTAssertEqual(n,null)}},validateAfterRedo:function(e,t){if(null!=this.initialAnimationStyle_){var o=(i=F.opt(this.testPage_,(function(e){return e.animationController.animationStyle}))).variant,n=i.variantCount,r=this.testPage_.animationLibrary.getNextAnimationStyleOfSameType(this.initialAnimationStyle_);XCTAssertEqual(r.name,this.initialAnimationStyle_.name),XCTAssertEqual(i.name,this.initialAnimationStyle_.name),XCTAssertEqual(o,this.initialAnimationVariant_+1%n)}else if(null!=this.appliedAnimationStyle_){var i;o=(i=F.opt(this.testPage_,(function(e){return e.animationController.animationStyle}))).variant,XCTAssertEqual(i.name,this.appliedAnimationStyle_.name),XCTAssertEqual(o,0)}}}}),n),P.AnimationTestBase=(r=function(){this.testDoc_=null,this.testPage_=null,this.initialAnimationStyle_=null,this.initialAnimationVariant_=null,this.appliedAnimationStyle_=null,this.appliedAnimationVariant_=0,N.ActionTestBase.call(this)},F.defineClass({name:"AnimationTestBase",ctor:r,superName:"ActionTestBase",props:{shuffledAnimationStyle_:{get:function(){return F.opt(F.as(this.getActionResult(0),v.AnimationStyleActionResult),(function(e){return e.style}))}},tearDown:function(){this.initialAnimationStyle_=null,this.appliedAnimationStyle_=null,N.ActionTestBase.prototype.tearDown.call(this)},setAnimation:function(){},populateActionSequence:function(e,t,o){var n=this;return this.testDoc_=o,this.testPage_=o.firstPage,this.initialAnimationStyle_=o.firstPage.animationController.animationStyle,this.initialAnimationVariant_=F.opt(this.initialAnimationStyle_,(function(e){return e.variant})),this.setAnimation(),null==this.appliedAnimationStyle_&&XCTAssertNotEqual(this.appliedAnimationStyle_,null),k.CorePromise.resolve([function(){return new R.ApplyAndPrepareAnimationAction(n.appliedAnimationStyle_,n.testPage_)}])},validateAfterActionSequence:function(e,t){if(null!=this.appliedAnimationStyle_){var o=F.opt(this.testPage_,(function(e){return e.animationController.animationStyle})),n=o.variant;XCTAssertEqual(o.name,this.appliedAnimationStyle_.name),XCTAssertEqual(n,this.appliedAnimationVariant_)}},validateAfterUndo:function(e,t){if(null!=this.initialAnimationStyle_){var o=(n=F.opt(this.testPage_,(function(e){return e.animationController.animationStyle}))).variant;XCTAssertEqual(n.name,this.initialAnimationStyle_.name),XCTAssertEqual(o,this.initialAnimationVariant_)}else if(null!=this.appliedAnimationStyle_){var n=F.opt(this.testPage_,(function(e){return e.animationController.animationStyle}));XCTAssertEqual(n,null)}},validateAfterRedo:function(e,t){if(null!=this.appliedAnimationStyle_){var o=F.opt(this.testPage_,(function(e){return e.animationController.animationStyle})),n=o.variant;XCTAssertEqual(o.name,this.appliedAnimationStyle_.name),XCTAssertEqual(n,this.appliedAnimationVariant_)}}}}),r),P.AnimationLetterTest=(i=function(){this.actionSequence_AnimationLetter=[],P.AnimationTestBase.call(this)},F.defineClass({name:"AnimationLetterTest",ctor:i,superName:"AnimationTestBase",props:{canRunActionSequence:function(e,t,o){for(var n=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(o.firstPage.root)),r=F.iter(n);!r.done;r.next()){var i=r.value;if(i.name==E.AnimationStyle.NAME_TYPE)return this.appliedAnimationStyle_=i,!0}return!1}}}),i),P.AnimationLetterRandomTest=(a=function(){this.actionSequence_AnimationLetterRandom=[],P.AnimationTestBase.call(this)},F.defineClass({name:"AnimationLetterRandomTest",ctor:a,superName:"AnimationTestBase",props:{canRunActionSequence:function(e,t,o){for(var n=this,r=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(o.firstPage.root)),i=F.iter(r);!i.done;i.next()){var a=i.value;if(a.name==E.AnimationStyle.NAME_TYPE)return this.appliedAnimationStyle_=a,this.appliedAnimationVariant_=1,F.opt(this.appliedAnimationStyle_,(function(e){return e.variant=n.appliedAnimationVariant_})),!0}return!1}}}),a),P.AnimationLetterFlickerTest=(s=function(){this.actionSequence_AnimationLetterFlicker=[],P.AnimationTestBase.call(this)},F.defineClass({name:"AnimationLetterFlickerTest",ctor:s,superName:"AnimationTestBase",props:{canRunActionSequence:function(e,t,o){for(var n=this,r=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(o.firstPage.root)),i=F.iter(r);!i.done;i.next()){var a=i.value;if(a.name==E.AnimationStyle.NAME_FLICKER)return this.appliedAnimationStyle_=a,this.appliedAnimationVariant_=1,F.opt(this.appliedAnimationStyle_,(function(e){return e.variant=n.appliedAnimationVariant_})),!0}return!1}}}),s),P.AnimationFlickerTest=(l=function(){this.actionSequence_AnimationFlicker=[],P.AnimationTestBase.call(this)},F.defineClass({name:"AnimationFlickerTest",ctor:l,superName:"AnimationTestBase",props:{canRunActionSequence:function(e,t,o){for(var n=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(o.firstPage.root)),r=F.iter(n);!r.done;r.next()){var i=r.value;if(i.name==E.AnimationStyle.NAME_FLICKER)return this.appliedAnimationStyle_=i,!0}return!1}}}),l),P.AnimationGrowTest=(c=function(){this.actionSequence_AnimationGrow=[],P.AnimationTestBase.call(this)},F.defineClass({name:"AnimationGrowTest",ctor:c,superName:"AnimationTestBase",props:{canRunActionSequence:function(e,t,o){for(var n=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(o.firstPage.root)),r=F.iter(n);!r.done;r.next()){var i=r.value;if(i.name==E.AnimationStyle.NAME_GROW)return this.appliedAnimationStyle_=i,!0}return!1}}}),c),P.AnimationFadeTest=(u=function(){this.actionSequence_AnimationFade=[],P.AnimationTestBase.call(this)},F.defineClass({name:"AnimationFadeTest",ctor:u,superName:"AnimationTestBase",props:{canRunActionSequence:function(e,t,o){for(var n=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(o.firstPage.root)),r=F.iter(n);!r.done;r.next()){var i=r.value;if(i.name==E.AnimationStyle.NAME_FADE)return this.appliedAnimationStyle_=i,!0}return!1}}}),u),P.AnimationDynamicZoomTest=(p=function(){this.actionSequence_AnimationDynamicZoom=[],P.AnimationTestBase.call(this)},F.defineClass({name:"AnimationDynamicZoomTest",ctor:p,superName:"AnimationTestBase",props:{canRunActionSequence:function(e,t,o){for(var n=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(o.firstPage.root)),r=F.iter(n);!r.done;r.next()){var i=r.value;if(i.name==E.AnimationStyle.NAME_DYNAMIC)return this.appliedAnimationStyle_=i,!0}return!1}}}),p),P.AnimationDynamicCenterTest=(d=function(){this.actionSequence_AnimationDynamicCenter=[],P.AnimationTestBase.call(this)},F.defineClass({name:"AnimationDynamicCenterTest",ctor:d,superName:"AnimationTestBase",props:{canRunActionSequence:function(e,t,o){for(var n=this,r=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(o.firstPage.root)),i=F.iter(r);!i.done;i.next()){var a=i.value;if(a.name==E.AnimationStyle.NAME_DYNAMIC)return this.appliedAnimationStyle_=a,this.appliedAnimationVariant_=1,F.opt(this.appliedAnimationStyle_,(function(e){return e.variant=n.appliedAnimationVariant_})),!0}return!1}}}),d),P.AnimationDynamicTwoTest=(h=function(){this.actionSequence_AnimationDynamicTwo=[],P.AnimationTestBase.call(this)},F.defineClass({name:"AnimationDynamicTwoTest",ctor:h,superName:"AnimationTestBase",props:{canRunActionSequence:function(e,t,o){for(var n=this,r=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(o.firstPage.root)),i=F.iter(r);!i.done;i.next()){var a=i.value;if(a.name==E.AnimationStyle.NAME_DYNAMIC)return this.appliedAnimationStyle_=a,this.appliedAnimationVariant_=2,F.opt(this.appliedAnimationStyle_,(function(e){return e.variant=n.appliedAnimationVariant_})),!0}return!1}}}),h),P.AnimationDynamicThreeTest=(f=function(){this.actionSequence_AnimationDynamicThree=[],P.AnimationTestBase.call(this)},F.defineClass({name:"AnimationDynamicThreeTest",ctor:f,superName:"AnimationTestBase",props:{canRunActionSequence:function(e,t,o){for(var n=this,r=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(o.firstPage.root)),i=F.iter(r);!i.done;i.next()){var a=i.value;if(a.name==E.AnimationStyle.NAME_DYNAMIC)return this.appliedAnimationStyle_=a,this.appliedAnimationVariant_=3,F.opt(this.appliedAnimationStyle_,(function(e){return e.variant=n.appliedAnimationVariant_})),!0}return!1}}}),f),P.AnimationColorSwapOneTest=(m=function(){this.actionSequence_AnimationColorSwapOne=[],P.AnimationTestBase.call(this)},F.defineClass({name:"AnimationColorSwapOneTest",ctor:m,superName:"AnimationTestBase",props:{canRunActionSequence:function(e,t,o){for(var n=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(o.firstPage.root)),r=F.iter(n);!r.done;r.next()){var i=r.value;if(i.name==E.AnimationStyle.NAME_COLORSWAP)return this.appliedAnimationStyle_=i,!0}return!1}}}),m),P.AnimationSlideTest=(g=function(){this.actionSequence_AnimationSlide=[],P.AnimationTestBase.call(this)},F.defineClass({name:"AnimationSlideTest",ctor:g,superName:"AnimationTestBase",props:{canRunActionSequence:function(e,t,o){for(var n=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(o.firstPage.root)),r=F.iter(n);!r.done;r.next()){var i=r.value;if(i.name==E.AnimationStyle.NAME_SLIDE)return this.appliedAnimationStyle_=i,!0}return!1}}}),g),P.AnimationZoomTest=(y=function(){this.actionSequence_AnimationZoom=[],P.AnimationTestBase.call(this)},F.defineClass({name:"AnimationZoomTest",ctor:y,superName:"AnimationTestBase",props:{canRunActionSequence:function(e,t,o){for(var n=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(o.firstPage.root)),r=F.iter(n);!r.done;r.next()){var i=r.value;if(i.name==E.AnimationStyle.NAME_ZOOM)return this.appliedAnimationStyle_=i,!0}return!1}}}),y),P.AnimationPanTest=(T=function(){this.actionSequence_AnimationPan=[],P.AnimationTestBase.call(this)},F.defineClass({name:"AnimationPanTest",ctor:T,superName:"AnimationTestBase",props:{canRunActionSequence:function(e,t,o){for(var n=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(o.firstPage.root)),r=F.iter(n);!r.done;r.next()){var i=r.value;if(i.name==E.AnimationStyle.NAME_PAN)return this.appliedAnimationStyle_=i,!0}return!1}}}),T),P.AnimationGrayscaleTest=(A=function(){this.actionSequence_AnimationGrayscale=[],P.AnimationTestBase.call(this)},F.defineClass({name:"AnimationGrayscaleTest",ctor:A,superName:"AnimationTestBase",props:{canRunActionSequence:function(e,t,o){for(var n=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(o.firstPage.root)),r=F.iter(n);!r.done;r.next()){var i=r.value;if(i.name==E.AnimationStyle.NAME_GRAYSCALE)return this.appliedAnimationStyle_=i,!0}return!1}}}),A),P.AnimationPhotoBlurTest=(C=function(){this.actionSequence_AnimationPhotoBlur=[],P.AnimationTestBase.call(this)},F.defineClass({name:"AnimationPhotoBlurTest",ctor:C,superName:"AnimationTestBase",props:{canRunActionSequence:function(e,t,o){for(var n=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(o.firstPage.root)),r=F.iter(n);!r.done;r.next()){var i=r.value;if(i.name==E.AnimationStyle.NAME_BLUR)return this.appliedAnimationStyle_=i,!0}return!1}}}),C),P.AnimationColorizeTest=(_=function(){this.actionSequence_AnimationColorize=[],P.AnimationTestBase.call(this)},F.defineClass({name:"AnimationColorizeTest",ctor:_,superName:"AnimationTestBase",props:{canRunActionSequence:function(e,t,o){for(var n=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(o.firstPage.root)),r=F.iter(n);!r.done;r.next()){var i=r.value;if(i.name==E.AnimationStyle.NAME_COLOR)return this.appliedAnimationStyle_=i,!0}return!1}}}),_),P.AnimationFillTest=(S=function(){this.actionSequence_AnimationFill=[],P.AnimationTestBase.call(this)},F.defineClass({name:"AnimationFillTest",ctor:S,superName:"AnimationTestBase",props:{canRunActionSequence:function(e,t,o){for(var n=F.clone(b.AnimationLibrary.getDisplayableAnimationStyles(o.firstPage.root)),r=F.iter(n);!r.done;r.next()){var i=r.value;if(i.name==E.AnimationStyle.NAME_FILL)return this.appliedAnimationStyle_=i,!0}return!1}}}),S)},QTh5:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"FormaAnimation":{"className":"FormaAnimation","type":"object","properties":{"kind":{"type":"string","enum":["FormaAnimation"]},"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"end-time":{"$ref":"Root.json#/definitions/TheoTime"},"key-frames":{"type":"array","items":{"$ref":"#/definitions/KeyFrame"}},"animation-style":{"$ref":"#/definitions/AnimationStyle"},"name":{"type":"string"}},"required":["start-time","end-time","key-frames"]},"KeyFrame":{"className":"KeyFrame","type":"object","properties":{"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"timing-function":{"type":"string"},"placement":{"$ref":"Root.json#/definitions/Matrix2D"},"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"}}},"AnimationStyle":{"className":"AnimationStyle","type":"object","properties":{"name":{"type":"string"},"variant":{"type":"integer"},"variant-count":{"type":"integer"},"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"end-time":{"$ref":"Root.json#/definitions/TheoTime"},"category":{"type":"string"},"looping":{"type":"boolean","default":false},"text-style":{"type":"boolean","default":true},"image-style":{"type":"boolean","default":true}},"required":["name","variant","variant-count"]}}}')},R7T4:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("gXiO"),s=o("0lVD"),l=o("zbBQ"),c=o("sHEF");r.PGMMimicEngine=(n=function(e,t){this._current=c.PGMMimicDisplayState.EMPTY,this._next=c.PGMMimicDisplayState.EMPTY,void 0===t&&(t=s.PGMMimicConformerOptions.DEFAULT),this.client=e,this.document=new l.PGMMimicDocument(e),this.conformOptions=t,a.CoreObject.call(this)},i.defineClass({name:"PGMMimicEngine",ctor:n,superName:"CoreObject",props:{graph:{get:function(){return this._next.graph},set:function(e){this._next=new c.PGMMimicDisplayState(e,this._next.time)}},time:{get:function(){return this._next.time},set:function(e){this._next=new c.PGMMimicDisplayState(this._next.graph,e)}},conform:function(){s.PGMMimicConformer.conform(this.document,this._current,this._next,this.conformOptions),this._current=this._next}}}),n)},REQJ:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("Zifs");r.PROPERTY_COVERAGE="coverage",r.ImageColorData=(n=function(e,t){this.rgbColor=e,this.coverage=t},i.defineClass({name:"ImageColorData",ctor:n,superName:"CoreObject",statics:{decodeJson:function(e){if(null==e)return null;var t=i.as(e,["Dictionary","String","Any"]);if(null==t)return a.LegacyCoreAssert.fail("SolidColor.decodeJson: object passed isn't a dictionary",void 0,"ImageColorData.decodeJson","ImageColorData.swift",39),null;var o,l=s.SolidColor.decodeJson(e);return null!=l&&null!=(o=i.as(t[r.PROPERTY_COVERAGE],"Double"))?new n(l,o):null}},props:{encodeJson:function(){var e=this.rgbColor.encodeJson();return e[r.PROPERTY_COVERAGE]=this.coverage,e}}}),n)},RIZI:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"Forma":{"className":"Forma","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"placement":{"$ref":"Root.json#/definitions/Matrix2D"},"animation":{"$ref":"Animation.json#/definitions/FormaAnimation"},"moveable":{"type":"boolean"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"controller-kind":{"type":"string","default":""},"controller-metadata":{"$ref":"#/definitions/ControllerMetadata"},"intent":{"type":"string","enum":["logo","pattern","icon","floating-shape","grid-cell","sticker","floating-image","temp-image-crop","temp-image-refine-cutout","image-mask","inferred-temp-group","user-group","cutout-mask"]},"source":{"type":"string"},"tags":{"type":"object","patternProperties":{"^.*$":{"type":"string"}}}},"required":["id","path","placement"]}]},"ControllerMetadata":{"className":"ControllerMetadata","type":"object","properties":{"size":{"$ref":"Root.json#/definitions/TheoSize"},"backing-shape-id":{"type":"string"},"content-id":{"type":"string"},"wrapper-id":{"type":"string"},"highlightMethod":{"type":"integer"},"charstyle-ranges":{"type":"object","properties":{"Highlight":{"type":"array","items":{"type":"integer"}}}},"weighted-ranges":{"type":"array","items":{"type":"integer"}}}},"NonRootFormaTypes":{"oneOf":[{"$ref":"#/definitions/GroupForma"},{"$ref":"#/definitions/TextForma"},{"$ref":"#/definitions/ShapeForma"},{"$ref":"#/definitions/FrameForma"},{"$ref":"#/definitions/ImageForma"},{"$ref":"#/definitions/VectorForma"},{"$ref":"#/definitions/VideoForma"},{"$ref":"#/definitions/SmartGroupForma"}]},"GroupFormaBase":{"allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"character-styles":{"type":"object","description":"lockupStyle.characterStyles","patternProperties":{"^.*$":{"$ref":"Styles.json#/definitions/LockupStyle"}}},"character-ranges":{"type":"object","description":"lockupStyle.characterStyles","patternProperties":{"^.*$":{"type":"array","items":{"type":"integer"}}}},"children":{"type":"array","items":{"$ref":"#/definitions/NonRootFormaTypes"}}}}]},"GroupForma":{"className":"GroupForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"kind":{"enum":["group"]}},"required":["kind"]}]},"RootForma":{"className":"RootForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"root-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"kind":{"enum":["Root"]}},"required":["kind"]}]},"FrameForma":{"className":"FrameForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"clipmode":{"type":"boolean","default":true},"cropRatioId":{"type":"string","default":"Free"},"kind":{"enum":["Frame"]}},"required":["kind"]}]},"SmartGroupForma":{"className":"SmartGroupForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"kind":{"enum":["smart-group"]}},"required":["kind"]}]},"ImageFormaBase":{"allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"image-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"content-id":{"type":"string","default":""}}}]},"ImageForma":{"className":"ImageForma","allOf":[{"$ref":"#/definitions/ImageFormaBase"},{"properties":{"kind":{"enum":["Image"]}},"required":["kind"]}]},"VideoForma":{"className":"VideoForma","allOf":[{"$ref":"#/definitions/ImageFormaBase"},{"properties":{"video-content-id":{"type":"string","default":""},"kind":{"enum":["Video"]}},"required":["kind"]}]},"ShapeForma":{"className":"ShapeForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"artwork":{"$ref":"Artwork.json#/definitions/TheoArtworkNodeTypes"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"content-id":{"type":"string","default":""},"shape-id":{"type":"string"},"size":{"$ref":"Root.json#/definitions/TheoSize"},"slice-box":{"$ref":"Root.json#/definitions/TheoRect"},"content-region":{"$ref":"Root.json#/definitions/TheoRect"},"text-box":{"$ref":"Root.json#/definitions/TheoRect"},"prescale":{"type":"number"},"kind":{"enum":["Shape"]}},"required":["kind"]}]},"TextForma":{"className":"TextForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"text":{"$ref":"Text.json#/definitions/TextModel"},"text-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"range-in-lockup":{"$ref":"Text.json#/definitions/TextRange"},"row-index":{"type":"integer","default":0},"kind":{"enum":["Text"]}},"required":["text","kind"]}]},"VectorForma":{"className":"VectorForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"content-id":{"type":"string","default":""},"size":{"$ref":"Root.json#/definitions/TheoSize"},"color":{"$ref":"Color.json#/definitions/SolidColor"},"kind":{"enum":["Vector"]}},"required":["kind"]}]},"FormaPageManifestData":{"className":"FormaPageManifestData","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["forma-document"]},"kind":{"type":"string"},"size":{"$ref":"Root.json#/definitions/TheoSize"},"size-id":{"type":"string","default":"Instagram"}}}]},"FormaPage":{"className":"FormaPage","allOf":[{"$ref":"#/definitions/FormaPageManifestData"},{"type":"object","properties":{"template-id":{"type":"string","default":""},"original-size-id":{"type":"string","default":"Unknown"},"custom-size-format":{"type":"integer","default":0},"custom-size-ppi":{"type":"number","default":300},"export-data":{"$ref":"#/definitions/FormaPageExportData"},"color-library":{"$ref":"Color.json#/definitions/ColorLibrary"},"children":{"type":"array","items":{"$ref":"#/definitions/RootForma"},"maxItems":1}},"manifest-properties":["size","size-id","original-size-id"],"required":["id","color-library","size-id"]}]},"FormaPageExportData":{"className":"FormaPageExportData","type":"object","properties":{"dimensions":{"$ref":"Root.json#/definitions/TheoSize"},"format":{"type":"integer","default":0},"ppi":{"type":"number"}}}}}')},RSS6:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("ZhwN"),l=o("fNpk"),c=o("tGKA"),u=o("Ird5"),p=o("WjWV"),d=o("jLWG"),h=o("rKjb"),f=o("dmHI"),m=o("9MJV"),g=o("sq5L"),y=o("WGnI"),T=o("jSYS"),A=o("yjxF"),C=o("WUDy"),_=o("Aj79"),S=o("sJQG"),P=o("Ucb9"),F=o("9K9k"),v=o("g6aL"),R=o("bAjp"),b=o("f/aw"),E=o("zW52"),N=o("mj5y"),k=o("hgLm"),D=o("sIWg");i.EntityMap=(n=function(e){this.node=e;var t={};!function e(o){var n;null==t[o.entity]&&(t[o.entity]=o,(n=a.as(o,h.PGMComposite))&&n.children.forEach((function(t){return e(t.child)})))}(e),this.entityMap=a.clone(t)},a.defineClass({name:"EntityMap",ctor:n,props:{findEntity:function(e){return this.entityMap[e]}}}),n),i.PGMGraphDiffer=(r=function(e,t,o,n){void 0===n&&(n=null),this.graphA=e,this.graphB=t,this.duration=o,this.timeFn=n||new T.PGMLinearFunction(new S.PGMRange(0,o),S.PGMRange.UNIT);var r=new i.EntityMap(e.root),s={};!function e(t){var o,n,i;if(n=s[t.entity])o=n;else if(i=r.findEntity(t.entity)){var c;if(i.isEqualTo(t))o=i;else if(c=a.as(t,y.PGMLeaf))o=c.withEntity(c.entity+"-after");else if(f=a.as(t,h.PGMComposite)){for(var u=[],p=a.iter(f.children);!p.done;p.next()){var d=e((T=p.value).child);u.push(T.withChild(d))}o=f.withEntityAndChildren(t.entity+"-after",u)}else l.LegacyCoreAssert.fail("not a leaf or composite? huh?",void 0,"PGMGraphDiffer.init","PGMGraphDiffer.swift",110),o=t}else{var f;if(t instanceof y.PGMLeaf)o=t;else if(f=a.as(t,h.PGMComposite)){u=[];for(var m=!1,g=a.iter(f.children);!g.done;g.next()){var T;(d=e((T=g.value).child))===T.child?u.push(T):(m=!0,u.push(T.withChild(d)))}o=m?f.withEntityAndChildren(t.entity,u):t}else l.LegacyCoreAssert.fail("not a leaf or composite, huh?",void 0,"PGMGraphDiffer.init","PGMGraphDiffer.swift",142),o=t}return s[t.entity]=o,o}(t.root),this.safeB=a.clone(s)},a.defineClass({name:"PGMGraphDiffer",ctor:r,props:{getTransitionGraph:function(){var e=this.combineRecursive(new _.PGMReference(this.graphA.root),new _.PGMReference(this.graphB.root));return new g.PGMGraph(e.child,this.graphA.bounds,N.PGMUtils.calculateDuration(e),this.graphA.resources.combine(this.graphB.resources))},combineRecursive:function(e,t){var o,n;if(e.child.entity==t.child.entity)if((o=a.as(e.child,h.PGMComposite))&&(n=a.as(t.child,h.PGMComposite))){var r,i,s,l,c,u,p=null,m=a.clone(this.combineSameEntityCompositeChildren(o,n));if((r=a.as(o,v.PGMSimpleGroup))&&(i=a.as(n,v.PGMSimpleGroup))?p=this.combineSameEntitySimpleGroups(r,i,m):(s=a.as(o,f.PGMFilter))&&(l=a.as(n,f.PGMFilter))?p=this.combineSameEntityFilters(s,l,m):(c=a.as(o,d.PGMClip))&&(u=a.as(n,d.PGMClip))&&(p=this.combineSameEntityClips(c,u,m)),null!=p)return this.combineTransforms(e,t,p)}else if(e.child instanceof y.PGMLeaf&&t.child instanceof y.PGMLeaf)return this.combineSameEntityLeaves(e,t);return this.createCrossFade(e,t)},combineSameEntityFilters:function(e,t,o){return e.spec.isEqualTo(t.spec)?null==o?e:e.withEntityAndChildren(e.entity,o):null},combineSameEntityClips:function(e,t,o){return e.isEqualTo(t)||k.TheoPath.arraysEqual(e.clipPaths,t.clipPaths)?null==o?e:e.withEntityAndChildren(e.entity,o):null},combineSameEntitySimpleGroups:function(e,t,o){return null==o?e:e.withEntityAndChildren(e.entity,o)},combineTransforms:function(e,t,o){return e.compositing.equal(t.compositing)?o===e.child?e:e.withChild(o):new _.PGMReference(o,e.compositing,e.animations.append(new E.PGMTransformAnimation(this.timeFn,N.PGMUtils.calcXBoundsForRef(e),N.PGMUtils.calcXBoundsForRef(t))))},combineSameEntityCompositeChildren:function(e,t){for(var o=0,n=0,r=[],i=0;;)if(o<e.children.length&&n<t.children.length){var a=e.children[o],s=t.children[n];if(a.child.entity==s.child.entity){var c=this.combineRecursive(a,s);r.push(c),c===a&&(i+=1),o+=1,n+=1}else{var u=t.indexOfChild(a.child.entity),p=e.indexOfChild(s.child.entity);if(null!=p&&null!=u){var d=p-o,h=u-n;d<0?(r.push(this.createFade(this.safeBRef(s),!1)),n+=1):h<0?(r.push(this.createFade(a,!1)),o+=1):h>d?(r.push(this.createFade(a,!0)),o+=1):(r.push(this.createFade(this.safeBRef(s),!0)),n+=1)}else null==p&&(null!=this.safeB[s.child.entity]?r.push(this.createFade(this.safeBRef(s),!1)):l.LegacyCoreAssert.fail("did not find a safe entity",{entity:s.child.entity},"PGMGraphDiffer.combineSameEntityCompositeChildren","PGMGraphDiffer.swift",418),n+=1),null==u&&(r.push(this.createFade(a,!0)),o+=1)}}else if(o<e.children.length)a=e.children[o],r.push(this.createFade(a,!0)),o+=1;else{if(!(n<t.children.length))break;s=t.children[n],r.push(this.createFade(this.safeBRef(s),!1)),n+=1}return i==r.length?null:r},safeBRef:function(e){var t;return(t=this.safeB[e.child.entity])?t===e.child?e:new _.PGMReference(t,e.compositing):(l.LegacyCoreAssert.fail("should always have a safe reference!",void 0,"PGMGraphDiffer.safeBRef","PGMGraphDiffer.swift",472),e)},combineSameEntityLeaves:function(e,t){var o,n,r,i;if(e.child.isEqualTo(t.child))return this.combineTransforms(e,t,e.child);if((o=a.as(e.child,R.PGMText))&&(n=a.as(t.child,R.PGMText))){if(o.canInterpolate(n))return this.combineTransforms(e,t,o.withAnimations(new u.PGMAnimationList([new b.PGMTextAnimation(this.timeFn,o.bounds,o.style,n.bounds,n.style,o.renderRuns,n.renderRuns)]).merge(o.animations)))}else if((r=a.as(e.child,P.PGMShape))&&(i=a.as(t.child,P.PGMShape))){var s=r.paths.length==i.paths.length;if(s)for(var l=a.iter(a.range(0,r.paths.length,!1));!l.done;l.next()){var c=l.value;if(r.paths[c]!=i.paths[c]){s=!1;break}}if(s)return this.combineTransforms(e,t,r.withAnimations(new u.PGMAnimationList([new F.PGMShapeAnimation(this.timeFn,r.color,r.bounds,i.color,i.bounds)]).merge(r.animations)))}return this.createCrossFade(e,t)},createFade:function(e,t){return new _.PGMReference(e.child,e.compositing,e.animations.append(new C.PGMOpacityAnimation(this.timeFn,t?1:0,t?0:1)))},createCrossFade:function(e,t){var o,n,r=this.safeB[t.child.entity];if(e.child.entity==t.child.entity){var i=N.PGMUtils.calcBounds(e.child,c.Matrix2D.Identity),a=N.PGMUtils.calcBounds(t.child,c.Matrix2D.Identity);function l(e,t,o){if(t.width==e.width&&t.height==e.height)return new E.PGMTransformedBounds(o,t);var n=t.evalXY(0,0),r=c.Matrix2D.scalingXYfromPoint(n,t.width/e.width,t.height/e.height);return new E.PGMTransformedBounds(r.concat(o),D.TheoRect.fromXYWH(n.x,n.y,e.width,e.height))}o=new _.PGMReference(e.child,e.compositing,e.animations.append(new E.PGMTransformAnimation(this.timeFn,N.PGMUtils.calcXBoundsForRef(e),l(i,a,t.compositing.placement)))),n=new _.PGMReference(r,t.compositing,t.animations.append(new E.PGMTransformAnimation(this.timeFn,l(a,i,e.compositing.placement),N.PGMUtils.calcXBoundsForRef(t))))}else o=e,n=t;return new _.PGMReference(new f.PGMFilter("crossfade-"+s.GUIDUtils.makeGUID(),A.PGMNodeMetadata.EMPTY,new u.PGMAnimationList([new m.PGMFilterAnimation(this.timeFn,new p.PGMBlendFilterSpec([1,0]),new p.PGMBlendFilterSpec([0,1]))]),[o,n],new p.PGMBlendFilterSpec([1,0])))}}}),r)},RiZt:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("GINV");r.StorageSpecAdobeContentPlatform=(n=function e(t){this.blobUrl=t,a.StorageSpec.call(this,e.KIND)},i.defineClass({name:"StorageSpecAdobeContentPlatform",ctor:n,superName:"StorageSpec",statics:{KIND:"acp",KEY_BLOB_URL:"blob-url",decodeSpec:function(e){var t;return null!=(t=i.as(e[n.KEY_BLOB_URL],"String"))?new n(t):null}},props:{encode:function(){var e={};return e[a.StorageSpec.KEY_KIND]=n.KIND,e[n.KEY_BLOB_URL]=this.blobUrl,e},isEqualTo:function(e){var t;return!!(t=i.as(e,n))&&this.blobUrl==t.blobUrl&&a.StorageSpec.prototype.isEqualTo.call(this,e)}}}),n)},RkYL:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("gXiO"),l=o("fNpk");i.TheoTime=(n=function(e,t){this.value=e,l.LegacyCoreAssert.isTrue(0!=t,"TheoTime 0 timescale is invalid!",void 0,"TheoTime.init","TheoTime.swift",26),this.timescale=t,s.CoreObject.call(this)},r={},a.defineClass({name:"TheoTime",ctor:n,superName:"CoreObject",statics:{Zero:{get:function(){return void 0===r.Zero&&(r.Zero=new n(0,30)),r.Zero}},One:{get:function(){return void 0===r.One&&(r.One=new n(1,30)),r.One}},kSecondsEpsilon:.01,fromSecondsAsMs:function(e){return n.fromSeconds(e,1e3)},fromSeconds:function(e,t){return void 0===t&&(t=n.Zero.timescale),new n(a.toInt(e*a.toDouble(t)),t)},fromTimeInTimescale:function(e,t){return e.timescale==t?e.clone():n.fromSeconds(e.seconds,e.timescale)},earlier:function(e,t){return e.earlierThan(t)?e:t},later:function(e,t){return e.laterThan(t)?e:t},decodeJson:function(e){return null==e?null:(t=a.as(e,["Array","Int"]))?2!=t.length?(l.LegacyCoreAssert.fail("TheoTime: data is not an array with 2 elements",void 0,"TheoTime.decodeJson","TheoTime.swift",227),null):new n(t[0],t[1]):(l.LegacyCoreAssert.fail("TheoTime: data is not an array",void 0,"TheoTime.decodeJson","TheoTime.swift",234),null);var t}},props:{clone:function(){return new n(this.value,this.timescale)},seconds:{get:function(){return l.LegacyCoreAssert.isTrue(0!=this.timescale,"TheoTime 0 timescale is invalid when trying to get seconds!",void 0,"TheoTime","TheoTime.swift",65),0==this.timescale?0:a.toDouble(this.value)/a.toDouble(this.timescale)}},isZero:{get:function(){return 0==this.value}},equals:function(e){return this.value==e.value&&this.timescale==e.timescale},secondsEqual:function(e){return this.timescale==e.timescale?this.value==e.value:Math.abs(this.seconds-e.seconds)<n.kSecondsEpsilon},laterThan:function(e){return this.timescale==e.timescale?this.value>e.value:this.seconds-e.seconds>=n.kSecondsEpsilon},laterThanOrEqual:function(e){return this.timescale==e.timescale?this.value>=e.value:this.laterThan(e)||this.secondsEqual(e)},earlierThan:function(e){return this.timescale==e.timescale?this.value<e.value:e.seconds-this.seconds>=n.kSecondsEpsilon},earlierThanOrEqual:function(e){return this.timescale==e.timescale?this.value<=e.value:this.earlierThan(e)||this.secondsEqual(e)},add:function(e){return e.timescale==this.timescale?new n(this.value+e.value,this.timescale):new n(this.value+a.toInt(a.toDouble(this.timescale)*e.seconds),this.timescale)},addSeconds:function(e){return new n(this.value+a.toInt(a.toDouble(this.timescale)*e),this.timescale)},addVal:function(e){return new n(this.value+e,this.timescale)},subtract:function(e){if(e.timescale==this.timescale)return l.LegacyCoreAssert.isTrue(this.value>=e.value,"current time is greater",void 0,"TheoTime.subtract","TheoTime.swift",168),new n(this.value-e.value,this.timescale);var t=a.toInt(a.toDouble(this.timescale)*e.seconds);return l.LegacyCoreAssert.isTrue(this.value>=t,"current time is greater",void 0,"TheoTime.subtract","TheoTime.swift",174),new n(this.value-t,this.timescale)},safeSubtract:function(e){if(e.timescale==this.timescale)return new n(Math.max(this.value-e.value,0),this.timescale);var t=a.toInt(a.toDouble(this.timescale)*e.seconds);return new n(Math.max(this.value-t,0),this.timescale)},unsafeSubtract:function(e){return e.timescale==this.timescale?new n(this.value-e.value,this.timescale):new n(this.value-a.toInt(a.toDouble(this.timescale)*e.seconds),this.timescale)},multiply:function(e){return new n(a.toInt(a.toDouble(this.value)*e),this.timescale)},encodeJson:function(){return a.as([this.value,this.timescale],"AnyObject")}}}),n)},S2Mt:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"Forma":{"className":"Forma","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"placement":{"$ref":"Root.json#/definitions/Matrix2D"},"animation":{"$ref":"Animation.json#/definitions/FormaAnimation"},"moveable":{"type":"boolean"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"controller-kind":{"type":"string","default":""},"controller-metadata":{"$ref":"#/definitions/ControllerMetadata"},"intent":{"type":"string","enum":["logo","pattern","icon","floating-shape","grid-cell"]}},"required":["id","path","placement"]}]},"ControllerMetadata":{"className":"ControllerMetadata","type":"object","properties":{"size":{"$ref":"Root.json#/definitions/TheoSize"},"backing-shape-id":{"type":"string"},"content-id":{"type":"string"},"wrapper-id":{"type":"string"},"highlightMethod":{"type":"integer"},"charstyle-ranges":{"type":"object","properties":{"Highlight":{"type":"array","items":{"type":"integer"}}}}}},"NonRootFormaTypes":{"oneOf":[{"$ref":"#/definitions/GroupForma"},{"$ref":"#/definitions/TextForma"},{"$ref":"#/definitions/ShapeForma"},{"$ref":"#/definitions/FrameForma"},{"$ref":"#/definitions/ImageForma"},{"$ref":"#/definitions/VectorForma"},{"$ref":"#/definitions/VideoForma"},{"$ref":"#/definitions/SmartGroupForma"}]},"GroupFormaBase":{"allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"character-styles":{"type":"object","description":"lockupStyle.characterStyles","patternProperties":{"^.*$":{"$ref":"Styles.json#/definitions/LockupStyle"}}},"character-ranges":{"type":"object","description":"lockupStyle.characterStyles","patternProperties":{"^.*$":{"type":"array","items":{"type":"integer"}}}},"children":{"type":"array","items":{"$ref":"#/definitions/NonRootFormaTypes"}}}}]},"GroupForma":{"className":"GroupForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"kind":{"enum":["group"]}},"required":["kind"]}]},"RootForma":{"className":"RootForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"root-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"kind":{"enum":["Root"]}},"required":["kind"]}]},"FrameForma":{"className":"FrameForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"clipmode":{"type":"boolean","default":true},"kind":{"enum":["Frame"]}},"required":["kind"]}]},"SmartGroupForma":{"className":"SmartGroupForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"kind":{"enum":["smart-group"]}},"required":["kind"]}]},"ImageFormaBase":{"allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"image-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"content-id":{"type":"string","default":""}}}]},"ImageForma":{"className":"ImageForma","allOf":[{"$ref":"#/definitions/ImageFormaBase"},{"properties":{"kind":{"enum":["Image"]}},"required":["kind"]}]},"VideoForma":{"className":"VideoForma","allOf":[{"$ref":"#/definitions/ImageFormaBase"},{"properties":{"video-content-id":{"type":"string","default":""},"kind":{"enum":["Video"]}},"required":["kind"]}]},"ShapeForma":{"className":"ShapeForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"artwork":{"$ref":"Artwork.json#/definitions/TheoArtworkNodeTypes"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"content-id":{"type":"string","default":""},"shape-id":{"type":"string"},"size":{"$ref":"Root.json#/definitions/TheoSize"},"slice-box":{"$ref":"Root.json#/definitions/TheoRect"},"content-region":{"$ref":"Root.json#/definitions/TheoRect"},"text-box":{"$ref":"Root.json#/definitions/TheoRect"},"prescale":{"type":"number"},"kind":{"enum":["Shape"]}},"required":["kind"]}]},"TextForma":{"className":"TextForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"text":{"$ref":"Text.json#/definitions/TextModel"},"text-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"range-in-lockup":{"$ref":"Text.json#/definitions/TextRange"},"row-index":{"type":"integer","default":0},"kind":{"enum":["Text"]}},"required":["text","kind"]}]},"VectorForma":{"className":"VectorForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"content-id":{"type":"string","default":""},"size":{"$ref":"Root.json#/definitions/TheoSize"},"color":{"$ref":"Color.json#/definitions/SolidColor"},"kind":{"enum":["Vector"]}},"required":["kind"]}]},"FormaPage":{"className":"FormaPage","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["forma-document"]},"kind":{"type":"string"},"template-id":{"type":"string","default":""},"size":{"$ref":"Root.json#/definitions/TheoSize"},"size-id":{"type":"string","default":"Instagram"},"export-data":{"$ref":"#/definitions/FormaPageExportData"},"color-library":{"$ref":"Color.json#/definitions/ColorLibrary"},"children":{"type":"array","items":{"$ref":"#/definitions/RootForma"},"maxItems":1}},"required":["id","color-library","size-id"]}]},"FormaPageExportData":{"className":"FormaPageExportData","type":"object","properties":{"dimensions":{"$ref":"Root.json#/definitions/TheoSize"},"format":{"type":"integer","default":0},"ppi":{"type":"number"}}}}}')},SDMx:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("tvh+");r.CoreContentJSON=(n=function e(t,o,n){void 0===n&&(n=null),this.data=t,a.CoreContent.call(this,e.KIND,o,n)},i.defineClass({name:"CoreContentJSON",ctor:n,superName:"CoreContent",statics:{KIND:"json",decodePayload:function(e,t,o){var r;return(r=i.as(e[a.CoreContent.KEY_DATA],["Dictionary","String","Any"]))?new n(r,t,o):null},equalDictionaries:function(e,t){if(e===t)return!0;var o=i.keys(e),r=i.keys(t);if(o.length!=r.length)return!1;for(var a=i.iter(o);!a.done;a.next()){var s=a.value;if(!n.equalThings(e[s],t[s]))return!1}return!0},equalArrays:function(e,t){if(e===t)return!0;if(e.length!=t.length)return!1;for(var o=i.iter(i.range(0,e.length,!1));!o.done;o.next()){var r=o.value;if(!n.equalThings(e[r],t[r]))return!1}return!0},equalThings:function(e,t){return null==e&&null==t||null!=e&&null!=t&&((o=i.as(e,["Dictionary","String","Any"]))?!!(r=i.as(t,["Dictionary","String","Any"]))&&n.equalDictionaries(o,r):(a=i.as(e,["Array","Any"]))?!!(s=i.as(t,["Array","Any"]))&&n.equalArrays(a,s):null!=(l=i.as(e,"String"))?null!=(c=i.as(t,"String"))&&l==c:null!=(u=i.as(e,"Int"))?null!=(p=i.as(t,"Int"))&&u==p:null!=(d=i.as(e,"Double"))?null!=(h=i.as(t,"Double"))&&d==h:null!=(f=i.as(e,"Bool"))&&null!=(m=i.as(t,"Bool"))&&f==m);var o,r,a,s,l,c,u,p,d,h,f,m}},props:{encodePayload:function(e){e[a.CoreContent.KEY_DATA]=this.data},isEqualTo:function(e){var t;return!!(t=i.as(e,n))&&(this===e||a.CoreContent.prototype.isEqualTo.call(this,e)&&n.equalDictionaries(this.data,t.data))}}}),n)},ThKb:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("gXiO"),s=o("iCxV"),l=o("fNpk"),c=o("1NAc");r.TheoMatrix=(n=function(e){if(this.m=i.clone(e),e.length>0){0==e[0].length?(this.cols=0,this.rows=0):(this.cols=e[0].length,this.rows=e.length);for(var t=i.iter(e);!t.done;t.next()){var o=t.value;l.LegacyCoreAssert.isTrue(this.cols==o.length,"row lengths do not match",void 0,"TheoMatrix.init","TheoMatrix.swift",32)}}else this.rows=0,this.cols=0;a.CoreObject.call(this)},i.defineClass({name:"TheoMatrix",ctor:n,superName:"CoreObject",statics:{E_DOUBLE:2.718281828459045,empty:function(){return new n([[]])},zeros:function(e,t){for(var o=[],r=i.iter(i.range(0,e,!1));!r.done;r.next()){for(var a=[],s=i.iter(i.range(0,t,!1));!s.done;s.next())a.push(0);o.push(a)}return new n(o)},ones:function(e,t){for(var o=[],r=i.iter(i.range(0,e,!1));!r.done;r.next()){for(var a=[],s=i.iter(i.range(0,t,!1));!s.done;s.next())a.push(1);o.push(a)}return new n(o)},decodeJson:function(e){return null==e?null:(t=i.as(e,["Array","Any"]))?new n(t):null;var t},createMatrixFromList:function(e,t,o){l.LegacyCoreAssert.isTrue(e.length==t*o,"incorrect number of list items to create matrix from",void 0,"TheoMatrix.createMatrixFromList","TheoMatrix.swift",404);for(var r=[],a=i.iter(i.range(0,o,!1));!a.done;a.next()){for(var s=a.value,c=[],u=i.iter(i.range(0,t,!1));!u.done;u.next()){var p=u.value;c.push(e[s*t+p])}r.push(c)}return new n(r)}},props:{value:function(e,t){return e<this.rows&&t<this.cols?this.m[e][t]:(l.LegacyCoreAssert.fail("out of bounds",void 0,"TheoMatrix.value","TheoMatrix.swift",51),0)},setValue:function(e,t,o){e<this.rows&&t<this.cols?this.m[e][t]=o:l.LegacyCoreAssert.fail("out of bounds",void 0,"TheoMatrix.setValue","TheoMatrix.swift",61)},setRowValue:function(e,t){if(e<this.rows)for(var o=i.iter(i.range(0,this.cols,!1));!o.done;o.next()){var n=o.value;this.m[e][n]=t}else l.LegacyCoreAssert.fail("out of bounds",void 0,"TheoMatrix.setRowValue","TheoMatrix.swift",72)},setColValue:function(e,t){if(e<this.cols)for(var o=i.iter(i.range(0,this.rows,!1));!o.done;o.next()){var n=o.value;this.m[n][e]=t}else l.LegacyCoreAssert.fail("out of bounds",void 0,"TheoMatrix.setColValue","TheoMatrix.swift",82)},sum:function(){return this.isEmpty()?null:this.sumDim(1).sumDim(0).value(0,0)},maxElement:function(){return this.isEmpty()?null:i.max(this.asFlatArray)},minElement:function(){return this.isEmpty()?null:i.min(this.asFlatArray)},sumRows:function(){return this.sumDim(0)},sumColumns:function(){return this.sumDim(1)},size:{get:function(){return new c.TheoSize(i.toDouble(this.cols),i.toDouble(this.rows))}},width:{get:function(){return this.cols}},height:{get:function(){return this.rows}},numElements:{get:function(){return this.cols*this.rows}},sumRegion:function(e){if(!(e.minX>=0&&e.minY>=0&&i.toInt(e.maxX)<=this.cols&&i.toInt(e.maxY)<=this.rows))return i.opt(s.Host.logging,(function(e){return e.warning("out of bounds")})),0;var t=i.toInt(e.minX),o=i.toInt(e.minY),n=i.toInt(e.maxX),r=i.toInt(e.maxY),a=0;if(t>=n||o>=r)return 0;for(var l=i.iter(i.range(t,n,!1));!l.done;l.next())for(var c=l.value,u=i.iter(i.range(o,r,!1));!u.done;u.next()){var p=u.value;a+=this.m[p][c]}return a},sumDim:function(e){if(void 0===e&&(e=null),null==e)return this.sumRows().sumColumns();if(1==e){for(var t=[],o=i.iter(this.m);!o.done;o.next()){var r=o.value;t.push([r.reduce((function(e,t){return e+t}),0)])}return new n(t)}if(0==e){t=[];for(var a=i.iter(i.range(0,this.cols,!1));!a.done;a.next()){for(var s=a.value,c=0,u=i.iter(i.range(0,this.rows,!1));!u.done;u.next()){var p=u.value;c+=this.m[p][s]}t.push(c)}return new n([t])}return l.LegacyCoreAssert.fail("Only 2 dimensional matrices are supported at the moment",void 0,"TheoMatrix.sumDim","TheoMatrix.swift",193),n.empty()},isEmpty:function(){return 0==this.rows&&0==this.cols},matrixMultiply:function(e){var t=[];if(this.cols!=e.rows)return l.LegacyCoreAssert.fail("matrices do not have correct dimensions",void 0,"TheoMatrix.matrixMultiply","TheoMatrix.swift",209),n.empty();for(var o=i.iter(i.range(0,this.rows,!1));!o.done;o.next()){for(var r=o.value,a=[],s=i.iter(i.range(0,e.cols,!1));!s.done;s.next()){for(var c=s.value,u=0,p=i.iter(i.range(0,e.rows,!1));!p.done;p.next()){var d=p.value;u+=this.m[r][d]*e.value(d,c)}a.push(u)}t.push(a)}var h=new n(t);return l.LegacyCoreAssert.isTrue(h.rows==this.rows,"rows do not match",void 0,"TheoMatrix.matrixMultiply","TheoMatrix.swift",228),l.LegacyCoreAssert.isTrue(h.cols==e.cols,"cols do not match",void 0,"TheoMatrix.matrixMultiply","TheoMatrix.swift",229),h},multiply:function(e){for(var t=[],o=i.iter(i.range(0,this.rows,!1));!o.done;o.next()){for(var r=o.value,a=this.m[r].concat(),s=i.iter(i.range(0,this.cols,!1));!s.done;s.next()){var l=s.value;a[l]=a[l]*e.value(1==e.rows?0:r,l)}t.push(a)}return new n(t)},multiplyConstant:function(e){var t=this,o=this.m.map((function(o){return o.map((function(t){return t*e}),t)}),this);return new n(o)},divide:function(e){var t=this,o=e.m.map((function(e){return e.map((function(e){return 1/e}),t)}),this);return this.multiply(new n(o))},exp:function(){var e=this,t=this.m.map((function(t){return t.map((function(e){return Math.pow(n.E_DOUBLE,e)}),e)}),this);return new n(t)},squared:function(){var e=this,t=this.m.map((function(t){return t.map((function(e){return e*e}),e)}),this);return new n(t)},squareRoot:function(){var e=this,t=this.m.map((function(t){return t.map((function(e){return Math.sqrt(e)}),e)}),this);return new n(t)},matrixLog:function(){var e=this,t=this.m.map((function(t){return t.map((function(e){return Math.log(e)}),e)}),this);return new n(t)},sigmoid:function(){var e=this,t=this.m.map((function(t){return t.map((function(e){return 1/(1+Math.pow(n.E_DOUBLE,-1*e))}),e)}),this);return new n(t)},relu:function(){var e=this,t=this.m.map((function(t){return t.map((function(e){return Math.max(0,e)}),e)}),this);return new n(t)},add:function(e){for(var t=[],o=i.iter(i.range(0,this.rows,!1));!o.done;o.next()){for(var r=o.value,a=this.m[r].concat(),s=i.iter(i.range(0,this.cols,!1));!s.done;s.next()){var l=s.value;a[l]+=e.value(1==e.rows?0:r,l)}t.push(a)}return new n(t)},addConstant:function(e){var t=this,o=this.m.map((function(o){return o.map((function(t){return t+e}),t)}),this);return new n(o)},subtract:function(e){return this.add(e.multiplyConstant(-1))},transpose:function(){for(var e=[],t=i.iter(i.range(0,this.cols,!1));!t.done;t.next()){for(var o=t.value,r=[],a=i.iter(i.range(0,this.rows,!1));!a.done;a.next()){var s=a.value;r.push(this.m[s][o])}e.push(r)}return new n(e)},concatenateRows:function(e){return l.LegacyCoreAssert.fail("not implemented yet",void 0,"TheoMatrix.concatenateRows","TheoMatrix.swift",337),n.empty()},concatenateColumns:function(e){return l.LegacyCoreAssert.fail("not implemented yet",void 0,"TheoMatrix.concatenateColumns","TheoMatrix.swift",342),n.empty()},asArray:{get:function(){return this.m}},asFlatArray:{get:function(){return this.m.reduce((function(e,t){return e.concat(t)}),[])}},encodeJson:function(){return i.as(this.m,"AnyObject")}}}),n)},Ucb9:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("sq5L"),l=o("WGnI"),c=o("Zifs"),u=o("hgLm");r.PGMShape=(n=function e(t,o,n,r,a,s){this.paths=i.clone(a),this.color=s,l.PGMLeaf.call(this,e.TYPE,t,o,n,r)},i.defineClass({name:"PGMShape",ctor:n,superName:"PGMLeaf",statics:{TYPE:"pgm-shape",PROP_PATHS:"paths",PROP_COLOR:"color",decodeLeaf:function(e,t,o,r,l,p,d){var h,f;if(a.LegacyCoreAssert.isTrue(t==n.TYPE,"can only decode PGM shapes",void 0,"PGMShape.decodeLeaf","PGMShape.swift",90),(h=i.as(e[n.PROP_PATHS],["Array","Any"]))&&(f=c.SolidColor.decodeJson(i.as(e[n.PROP_COLOR],"AnyObject")))){for(var m=[],g=i.iter(h);!g.done;g.next()){var y,T=g.value;(y=u.TheoPath.decodeJson(i.as(T,"AnyObject")))&&m.push(y)}return new n(o,r,l,p,m,f)}return d.error(s.PGMError.BAD_SHAPE,"missing required property on shape node"),null}},props:{encode:function(){for(var e=l.PGMLeaf.prototype.encode.call(this),t=[],o=i.iter(this.paths);!o.done;o.next()){var r=o.value;t.push(r.encodeJson())}return e[n.PROP_PATHS]=t,e[n.PROP_COLOR]=this.color.encodeJson(),e},withEntity:function(e){return new n(e,this.meta,this.animations,this.bounds,this.paths,this.color)},withAnimations:function(e){return e===this.animations?this:new n(this.entity,this.meta,e,this.bounds,this.paths,this.color)}}}),n)},UzQk:function(e,t,o){var n=t,r=o("oAGj"),i=o("C42b"),a=o("Kkml"),s=o("yvDn"),l=o("gXiO"),c=o("MO6F"),u=o("90dd"),p=o("ZoS2"),d=o("7YiD"),h=o("iCxV"),f=o("xWmh"),m=o("XeBu"),g=o("F13m"),y=o("8yDY"),T=o("Gn25"),A=o("FtYp"),C=o("jxBj"),_=o("kUMq"),S=o("0OXu"),P=o("II88"),F=o("02o7"),v=o("xYeW"),R=o("vPou"),b=o("5VwO"),E=o("hJmx"),N=o("PvbB"),k=o("kpMz"),D=o("ABa3"),I=o("n3Td"),M=o("9lcg"),x=o("3lr5"),w=o("2rlr"),O=o("FumV"),L=o("cCxC"),B=o("n6Je"),G=o("8vXU"),q=o("kJ8p"),j=o("/BuD"),X=o("A+jl"),$=o("+1Zk"),U=o("IUM5"),H=o("zIi2"),Y=o("7pIX"),V=o("cMl4"),z=o("NUIx"),K=o("mBzD"),W=o("tvh+"),J=o("ko5Z"),Z=o("0GlD"),Q=o("SDMx"),ee=o("xB/a"),te=o("WF+G"),oe=o("GINV"),ne=o("RiZt"),re=o("t+nd"),ie=o("fnrT"),ae=o("6ftY"),se=o("KQHZ"),le=o("uYSz"),ce=o("VXZl"),ue=o("KDc2"),pe=o("GOtr"),de=o("k6St"),he=o("ll2+"),fe=o("GtBD"),me=o("G7Wc"),ge=o("9WSY"),ye=o("cZuM"),Te=o("Q1H8"),Ae=o("y8UA"),Ce=o("9oQN"),_e=o("Bqrm"),Se=o("Z25M"),Pe=o("c3Vl"),Fe=o("wc1n"),ve=o("cbNz"),Re=o("KsJe"),be=o("Yudi"),Ee=o("pFDI"),Ne=o("iFIB"),ke=o("/afT"),De=o("jC54"),Ie=o("5XIA"),Me=o("ODYV"),xe=o("6NRR"),we=o("KSe6"),Oe=o("yhkb"),Le=o("+nk0"),Be=o("AVHO"),Ge=o("oknb"),qe=o("aO0D"),je=o("Bpjk"),Xe=o("lqhW"),$e=o("quOg"),Ue=o("AnBp"),He=o("G/OM"),Ye=o("h67N"),Ve=o("1HsO"),ze=o("U010"),Ke=o("b/QB"),We=o("0PPJ"),Je=(o("J3ZR"),o("g8Fi")),Ze=o("NbJN"),Qe=o("8zEY"),et=o("i5Hy"),tt=o("n/CE"),ot=o("35Q0"),nt=o("oKI3"),rt=o("rrhp"),it=o("Tq01"),at=o("wpCo"),st=o("4mEG"),lt=o("raY1"),ct=o("lbYW"),ut=o("KgU+"),pt=o("Aj/e"),dt=o("hJqd"),ht=o("70fJ"),ft=o("rsKm"),mt=o("jo4Y"),gt=o("SVjO"),yt=o("pjjd"),Tt=o("vV1H"),At=o("x6FH"),Ct=o("y/On"),_t=o("H1Z2"),St=o("bqbo"),Pt=o("sTUO"),Ft=o("434x"),vt=o("j89o"),Rt=o("cEBg"),bt=o("o+xL"),Et=o("nELi"),Nt=o("cRpU"),kt=o("p8vO"),Dt=o("9tXS"),It=o("yHU1"),Mt=o("5+WR"),xt=o("nQ/X"),wt=o("H3ZP"),Ot=o("qUXk"),Lt=o("7S/6"),Bt=o("01gE"),Gt=o("3nOH"),qt=o("QLFD"),jt=o("25Jq"),Xt=o("CMNw"),$t=o("elwG"),Ut=o("Nk+Q"),Ht=o("UUXZ"),Yt=o("PSFa"),Vt=o("eLsM"),zt=o("hsXA"),Kt=o("t1qz"),Wt=o("Mr7n"),Jt=o("D89E"),Zt=o("aKgf"),Qt=o("u+mS"),eo=o("G9CY"),to=o("JU+l"),oo=o("9X7Y"),no=o("Dz6V"),ro=o("mD2h"),io=o("EGPT"),ao=o("bccX"),so=o("7siz"),lo=o("McK+"),co=o("QLmq"),uo=o("d820"),po=o("Cl7N"),ho=o("36r7"),fo=o("dHJt"),mo=o("x7yN"),go=o("JFv5"),yo=o("voLh"),To=o("DjTP"),Ao=o("aen+"),Co=(o("k7ZV"),o("lgJd"),o("H9Ol")),_o=o("waL6"),So=o("Pil/"),Po=o("6ZWm"),Fo=o("9Lk3"),vo=o("ZK0l"),Ro=o("NkBu"),bo=o("KIfs"),Eo=o("LhEC"),No=o("uxH+"),ko=o("JO5d"),Do=o("mL0c"),Io=o("fGVU"),Mo=o("8/a0"),xo=o("JEnV"),wo=o("UB0O"),Oo=o("53P9"),Lo=o("Zc5V"),Bo=o("PXlJ"),Go=o("d3iY"),qo=o("VDg0"),jo=o("JgVS"),Xo=o("cEEQ"),$o=o("9kak"),Uo=o("TkOd"),Ho=o("GFAD"),Yo=o("KdeS"),Vo=o("EDIN"),zo=o("X1F6"),Ko=o("Cj3Q"),Wo=o("JKVa"),Jo=o("06HC"),Zo=o("8t9B"),Qo=o("3UhB"),en=o("CaSj"),tn=o("UGKO"),on=o("ZLO9"),nn=o("nrTo"),rn=o("HG3C"),an=o("hb8m"),sn=o("PXFs"),ln=o("h8Q5"),cn=o("UqVc"),un=o("9BFu"),pn=o("vYM0"),dn=o("YSlt"),hn=o("Ohrj"),fn=o("HWAX"),mn=o("jcfx"),gn=o("lq1z"),yn=o("4ZS9"),Tn=o("eiag"),An=o("xe42"),Cn=o("16hp"),_n=o("OYRJ"),Sn=o("TP4q"),Pn=o("v/sv"),Fn=o("bSZx"),vn=o("Dq5S"),Rn=o("3v9D"),bn=o("hywZ"),En=(o("6vbT"),o("i0RJ"),o("2wfq"),o("WlyK")),Nn=o("LwcA"),kn=o("MZST"),Dn=o("iSwi"),In=o("LqGn"),Mn=o("2Srg"),xn=o("ws+m"),wn=o("xRbc"),On=o("zbwF"),Ln=o("cYVN"),Bn=o("7Ta2"),Gn=o("taeg"),qn=o("ERpL"),jn=o("lYNH"),Xn=o("p+tC"),$n=o("XupS"),Un=o("EoOi"),Hn=o("ol4x"),Yn=o("7l9C"),Vn=o("d2x6"),zn=o("O60Y"),Kn=o("fVJ2"),Wn=o("dJuF"),Jn=o("SmK9"),Zn=o("13MC"),Qn=o("N5RB"),er=o("QBb7"),tr=o("VQVe"),or=o("qsM9"),nr=o("URxh"),rr=o("i1Gv"),ir=o("Quhx"),ar=o("jV/A"),sr=o("9YN4"),lr=o("Qb69"),cr=o("zjY7"),ur=o("p15M"),pr=o("/9Bx"),dr=o("R19c"),hr=o("2bF5"),fr=o("s/Zj"),mr=o("az6C"),gr=o("TbN7"),yr=o("kVgh"),Tr=o("Vvcj"),Ar=o("R0Y+"),Cr=o("aN2p"),_r=o("9a+Y"),Sr=o("dNOY"),Pr=o("HRWw"),Fr=o("A6KL"),vr=o("q5zr"),Rr=o("VkKB"),br=o("AxS/"),Er=o("lJxM"),Nr=o("qSCS"),kr=o("LGJg"),Dr=o("sW6f"),Ir=o("FNB+"),Mr=o("NxMp"),xr=o("fWxZ"),wr=o("ylxa"),Or=o("OdB2"),Lr=o("P83h"),Br=o("cmoc"),Gr=o("pnSN"),qr=o("fdtz"),jr=o("K0Rh"),Xr=o("djAF"),$r=o("kSRw"),Ur=o("enh0"),Hr=o("WWR6"),Yr=o("zjod"),Vr=o("LcYy"),zr=o("G1DZ"),Kr=o("QbzR"),Wr=o("uZuM"),Jr=o("JEzR"),Zr=o("tQF8"),Qr=o("4mVB"),ei=o("Qlvz"),ti=o("SDdr"),oi=o("yumk"),ni=o("uWOl"),ri=o("c+uM"),ii=o("2ALn"),ai=o("u2iI"),si=o("LCGV"),li=o("QTen"),ci=o("O8XL"),ui=o("cYKp"),pi=o("6h7+"),di=o("kYI4"),hi=o("gpZI"),fi=o("gBh/"),mi=o("CWW7"),gi=o("LP+A"),yi=o("wNKJ"),Ti=o("V3yt"),Ai=o("6Rk9"),Ci=o("x35w"),_i=o("X0GW"),Si=o("MWx2"),Pi=o("lmwz"),Fi=o("MYNe"),vi=o("pmb0"),Ri=o("DP9v"),bi=o("T8w7"),Ei=o("nPwb"),Ni=o("K9Oa"),ki=o("6Tzw"),Di=o("Vm85"),Ii=o("fAXt"),Mi=o("mxdD"),xi=o("7EVG"),wi=o("uj1m"),Oi=o("txj3"),Li=o("K17h"),Bi=o("BQMb"),Gi=o("KkVW"),qi=o("3/rh"),ji=o("Pn67"),Xi=o("nQ+V"),$i=o("SAU6"),Ui=o("+IES"),Hi=o("YeWL"),Yi=o("4/a+"),Vi=o("95jH"),zi=o("C654"),Ki=o("nUE5"),Wi=o("c2hD"),Ji=o("YxjU"),Zi=o("f9IM"),Qi=o("wL85"),ea=o("qTtJ"),ta=o("RO7T"),oa=o("ytEx"),na=o("lWlM"),ra=o("aS4X"),ia=o("uMFj"),aa=o("hEh8"),sa=o("x0BK"),la=o("3OP7"),ca=o("9eTw"),ua=o("3hwA"),pa=o("BAdM"),da=o("muPB"),ha=o("C4JV"),fa=o("Puiz"),ma=o("CqFS"),ga=o("6azk"),ya=o("44Iz"),Ta=o("kwVJ"),Aa=o("hndY"),Ca=o("ML5t"),_a=o("w/+j"),Sa=o("7Pku"),Pa=o("Bcdx"),Fa=o("5ex8"),va=o("RBTN"),Ra=o("Bqrn"),ba=o("dX/e"),Ea=o("pR+7"),Na=o("3HaQ"),ka=o("8Quq"),Da=o("QgdZ"),Ia=o("zW/s"),Ma=o("s3ad"),xa=o("QgZx"),wa=o("mGL3"),Oa=o("a9ow"),La=o("x4Gy"),Ba=o("BgH2"),Ga=o("uUew"),qa=o("VJ9E"),ja=o("0wFF"),Xa=o("SpAV"),$a=o("yGNn"),Ua=o("BbDD"),Ha=o("T9pj"),Ya=o("+qi7"),Va=o("ZhwN"),za=o("dE3O"),Ka=o("37nf"),Wa=o("fNpk"),Ja=o("rxGp"),Za=o("3DEm"),Qa=o("B8ge"),es=o("oTAR"),ts=o("Vfmf"),os=o("L19Y"),ns=o("T6jX"),rs=o("DaVl"),is=o("voyk"),as=o("sq5L"),ss=o("hauK"),ls=o("yjxF"),cs=o("PlOi"),us=o("b94u"),ps=o("5D0C"),ds=o("Ird5"),hs=o("9MJV"),fs=o("wH/i"),ms=o("WUDy"),gs=o("9K9k"),ys=o("f/aw"),Ts=o("zW52"),As=o("jLWG"),Cs=o("rKjb"),_s=o("jfma"),Ss=o("Aj79"),Ps=o("g6aL"),Fs=o("WjWV"),vs=o("Iv44"),Rs=o("GDe9"),bs=o("ZTPx"),Es=o("+ASD"),Ns=o("jfiy"),ks=o("dmHI"),Ds=o("smUN"),Is=o("vTQu"),Ms=o("dz2e"),xs=o("JQ9Y"),ws=o("jSYS"),Os=o("KB91"),Ls=o("BnJw"),Bs=o("/eOI"),Gs=o("sWrh"),qs=(o("KyrH"),o("ascj")),js=o("4JYN"),Xs=o("m404"),$s=o("REQJ"),Us=o("dNmX"),Hs=o("tGKA"),Ys=o("ezSu"),Vs=o("Zifs"),zs=o("byfQ"),Ks=o("umUn"),Ws=o("Q+4n"),Js=o("MnRR"),Zs=o("ThKb"),Qs=o("hgLm"),el=o("oKlP"),tl=o("sIWg"),ol=o("1NAc"),nl=o("RkYL"),rl=o("Yspk"),il=o("xm77"),al=(o("h8iP"),o("b1vF")),sl=o("xcIW"),ll=o("djwB"),cl=o("bauG"),ul=o("WGnI"),pl=o("tlHl"),dl=o("euLT"),hl=o("W6ub"),fl=o("ZA1K"),ml=o("Ucb9"),gl=o("qyrT"),yl=o("bAjp"),Tl=o("bJhu"),Al=o("s3Tu"),Cl=o("7hc0"),_l=o("djS+"),Sl=o("RSS6"),Pl=o("YFY8"),Fl=o("sJQG"),vl=o("mj5y"),Rl=o("0PP3"),bl=o("Q0b+"),El=o("PCN2"),Nl=o("0lVD"),kl=o("sHEF"),Dl=o("zbBQ"),Il=o("R7T4"),Ml=o("a/9s"),xl=o("n8f2"),wl=o("V93b"),Ol=o("kEiY"),Ll=o("rtbu"),Bl=o("FR4n"),Gl=o("qEGv"),ql=o("wYGt"),jl=o("ALtN"),Xl=o("QO3H"),$l=o("zIaq"),Ul=o("eLhV"),Hl=o("mSLX"),Yl=o("+N83"),Vl=o("WR9q"),zl=o("CSb8"),Kl=o("oTkQ"),Wl=o("a+l3"),Jl=o("YX5m"),Zl=o("qWkq"),Ql=o("md5b"),ec=o("bpSr"),tc=o("1vuF"),oc=o("4zuo"),nc=o("Ztps"),rc=o("Jgdj"),ic=o("2eFH"),ac=o("jE7t"),sc=o("W5+J"),lc=o("1bhb"),cc=o("2S5s"),uc=o("KyAS");n.$C=r,n.CoreRandom=i.CoreRandom,n.CollapseBehavior=a.CollapseBehavior,n.UserAction=a.UserAction,n.ChangeBrandingUserAction=a.ChangeBrandingUserAction,n.UserActions=a.UserActions,n.CoreErrorObject=s.CoreErrorObject,n.CoreStringError=s.CoreStringError,n.CoreObject=l.CoreObject,n.TheoBaseSubscription=c.TheoBaseSubscription,n.TheoBasePublishing=c.TheoBasePublishing,n.TheoMessageStatisticsEntry=u.TheoMessageStatisticsEntry,n.TheoMessageStatistics=u.TheoMessageStatistics,n.TheoMessage=u.TheoMessage,n.TheoMessageSubscription=u.TheoMessageSubscription,n.TheoMessagePublisher=u.TheoMessagePublisher,n.TheoMessageSubscriber=u.TheoMessageSubscriber,n.TheoPublishingObject=p.TheoPublishingObject,n.transpilerVersion=d.transpilerVersion,n.Host=h.Host,n.ActionTestImageData=f.ActionTestImageData,n.HostActionTestingProtocol=f.HostActionTestingProtocol,n.HostTimer=m.HostTimer,n.HostAsyncUtilsProtocol=m.HostAsyncUtilsProtocol,n.HostLockProtocol=m.HostLockProtocol,n.HostBrandkitManagerProtocol=g.HostBrandkitManagerProtocol,n.HostCCStorageAPI=y.HostCCStorageAPI,n.HostCCStorageAPINullImpl=y.HostCCStorageAPINullImpl,n.HostCommunityPlatformAPI=T.HostCommunityPlatformAPI,n.HostCommunityPlatformAPINullImpl=T.HostCommunityPlatformAPINullImpl,n.HostCryptoProtocol=A.HostCryptoProtocol,n.HostDCXBranch=C.HostDCXBranch,n.HostDCXComponent=_.HostDCXComponent,n.HostDCXComposite=S.HostDCXComposite,n.HostDCXCompositeNullImpl=P.HostDCXCompositeNullImpl,n.HostDCXBranchNullImpl=P.HostDCXBranchNullImpl,n.HostDCXNodeNullImpl=P.HostDCXNodeNullImpl,n.HostDCXNode=F.HostDCXNode,n.HostNetworkFormDatum=v.HostNetworkFormDatum,n.HostDataProtocol=v.HostDataProtocol,n.HostDataFactoryProtocol=v.HostDataFactoryProtocol,n.HapticStyle=R.HapticStyle,n.HostDeviceUtilsProtocol=R.HostDeviceUtilsProtocol,n.HostExceptionProtocol=b.HostExceptionProtocol,n.HostFactoriesProtocol=E.HostFactoriesProtocol,n.HostFeatureFlagsProtocol=N.HostFeatureFlagsProtocol,n.HostFSEntity=k.HostFSEntity,n.HostFSFolder=k.HostFSFolder,n.HostFSFile=k.HostFSFile,n.HostFSEntityInMemory=D.HostFSEntityInMemory,n.HostFSFileInMemory=D.HostFSFileInMemory,n.HostFSFolderInMemory=D.HostFSFolderInMemory,n.HostFSFolderNullImpl=I.HostFSFolderNullImpl,n.HostFileUtils=M.HostFileUtils,n.ANY_DOCUMENT=x.ANY_DOCUMENT,n.HostFontProviderProtocol=x.HostFontProviderProtocol,n.HostImageAnalysisProtocol=w.HostImageAnalysisProtocol,n.HostImage=w.HostImage,n.HostLearningProtocol=O.HostLearningProtocol,n.getHostPredictionCache=O.getHostPredictionCache,n.HostLifetimeProtocol=L.HostLifetimeProtocol,n.HostLocaleProtocol=B.HostLocaleProtocol,n.LogLevelEnum=G.LogLevelEnum,n.HostLoggingProtocol=G.HostLoggingProtocol,n.ICoreLogImpl=G.ICoreLogImpl,n.CoreLog=G.CoreLog,n.CoreLogToCoreAssert=G.CoreLogToCoreAssert,n.RemoteLoggingEvent=G.RemoteLoggingEvent,n.HostNetworkRequestMethod=q.HostNetworkRequestMethod,n.HostNetworkRequest=q.HostNetworkRequest,n.HostNetworkResponse=q.HostNetworkResponse,n.HostNetworkErrorType=q.HostNetworkErrorType,n.HostCutoutMaskErrorType=q.HostCutoutMaskErrorType,n.HostNetworkError=q.HostNetworkError,n.HostCutoutMaskError=q.HostCutoutMaskError,n.HostComponentResponse=q.HostComponentResponse,n.HostNetworkProtocol=q.HostNetworkProtocol,n.ArtworkInfo=j.ArtworkInfo,n.HostPathUtilsProtocol=j.HostPathUtilsProtocol,n.HostPersistUtilsProtocol=X.HostPersistUtilsProtocol,n.HostAsyncPersistProtocol=X.HostAsyncPersistProtocol,n.HostDocumentComposite=X.HostDocumentComposite,n.HostDocumentBranch=X.HostDocumentBranch,n.HostDocumentNode=X.HostDocumentNode,n.HostDocumentComponent=X.HostDocumentComponent,n.HostPlatformProtocol=$.HostPlatformProtocol,n.CATEGORY_ID_IMAGE=U.CATEGORY_ID_IMAGE,n.CATEGORY_ID_IMAGES=U.CATEGORY_ID_IMAGES,n.CATEGORY_ID_SHAPE=U.CATEGORY_ID_SHAPE,n.CATEGORY_ID_FONT=U.CATEGORY_ID_FONT,n.CATEGORY_ID_RASTER_MASK=U.CATEGORY_ID_RASTER_MASK,n.CATEGORY_ID_LOOK=U.CATEGORY_ID_LOOK,n.FONT_RESOURCE_ID_EMBEDDED_PREFIX=U.FONT_RESOURCE_ID_EMBEDDED_PREFIX,n.FONT_RESOURCE_ID_SPARK_PREFIX=U.FONT_RESOURCE_ID_SPARK_PREFIX,n.HostResourceUtilsProtocol=U.HostResourceUtilsProtocol,n.HostSchemaProtocol=H.HostSchemaProtocol,n.StockUserEntitlement=Y.StockUserEntitlement,n.HostStockLicenseProtocol=Y.HostStockLicenseProtocol,n.HostTestingProtocol=V.HostTestingProtocol,n.HostTextModelUtilsProtocol=z.HostTextModelUtilsProtocol,n.VideoInfo=K.VideoInfo,n.HostVideoUtilsProtocol=K.HostVideoUtilsProtocol,n.CoreContent=W.CoreContent,n.CoreContentBase64=J.CoreContentBase64,n.CoreContentBinary=Z.CoreContentBinary,n.CoreContentJSON=Q.CoreContentJSON,n.CoreContentString=ee.CoreContentString,n.CorePath=te.CorePath,n.StorageSpec=oe.StorageSpec,n.StorageSpecAdobeContentPlatform=ne.StorageSpecAdobeContentPlatform,n.StorageSpecAdobeFont=re.StorageSpecAdobeFont,n.StorageSpecApplicationResource=ie.StorageSpecApplicationResource,n.StorageSpecCommunityPlatform=ae.StorageSpecCommunityPlatform,n.StorageSpecContentLiteral=se.StorageSpecContentLiteral,n.StorageSpecExternalCC=le.StorageSpecExternalCC,n.StorageSpecHTTP=ce.StorageSpecHTTP,n.StorageSpecInvalid=ue.StorageSpecInvalid,n.StorageSpecLocalComposite=pe.StorageSpecLocalComposite,n.StorageSpecLocalCompositeMulti=de.StorageSpecLocalCompositeMulti,n.StorageSpecLocalFile=he.StorageSpecLocalFile,n.StorageSpecLocalIdentifier=fe.StorageSpecLocalIdentifier,n.StorageSpecReadWriteContext=me.StorageSpecReadWriteContext,n.ColorLibrary=ge.ColorLibrary,n.ColorLibraryChangedMessage=ge.ColorLibraryChangedMessage,n.AlignmentEdges=ye.AlignmentEdges,n.describeAlignmentType=ye.describeAlignmentType,n.AlignmentType=ye.AlignmentType,n.AlignmentLocation=ye.AlignmentLocation,n.LineStyle=ye.LineStyle,n.AlignmentLine=ye.AlignmentLine,n.FormaAlignment=ye.FormaAlignment,n.FormaAlignmentLines=ye.FormaAlignmentLines,n.FormaAlignmentSlope=ye.FormaAlignmentSlope,n.AlignmentDetector=ye.AlignmentDetector,n.DesignScore=Te.DesignScore,n.DocumentEvaluationScore=Ae.DocumentEvaluationScore,n.EvaluationUtils=Ce.EvaluationUtils,n.DesignConstraintFeatureExtractor=_e.DesignConstraintFeatureExtractor,n.DesignFeatureUtils=Se.DesignFeatureUtils,n.DesignStyleFeatureExtractor=Pe.DesignStyleFeatureExtractor,n.FeatureExtractorProtocol=Fe.FeatureExtractorProtocol,n.FeatureExtractor=Fe.FeatureExtractor,n.FeatureExtractorFactory=Fe.FeatureExtractorFactory,n.FeatureExtractorType=Fe.FeatureExtractorType,n.FeatureType=Fe.FeatureType,n.GridStyleFeatureExtractor=ve.GridStyleFeatureExtractor,n.LockupStyleFeatureExtractor=Re.LockupStyleFeatureExtractor,n.RetargetFeatureExtractor=be.RetargetFeatureExtractor,n.ShapeFeatureExtractor=Ee.ShapeFeatureExtractor,n.GridLearning=Ne.GridLearning,n.GroupDetector=ke.GroupDetector,n.ModelWeightLibrary=De.ModelWeightLibrary,n.PageResizeScore=Ie.PageResizeScore,n.RelayoutEvaluationScore=Me.RelayoutEvaluationScore,n.KeyFrameSet=xe.KeyFrameSet,n.AnimationRequestStopMessage=xe.AnimationRequestStopMessage,n.AnimationController=xe.AnimationController,n.AnimationLibrary=we.AnimationLibrary,n.ColorLibraryController=Oe.ColorLibraryController,n.ControllerEvent=Le.ControllerEvent,n.ControllerSettings=Be.ControllerSettings,n.TypeLockupControllerSettings=Be.TypeLockupControllerSettings,n.ImageControllerSettings=Be.ImageControllerSettings,n.RootControllerSettings=Be.RootControllerSettings,n.ShapeControllerSettings=Be.ShapeControllerSettings,n.ControllerSettingsState=Ge.ControllerSettingsState,n.ControllerSettingsStateChangeMessage=Ge.ControllerSettingsStateChangeMessage,n.CropAsset=qe.CropAsset,n.CropShape=qe.CropShape,n.RasterMask=qe.RasterMask,n.CropAssetLibrary=qe.CropAssetLibrary,n.CropRatioPreset=je.CropRatioPreset,n.CropRatioPresetLibrary=je.CropRatioPresetLibrary,n.DesignSize=Xe.DesignSize,n.DesignSizeCategory=Xe.DesignSizeCategory,n.DesignSizeCategories=Xe.DesignSizeCategories,n.DesignSizeLibrary=Xe.DesignSizeLibrary,n.InteractionMode=$e.InteractionMode,n.ClickMessage=$e.ClickMessage,n.DoubleClickMessage=$e.DoubleClickMessage,n.DesignControllerPSMDelegate=$e.DesignControllerPSMDelegate,n.DocumentController=$e.DocumentController,n.IEditorAttribute=Ue.IEditorAttribute,n.EditorAttributeBase=Ue.EditorAttributeBase,n.ColorAttribute=Ue.ColorAttribute,n.OpacityAttribute=Ue.OpacityAttribute,n.MediaMetadataAttribute=Ue.MediaMetadataAttribute,n.ControllerSettingAttribute=Ue.ControllerSettingAttribute,n.ImageAttribute=Ue.ImageAttribute,n.IFeatureSet=He.IFeatureSet,n.FeatureSetBase=He.FeatureSetBase,n.TextFrameAttributesFeature=He.TextFrameAttributesFeature,n.AlignSpacingAttributesFeature=He.AlignSpacingAttributesFeature,n.FormaEditFeature=He.FormaEditFeature,n.OpacityAttributesFeature=He.OpacityAttributesFeature,n.ImageFeature=He.ImageFeature,n.VideoAttributesFeature=He.VideoAttributesFeature,n.GridLibrary=Ye.GridLibrary,n.BaseHandle=Ve.BaseHandle,n.TransformType=Ve.TransformType,n.BoxReference=Ve.BoxReference,n.BoxHandleDisplayHint=Ve.BoxHandleDisplayHint,n.BoxTransformHandles=Ve.BoxTransformHandles,n.BoxTransformMultipleFormae=Ve.BoxTransformMultipleFormae,n.HandleTransformStage=Ve.HandleTransformStage,n.HandleTransformEvent=Ve.HandleTransformEvent,n.TranslateTransformEvent=Ve.TranslateTransformEvent,n.MoveTransformEvent=Ve.MoveTransformEvent,n.RotateAboutCenterTransformEvent=Ve.RotateAboutCenterTransformEvent,n.CornerTranslateTransformEvent=Ve.CornerTranslateTransformEvent,n.SideTranslateTransformEvent=Ve.SideTranslateTransformEvent,n.MASK_ENDPOINT=ze.MASK_ENDPOINT,n.VERSION_ENDPOINT=ze.VERSION_ENDPOINT,n.CutoutMode=ze.CutoutMode,n.CutoutModel=ze.CutoutModel,n.CutoutMaskSize=ze.CutoutMaskSize,n.CutoutStyle=ze.CutoutStyle,n.CutoutMaskMetadata=ze.CutoutMaskMetadata,n.ImageCutoutLibrary=ze.ImageCutoutLibrary,n.ImageCutoutModelLibrary=ze.ImageCutoutModelLibrary,n.ImageCutoutErrorLibrary=ze.ImageCutoutErrorLibrary,n.ImageFilterLibrary=Ke.ImageFilterLibrary,n.MaskSubstitutionController=We.MaskSubstitutionController,n.PointerTypeEnum=Je.PointerTypeEnum,n.PointerStatus=Je.PointerStatus,n.PointerMark=Je.PointerMark,n._minus_PointerMark_PointerMark=Je._minus_PointerMark_PointerMark,n._plus_PointerMark_PointerMark=Je._plus_PointerMark_PointerMark,n.PointerState=Je.PointerState,n.PointerUpdate=Je.PointerUpdate,n.PointersState=Je.PointersState,n.PointersStateChangeTypeEnum=Je.PointersStateChangeTypeEnum,n.PointersStateChangeMessage=Je.PointersStateChangeMessage,n.RefineCutoutController=Ze.RefineCutoutController,n.RefineCutoutState=Qe.RefineCutoutState,n.SaveResult=et.SaveResult,n.SaveComplete=et.SaveComplete,n.SaveCanceled=et.SaveCanceled,n.SaveErrorMissingState=et.SaveErrorMissingState,n.SaveErrorSaveFailed=et.SaveErrorSaveFailed,n.SaveErrorValidationFailed=et.SaveErrorValidationFailed,n.SaveErrorExceptionDuringSave=et.SaveErrorExceptionDuringSave,n.SaveMessage=et.SaveMessage,n.SaveManager=et.SaveManager,n.SelectionStateChangedMessage=tt.SelectionStateChangedMessage,n.SelectionMode=tt.SelectionMode,n.SelectionStateModeChangedMessage=tt.SelectionStateModeChangedMessage,n.SelectionState=tt.SelectionState,n.TAG_SHAPE_ID=ot.TAG_SHAPE_ID,n.ShapeCategory=ot.ShapeCategory,n.TagGroup=ot.TagGroup,n.TheoShape=ot.TheoShape,n.ShapeLibraryDataStructures=ot.ShapeLibraryDataStructures,n.ShapeLibrary=ot.ShapeLibrary,n.TextPathID=nt.TextPathID,n.TextPathLibrary=nt.TextPathLibrary,n.IDocumentStateManager=rt.IDocumentStateManager,n.IDocumentState=rt.IDocumentState,n.PatchStatus=rt.PatchStatus,n.TimelineState=rt.TimelineState,n.Timeline=rt.Timeline,n.UndoRedoChangeDirection=rt.UndoRedoChangeDirection,n.UndoRedoMessage=rt.UndoRedoMessage,n.UndoRedoSelectionPolicyEnum=rt.UndoRedoSelectionPolicyEnum,n.UndoRedoManager=rt.UndoRedoManager,n.ActionExecutionOptions=it.ActionExecutionOptions,n.Action=it.Action,n.ActionResult=it.ActionResult,n.FormaActionResult=it.FormaActionResult,n.DoubleActionResult=it.DoubleActionResult,n.TextRangeActionResult=it.TextRangeActionResult,n.LockupStyleActionResult=it.LockupStyleActionResult,n.TextEmphasisActionResult=it.TextEmphasisActionResult,n.AnimationStyleActionResult=it.AnimationStyleActionResult,n.ImageStyleActionResult=it.ImageStyleActionResult,n.SuggestionsActionResult=it.SuggestionsActionResult,n.DragActionResult=it.DragActionResult,n.PlacementActionResult=it.PlacementActionResult,n.ControllerSettingsBehaviorEnum=it.ControllerSettingsBehaviorEnum,n.AddBadgeAction=at.AddBadgeAction,n.AddContentAction=st.AddContentAction,n.AddIconContentAction=st.AddIconContentAction,n.ActionUndoability=st.ActionUndoability,n.AddImageContentAction=st.AddImageContentAction,n.VideoPosterParams=st.VideoPosterParams,n.AddVideoContentAction=st.AddVideoContentAction,n.ReplaceVideoFormaContentAction=st.ReplaceVideoFormaContentAction,n.AddLogoContentAction=st.AddLogoContentAction,n.AddTextContentAction=st.AddTextContentAction,n.AddFormaAction=lt.AddFormaAction,n.AlignFormaeAction=ct.AlignFormaeAction,n.DistributeFormaeAction=ct.DistributeFormaeAction,n.ArrangeFormaeAction=ct.ArrangeFormaeAction,n.ApplyAnimationStyleAction=ut.ApplyAnimationStyleAction,n.ApplyAnimationStyleForPlaybackAction=ut.ApplyAnimationStyleForPlaybackAction,n.ResetAnimation=ut.ResetAnimation,n.ShuffleAnimationStyleAction=ut.ShuffleAnimationStyleAction,n.ApplyAndPrepareAnimationAction=ut.ApplyAndPrepareAnimationAction,n.ChangeBackgroundShapeAction=pt.ChangeBackgroundShapeAction,n.BrandifyAction=dt.BrandifyAction,n.ChangeBrandingAction=dt.ChangeBrandingAction,n.AddBrandingAction=dt.AddBrandingAction,n.RemoveBrandingAction=dt.RemoveBrandingAction,n.ApplyColorAction=ht.ApplyColorAction,n.ApplyColorWithRoleAction=ht.ApplyColorWithRoleAction,n.ApplyColorThemeAction=ft.ApplyColorThemeAction,n.ShuffleColorThemeAction=ft.ShuffleColorThemeAction,n.ModifyColorThemeAction=ft.ModifyColorThemeAction,n.DeleteAction=mt.DeleteAction,n.ApplyTemplateAction=gt.ApplyTemplateAction,n.DuplicateAction=yt.DuplicateAction,n.FlipAction=Tt.FlipAction,n.CreatePaddedCollageAction=At.CreatePaddedCollageAction,n.SetGridParametersAction=At.SetGridParametersAction,n.SwapGridFormaAction=At.SwapGridFormaAction,n.SetGridStyleAction=At.SetGridStyleAction,n.EnterGridLayoutModeAction=At.EnterGridLayoutModeAction,n.GroupAction=Ct.GroupAction,n.UngroupAction=Ct.UngroupAction,n.DragAction=_t.DragAction,n.MoveHandleAction=_t.MoveHandleAction,n.ResizeHandleAction=_t.ResizeHandleAction,n.RotateHandleAction=_t.RotateHandleAction,n.CharRangeHandleAction=_t.CharRangeHandleAction,n.ReplaceImagesWithColorsAction=St.ReplaceImagesWithColorsAction,n.SetImageFilterAction=St.SetImageFilterAction,n.ShuffleImageFilterAction=St.ShuffleImageFilterAction,n.SetImageCutoutAction=St.SetImageCutoutAction,n.ApplyCutoutMaskToImageAction=St.ApplyCutoutMaskToImageAction,n.EnterRefineCutoutModeAction=St.EnterRefineCutoutModeAction,n.ExitRefineCutoutModeAction=St.ExitRefineCutoutModeAction,n.UpdateCutoutMaskMode=St.UpdateCutoutMaskMode,n.UpdateCutoutMaskAction=St.UpdateCutoutMaskAction,n.ToggleRefineCutoutFullImageAction=St.ToggleRefineCutoutFullImageAction,n.ChangeImageAdjustmentsAction=St.ChangeImageAdjustmentsAction,n.ApplyShapeMaskToImageAction=St.ApplyShapeMaskToImageAction,n.ApplyRasterMaskToImageAction=St.ApplyRasterMaskToImageAction,n.SetImageAsFloatingAction=St.SetImageAsFloatingAction,n.SetImageAsBackgroundAction=St.SetImageAsBackgroundAction,n.AddHiddenImageToGridAction=St.AddHiddenImageToGridAction,n.EnterCropModeAction=St.EnterCropModeAction,n.ExitCropModeAction=St.ExitCropModeAction,n.SetImageCropToFreeformAction=St.SetImageCropToFreeformAction,n.CropImageToRatioAction=St.CropImageToRatioAction,n.ChangeZOrderAction=Pt.ChangeZOrderAction,n.SendForwardBackwardAction=Pt.SendForwardBackwardAction,n.NudgeAction=Ft.NudgeAction,n.SetOpacityAction=vt.SetOpacityAction,n.SetTextOpacityAction=vt.SetTextOpacityAction,n.SetShapeOpacityAction=vt.SetShapeOpacityAction,n.SetBackgroundOpacityAction=vt.SetBackgroundOpacityAction,n.SetBlendModeAction=vt.SetBlendModeAction,n.ChangePageSizeAction=Rt.ChangePageSizeAction,n.RecordOriginalPageSizeAction=Rt.RecordOriginalPageSizeAction,n.RecordCreateFromRemixAction=Rt.RecordCreateFromRemixAction,n.RotateAction=bt.RotateAction,n.ScaleAction=Et.ScaleAction,n.RescueAction=Et.RescueAction,n.SetTextAction=Nt.SetTextAction,n.SetTextCollapseAction=Nt.SetTextCollapseAction,n.SetFontAction=Nt.SetFontAction,n.ReplaceMissingFontsAction=Nt.ReplaceMissingFontsAction,n.ChangeTextLayoutAndAlignmentAction=Nt.ChangeTextLayoutAndAlignmentAction,n.ChangeTextLineSpacingAction=Nt.ChangeTextLineSpacingAction,n.ChangeTextAttributesAction=Nt.ChangeTextAttributesAction,n.SetFontSizeAction=Nt.SetFontSizeAction,n.MatchSizeAction=Nt.MatchSizeAction,n.SetLineBreakAction=Nt.SetLineBreakAction,n.SetNextSpacingSequenceAction=Nt.SetNextSpacingSequenceAction,n.SetTrackingAction=Nt.SetTrackingAction,n.SetLeadingAction=Nt.SetLeadingAction,n.SetRelativeFontScaleAction=Nt.SetRelativeFontScaleAction,n.SetPaddingAction=Nt.SetPaddingAction,n.SetTextLookAction=Nt.SetTextLookAction,n.SetTextEffectsAttributesAction=Nt.SetTextEffectsAttributesAction,n.SetHighlightMethodAction=Nt.SetHighlightMethodAction,n.EnterCharStyleModeAction=Nt.EnterCharStyleModeAction,n.ExitCharStyleModeAction=Nt.ExitCharStyleModeAction,n.ApplyCharStyleAction=Nt.ApplyCharStyleAction,n.ApplyCharStyleWithoutUIAction=Nt.ApplyCharStyleWithoutUIAction,n.ApplyTextStyleSuggestionAction=Nt.ApplyTextStyleSuggestionAction,n.ApplyNextTextEmphasisSuggestionAction=Nt.ApplyNextTextEmphasisSuggestionAction,n.ChangeVideoVolumeAction=kt.ChangeVideoVolumeAction,n.UpdateVideoStyleTrimAction=kt.UpdateVideoStyleTrimAction,n.VideoInfoUpdate=kt.VideoInfoUpdate,n.TrimVideoAction=kt.TrimVideoAction,n.SetWatermarkAction=Dt.SetWatermarkAction,n.BeginPointerTrackingResponseEnum=It.BeginPointerTrackingResponseEnum,n.IPSMDelegate=It.IPSMDelegate,n.FormaPageDragDelegate=It.FormaPageDragDelegate,n.FormaPagePointerStateMachineDelegate=It.FormaPagePointerStateMachineDelegate,n.AnimationStyleAttribute=Mt.AnimationStyleAttribute,n.AnimationAttributesHandler=Mt.AnimationAttributesHandler,n.CharStyleModeDesignController=xt.CharStyleModeDesignController,n.CropModeDesignController=wt.CropModeDesignController,n.HandlerFactory=Ot.HandlerFactory,n.DesignController=Ot.DesignController,n.DesignControllerFactory=Lt.DesignControllerFactory,n.GroupSelectionDesignController=Bt.GroupSelectionDesignController,n.MultiSelectionDesignController=Gt.MultiSelectionDesignController,n.NoSelectionDesignController=qt.NoSelectionDesignController,n.SingleSelectionDesignController=jt.SingleSelectionDesignController,n.IActionHandler=Xt.IActionHandler,n.ActionQueue=Xt.ActionQueue,n.NullActionHandler=Xt.NullActionHandler,n.StandardActionHandler=Xt.StandardActionHandler,n.IClickHandler=$t.IClickHandler,n.NullClickHandler=$t.NullClickHandler,n.StandardClickHandler=$t.StandardClickHandler,n.CropModeClickHandler=$t.CropModeClickHandler,n.IActionFeedbackHandler=Ut.IActionFeedbackHandler,n.NullActionFeedbackHandler=Ut.NullActionFeedbackHandler,n.StandardActionFeedbackHandler=Ut.StandardActionFeedbackHandler,n.IAnnotationsHandler=Ht.IAnnotationsHandler,n.NullAnnotationsHandler=Ht.NullAnnotationsHandler,n.StandardAnnotationsHandler=Ht.StandardAnnotationsHandler,n.IAttributesHandler=Yt.IAttributesHandler,n.NullAttributesHandler=Yt.NullAttributesHandler,n.IAttributeHandler=Yt.IAttributeHandler,n.AttributeHandlerBase=Yt.AttributeHandlerBase,n.ImageAttributeHandler=Yt.ImageAttributeHandler,n.OpacityAttributeHandler=Yt.OpacityAttributeHandler,n.ControllerSettingAttributeHandler=Yt.ControllerSettingAttributeHandler,n.MediaMetadataAttributeHandler=Yt.MediaMetadataAttributeHandler,n.ColorAttributeHandler=Yt.ColorAttributeHandler,n.StandardAttributesHandler=Yt.StandardAttributesHandler,n.IFeatureSetHandler=Vt.IFeatureSetHandler,n.NullFeatureSetHandler=Vt.NullFeatureSetHandler,n.StandardFeatureSetHandler=Vt.StandardFeatureSetHandler,n.IHandlesHandler=zt.IHandlesHandler,n.NullHandlesHandler=zt.NullHandlesHandler,n.IHandleGenerator=zt.IHandleGenerator,n.IHandleProcessor=zt.IHandleProcessor,n.BaseHandlesHandler=zt.BaseHandlesHandler,n.StandardHandlesHandler=zt.StandardHandlesHandler,n.StandardHandleGenerator=Kt.StandardHandleGenerator,n.StandardHandleProcessor=Wt.StandardHandleProcessor,n.SwapModeHandleGenerator=Jt.SwapModeHandleGenerator,n.IViewHandler=Zt.IViewHandler,n.NullViewHandler=Zt.NullViewHandler,n.StandardViewHandler=Zt.StandardViewHandler,n.IDragHandler=Qt.IDragHandler,n.NullDragHandler=Qt.NullDragHandler,n.DragFacadeBasedDragHandler=Qt.DragFacadeBasedDragHandler,n.CroppingDragFacadeBasedDragHandler=Qt.CroppingDragFacadeBasedDragHandler,n.MultiObjectDragHandler=Qt.MultiObjectDragHandler,n.IMoveHandler=eo.IMoveHandler,n.NullMoveHandler=eo.NullMoveHandler,n.StandardMoveHandler=eo.StandardMoveHandler,n.IResizeHandler=to.IResizeHandler,n.NullResizeHandler=to.NullResizeHandler,n.SingleItemResizeHandler=to.SingleItemResizeHandler,n.MultiObjectResizeHandler=to.MultiObjectResizeHandler,n.IRotateHandler=oo.IRotateHandler,n.NullRotateHandler=oo.NullRotateHandler,n.StandardRotateHandler=oo.StandardRotateHandler,n.IActionFeedbackModel=no.IActionFeedbackModel,n.ActionFeedbackWaitingType=no.ActionFeedbackWaitingType,n.ActionFeedbackMessageType=no.ActionFeedbackMessageType,n.ActionFeedback=no.ActionFeedback,n.ActionFeedbackState=no.ActionFeedbackState,n.IActiveSwapModel=ro.IActiveSwapModel,n.ActiveSwap=ro.ActiveSwap,n.ActiveSwapState=ro.ActiveSwapState,n.Annotation=io.Annotation,n.AnnotationID=io.AnnotationID,n.AnnotationPriority=io.AnnotationPriority,n.IAnnotationsModel=io.IAnnotationsModel,n.IMutableAnnotationsModel=io.IMutableAnnotationsModel,n.AnnotationState=io.AnnotationState,n.IAttributesModel=ao.IAttributesModel,n.AttributesState=ao.AttributesState,n.IEditorModel=so.IEditorModel,n.IMutableEditorModel=so.IMutableEditorModel,n.EditorModel=so.EditorModel,n.EditorModelChangedMessage=so.EditorModelChangedMessage,n.EditorModelState=lo.EditorModelState,n.EditorStateMember=lo.EditorStateMember,n.IFeatureSetsModel=co.IFeatureSetsModel,n.FeatureSetsState=co.FeatureSetsState,n.IHandlesModel=uo.IHandlesModel,n.IMutableHandlesModel=uo.IMutableHandlesModel,n.HandlesState=uo.HandlesState,n.ISnapLinesModel=po.ISnapLinesModel,n.SnapLinesState=po.SnapLinesState,n.View=ho.View,n.IViewModel=ho.IViewModel,n.IMutableViewModel=ho.IMutableViewModel,n.ViewState=ho.ViewState,n.BadgeLayoutController=fo.BadgeLayoutController,n.FitLayoutController=mo.FitLayoutController,n.ResizeLayoutController=go.ResizeLayoutController,n.ResizeLayoutType=go.ResizeLayoutType,n.PinLayoutController=go.PinLayoutController,n.ProportionalLayoutController=yo.ProportionalLayoutController,n.SpringConstraint=To.SpringConstraint,n.SpringLayoutController=To.SpringLayoutController,n.AbsolutePositionController=Ao.AbsolutePositionController,n.ControllerMetadata=Co.ControllerMetadata,n.FormaController=Co.FormaController,n.SnappedPlacement=Co.SnappedPlacement,n.FormaControllerFactory=_o.FormaControllerFactory,n.FormaControllerEvent=So.FormaControllerEvent,n.PSMFormaControllerEvent=So.PSMFormaControllerEvent,n.BeginPointerTrackingEvent=So.BeginPointerTrackingEvent,n.PSMFormaDragControllerEvent=So.PSMFormaDragControllerEvent,n.BeginFormaDragEvent=So.BeginFormaDragEvent,n.FormaDragEvent=So.FormaDragEvent,n.EndFormaDragEvent=So.EndFormaDragEvent,n.BeginFormaResizeEvent=So.BeginFormaResizeEvent,n.FormaResizeEvent=So.FormaResizeEvent,n.EndFormaResizeEvent=So.EndFormaResizeEvent,n.FormaClickEvent=So.FormaClickEvent,n.FormaDoubleClickEvent=So.FormaDoubleClickEvent,n.AddFormaEvent=So.AddFormaEvent,n.FitType=Po.FitType,n.CropType=Po.CropType,n.FrameController=Po.FrameController,n.GridController=Fo.GridController,n.GroupController=vo.GroupController,n.ImageController=Ro.ImageController,n.PointerDrag=bo.PointerDrag,n.DragPace=bo.DragPace,n.DragMode=bo.DragMode,n.ActiveDragDelegateProtocol=bo.ActiveDragDelegateProtocol,n.ActiveDrag=bo.ActiveDrag,n.PointerStateMachineDelegateProtocol=bo.PointerStateMachineDelegateProtocol,n.PointerStateMachine=bo.PointerStateMachine,n.ResponsiveController=Eo.ResponsiveController,n.RootController=No.RootController,n.ShapeController=ko.ShapeController,n.PinBoundsType=Do.PinBoundsType,n.TheoPin=Do.TheoPin,n.VideoController=Io.VideoController,n.BannerDecorationStrategy=Mo.BannerDecorationStrategy,n.paddingScalar=xo.paddingScalar,n.spacingScalar=xo.spacingScalar,n.EvenRowHeightsLayoutStrategy=xo.EvenRowHeightsLayoutStrategy,n.EvenRowWidthsLayoutStrategy=wo.EvenRowWidthsLayoutStrategy,n.GraphemeUtils=Oo.GraphemeUtils,n.GridArrangementUtils=Lo.GridArrangementUtils,n.LetterDecorationStrategy=Bo.LetterDecorationStrategy,n.LetterGridLayoutStrategy=Go.LetterGridLayoutStrategy,n.LockupConfiguration=qo.LockupConfiguration,n.DecorationResults=jo.DecorationResults,n.LockupDecorationStrategy=jo.LockupDecorationStrategy,n.BaseDecorationStrategy=jo.BaseDecorationStrategy,n.LockupItemType=Xo.LockupItemType,n.LockupItem=Xo.LockupItem,n.TypographicBoundingRatios=Xo.TypographicBoundingRatios,n.getTypographicBoundingRatiosOfString=Xo.getTypographicBoundingRatiosOfString,n.LayoutResults=Xo.LayoutResults,n.LockupLayoutStrategy=Xo.LockupLayoutStrategy,n.LockupLayoutStrategyFactory=Xo.LockupLayoutStrategyFactory,n.BaseLockupLayoutStrategy=Xo.BaseLockupLayoutStrategy,n.LockupRowInfo=$o.LockupRowInfo,n.LockupRowsInfo=$o.LockupRowsInfo,n.LockupStyleAttributes=Uo.LockupStyleAttributes,n.InterestingLockupData=Uo.InterestingLockupData,n.InterestingPageData=Uo.InterestingPageData,n.getBackingStringForBackingEnumAndArtworkId=Uo.getBackingStringForBackingEnumAndArtworkId,n.lockupStyleToLockupStyleAttributes=Uo.lockupStyleToLockupStyleAttributes,n.LockupStyleController=Uo.LockupStyleController,n.LockupUtils=Ho.LockupUtils,n.LockupWordInfo=Yo.LockupWordInfo,n.NoDecorationStrategy=Vo.NoDecorationStrategy,n.PathLayoutStrategy=zo.PathLayoutStrategy,n.clockwiseRectanglePath=Ko.clockwiseRectanglePath,n.RowsDecorationStrategy=Ko.RowsDecorationStrategy,n.KnockoutDecorationStrategy=Ko.KnockoutDecorationStrategy,n.SVGBackgroundDecorationStrategy=Wo.SVGBackgroundDecorationStrategy,n.ShadowDecorationStrategy=Jo.ShadowDecorationStrategy,n.CharStyleApplyMode=Zo.CharStyleApplyMode,n.HighlightMethod=Zo.HighlightMethod,n.ControllerDBListener=Zo.ControllerDBListener,n.LockupFormaPool=Zo.LockupFormaPool,n.TypeLockupController=Zo.TypeLockupController,n.TypeLockupUtils=Qo.TypeLockupUtils,n.DesignSuggester=en.DesignSuggester,n.distanceColorWeight=tn.distanceColorWeight,n.distanceSizeWeight=tn.distanceSizeWeight,n.distancePositionWeight=tn.distancePositionWeight,n.IDesignSuggestion=tn.IDesignSuggestion,n.DesignTextSuggestion=tn.DesignTextSuggestion,n.AddFormaSuggestion=tn.AddFormaSuggestion,n.RetargetDocumentData=on.RetargetDocumentData,n.RolePredictionCacheProtocol=nn.RolePredictionCacheProtocol,n.RolePredictionCache=nn.RolePredictionCache,n.PredictionCacheDouble=nn.PredictionCacheDouble,n.PredictionCacheInferredRole=nn.PredictionCacheInferredRole,n.ReadabilityInformation=rn.ReadabilityInformation,n.LockupReadabilityEvaluator=rn.LockupReadabilityEvaluator,n.LockupStyleEvaluator=an.LockupStyleEvaluator,n.PostTextStylesData=sn.PostTextStylesData,n.layoutAlignmentData=sn.layoutAlignmentData,n.PostTextStylesServiceInterface=sn.PostTextStylesServiceInterface,n.WheelSuggestionEvaluator=ln.WheelSuggestionEvaluator,n.SuggestionUtils=cn.SuggestionUtils,n.ScoreComponent=un.ScoreComponent,n.WeightedScore=un.WeightedScore,n.ColorLibraryMap=pn.ColorLibraryMap,n.ColorForComparison=dn.ColorForComparison,n.ColorRankSuggester=dn.ColorRankSuggester,n.ProfilingColorSelector=hn.ProfilingColorSelector,n.ProfilingPrimaryColorSelector=hn.ProfilingPrimaryColorSelector,n.ProfilingBackgroundColorSelector=hn.ProfilingBackgroundColorSelector,n.ColorSelectorUtils=fn.ColorSelectorUtils,n.ProfilingCategories=mn.ProfilingCategories,n.ColorProfiles=mn.ColorProfiles,n.ProfilingColorMap=mn.ProfilingColorMap,n.FontSuggester=gn.FontSuggester,n.FontFeatures=gn.FontFeatures,n.FontLinearModel=gn.FontLinearModel,n.FontSuggestionContext=yn.FontSuggestionContext,n.FormaPlacementInput=Tn.FormaPlacementInput,n.FormaPlacementScore=An.FormaPlacementScore,n.FormaPlacementSuggester=Cn.FormaPlacementSuggester,n.FormaPlacementSuggestion=_n.FormaPlacementSuggestion,n.GridScore=Sn.GridScore,n.GridCellContent=Pn.GridCellContent,n.GridSuggester=Pn.GridSuggester,n.GridSuggestion=Fn.GridSuggestion,n.ItemContentType=vn.ItemContentType,n.TextInfo=vn.TextInfo,n.LayoutItem=vn.LayoutItem,n.LayoutSuggester=Rn.LayoutSuggester,n.GridDocument=Rn.GridDocument,n.RangedLayoutLinearModel=Rn.RangedLayoutLinearModel,n.LayoutSuggestionsLinearModel=Rn.LayoutSuggestionsLinearModel,n.LogoPlacementSuggester=bn.LogoPlacementSuggester,n.RetargetCompatibilityScore=En.RetargetCompatibilityScore,n.RetargetCompatibilitySuggester=Nn.RetargetCompatibilitySuggester,n.RetargetScore=kn.RetargetScore,n.RetargetSuggester=Dn.RetargetSuggester,n.RetargetSuggestion=In.RetargetSuggestion,n.ImageRoleData=Mn.ImageRoleData,n.ImageRoleSuggesterFactory=xn.ImageRoleSuggesterFactory,n.ImageRoleSuggesterSimple=xn.ImageRoleSuggesterSimple,n.LockupRoleFeatures=wn.LockupRoleFeatures,n.LockupRoleData=wn.LockupRoleData,n.LockupRoleSuggesterFactory=On.LockupRoleSuggesterFactory,n.LockupRoleSuggesterMLP=On.LockupRoleSuggesterMLP,n.LockupRoleSuggesterSimple=On.LockupRoleSuggesterSimple,n.RoleData=Ln.RoleData,n.RoleSuggesterProtocol=Bn.RoleSuggesterProtocol,n.RoleSuggester=Bn.RoleSuggester,n.InferredRoleType=Bn.InferredRoleType,n.InferredRole=Bn.InferredRole,n.RoleSuggesterMLP=Gn.RoleSuggesterMLP,n.ShapeRoleFeatures=qn.ShapeRoleFeatures,n.ShapeRoleData=qn.ShapeRoleData,n.ShapeRoleSuggesterFactory=jn.ShapeRoleSuggesterFactory,n.ShapeRoleSuggesterMLP=jn.ShapeRoleSuggesterMLP,n.ShapeRoleSuggesterSimple=jn.ShapeRoleSuggesterSimple,n.RawDataShapeSuggester=Xn.RawDataShapeSuggester,n.ShapeSuggester=Xn.ShapeSuggester,n.AutoTextLayoutStrategy=$n.AutoTextLayoutStrategy,n.FontMetricsParams=Un.FontMetricsParams,n.TypographyParams=Un.TypographyParams,n.TypographyResult=Un.TypographyResult,n.MutableTypographyRange=Un.MutableTypographyRange,n.TypographyLayoutCategory=Un.TypographyLayoutCategory,n.TypographyComposer=Un.TypographyComposer,n.SpacerIdiom=Hn.SpacerIdiom,n.LineMeasurements=Hn.LineMeasurements,n.TypographyLayout=Hn.TypographyLayout,n.SimpleAlignmentTypographyLayout=Hn.SimpleAlignmentTypographyLayout,n.ReflowAlignmentTypographyLayout=Hn.ReflowAlignmentTypographyLayout,n.DoubletTypographyLayout=Hn.DoubletTypographyLayout,n.RotateTypographyLayout=Hn.RotateTypographyLayout,n.DropCapTypographyLayout=Hn.DropCapTypographyLayout,n.TripletTypographyLayout=Hn.TripletTypographyLayout,n.MiddleTypographyLayout=Hn.MiddleTypographyLayout,n.QuadraticTypographyLayout=Hn.QuadraticTypographyLayout,n.FitRotateFitTypographyLayout=Hn.FitRotateFitTypographyLayout,n.AlignmentIdiom=Yn.AlignmentIdiom,n.ChildVertOrientation=Yn.ChildVertOrientation,n.GlyphType=Yn.GlyphType,n.NodeMeasurements=Yn.NodeMeasurements,n.ReflowType=Yn.ReflowType,n.TypographyNode=Yn.TypographyNode,n.TextToken=Yn.TextToken,n.SpacerNode=Yn.SpacerNode,n.TextNode=Yn.TextNode,n.GroupNode=Yn.GroupNode,n.TypographyTree=Vn.TypographyTree,n.IDBLink=zn.IDBLink,n.DBLink=zn.DBLink,n.IDBObject=Kn.IDBObject,n.DBDeletedObject=Kn.DBDeletedObject,n.DBObject=Kn.DBObject,n.DBHostObject=Kn.DBHostObject,n.DBNamePath=Wn.DBNamePath,n.DBProperty=Wn.DBProperty,n.DBDeletedProperty=Wn.DBDeletedProperty,n.DBPropertyCodec=Wn.DBPropertyCodec,n.DBSchemaType=Jn.DBSchemaType,n.DBSchemaValue=Jn.DBSchemaValue,n.IDBValidationResult=Jn.IDBValidationResult,n.DBValidationResult=Jn.DBValidationResult,n.DBValidationError=Jn.DBValidationError,n.DBValidationErrorNotImplemented=Jn.DBValidationErrorNotImplemented,n.DBValidationErrorNoHost=Jn.DBValidationErrorNoHost,n.DBValidationErrorType=Jn.DBValidationErrorType,n.DBValidationErrorConstantIntMismatch=Jn.DBValidationErrorConstantIntMismatch,n.DBValidationErrorConstantStringMismatch=Jn.DBValidationErrorConstantStringMismatch,n.DBValidationErrorIntEnumMismatch=Jn.DBValidationErrorIntEnumMismatch,n.DBValidationErrorStringEnumMismatch=Jn.DBValidationErrorStringEnumMismatch,n.DBValidationErrorLimit=Jn.DBValidationErrorLimit,n.DBValidationErrorMultiple=Jn.DBValidationErrorMultiple,n.DBValidationErrorLimitStringLength=Jn.DBValidationErrorLimitStringLength,n.DBValidationErrorStringPattern=Jn.DBValidationErrorStringPattern,n.DBValidationErrorLimitItems=Jn.DBValidationErrorLimitItems,n.DBValidationErrorUniqueItems=Jn.DBValidationErrorUniqueItems,n.DBValidationErrorRequiredItem=Jn.DBValidationErrorRequiredItem,n.DBValidationErrorLimitProperties=Jn.DBValidationErrorLimitProperties,n.DBValidationErrorRequiredProperty=Jn.DBValidationErrorRequiredProperty,n.DBValidationErrorPropertyError=Jn.DBValidationErrorPropertyError,n.DBValidationErrorCompound=Jn.DBValidationErrorCompound,n.DBValidationErrorMultipleMatches=Jn.DBValidationErrorMultipleMatches,n.DBValidationErrorNegation=Jn.DBValidationErrorNegation,n.Rule=Jn.Rule,n.DBSchema=Jn.DBSchema,n.IDBObjectState=Zn.IDBObjectState,n.IDBObjectAncestorState=Zn.IDBObjectAncestorState,n.IDBObjectDerivedState=Zn.IDBObjectDerivedState,n.IDBObjectMutableState=Zn.IDBObjectMutableState,n.IDBObjectMutableAncestorState=Zn.IDBObjectMutableAncestorState,n.IDBObjectMutableDerivedState=Zn.IDBObjectMutableDerivedState,n.IDBState=Zn.IDBState,n.IDBMutableState=Zn.IDBMutableState,n.DBObjectBaseState=Zn.DBObjectBaseState,n.DBObjectDeletedState=Zn.DBObjectDeletedState,n.DBObjectState=Zn.DBObjectState,n.DBObjectMutableState=Zn.DBObjectMutableState,n.DBChildObjectState=Zn.DBChildObjectState,n.DBState=Zn.DBState,n.DBMutableState=Zn.DBMutableState,n.IDatabase=Qn.IDatabase,n.IDatabaseListener=Qn.IDatabaseListener,n.PostDocumentState=Qn.PostDocumentState,n.PostDB=Qn.PostDB,n.ITransaction=er.ITransaction,n.TransactionMessage=er.TransactionMessage,n.TransactionBegunMessage=er.TransactionBegunMessage,n.TransactionEndedMessage=er.TransactionEndedMessage,n.AnimationStyleCategory=tr.AnimationStyleCategory,n.AnimationStyle=tr.AnimationStyle,n.Codecs=or.Codecs,n.KeyFrame=nr.KeyFrame,n.FormaAnimation=nr.FormaAnimation,n.FormaAnimationFactory=rr.FormaAnimationFactory,n.PostPublishingObject=ir.PostPublishingObject,n.PostDCXObject=ir.PostDCXObject,n.RetargetDocumentExemplar=ar.RetargetDocumentExemplar,n.TheoDocumentVersion=sr.TheoDocumentVersion,n.TheoDocumentUserAction=sr.TheoDocumentUserAction,n.TheoDocument=sr.TheoDocument,n.DummyExport=sr.DummyExport,n.VersionInfo=sr.VersionInfo,n.TheoDocumentMessage=sr.TheoDocumentMessage,n.TheoDocumentWillDecodeMessage=sr.TheoDocumentWillDecodeMessage,n.TheoDocumentDidDecodeMessage=sr.TheoDocumentDidDecodeMessage,n.TheoDocumentRequestsSaveMessage=sr.TheoDocumentRequestsSaveMessage,n.TheoDocumentData=lr.TheoDocumentData,n.PairingFeatures=cr.PairingFeatures,n.GroupLayoutStrategy=cr.GroupLayoutStrategy,n.VisualNode=cr.VisualNode,n.VisualNodeLeaf=cr.VisualNodeLeaf,n.VisualNodeGroup=cr.VisualNodeGroup,n.VisualNodeData=cr.VisualNodeData,n.VisualStructureDetector=cr.VisualStructureDetector,n.ImageAdjustmentMaps=ur.ImageAdjustmentMaps,n.MoaAdjustments=ur.MoaAdjustments,n.MoaColorMap=pr.MoaColorMap,n.MoaColorMatrix=dr.MoaColorMatrix,n.MoaConstants=hr.MoaConstants,n.MoaTransform=fr.MoaTransform,n.GaussianKernel=mr.GaussianKernel,n.Sharpen=mr.Sharpen,n.InsertedSwatchesMessage=gr.InsertedSwatchesMessage,n.RemovedSwatchesMessage=gr.RemovedSwatchesMessage,n.ReplacedSwatchesMessage=gr.ReplacedSwatchesMessage,n.ColorSwatch=yr.ColorSwatch,n.ColorThemeDocument=Tr.ColorThemeDocument,n.SolidColorWithRole=Ar.SolidColorWithRole,n.TheoColorWithRole=Ar.TheoColorWithRole,n.ThemeColorWithRole=Ar.ThemeColorWithRole,n.SimpleSwatch=Cr.SimpleSwatch,n.ContentDocument=_r.ContentDocument,n.InsertedContentChildrenMessage=Sr.InsertedContentChildrenMessage,n.RemovedContentChildrenMessage=Sr.RemovedContentChildrenMessage,n.ContentNode=Pr.ContentNode,n.GroupContentNode=Fr.GroupContentNode,n.ImageContentNode=vr.ImageContentNode,n.ImageContentChangedMessage=vr.ImageContentChangedMessage,n.MediaMetadata=Rr.MediaMetadata,n.RootContentNode=br.RootContentNode,n.TextContentNode=Er.TextContentNode,n.URLBasedContentNode=Nr.URLBasedContentNode;n.VectorContentNode=kr.VectorContentNode,n.VideoContentNode=Dr.VideoContentNode,n.FormaPlatformView=Ir.FormaPlatformView,n.FormaTraversal=Ir.FormaTraversal,n.Forma=Ir.Forma,n._equality_Forma_Forma=Ir._equality_Forma_Forma,n.FormaFactory=Mr.FormaFactory,n.DefaultFormaFactory=Mr.DefaultFormaFactory,n.FormaPage=xr.FormaPage,n.PageExportFormat=wr.PageExportFormat,n.describePageExportFormat=wr.describePageExportFormat,n.FormaPageExportData=wr.FormaPageExportData,n.FormaPageView=Or.FormaPageView,n.FormaBeginUpdateMessage=Or.FormaBeginUpdateMessage,n.FormaEndUpdateMessage=Or.FormaEndUpdateMessage,n.PageSizeUpdateMessage=Or.PageSizeUpdateMessage,n.BeginFormaDragMessage=Or.BeginFormaDragMessage,n.FormaDragMessage=Or.FormaDragMessage,n.EndFormaDragMessage=Or.EndFormaDragMessage,n.BeginFormaResizeMessage=Or.BeginFormaResizeMessage,n.EndFormaResizeMessage=Or.EndFormaResizeMessage,n.FormaUpdateEvent=Lr.FormaUpdateEvent,n.TextPlacementEvent=Lr.TextPlacementEvent,n.FormaTransformChangedEvent=Lr.FormaTransformChangedEvent,n.FormaCreatedEvent=Lr.FormaCreatedEvent,n.FormaNullChangedEvent=Lr.FormaNullChangedEvent,n.FormaAnimationTransactionEvent=Lr.FormaAnimationTransactionEvent,n.FormaHierarchyChangedEvent=Lr.FormaHierarchyChangedEvent,n.FormaChildrenEvent=Lr.FormaChildrenEvent,n.FormaInsertedChildrenEvent=Lr.FormaInsertedChildrenEvent,n.FormaInsertedAuxiliariesEvent=Lr.FormaInsertedAuxiliariesEvent,n.FormaRemovedChildrenEvent=Lr.FormaRemovedChildrenEvent,n.FormaRemovedAuxiliariesEvent=Lr.FormaRemovedAuxiliariesEvent,n.FormaGeometryChangedEvent=Lr.FormaGeometryChangedEvent,n.FormaBoundsInvalidatedEvent=Lr.FormaBoundsInvalidatedEvent,n.FormaPathChangedEvent=Lr.FormaPathChangedEvent,n.FormaColorChangedEvent=Lr.FormaColorChangedEvent,n.FormaStrokeChangedEvent=Lr.FormaStrokeChangedEvent,n.FormaFillRuleChangedEvent=Lr.FormaFillRuleChangedEvent,n.FormaContentChangedEvent=Lr.FormaContentChangedEvent,n.FormaCutoutChangedEvent=Lr.FormaCutoutChangedEvent,n.FormaStyleChangedEvent=Lr.FormaStyleChangedEvent,n.AnimationStyleChangedEvent=Lr.AnimationStyleChangedEvent,n.AnimationTimeChangedEvent=Lr.AnimationTimeChangedEvent,n.AnimationStateChangedEvent=Lr.AnimationStateChangedEvent,n.FormaAnimationChangedEvent=Lr.FormaAnimationChangedEvent,n.FormaAlignmentChangedEvent=Lr.FormaAlignmentChangedEvent,n.FormaApplyMaskEvent=Lr.FormaApplyMaskEvent,n.FormaVideoStateChangedEvent=Lr.FormaVideoStateChangedEvent,n.FormaVideoTimeChangedEvent=Lr.FormaVideoTimeChangedEvent,n.FormaGroupEvent=Lr.FormaGroupEvent,n.FormaUngroupEvent=Lr.FormaUngroupEvent,n.FormaForceRerenderPseudoChangeEvent=Lr.FormaForceRerenderPseudoChangeEvent,n.FrameForma=Br.FrameForma,n.GroupForma=Gr.GroupForma,n.LRUColorCacheEntry=qr.LRUColorCacheEntry,n.LRUColorCache=qr.LRUColorCache,n.ImageForma=qr.ImageForma,n.RootForma=jr.RootForma,n.ShapeForma=Xr.ShapeForma,n.SmartGroupForma=$r.SmartGroupForma,n.TextForma=Ur.TextForma,n.VectorForma=Hr.VectorForma,n.VideoPlayerStatus=Yr.VideoPlayerStatus,n.VideoMode=Yr.VideoMode,n.VideoForma=Yr.VideoForma,n.DocumentHistory=Vr.DocumentHistory,n.FormaSourceNamespace=zr.FormaSourceNamespace,n.FormaSourceUtils=zr.FormaSourceUtils,n.FormaBlendMode=Kr.FormaBlendMode,n.FormaStyle=Kr.FormaStyle,n.FormaStyleChangedMessage=Kr.FormaStyleChangedMessage,n.FormaStyleFactory=Wr.FormaStyleFactory,n.FrameStyle=Jr.FrameStyle,n.GridCellHandle=Zr.GridCellHandle,n.GridCell=Zr.GridCell,n._equality_GridCell_GridCell=Zr._equality_GridCell_GridCell,n.GridStyle=Qr.GridStyle,n.ImageAdjustments=ei.ImageAdjustments,n.ImageFilter=ti.ImageFilter,n.AlphaBlendFilter=ti.AlphaBlendFilter,n.CompositeFilter=ti.CompositeFilter,n.ImageFilterFactory=oi.ImageFilterFactory,n.ImageStyle=ni.ImageStyle,n.LockupLayout=ri.LockupLayout,n.LockupAlignment=ri.LockupAlignment,n.VerticalLockupAlignment=ri.VerticalLockupAlignment,n.LockupBacking=ri.LockupBacking,n.LockupTextLook=ri.LockupTextLook,n.LockupStyle=ri.LockupStyle,n.RootStyle=ii.RootStyle,n.ShapeStyle=ai.ShapeStyle,n.TextStyle=si.TextStyle,n.VideoStyle=li.VideoStyle,n.DistributeType=ci.DistributeType,n.describeDistributeType=ci.describeDistributeType,n.AlignmentFacade=ci.AlignmentFacade,n.AnimationFacade=ui.AnimationFacade,n.BadgeType=pi.BadgeType,n.BadgeFacade=pi.BadgeFacade,n.AUTHORING_CONTEXT_TYPE_LOGO=di.AUTHORING_CONTEXT_TYPE_LOGO,n.AUTHORING_CONTEXT_TYPE_FONT=di.AUTHORING_CONTEXT_TYPE_FONT,n.AUTHORING_CONTEXT_TYPE_COLOR=di.AUTHORING_CONTEXT_TYPE_COLOR,n.SPARK_LOGO_ROLE_PRIMARY=di.SPARK_LOGO_ROLE_PRIMARY,n.SPARK_LOGO_ROLE_SECONDARY=di.SPARK_LOGO_ROLE_SECONDARY,n.SPARK_LOGO_ROLE_POST_STAMP=di.SPARK_LOGO_ROLE_POST_STAMP,n.IAuthoringContextManager=di.IAuthoringContextManager,n.IAuthoringContext=di.IAuthoringContext,n.IAuthoringContextColor=di.IAuthoringContextColor,n.IAuthoringContextFont=di.IAuthoringContextFont,n.IAuthoringContextLogo=di.IAuthoringContextLogo,n.BrandingFacade=di.BrandingFacade,n.SavedColorState=hi.SavedColorState,n.ColorFacade=hi.ColorFacade,n.ColorThemeFacade=fi.ColorThemeFacade,n.FloatingImageStrategy=mi.FloatingImageStrategy,n.AddFormaParentingHint=mi.AddFormaParentingHint,n.AddFormaParams=mi.AddFormaParams,n.CreationFacade=mi.CreationFacade,n.RetargetLayoutOption=gi.RetargetLayoutOption,n.DesignSuggestionFacade=gi.DesignSuggestionFacade,n.DragFacade=yi.DragFacade,n.FontFacade=Ti.FontFacade,n.GeometryFacade=Ai.GeometryFacade,n.GridFacade=Ci.GridFacade,n.GroupFacade=_i.GroupFacade,n.HandleFacade=Si.HandleFacade,n.ImageFacade=Pi.ImageFacade,n.LayerFacade=Fi.LayerFacade,n.ZOrderEnum=Fi.ZOrderEnum,n.EXPOSE_MOTION_STYLE=vi.EXPOSE_MOTION_STYLE,n.MotionFacade=vi.MotionFacade,n.MultiBrandFeatureSet=Ri.MultiBrandFeatureSet,n.MultiBrandFacade=Ri.MultiBrandFacade,n.OpacityFacade=bi.OpacityFacade,n.PGMFacade=Ei.PGMFacade,n.PageFacade=Ni.PageFacade,n.MultiSelectUIMode=ki.MultiSelectUIMode,n.SelectionFacade=ki.SelectionFacade,n.SpacingSequence=Di.SpacingSequence,n.describeSpacingSequence=Di.describeSpacingSequence,n.ReplaceTextStrategy=Di.ReplaceTextStrategy,n.TextFacade=Di.TextFacade,n.TransformFacade=Ii.TransformFacade,n.VideoFacade=Mi.VideoFacade,n.WatermarkFacade=xi.WatermarkFacade,n.MLPModel=wi.MLPModel,n.NNMLPClassifier=Oi.NNMLPClassifier,n.TextLine=Li.TextLine,n.MotionUtils=Li.MotionUtils,n.MotionEntry=Bi.MotionEntry,n.MotionEntryDropIn=Gi.MotionEntryDropIn,n.MotionEntryFadeIn=qi.MotionEntryFadeIn,n.MotionEntryNone=ji.MotionEntryNone,n.MotionEntryStacked=Xi.MotionEntryStacked,n.MotionEntryStackedRoot=$i.MotionEntryStackedRoot,n.MotionLogic=Ui.MotionLogic,n.MotionLogicClear=Hi.MotionLogicClear,n.MotionLogicDur=Yi.MotionLogicDur,n.MotionLogicStacked=Vi.MotionLogicStacked,n.MotionLogicStackedRoot=zi.MotionLogicStackedRoot,n.MotionSource=Ki.MotionSource,n.MotionSourceFadeInH=Wi.MotionSourceFadeInH,n.MotionSourceFadeInV=Ji.MotionSourceFadeInV,n.MotionSourceStacked=Zi.MotionSourceStacked,n.MotionSrcDropIn=Qi.MotionSrcDropIn,n.MotionSrcFadeIn=ea.MotionSrcFadeIn,n.BaseNodeDecoder=ta.BaseNodeDecoder,n.PROPERTY_KEY_ID=oa.PROPERTY_KEY_ID,n.PROPERTY_KEY_TYPE=oa.PROPERTY_KEY_TYPE,n.PROPERTY_KEY_NAME=oa.PROPERTY_KEY_NAME,n.PROPERTY_KEY_PATH=oa.PROPERTY_KEY_PATH,n.PROPERTY_KEY_MIMETYPE=oa.PROPERTY_KEY_MIMETYPE,n.PROPERTY_KEY_ETAG=oa.PROPERTY_KEY_ETAG,n.PROPERTY_KEY_URL=oa.PROPERTY_KEY_URL,n.PROPERTY_KEY_RELATIONSHIP=oa.PROPERTY_KEY_RELATIONSHIP,n.ASSETS_PATH=oa.ASSETS_PATH,n.BaseNodeEncoder=oa.BaseNodeEncoder,n.DCXComponentDecoder=na.DCXComponentDecoder,n.DCXDocumentDecoder=ra.DCXDocumentDecoder,n.DCXDocumentEncoder=ia.DCXDocumentEncoder,n.DCXNodeDecoder=aa.DCXNodeDecoder,n.DCXNodeEncoder=sa.DCXNodeEncoder,n.DocumentPersistenceFactory=la.DocumentPersistenceFactory,n.DocumentUnitsEnum=ca.DocumentUnitsEnum,n.IExportDataObject=ca.IExportDataObject,n.IImportDataObject=ua.IImportDataObject,n.IMissingFontHelper=ua.IMissingFontHelper,n.IImportDataComponent=ua.IImportDataComponent,n.JSONComponentDecoder=pa.JSONComponentDecoder,n.JSONDocumentDecoder=da.JSONDocumentDecoder,n.PROPERTY_VALUE_CANVASES=ha.PROPERTY_VALUE_CANVASES,n.PROPERTY_VALUE_CANVAS=ha.PROPERTY_VALUE_CANVAS,n.PROPERTY_VALUE_CANVAS1_NAME=ha.PROPERTY_VALUE_CANVAS1_NAME,n.PROPERTY_VALUE_ARTBOARD=ha.PROPERTY_VALUE_ARTBOARD,n.PROPERTY_VALUE_ARTBOARD1_NAME=ha.PROPERTY_VALUE_ARTBOARD1_NAME,n.CANVASES_PATH=ha.CANVASES_PATH,n.CANVAS1_PATH=ha.CANVAS1_PATH,n.ARTBOARD1_PATH=ha.ARTBOARD1_PATH,n.JSON_CONTENT_PATH_DCX2D=ha.JSON_CONTENT_PATH_DCX2D,n.PROPERTY_KEY_UNITS=ha.PROPERTY_KEY_UNITS,n.PROPERTY_KEY_WIDTH=ha.PROPERTY_KEY_WIDTH,n.PROPERTY_KEY_HEIGHT=ha.PROPERTY_KEY_HEIGHT,n.PROPERTY_KEY_X=ha.PROPERTY_KEY_X,n.PROPERTY_KEY_Y=ha.PROPERTY_KEY_Y,n.PROPERTY_KEY_MINISAVE=ha.PROPERTY_KEY_MINISAVE,n.JSONDocumentEncoder=ha.JSONDocumentEncoder,n.JSONNodeDecoder=fa.JSONNodeDecoder,n.PREFIX_COMPONENT=ma.PREFIX_COMPONENT,n.PROPERTY_KEY_CHILDREN=ma.PROPERTY_KEY_CHILDREN,n.PROPERTY_KEY_EXTERNAL_URL=ma.PROPERTY_KEY_EXTERNAL_URL,n.JSONNodeEncoder=ma.JSONNodeEncoder,n.MiniDocumentBranch=ga.MiniDocumentBranch,n.MiniDocumentNode=ga.MiniDocumentNode,n.MiniDocumentComponent=ga.MiniDocumentComponent,n.PGMExportSettings=ya.PGMExportSettings,n.PGMSource=ya.PGMSource,n.PGMWatermarkingUtils=Ta.PGMWatermarkingUtils,n.FormaDamage=Aa.FormaDamage,n.FormaPGMCacheEntry=Aa.FormaPGMCacheEntry,n.FormaPGMCache=Aa.FormaPGMCache,n.FormaPagePGMSource=Ca.FormaPagePGMSource,n.FormaToPGMUtils=_a.FormaToPGMUtils,n.FormaToPGMFactory=Sa.FormaToPGMFactory,n.FormaToPGMMapper=Sa.FormaToPGMMapper,n.FormaToPGMMapperFactory=Pa.FormaToPGMMapperFactory,n.FrameFormaToPGMMapper=Fa.FrameFormaToPGMMapper,n.GridToPGMMapper=va.GridToPGMMapper,n.GroupFormaToPGMMapper=Ra.GroupFormaToPGMMapper,n.ImageFormaToPGMMapper=ba.ImageFormaToPGMMapper,n.RootFormaToPGMMapper=Ea.RootFormaToPGMMapper,n.ShapeFormaToPGMMapper=Na.ShapeFormaToPGMMapper,n.TextFormaToPGMMapper=ka.TextFormaToPGMMapper,n.TypeLockupToPGMMapper=Da.TypeLockupToPGMMapper,n.VectorFormaToPGMMapper=Ia.VectorFormaToPGMMapper,n.VideoFormaToPGMMapper=Ma.VideoFormaToPGMMapper,n.FontOrigin=xa.FontOrigin,n.describeFontOrigin=xa.describeFontOrigin,n.FontSource=xa.FontSource,n.describeFontSource=xa.describeFontSource,n.FontAvailability=xa.FontAvailability,n.FontEmbeddability=xa.FontEmbeddability,n.FontDescriptor=xa.FontDescriptor,n._equality_FontDescriptor_FontDescriptor=xa._equality_FontDescriptor_FontDescriptor,n.OrderedFontSet=wa.OrderedFontSet,n.TextAttribute=Oa.TextAttribute,n.UTF16Attribute=Oa.UTF16Attribute,n.FontDescriptorAttribute=Oa.FontDescriptorAttribute,n.FontSizeAttribute=Oa.FontSizeAttribute,n.FontColorAttribute=Oa.FontColorAttribute,n.FontStrokeColorAttribute=Oa.FontStrokeColorAttribute,n.FontStrokeWidthAttribute=Oa.FontStrokeWidthAttribute,n.TextLookAttribute=Oa.TextLookAttribute,n.TrackingAttribute=Oa.TrackingAttribute,n.SolidColorRun=La.SolidColorRun,n.SolidColorRuns=La.SolidColorRuns,n.RenderRuns=La.RenderRuns,n.ContentTextModel=La.ContentTextModel,n.TextModel=La.TextModel,n.TextModelDidInsertMessage=La.TextModelDidInsertMessage,n.TextPathSegment=Ba.TextPathSegment,n.TextPath=Ba.TextPath,n.TextRange=Ga.TextRange,n.TheoFont=qa.TheoFont,n._equality_TheoFont_TheoFont=qa._equality_TheoFont_TheoFont,n.AnalyticsConstants=ja.AnalyticsConstants,n.CoreAssert=Xa.CoreAssert,n.CoreAssertDebugOnly=Xa.CoreAssertDebugOnly,n.CorePromise=$a.CorePromise,n.DeferredPromise=$a.DeferredPromise,n.DocumentSingletonTracker=Ua.DocumentSingletonTracker,n.ErrorMessageConstants=Ha.ErrorMessageConstants,n.FormaCalloutUtils=Ya.FormaCalloutUtils,n.GUIDUtils=Va.GUIDUtils,n.ImageProcessingUtils=za.ImageProcessingUtils,n.ImageUtils=Ka.ImageUtils,n.LegacyCoreAssert=Wa.LegacyCoreAssert,n.LogCategories=Ja.LogCategories,n.CircleCircleData=Za.CircleCircleData,n.MathUtils=Za.MathUtils,n.SVGPathData=Qa.SVGPathData,n.k_radians_per_degree=Qa.k_radians_per_degree,n.SVGParser=Qa.SVGParser,n.SVGParserUtils=es.SVGParserUtils,n.PreflightResultCode=ts.PreflightResultCode,n.OperationType=ts.OperationType,n.StockWorkflowUtils=ts.StockWorkflowUtils,n.TheoBrandkitUtils=os.TheoBrandkitUtils,n.TheoDocumentUtils=ns.TheoDocumentUtils,n.TheoJSONDecoder=rs.TheoJSONDecoder,n.TheoJSONEncoder=is.TheoJSONEncoder,n.PGMGraphVersion=as.PGMGraphVersion,n.PGMError=as.PGMError,n.IPGMLog=as.IPGMLog,n.PGMLogToCoreAssert=as.PGMLogToCoreAssert,n.PGMGraph=as.PGMGraph,n.IPGMDecoderFactory=ss.IPGMDecoderFactory,n.PGMNode=ss.PGMNode,n.PGMNodeMetadata=ls.PGMNodeMetadata,n.PGMResourceProvider=cs.PGMResourceProvider,n.PGMResourceProviderList=us.PGMResourceProviderList,n.PGMAnimation=ps.PGMAnimation,n.PGMAnimationList=ds.PGMAnimationList,n.PGMFilterAnimation=hs.PGMFilterAnimation,n.PGMMediaPlayAnimation=fs.PGMMediaPlayAnimation,n.PGMOpacityAnimation=ms.PGMOpacityAnimation,n.PGMShapeAnimation=gs.PGMShapeAnimation,n.PGMTextAnimation=ys.PGMTextAnimation,n.PGMTransformedBounds=Ts.PGMTransformedBounds,n.PGMTransformAnimation=Ts.PGMTransformAnimation,n.PGMClip=As.PGMClip,n.PGMComposite=Cs.PGMComposite,n.PGMBlendModeEnum=_s.PGMBlendModeEnum,n.PGMCompositingParams=_s.PGMCompositingParams,n.PGMReference=Ss.PGMReference,n.PGMSimpleGroup=Ps.PGMSimpleGroup,n.PGMBlendFilterSpec=Fs.PGMBlendFilterSpec,n.PGMBlurFilterSpec=vs.PGMBlurFilterSpec,n.PGMColorAdjustmentFilterSpec=Rs.PGMColorAdjustmentFilterSpec,n.PGMColorTransformFilterSpec=bs.PGMColorTransformFilterSpec,n.PGMDuotoneFilterSpec=Es.PGMDuotoneFilterSpec,n.PGMFillFilterSpec=Ns.PGMFillFilterSpec,n.PGMFilter=ks.PGMFilter,n.PGMFilterSpec=Ds.PGMFilterSpec,n.PGMNullFilterSpec=Ds.PGMNullFilterSpec,n.PGMMaskFilterSpec=Is.PGMMaskFilterSpec,n.PGMOverlayFilterSpec=Ms.PGMOverlayFilterSpec,n.PGMScreenFilterSpec=xs.PGMScreenFilterSpec,n.PGMLinearFunction=ws.PGMLinearFunction,n.PGMLoopingFunction=Os.PGMLoopingFunction,n.PGMPeriodicWaveform=Ls.PGMPeriodicWaveform,n.PGMPeriodicFunction=Ls.PGMPeriodicFunction,n.PGMEasingType=Bs.PGMEasingType,n.PGMSineEasingFunction=Bs.PGMSineEasingFunction,n.PGMUnaryFunction=Gs.PGMUnaryFunction,n.ColorRole=qs.ColorRole,n.ColorTableOwner=qs.ColorTableOwner,n.ColorTableEntry=qs.ColorTableEntry,n.ColorTable=qs.ColorTable,n.Duotone=js.Duotone,n.DuotonePreset=js.DuotonePreset,n._equality_DuotonePreset_DuotonePreset=js._equality_DuotonePreset_DuotonePreset,n.HSBColor=Xs.HSBColor,n.ImageColorData=$s.ImageColorData,n.LABColor=Us.LABColor,n.TransformValuesOrdering=Hs.TransformValuesOrdering,n.TransformValues=Hs.TransformValues,n.ExtractedScale=Hs.ExtractedScale,n.Matrix2D=Hs.Matrix2D,n._equality_Matrix2D_Matrix2D=Hs._equality_Matrix2D_Matrix2D,n._asterisk_Matrix2D_Matrix2D=Hs._asterisk_Matrix2D_Matrix2D,n._asterisk_TheoRect_Matrix2D=Hs._asterisk_TheoRect_Matrix2D,n._asterisk_TheoPoint_Matrix2D=Hs._asterisk_TheoPoint_Matrix2D,n.PathSlicingFilter=Ys.PathSlicingFilter,n.NineSlicingOuterBounds=Ys.NineSlicingOuterBounds,n.NineSlicingFilter=Ys.NineSlicingFilter,n.SolidColor=Vs.SolidColor,n._equality_SolidColor_SolidColor=Vs._equality_SolidColor_SolidColor,n.TheoArtworkRenderer=zs.TheoArtworkRenderer,n.TheoArtworkNode=zs.TheoArtworkNode,n.TheoArtworkShape=zs.TheoArtworkShape,n.TheoArtworkGroup=zs.TheoArtworkGroup,n.TheoArtworkClipGroup=zs.TheoArtworkClipGroup,n.TheoArtworkGroupBuilder=zs.TheoArtworkGroupBuilder,n.SHADE_ROLE_PREFIX=Ks.SHADE_ROLE_PREFIX,n.TheoColor=Ks.TheoColor,n._equality_TheoColor_TheoColor=Ks._equality_TheoColor_TheoColor,n.TheoInsets=Ws.TheoInsets,n._negate_TheoInsets=Ws._negate_TheoInsets,n.TheoLine=Js.TheoLine,n._equality_TheoLine_TheoLine=Js._equality_TheoLine_TheoLine,n.TheoMatrix=Zs.TheoMatrix,n.TheoPathRenderer=Qs.TheoPathRenderer,n.TheoPath=Qs.TheoPath,n.TheoEmptyPath=Qs.TheoEmptyPath,n.TheoRectanglePath=Qs.TheoRectanglePath,n.TheoEllipsePath=Qs.TheoEllipsePath,n.DecodeState=Qs.DecodeState,n.TheoPathOperation=Qs.TheoPathOperation,n.TheoPathOpMoveTo=Qs.TheoPathOpMoveTo,n.TheoPathOpLineTo=Qs.TheoPathOpLineTo,n.TheoPathOpCubicBezier=Qs.TheoPathOpCubicBezier,n.TheoPathOpQuadraticBezier=Qs.TheoPathOpQuadraticBezier,n.TheoPathOpRectangle=Qs.TheoPathOpRectangle,n.TheoPathOpEllipse=Qs.TheoPathOpEllipse,n.TheoPathOpClosePath=Qs.TheoPathOpClosePath,n.AppendPathRenderer=Qs.AppendPathRenderer,n.TheoArbitraryPath=Qs.TheoArbitraryPath,n.TheoPathBuilder=Qs.TheoPathBuilder,n.TheoPoint=el.TheoPoint,n._minus_TheoPoint_TheoPoint=el._minus_TheoPoint_TheoPoint,n._plus_TheoPoint_TheoPoint=el._plus_TheoPoint_TheoPoint,n._negate_TheoPoint=el._negate_TheoPoint,n._asterisk_Double_TheoPoint=el._asterisk_Double_TheoPoint,n._slash_TheoPoint_Double=el._slash_TheoPoint_Double,n.TheoRect=tl.TheoRect,n.TheoSize=ol.TheoSize,n.TheoTime=nl.TheoTime,n.TheoTimeRange=rl.TheoTimeRange,n.TimingFunctionType=il.TimingFunctionType,n.TheoTimingFunction=il.TheoTimingFunction,n.XYZColor=al.XYZColor,n.PGMAudio=sl.PGMAudio,n.PGMFont=ll.PGMFont,n.PGMImage=cl.PGMImage,n.PGMLeaf=ul.PGMLeaf,n.PGMMedia=pl.PGMMedia,n.PGMNullNode=dl.PGMNullNode,n.PGMRenderRuns=hl.PGMRenderRuns,n.PGMSVG=fl.PGMSVG,n.PGMShape=ml.PGMShape,n.PGMSolidColorRuns=gl.PGMSolidColorRuns,n.PGMText=yl.PGMText,n.PGMTextStyle=Tl.PGMTextStyle,n.PGMVideo=Al.PGMVideo,n.PGMAnimationUtils=Cl.PGMAnimationUtils,n.PGMGraphDecoder=_l.PGMGraphDecoder,n.EntityMap=Sl.EntityMap,n.PGMGraphDiffer=Sl.PGMGraphDiffer,n.PGMGraphEncoder=Pl.PGMGraphEncoder,n.PGMRange=Fl.PGMRange,n.PGMUtils=vl.PGMUtils,n.IPGMMimicClient=Rl.IPGMMimicClient,n.IPGMMimicDocumentBinding=bl.IPGMMimicDocumentBinding,n.PGMNullDocumentMimicBinding=bl.PGMNullDocumentMimicBinding,n.IPGMMimicNodeBinding=El.IPGMMimicNodeBinding,n.PGMNullMimicNodeBinding=El.PGMNullMimicNodeBinding,n.PGMMimicConformerOptions=Nl.PGMMimicConformerOptions,n.PGMMimicConformer=Nl.PGMMimicConformer,n.PGMMimicDisplayState=kl.PGMMimicDisplayState,n.PGMMimicDocument=Dl.PGMMimicDocument,n.PGMMimicEngine=Il.PGMMimicEngine,n.PGMMimicClipNode=Ml.PGMMimicClipNode,n.PGMMimicFilterNode=xl.PGMMimicFilterNode,n.PGMMimicGroupNode=wl.PGMMimicGroupNode,n.PGMMimicMediaNode=Ol.PGMMimicMediaNode,n.PGMMimicMutation=Ll.PGMMimicMutation,n.PGMMimicNode=Ll.PGMMimicNode,n.PGMNullMimicNode=Ll.PGMNullMimicNode,n.PGMMimicShapeNode=Bl.PGMMimicShapeNode,n.PGMMimicTextNode=Gl.PGMMimicTextNode,n.$Tests={AddTextTest:ql.AddTextTest,AddTextOverImageBackgroundTest:ql.AddTextOverImageBackgroundTest,ReplaceTextTest:ql.ReplaceTextTest,ReplaceTextTestStrategies:ql.ReplaceTextTestStrategies,AddImageTest:ql.AddImageTest,ReplaceImageTest:ql.ReplaceImageTest,ReplaceExistingImageTest:ql.ReplaceExistingImageTest,AddIconTest:ql.AddIconTest,ReplaceIconTest:ql.ReplaceIconTest,AddVideoTest:ql.AddVideoTest,AddLogoTest:ql.AddLogoTest,ReplaceLogoTest:ql.ReplaceLogoTest,AddBadgeTest:ql.AddBadgeTest,AlignTest:jl.AlignTest,AnimateTest:Xl.AnimateTest,AnimationTestBase:Xl.AnimationTestBase,AnimationLetterTest:Xl.AnimationLetterTest,AnimationLetterRandomTest:Xl.AnimationLetterRandomTest,AnimationLetterFlickerTest:Xl.AnimationLetterFlickerTest,AnimationFlickerTest:Xl.AnimationFlickerTest,AnimationGrowTest:Xl.AnimationGrowTest,AnimationFadeTest:Xl.AnimationFadeTest,AnimationDynamicZoomTest:Xl.AnimationDynamicZoomTest,AnimationDynamicCenterTest:Xl.AnimationDynamicCenterTest,AnimationDynamicTwoTest:Xl.AnimationDynamicTwoTest,AnimationDynamicThreeTest:Xl.AnimationDynamicThreeTest,AnimationColorSwapOneTest:Xl.AnimationColorSwapOneTest,AnimationSlideTest:Xl.AnimationSlideTest,AnimationZoomTest:Xl.AnimationZoomTest,AnimationPanTest:Xl.AnimationPanTest,AnimationGrayscaleTest:Xl.AnimationGrayscaleTest,AnimationPhotoBlurTest:Xl.AnimationPhotoBlurTest,AnimationColorizeTest:Xl.AnimationColorizeTest,AnimationFillTest:Xl.AnimationFillTest,BrandifyTest:$l.BrandifyTest,AddBrandTest:$l.AddBrandTest,RemoveBrandingTest:$l.RemoveBrandingTest,RemoveExistingBrandingTest:$l.RemoveExistingBrandingTest,ChangeBrandingTestToNone:$l.ChangeBrandingTestToNone,ChangeBrandingTest:$l.ChangeBrandingTest,SetHighlightMethodTest:Ul.SetHighlightMethodTest,ApplyCharStyleTest:Ul.ApplyCharStyleTest,ApplyCharStyleWithoutUITest:Ul.ApplyCharStyleWithoutUITest,UpdateCharStyleRangeTest:Ul.UpdateCharStyleRangeTest,ApplyColorIconTest:Hl.ApplyColorIconTest,ApplyColorRootTest:Hl.ApplyColorRootTest,ApplyColorThemeTest:Hl.ApplyColorThemeTest,ApplyColorThemeWithShuffleTest:Hl.ApplyColorThemeWithShuffleTest,ModifyColorThemeTest:Hl.ModifyColorThemeTest,ColorRelationshipTestUtils:Hl.ColorRelationshipTestUtils,DeleteImagesTest:Yl.DeleteImagesTest,DeleteCellsTest:Yl.DeleteCellsTest,DeleteItemsTest:Yl.DeleteItemsTest,DistributeTest:Vl.DistributeTest,ArrangeTest:Vl.ArrangeTest,DuplicateTest:zl.DuplicateTest,FlipTest:Kl.FlipTest,SetTextColorPrimaryTest:Wl.SetTextColorPrimaryTest,SetTextColorSecondaryTest:Wl.SetTextColorSecondaryTest,SetTextColorBorderTest:Wl.SetTextColorBorderTest,SetTextColorShadowTest:Wl.SetTextColorShadowTest,SetTextColorBorderAndShadowTest:Wl.SetTextColorBorderAndShadowTest,SetTextColorAllFourTest:Wl.SetTextColorAllFourTest,SetCharStyleColorPrimaryTest:Wl.SetCharStyleColorPrimaryTest,SetCharStyleColorSecondaryTest:Wl.SetCharStyleColorSecondaryTest,SetCharStyleColorBorderTest:Wl.SetCharStyleColorBorderTest,SetCharStyleColorShadowTest:Wl.SetCharStyleColorShadowTest,SetCharStyleColorBorderAndShadowTest:Wl.SetCharStyleColorBorderAndShadowTest,SetCharStyleColorAllFourTest:Wl.SetCharStyleColorAllFourTest,CreatePaddedCollageTest:Jl.CreatePaddedCollageTest,SetGridParametersTest:Jl.SetGridParametersTest,SetGridStyleTest:Jl.SetGridStyleTest,SwapGridFormaTest:Jl.SwapGridFormaTest,GroupTest:Zl.GroupTest,UngroupTest:Zl.UngroupTest,MoveHandleTest:Ql.MoveHandleTest,ResizeHandleTest:Ql.ResizeHandleTest,ResizeLockupHorizontallyTest:Ql.ResizeLockupHorizontallyTest,RotateHandleTest:Ql.RotateHandleTest,ReplaceImagesWithColorsTest:ec.ReplaceImagesWithColorsTest,SetImageFilterTest:ec.SetImageFilterTest,SetImageFilterDuotoneTest:ec.SetImageFilterDuotoneTest,ShuffleImageFilterTest:ec.ShuffleImageFilterTest,ChangeImageAdjustmentsTest:ec.ChangeImageAdjustmentsTest,SetImageAsFloatingTest:ec.SetImageAsFloatingTest,SetImageAsBackgroundTest:ec.SetImageAsBackgroundTest,CropToRatioTest:ec.CropToRatioTest,ApplyShapeMaskTest:ec.ApplyShapeMaskTest,ApplyCutoutTest:ec.ApplyCutoutTest,RemoveCutoutTest:ec.RemoveCutoutTest,AllowFreeformCropTest:ec.AllowFreeformCropTest,EnterCropModeTest:ec.EnterCropModeTest,ExitCropModeTest:ec.ExitCropModeTest,AddHiddenImageToGridTest:ec.AddHiddenImageToGridTest,SetBlendScreenIconTest:ec.SetBlendScreenIconTest,SetBlendMultiplyIconTest:ec.SetBlendMultiplyIconTest,SetBlendScreenImageTest:ec.SetBlendScreenImageTest,SetBlendMultiplyImageTest:ec.SetBlendMultiplyImageTest,UpdateCutoutMaskTest:ec.UpdateCutoutMaskTest,EnterRefineCutoutModeTest:ec.EnterRefineCutoutModeTest,ExitRefineCutoutModeTest:ec.ExitRefineCutoutModeTest,ToggleRefineCutoutFullImageActionTest:ec.ToggleRefineCutoutFullImageActionTest,LayerTest:tc.LayerTest,SendForwardTest:tc.SendForwardTest,SendBackwardTest:tc.SendBackwardTest,SendToFrontTest:tc.SendToFrontTest,SendToBackTest:tc.SendToBackTest,NudgeTest:oc.NudgeTest,OpacityTest:nc.OpacityTest,ShapeOpacityTest:nc.ShapeOpacityTest,BackgroundOpacityTest:nc.BackgroundOpacityTest,PageSizeLetterTest:rc.PageSizeLetterTest,PageSizeCustomTest:rc.PageSizeCustomTest,PageSizeA4Test:rc.PageSizeA4Test,PageSizePhoneTest:rc.PageSizePhoneTest,RecordCreateFromRemixTest:ic.RecordCreateFromRemixTest,RotateTest:ac.RotateTest,ScaleTest:sc.ScaleTest,ApplyTemplateTest:lc.ApplyTemplateTest,SetTextTest:cc.SetTextTest,SetTextCollapseTest:cc.SetTextCollapseTest,SetFontTest:cc.SetFontTest,ReplaceMissingFontsTest:cc.ReplaceMissingFontsTest,ChangeTextAlignmentTest:cc.ChangeTextAlignmentTest,AutoTextLayoutFromStandardTest:cc.AutoTextLayoutFromStandardTest,AutoTextLayoutShuffleTest:cc.AutoTextLayoutShuffleTest,ChangeTextLineSpacingTest:cc.ChangeTextLineSpacingTest,ChangeTextAttributesTest:cc.ChangeTextAttributesTest,MatchSizeTest:cc.MatchSizeTest,SetLineBreakTest:cc.SetLineBreakTest,SetNextSpacingSequenceTest:cc.SetNextSpacingSequenceTest,SetTrackingTest:cc.SetTrackingTest,SetLeadingTest:cc.SetLeadingTest,SetPaddingTest:cc.SetPaddingTest,SetTextLookTest:cc.SetTextLookTest,SetTextEffectsAttributesTest:cc.SetTextEffectsAttributesTest,ApplyTextStyleSuggestionTest:cc.ApplyTextStyleSuggestionTest,ApplyNextTextEmphasisSuggestionTest:cc.ApplyNextTextEmphasisSuggestionTest,ChangeBackgroundShapeTest:cc.ChangeBackgroundShapeTest,ChangeBackgroundShapeCharStyleTest:cc.ChangeBackgroundShapeCharStyleTest,SetFontSizeTest:cc.SetFontSizeTest,SetRelativeFontScaleTest:cc.SetRelativeFontScaleTest,ChangeTextLayoutToPathTest:cc.ChangeTextLayoutToPathTest,EditCurvedTextShortTest:cc.EditCurvedTextShortTest,EditCurvedTextLongTest:cc.EditCurvedTextLongTest,ChangeCurvedTextTrackingTest:cc.ChangeCurvedTextTrackingTest,ChangeTextLayoutToLetterGridTest:cc.ChangeTextLayoutToLetterGridTest,ChangeLetterGridShapeTest:cc.ChangeLetterGridShapeTest,ChangeLetterGridTrackingTest:cc.ChangeLetterGridTrackingTest,ChangeLetterGridSpacingTest:cc.ChangeLetterGridSpacingTest,EnableWatermarkTest:uc.EnableWatermarkTest,DisableWatermarkTest:uc.DisableWatermarkTest},n.$Resources={schema:[{path:"./schemata/2000/Styles.json"},{path:"./schemata/2000/Root.json"},{path:"./schemata/2000/Color.json"},{path:"./schemata/2000/Text.json"},{path:"./schemata/2000/Animation.json"},{path:"./schemata/2000/Filters.json"},{path:"./schemata/2000/Formae.json"},{path:"./schemata/2000/Artwork.json"},{path:"./schemata/2000/ContentNodes.json"},{path:"./schemata/22000/Document.json"},{path:"./schemata/22000/Styles.json"},{path:"./schemata/22000/Root.json"},{path:"./schemata/22000/Color.json"},{path:"./schemata/22000/Text.json"},{path:"./schemata/22000/Animation.json"},{path:"./schemata/22000/Filters.json"},{path:"./schemata/22000/Formae.json"},{path:"./schemata/22000/Artwork.json"},{path:"./schemata/22000/Manifest.json"},{path:"./schemata/22000/ContentNodes.json"},{path:"./schemata/6000/Styles.json"},{path:"./schemata/6000/Root.json"},{path:"./schemata/6000/Color.json"},{path:"./schemata/6000/Text.json"},{path:"./schemata/6000/Animation.json"},{path:"./schemata/6000/Filters.json"},{path:"./schemata/6000/Formae.json"},{path:"./schemata/6000/Artwork.json"},{path:"./schemata/6000/ContentNodes.json"},{path:"./schemata/9000/Styles.json"},{path:"./schemata/9000/Root.json"},{path:"./schemata/9000/Color.json"},{path:"./schemata/9000/Text.json"},{path:"./schemata/9000/Animation.json"},{path:"./schemata/9000/Filters.json"},{path:"./schemata/9000/Formae.json"},{path:"./schemata/9000/Artwork.json"},{path:"./schemata/9000/ContentNodes.json"},{path:"./schemata/15000/Styles.json"},{path:"./schemata/15000/Root.json"},{path:"./schemata/15000/Color.json"},{path:"./schemata/15000/Text.json"},{path:"./schemata/15000/Animation.json"},{path:"./schemata/15000/Filters.json"},{path:"./schemata/15000/Formae.json"},{path:"./schemata/15000/Artwork.json"},{path:"./schemata/15000/ContentNodes.json"},{path:"./schemata/17000/Document.json"},{path:"./schemata/17000/Styles.json"},{path:"./schemata/17000/Root.json"},{path:"./schemata/17000/Color.json"},{path:"./schemata/17000/Text.json"},{path:"./schemata/17000/Animation.json"},{path:"./schemata/17000/Filters.json"},{path:"./schemata/17000/Formae.json"},{path:"./schemata/17000/Artwork.json"},{path:"./schemata/17000/Manifest.json"},{path:"./schemata/17000/ContentNodes.json"},{path:"./schemata/7000/Styles.json"},{path:"./schemata/7000/Root.json"},{path:"./schemata/7000/Color.json"},{path:"./schemata/7000/Text.json"},{path:"./schemata/7000/Animation.json"},{path:"./schemata/7000/Filters.json"},{path:"./schemata/7000/Formae.json"},{path:"./schemata/7000/Artwork.json"},{path:"./schemata/7000/ContentNodes.json"}]}},V93b:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("rtbu");r.PGMMimicGroupNode=(n=function(e,t,o,n){this.children=[],s.PGMMimicNode.call(this,e,t,o,n)},i.defineClass({name:"PGMMimicGroupNode",ctor:n,superName:"PGMMimicNode",props:{insertChild:function(e,t){if(e<0||e>this.children.length)a.LegacyCoreAssert.fail("invalid index for insertChild",void 0,"PGMMimicGroupNode.insertChild","PGMMimicGroupNode.swift",27);else{if(t.parent===this){var o;if(null==(o=i.indexOf(this.children,t)))return void a.LegacyCoreAssert.fail("internal inconsistency",void 0,"PGMMimicGroupNode.insertChild","PGMMimicGroupNode.swift",45);if(o==e)return;this.binding.reinsertChild(this,e,t),this.children.splice(o,1),this.children.splice(e>o?e-1:e,0,t),this.invalidateMarkedBounds()}else t.removeFromTree(),this.binding.insertChild(this,e,t),t.setAsChildOf(this),this.children.splice(e,0,t),this.invalidateMarkedBounds();this.recordMutation(s.PGMMimicMutation.HIERARCHY_CHILDREN)}},removeChild:function(e){var t;null!=(t=i.indexOf(this.children,e))?(this.binding.removeChild(this,t,e),this.children.splice(t,1),e.setAsDetached(),this.invalidateMarkedBounds(),this.recordMutation(s.PGMMimicMutation.HIERARCHY_CHILDREN)):a.LegacyCoreAssert.fail("can't remove a child that isn't a child",void 0,"PGMMimicGroupNode.removeChild","PGMMimicGroupNode.swift",68)},updateCTM:function(){s.PGMMimicNode.prototype.updateCTM.call(this),this.children.forEach((function(e){return e.updateCTM()}))},calculateMarkedBounds:function(){var e=null;return this.children.forEach((function(t){var o;if(o=t.markedBounds){var n=t.compositing.placement.transformRect(o);e=i.opt(e,(function(e){return e.unionWith(n)}))||n}})),e},destroy:function(){for(;this.children.length>0;)this.children[0].destroy();s.PGMMimicNode.prototype.destroy.call(this)},visit:function(e){var t=s.PGMMimicNode.prototype.visit.call(this,e);if(null!=t)return t;for(var o=i.iter(this.children);!o.done;o.next())if(null!=(t=o.value.visit(e)))return t;return null},visitPostOrder:function(e){for(var t=i.iter(this.children);!t.done;t.next()){var o;if(o=t.value.visitPostOrder(e))return o}return e(this)?this:null},endConformSummary:function(e){for(var t=!1,o=i.iter(this.children);!o.done;o.next())o.value.endConformSummary(e)&&(t=!0);return s.PGMMimicNode.prototype.endConformSummary.call(this,t)}}}),n)},VBYO:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"OpaqueDCXData":{"type":"object"},"Manifest":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","default":"My Post"},"type":{"type":"string","enum":["application/vnd.adobe.theo.document+dcx"]},"format-version":{"type":"integer"},"children":{"type":"array","items":{"anyOf":[{"$ref":"Formae.json#/definitions/FormaPageManifestData"},{"$ref":"Document.json#/definitions/ContentDocument"},{"$ref":"#/definitions/OpaqueDCXData"}]}}}}}}')},VXZl:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("0GlD"),s=o("SDMx"),l=o("yGNn"),c=o("iCxV"),u=o("kJ8p"),p=o("GINV");r.StorageSpecHTTP=(n=function e(t){this.url=t,p.StorageSpec.call(this,e.KIND)},i.defineClass({name:"StorageSpecHTTP",ctor:n,superName:"StorageSpec",statics:{KIND:"http",KEY_URL:"url",decodeSpec:function(e){var t;return null!=(t=i.as(e[n.KEY_URL],"String"))?new n(t):null}},props:{encode:function(){var e={};return e[p.StorageSpec.KEY_KIND]=n.KIND,e[n.KEY_URL]=this.url,e},canRead:function(){return!0},readUsingContext:function(e){var t;return(t=c.Host.network)?t.request(new u.HostNetworkRequest(this.url)).then((function(e){var t,o,n;return(t=i.as(e,u.HostNetworkResponse))&&null!=(o=t.mimeType)&&(n=t.data)?o.startsWith("application/json")?n.asJSON().then((function(e){var t;return(t=i.as(e,["Dictionary","String","Any"]))?new s.CoreContentJSON(t,o):l.CorePromise.reject("unexpected json data type, expected dictionary")})):new a.CoreContentBinary(n,o):l.CorePromise.reject("unexpected response from network.request")})):l.CorePromise.reject("no network interface")},isEqualTo:function(e){var t;return!!(t=i.as(e,n))&&this.url==t.url&&p.StorageSpec.prototype.isEqualTo.call(this,e)}}}),n)},VZfT:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"FormaAnimation":{"className":"FormaAnimation","type":"object","properties":{"kind":{"type":"string","enum":["FormaAnimation"]},"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"end-time":{"$ref":"Root.json#/definitions/TheoTime"},"key-frames":{"type":"array","items":{"$ref":"#/definitions/KeyFrame"}},"animation-style":{"$ref":"#/definitions/AnimationStyle"},"name":{"type":"string"}},"required":["start-time","end-time","key-frames"]},"KeyFrame":{"className":"KeyFrame","type":"object","properties":{"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"timing-function":{"type":"string"},"placement":{"$ref":"Root.json#/definitions/Matrix2D"},"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"}}},"AnimationStyle":{"className":"AnimationStyle","type":"object","properties":{"name":{"type":"string"},"variant":{"type":"integer"},"variant-count":{"type":"integer"},"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"end-time":{"$ref":"Root.json#/definitions/TheoTime"},"category":{"type":"string"},"looping":{"type":"boolean","default":false},"text-style":{"type":"boolean"},"image-style":{"type":"boolean"}},"required":["name","variant","variant-count"]}}}')},Vb4u:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"Assets":{"read-data":false,"type":"object","properties":{"path":{"type":"string","enum":["assets"]}}},"TheoDocumentData":{"className":"TheoDocumentData","type":"object","properties":{"shareData":{"type":"object","properties":{"scope":{"type":"string"}}}}},"ContentDocument":{"className":"ContentDocument","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["content"]},"type":{"type":"string","default":"application/vnd.adobe.theo.content+dcx"},"children":{"type":"array","items":[{"$ref":"ContentNodes.json#/definitions/RootContentNode"}]}},"required":["id","path","type"]}]},"DocumentHistory":{"className":"DocumentHistory","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["document-history"]},"entries":{"type":"array","items":{"type":"string"},"maxItems":100}},"required":["id","path","entries"]}]},"TheoDocument":{"className":"TheoDocument","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","default":"My Post"},"type":{"type":"string"},"format-version":{"type":"integer"},"watermark-enabled":{"type":"boolean","default":true},"remix-ancestors":{"type":"array","items":{"type":"string"}},"shared":{"type":"boolean"},"modified-since-share":{"type":"boolean","default":false},"cp#assetId":{"type":"string"},"cp#shortId":{"type":"string"},"cp#publishedEtag":{"type":"string"},"cp#projectId":{"type":"string"},"cp#isExported":{"type":"boolean"},"authctx#ctxid":{"type":"string"},"authctx#ctxurn":{"type":"string"},"authctx#ctxname":{"type":"string"},"authctx#themeid":{"type":"string"},"authctx#uses-branded-elements":{"type":"boolean","description":"authoringContextID_.length > 0"},"doc#data":{"$ref":"#/definitions/TheoDocumentData"},"constrainedImages":{"type":"object","properties":{"stockImages":{"type":"object","properties":{"extended":{"type":"array","items":{"type":"string"}},"standard":{"type":"array","items":{"type":"string"}},"limited":{"type":"array","items":{"type":"string"}},"unlicensed":{"type":"array","items":{"type":"string"}}}}}},"children":{"type":"array","items":{"anyOf":[{"$ref":"Formae.json#/definitions/FormaPage"},{"$ref":"#/definitions/ContentDocument"},{"$ref":"Color.json#/definitions/ColorThemeDocument"},{"$ref":"#/definitions/DocumentHistory"},{"$ref":"#/definitions/Assets"}]},"uniqueItems":true,"maxItems":5}},"manifest-properties":["format-version","cp#assetId","cp#shortId","cp#publishedEtag","cp#projectId","cp#isExported","authctx#ctxid","authctx#ctxname","authctx#ctxurn","authctx#themeid","authctx#uses-branded-elements"],"required":["id","format-version","doc#data"]}}}')},Vd4I:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"FontDescriptor":{"className":"FontDescriptor","type":"object","properties":{"postscript-name":{"type":"string"}},"required":["postscript-name"]},"TheoFont":{"className":"TheoFont","type":"object","properties":{"postscript-name":{"type":"string"},"sparkElementID":{"type":"string"},"sparkRoles":{"type":"array","items":{"type":"string"}}},"required":["postscript-name"]},"TextRange":{"type":"array","items":{"type":"integer"},"maxItems":2,"minItems":2},"TextAttribute":{"className":"TextAttribute","type":"object","properties":{"start":{"type":"integer"},"length":{"type":"integer"},"value":{"type":["string","object","number","integer"]}},"required":["start","length","value"]},"TextAttributeTypes":{"oneOf":[{"$ref":"#/definitions/UTF16Attribute"},{"$ref":"#/definitions/FontDescriptorAttribute"},{"$ref":"#/definitions/FontSizeAttribute"},{"$ref":"#/definitions/FontColorAttribute"},{"$ref":"#/definitions/FontStrokeColorAttribute"},{"$ref":"#/definitions/FontStrokeWidthAttribute"},{"$ref":"#/definitions/TextLookAttribute"}]},"UTF16Attribute":{"className":"UTF16Attribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"string"}}}]},"FontDescriptorAttribute":{"className":"FontDescriptorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"#/definitions/FontDescriptor"}}}]},"FontSizeAttribute":{"className":"FontSizeAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"number"}}}]},"FontColorAttribute":{"className":"FontColorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"Color.json#/definitions/SolidColor"}}}]},"FontStrokeColorAttribute":{"className":"FontStrokeColorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"Color.json#/definitions/SolidColor"}}}]},"FontStrokeWidthAttribute":{"className":"FontStrokeWidthAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"number"}}}]},"TextLookAttribute":{"className":"TextLookAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"integer"}}}]},"TextModel":{"className":"TextModel","type":"object","properties":{"text":{"type":"array","items":{"$ref":"#/definitions/UTF16Attribute"},"maxItems":1},"font-name":{"type":"array","items":{"$ref":"#/definitions/FontDescriptorAttribute"},"maxItems":1},"font-size":{"type":"array","items":{"$ref":"#/definitions/FontSizeAttribute"},"maxItems":1},"font-color":{"type":"array","items":{"$ref":"#/definitions/FontColorAttribute"},"maxItems":1},"font-strokecolor":{"type":"array","items":{"$ref":"#/definitions/FontStrokeColorAttribute"},"maxItems":1},"font-strokewidth":{"type":"array","items":{"$ref":"#/definitions/FontStrokeWidthAttribute"},"maxItems":1},"text-look":{"type":"array","items":{"$ref":"#/definitions/TextLookAttribute"},"maxItems":1}}}}}')},Vs4C:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"LinkedObject":{"type":"object","properties":{"id":{"type":"string"},"type":{"type":"string"},"name":{"type":"string"},"path":{"type":"string"}}},"TheoSize":{"type":"array","minItems":2,"items":[{"type":"number","minimum":0,"description":"width"},{"type":"number","minimum":0,"description":"height"}]},"TheoPoint":{"type":"array","minItems":2,"items":[{"type":"number","description":"x"},{"type":"number","description":"y"}]},"TheoRect":{"anyOf":[{"type":"string","pattern":"^[-+]?\\\\d*\\\\.?\\\\d+([eE][-+]?\\\\d+)?(\\\\s*,\\\\s*[-+]?\\\\d*\\\\.?\\\\d+([eE][-+]?\\\\d+)?){3}$","description":"Comma-separated list of 4 doubles in minX, maxX, minY, maxY order"},{"type":"array","minItems":4,"items":[{"type":"number","description":"minX"},{"type":"number","description":"minY"},{"type":"number","description":"maxX"},{"type":"number","description":"maxY"}]}]},"Matrix2D":{"type":"array","minItems":6,"items":[{"type":"number","description":"a"},{"type":"number","description":"b"},{"type":"number","description":"c"},{"type":"number","description":"d"},{"type":"number","description":"tx"},{"type":"number","description":"ty"}]},"TheoTime":{"type":"array","minItems":2,"items":[{"type":"integer","description":"value"},{"type":"integer","description":"timescale"}]}},"$ref":"Document.json#/definitions/TheoDocument"}')},Vyz0:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"OpaqueDCXData":{"type":"object"},"Manifest":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","default":"My Post"},"type":{"type":"string","enum":["application/vnd.adobe.theo.document+dcx"]},"format-version":{"type":"integer"},"children":{"type":"array","items":{"anyOf":[{"$ref":"Formae.json#/definitions/FormaPageManifestData"},{"$ref":"Document.json#/definitions/ContentDocument"},{"$ref":"#/definitions/OpaqueDCXData"}]}}}}}}')},"W5+J":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("c9Jm"),s=o("yGNn"),l=o("FNB+"),c=o("9Lk3"),u=o("fdtz"),p=o("nELi");r.ScaleTest=(n=function(){this.actionSequence_Scale=[],this.formaeToScale_=[],this.formaeToTest_=[],this.initialTransforms_=[],a.ActionTestBase.call(this)},i.defineClass({name:"ScaleTest",ctor:n,superName:"ActionTestBase",statics:{scale_:2},props:{populateActionSequence:function(e,t,o){var r,a=this;this.formaeToScale_=i.clone(this.allSelectableFormae(o,(function(e){return!(e.controller instanceof c.GridController)&&!(!(r=i.opt(e.controller,(function(e){return e.scalable})))&&null==r)&&r}))),XCTAssertFalse(0==this.formaeToScale_.length);for(var d=i.iter(this.formaeToScale_);!d.done;d.next()){var h=d.value,f=i.clone(h.filterByKind(u.ImageForma.KIND,l.FormaTraversal.JustChildren));f.length>0&&!f[0].controller.floating?this.formaeToTest_=this.formaeToTest_.concat(f):this.formaeToTest_.push(h)}return this.initialTransforms_=this.formaeToTest_.map((function(e){return e.totalPlacement}),this),s.CorePromise.resolve([function(){return new p.ScaleAction(n.scale_,a.formaeToScale_,!1)}])},validateAfterActionSequence:function(e,t){for(var o=i.iter(i.range(0,this.formaeToTest_.length,!1));!o.done;o.next()){var r=o.value;XCTAssertEqual(this.formaeToTest_[r].totalPlacement.extractedScale.scale,this.initialTransforms_[r].scaleXY(n.scale_,n.scale_).extractedScale.scale)}},validateAfterUndo:function(e,t){for(var o=i.iter(i.range(0,this.formaeToTest_.length,!1));!o.done;o.next()){var n=o.value;XCTAssertEqual(this.formaeToTest_[n].totalPlacement.extractedScale.scale,this.initialTransforms_[n].extractedScale.scale)}},validateAfterRedo:function(e,t){for(var o=i.iter(i.range(0,this.formaeToTest_.length,!1));!o.done;o.next()){var r=o.value;XCTAssertEqual(this.formaeToTest_[r].totalPlacement.extractedScale.scale,this.initialTransforms_[r].scaleXY(n.scale_,n.scale_).extractedScale.scale)}},tearDown:function(){this.formaeToScale_=[],this.formaeToTest_=[],a.ActionTestBase.prototype.tearDown.call(this)}}}),n)},W6ub:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("qyrT");i.PROPERTY_FILLCOLORS="fill-colors",i.PROPERTY_STROKECOLORS="stroke-colors",i.PGMRenderRuns=(n=function(){},r={},a.defineClass({name:"PGMRenderRuns",ctor:n,superName:"CoreObject",statics:{EMPTY:{get:function(){return void 0===r.EMPTY&&(r.EMPTY=n.init_9b49(s.PGMSolidColorRuns.init_d41d(),s.PGMSolidColorRuns.init_d41d())),r.EMPTY}},decode:function(e){var t;if(t=e){var o=s.PGMSolidColorRuns.decode(a.as(t[i.PROPERTY_FILLCOLORS],["Array","Any"])),r=s.PGMSolidColorRuns.decode(a.as(t[i.PROPERTY_STROKECOLORS],["Array","Any"]));return n.init_9b49(o,r)}return null}},props:{init_9b49:function(e,t){this.fillColors=e,this.strokeColors=t},init_378c:function(e){this.fillColors=s.PGMSolidColorRuns.init_3338(e.fillColors),this.strokeColors=s.PGMSolidColorRuns.init_3338(e.strokeColors)},isEmpty:function(){return 0==this.fillColors.runArrays.length&&0==this.strokeColors.runArrays.length},interpolate:function(e,t){return n.init_9b49(this.fillColors.interpolate(e.fillColors,t),this.strokeColors.interpolate(e.strokeColors,t))},asString:{get:function(){return"Fill:"+this.fillColors.asString+" Stroke:"+this.strokeColors.asString}},encode:function(){var e={};return e[i.PROPERTY_FILLCOLORS]=this.fillColors.encode(),e[i.PROPERTY_STROKECOLORS]=this.strokeColors.encode(),e},isEqualTo:function(e){return this===e||this.asString==e.asString}}}),n)},"WF+G":function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("gXiO"),l=o("fNpk");i.CorePath=(n=function e(t){this.isAbsolute=t.startsWith(e.DELIMITER),this.parts=t.split(e.DELIMITER).filter((function(e){return""!=e}),this),this.asString=(this.isAbsolute?e.DELIMITER:"")+this.parts.join(e.DELIMITER),s.CoreObject.call(this)},r={},a.defineClass({name:"CorePath",ctor:n,superName:"CoreObject",statics:{DELIMITER:"/",ROOT:{get:function(){return void 0===r.ROOT&&(r.ROOT=new n(n.DELIMITER)),r.ROOT}},EMPTY:{get:function(){return void 0===r.EMPTY&&(r.EMPTY=new n("")),r.EMPTY}}},props:{forceAbsolute:{get:function(){return this.isAbsolute?this:new n(n.DELIMITER+this.asString)}},forceRelative:{get:function(){return this.isAbsolute?new n(this.asString.substr(1)):this}},relativeToBase:function(e){var t;if(this.asString==e.asString)t=n.EMPTY;else if(this.isAbsolute!=e.isAbsolute)t=null;else if(""==e.asString||e.asString==n.DELIMITER)t=this;else if(this.asString.startsWith(e.asString)){var o=this.asString.substr(e.asString.length);t=o.startsWith(n.DELIMITER)?new n(o.substr(1)):null}else t=null;return t},append:function(e){return 0==e.depth?this:e.isAbsolute?this.append(e.forceRelative):this.asString==n.DELIMITER?new n(this.asString+e.asString):new n(this.asString+n.DELIMITER+e.asString)},appendPart:function(e){return l.LegacyCoreAssert.isFalse(e.includes(n.DELIMITER),"path parts should not contain slashes",void 0,"CorePath.appendPart","CorePath.swift",119),this.append(new n(e))},depth:{get:function(){return this.parts.length}},parent:{get:function(){return 0==this.parts.length?null:new n((this.isAbsolute?n.DELIMITER:"")+a.dropLast(this.parts,1).join(n.DELIMITER))}},lastPart:{get:function(){return 0==this.parts.length?null:this.parts[this.parts.length-1]}},isEqualTo:function(e){return this.asString==e.asString}}}),n)},WGnI:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("xcIW"),s=o("sq5L"),l=o("bauG"),c=o("tlHl"),u=o("hauK"),p=o("Ucb9"),d=o("ZA1K"),h=o("bAjp"),f=o("s3Tu"),m=o("sIWg");i.gvar(r,"ALL_PGM_LEAF_TYPES",(function(){return[l.PGMImage.TYPE,f.PGMVideo.TYPE,a.PGMAudio.TYPE,d.PGMSVG.TYPE,h.PGMText.TYPE,p.PGMShape.TYPE]})),r.PGMLeaf=(n=function(e,t,o,n,r){this.bounds=r,u.PGMNode.call(this,e,t,o,n)},i.defineClass({name:"PGMLeaf",ctor:n,superName:"PGMNode",statics:{PROP_BOUNDS:"bounds",decodeNode:function(e,t,o,a,l,u,d){if(!r.ALL_PGM_LEAF_TYPES.includes(t))return null;var f;if(f=m.TheoRect.decodeJson(i.as(e[n.PROP_BOUNDS],"AnyObject")))switch(t){case"pgm-image":case"pgm-video":case"pgm-audio":case"pgm-svg":return c.PGMMedia.decodeLeaf(e,t,o,a,l,f,d);case"pgm-text":return h.PGMText.decodeLeaf(e,t,o,a,l,f,u,d);case"pgm-shape":return p.PGMShape.decodeLeaf(e,t,o,a,l,f,d);default:return d.error(s.PGMError.UNKNOWN_NODE_TYPE,"internal PGM error: list of types is not exhaustive"),null}return d.error(s.PGMError.BAD_NODE,"missing bounds property for PGMLeaf"),null}},props:{isEqualTo:function(e){return this===e||!!(t=i.as(e,n))&&this.bounds.equal(t.bounds)&&u.PGMNode.prototype.isEqualTo.call(this,e);var t},encode:function(){var e=u.PGMNode.prototype.encode.call(this);return e[n.PROP_BOUNDS]=this.bounds.encodeJson(),e}}}),n)},WR9q:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("O8XL"),l=o("lbYW"),c=o("c9Jm"),u=o("FNB+"),p=o("6Rk9"),d=o("sIWg");i.DistributeTest=(n=function(){this.actionSequence_Distribute=[function(){return new l.DistributeFormaeAction(s.DistributeType.LeftEdge)},function(){return new l.DistributeFormaeAction(s.DistributeType.TopEdge)}],this.formaeToDistribute_=[],this.initialBounds_=d.TheoRect.Zero,this.postDistributeBounds_=d.TheoRect.Zero,this.epsilon=.001,c.ActionTestBase.call(this)},a.defineClass({name:"DistributeTest",ctor:n,superName:"ActionTestBase",props:{canRunActionSequence:function(e,t,o){var n=p.GeometryFacade.getFormaeBounds([o.firstPage.root],!0);return this.allSelectableFormae(o,(function(e){return 1==e.controller.floating&&n.contains(p.GeometryFacade.getFormaeBounds([e],!0))})).length>2},setUpActionSequence:function(e,t,o){var n=p.GeometryFacade.getFormaeBounds([o.firstPage.root],!0);this.formaeToDistribute_=a.clone(this.allSelectableFormae(o,(function(e){return 1==e.controller.floating&&n.contains(p.GeometryFacade.getFormaeBounds([e],!0))}))),XCTAssertNotNil(this.formaeToDistribute_),this.formaeToDistribute_.length>0&&(o.controller.selection.replaceSelectionWithFormae(this.formaeToDistribute_),this.initialBounds_=p.GeometryFacade.getFormaeBounds(this.formaeToDistribute_,!0))},validateAfterActionSequence:function(e,t){this.postDistributeBounds_=p.GeometryFacade.getFormaeBounds(this.formaeToDistribute_,!0),this.validatePostDistributeLeftAndTop()},validateAfterUndo:function(e,t){var o=p.GeometryFacade.getFormaeBounds(this.formaeToDistribute_,!0);XCTAssertTrue(this.initialBounds_.equal(o))},validateAfterRedo:function(e,t){this.postDistributeBounds_=p.GeometryFacade.getFormaeBounds(this.formaeToDistribute_,!0),this.validatePostDistributeLeftAndTop()},validatePostDistributeLeftAndTop:function(){for(var e=a.iter(this.formaeToDistribute_);!e.done;e.next()){var t=e.value,o=p.GeometryFacade.getFormaeBounds([t],!0).evalXY(0,0);XCTAssertTrue(this.postDistributeBounds_.containsPoint(o))}},tearDown:function(){this.formaeToDistribute_=[],c.ActionTestBase.prototype.tearDown.call(this)}}}),n),i.ArrangeTest=(r=function(){this.actionSequence_Distribute=[function(){return new l.ArrangeFormaeAction(!0)}],this.formaeToArrange_=[],this.initialBounds_=d.TheoRect.Zero,this.postArrangeBounds_=d.TheoRect.Zero,c.ActionTestBase.call(this)},a.defineClass({name:"ArrangeTest",ctor:r,superName:"ActionTestBase",props:{setUpActionSequence:function(e,t,o){var n=p.GeometryFacade.getFormaeBounds([o.firstPage.root],!0);this.formaeToArrange_=a.clone(this.allSelectableFormae(o,(function(e){return 1==e.controller.floating&&n.contains(p.GeometryFacade.getFormaeBounds([e],!0))}))),XCTAssertNotNil(this.formaeToArrange_),this.formaeToArrange_.length>0&&(o.controller.selection.replaceSelectionWithFormae(this.formaeToArrange_),this.initialBounds_=p.GeometryFacade.getFormaeBounds(this.formaeToArrange_,!0))},validateAfterActionSequence:function(e,t){this.postArrangeBounds_=p.GeometryFacade.getFormaeBounds(this.formaeToArrange_,!0),this.validatePostArrangeRow()},validateAfterUndo:function(e,t){var o=p.GeometryFacade.getFormaeBounds(this.formaeToArrange_,!0);XCTAssertTrue(this.initialBounds_.equal(o))},validateAfterRedo:function(e,t){this.postArrangeBounds_=p.GeometryFacade.getFormaeBounds(this.formaeToArrange_,!0),this.validatePostArrangeRow()},validatePostArrangeRow:function(){var e=a.clone(this.sortInRowOrder(this.formaeToArrange_));if(e.length>0){var t=a.first(e),o=p.GeometryFacade.getFormaeBounds([t],!0).evalXY(0,0).x;XCTAssertTrue(this.postArrangeBounds_.minX==o);for(var n=a.iter(e);!n.done;n.next()){var r=n.value,i=p.GeometryFacade.getFormaeBounds([r],!0).evalXY(0,0);XCTAssertTrue(i.x>o||a.eq(u._equality_Forma_Forma,r,t))}}},sortInRowOrder:function(e){var t=a.clone(e);return a.sortInPlace(t,(function(e,t){var o=p.GeometryFacade.getFormaeBounds([e],!0),n=p.GeometryFacade.getFormaeBounds([t],!0);return o.minX<n.minX})),t},tearDown:function(){this.formaeToArrange_=[],c.ActionTestBase.prototype.tearDown.call(this)}}}),r)},WUDy:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("5D0C"),l=o("7hc0"),c=o("sq5L");r.PGMOpacityAnimation=(n=function e(t,o,n){this.startOpacity=o,this.endOpacity=n,s.PGMAnimation.call(this,e.TYPE,t)},i.defineClass({name:"PGMOpacityAnimation",ctor:n,superName:"PGMAnimation",statics:{TYPE:"pgm-anim-opacity",PROP_START:"start",PROP_END:"end",decodeAnimation:function(e,t,o){var r,a;return null!=(r=i.as(e[n.PROP_START],"Double"))&&null!=(a=i.as(e[n.PROP_END],"Double"))?new n(t,r,a):(o.error(c.PGMError.BAD_OPACITY_ANIMATION,"Missing start or end values"),null)}},props:{encode:function(){var e=s.PGMAnimation.prototype.encode.call(this);return e[n.PROP_START]=this.startOpacity,e[n.PROP_END]=this.endOpacity,e},isEqualTo:function(e){return this===e||!!(t=i.as(e,n))&&this.startOpacity==t.startOpacity&&this.endOpacity==t.endOpacity&&s.PGMAnimation.prototype.isEqualTo.call(this,e);var t},interpolate:function(e){return a.LegacyCoreAssert.isTrue(this.timeFn.domain.contains(e),"time to interpolate at is not within the domain of the time function",void 0,"PGMOpacityAnimation.interpolate","PGMOpacityAnimation.swift",76),l.PGMAnimationUtils.interp(this.startOpacity,this.endOpacity,l.PGMAnimationUtils.bound01(this.timeFn.apply(e)))}}}),n)},WjWV:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("7hc0"),l=o("smUN"),c=o("sq5L");r.PGMBlendFilterSpec=(n=function e(t){this.weights=i.clone(t),l.PGMFilterSpec.call(this,e.TYPE)},i.defineClass({name:"PGMBlendFilterSpec",ctor:n,superName:"PGMFilterSpec",statics:{TYPE:"PGMBlendFilterSpec",PROP_WEIGHTS:"weights",decodeSpec:function(e,t){var o;return(o=i.as(e[n.PROP_WEIGHTS],["Array","Double"]))?new n(o):(t.error(c.PGMError.BAD_FILTER_SPEC,"PGMBlendFilterSpec: Missing weights parameter"),null)}},props:{encode:function(){var e=l.PGMFilterSpec.prototype.encode.call(this);return e[n.PROP_WEIGHTS]=i.clone(this.weights),e},interpolate:function(e,t){if(t<=0)return this;if(t>=1)return e;var o;if(o=i.as(e,n)){if(o.weights.length==this.weights.length){for(var r=[],l=i.iter(i.range(0,this.weights.length,!1));!l.done;l.next()){var c=l.value;r.push(s.PGMAnimationUtils.interp(this.weights[c],o.weights[c],t))}return new n(r)}return a.LegacyCoreAssert.fail("can't interpolate to a blend with a different number of weights",void 0,"PGMBlendFilterSpec.interpolate","PGMBlendFilterSpec.swift",65),this}return a.LegacyCoreAssert.fail("can't interpolate to another filter spec type",void 0,"PGMBlendFilterSpec.interpolate","PGMBlendFilterSpec.swift",68),this},isEqualTo:function(e){if(e===this)return!0;var t;if(t=i.as(e,n)){if(t.weights.length!=this.weights.length)return!1;for(var o=i.iter(i.range(0,this.weights.length,!1));!o.done;o.next()){var r=o.value;if(this.weights[r]!=t.weights[r])return!1}return!0}return!1}}}),n)},X1ax:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"SolidColor":{"className":"SolidColor","type":"object","properties":{"red":{"type":"number"},"green":{"type":"number"},"blue":{"type":"number"},"alpha":{"type":"number"}},"required":["red","green","blue","alpha"]},"TheoColor":{"className":"TheoColor","type":"object","properties":{"red":{"type":"number","description":"rgbcolor.red"},"green":{"type":"number","description":"rgbcolor.green"},"blue":{"type":"number","description":"rgbcolor.blue"},"alpha":{"type":"number","description":"rgbcolor.alpha"},"sparkElementID":{"type":"string"},"sparkRoles":{"type":"array","items":{"type":"string"}}},"required":["red","green","blue","alpha"]},"ColorSwatch":{"className":"ColorSwatch","type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"numTags":{"type":"integer"}},"patternProperties":{"key-[0-9]*":{"type":"string","description":"tags_[key-N] = value-N"},"value-[0-9]*":{"type":"string","description":"tags_[key-N] = value-N"}},"required":["id","path"]},"ColorSwatchTypes":{"oneOf":[{"$ref":"#/definitions/SimpleSwatch"}]},"ColorThemeDocument":{"className":"ColorThemeDocument","type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["colortheme"]},"type":{"type":"string","enum":["application/vnd.adobe.theo.color+dcx"]},"children":{"type":"array","items":{"$ref":"#/definitions/ColorSwatchTypes"}}},"required":["id","path","type"]},"ColorLibrary":{"className":"ColorLibrary","type":"object","properties":{"palette:id":{"anyOf":[{"type":"string"},{"type":"integer"}]},"entries":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"color":{"$ref":"#/definitions/TheoColor"}}}}}},"SimpleSwatch":{"className":"SimpleSwatch","allOf":[{"$ref":"#/definitions/ColorSwatch"},{"properties":{"kind":{"type":"string","enum":["simple"]},"color":{"$ref":"#/definitions/SolidColor"}}}]},"ColorTableEntry":{"className":"ColorTableEntry","type":"object","properties":{"color-id":{"type":"string"},"color":{"$ref":"#/definitions/SolidColor"},"theme-index":{"type":"integer"}}},"ColorRole":{"type":"string","enum":["field-primary","field-secondary","border"]},"ColorTable":{"className":"ColorTable","type":"object","properties":{"entries":{"type":"array","items":{"type":"object","properties":{"role":{"$ref":"#/definitions/ColorRole"},"color-id":{"type":"string"},"color":{"$ref":"#/definitions/SolidColor"},"theme-index":{"type":"integer"}}}}}}}}')},X4qx:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"FormaAnimation":{"className":"FormaAnimation","type":"object","properties":{"kind":{"type":"string","enum":["FormaAnimation"]},"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"end-time":{"$ref":"Root.json#/definitions/TheoTime"},"key-frames":{"type":"array","items":{"$ref":"#/definitions/KeyFrame"}},"animation-style":{"$ref":"#/definitions/AnimationStyle"},"name":{"type":"string"}},"required":["start-time","end-time","key-frames"]},"KeyFrame":{"className":"KeyFrame","type":"object","properties":{"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"timing-function":{"type":"string"},"placement":{"$ref":"Root.json#/definitions/Matrix2D"},"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"}}},"AnimationStyle":{"className":"AnimationStyle","type":"object","properties":{"name":{"type":"string"},"variant":{"type":"integer"},"variant-count":{"type":"integer"},"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"end-time":{"$ref":"Root.json#/definitions/TheoTime"},"category":{"type":"string"},"looping":{"type":"boolean","default":false},"text-style":{"type":"boolean"},"image-style":{"type":"boolean"}},"required":["name","variant","variant-count"]}}}')},XMWl:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"ImageFilter":{"className":"ImageFilter","type":"object","properties":{"kind":{"type":"string"},"name":{"type":"string","default":""}}},"ImageFilterTypes":{"oneOf":[{"$ref":"#/definitions/AlphaBlendFilter"},{"$ref":"#/definitions/CompositeFilter"}]},"AlphaBlendFilter":{"className":"AlphaBlendFilter","allOf":[{"$ref":"#/definitions/ImageFilter"},{"properties":{"kind":{"enum":["AlphaBlend"]},"mix":{"type":"number"},"filter1":{"$ref":"#/definitions/ImageFilterTypes"},"filter2":{"$ref":"#/definitions/ImageFilterTypes"}},"required":["kind"]}]},"CompositeFilter":{"className":"CompositeFilter","allOf":[{"$ref":"#/definitions/ImageFilter"},{"properties":{"kind":{"enum":["CompositeFilter"]},"mix":{"type":"number","default":1},"blend":{"type":"string","default":"normal"},"grayscale":{"type":"boolean","default":false},"contrast":{"type":"number","default":1},"color-operation":{"type":"string","default":""},"saturation-offset":{"type":"number","default":0},"brightness-offset":{"type":"number","default":0},"blur-radius":{"type":"number","default":0},"reduce-contrast":{"type":"boolean","description":"If true, contrast == 0.5"}},"required":["kind"]}]}}}')},XMpm:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"ContentNode":{"className":"ContentNode","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"tags":{"type":"object","patternProperties":{"^.*$":{"type":"string"}}}},"required":["id","path"]}]},"NonRootContentNodeTypes":{"oneOf":[{"$ref":"#/definitions/GroupContentNode"},{"$ref":"#/definitions/ImageContentNode"},{"$ref":"#/definitions/TextContentNode"},{"$ref":"#/definitions/VectorContentNode"},{"$ref":"#/definitions/VideoContentNode"}]},"GroupContentNodeBase":{"allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"children":{"type":"array","items":{"$ref":"#/definitions/NonRootContentNodeTypes"}}}}]},"GroupContentNode":{"className":"GroupContentNode","allOf":[{"$ref":"#/definitions/GroupContentNodeBase"},{"properties":{"kind":{"enum":["group"]}},"required":["kind"]}]},"RootContentNode":{"className":"RootContentNode","allOf":[{"$ref":"#/definitions/GroupContentNodeBase"},{"properties":{"kind":{"enum":["root"]}},"required":["kind"]}]},"ImageColorData":{"className":"ImageColorData","type":"object","properties":{"red":{"type":"number"},"green":{"type":"number"},"blue":{"type":"number"},"alpha":{"type":"number"},"coverage":{"type":"number"}}},"ImageContentNode":{"className":"ImageContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["image"]},"pixel-width":{"type":"integer"},"pixel-height":{"type":"integer"},"image-has_alpha":{"type":"boolean"},"image-color-data":{"type":"array","items":{"$ref":"#/definitions/ImageColorData"}}},"required":["kind"]}]},"TextContentNode":{"className":"TextContentNode","allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"kind":{"enum":["text"]},"text-model":{"$ref":"Text.json#/definitions/TextModel"}},"required":["kind"]}]},"MediaMetadata":{"className":"MediaMetadata","type":"object","properties":{"search":{"type":"string"},"type":{"type":"string"},"source_name":{"type":"string"},"source_url":{"type":"string"},"owner":{"type":"string"},"asset_id":{"type":"string"},"creator_user_id":{"type":"string"},"creator_display_name":{"type":"string"},"design_intent":{"type":"string"},"source":{"type":"string"},"photo_name":{"type":"string"},"tags":{"type":"string"}}},"URLBasedContentNode":{"className":"URLBasedContentNode","allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"data-url":{"type":"string"},"mimetype":{"type":"string"},"element-id":{"type":"string"},"roles":{"type":"array","items":{"type":"string"}},"components":{"type":"array","items":{"type":"object","properties":{"url":{"type":"string"},"id":{"type":"string"},"length":{"type":"integer"},"name":{"type":"string"},"path":{"type":"string"},"mimeType":{"type":"string"},"etag":{"type":"string"}}},"maxItems":1},"media-metadata":{"$ref":"#/definitions/MediaMetadata"}}}]},"VectorContentNode":{"className":"VectorContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["vector"]},"size":{"$ref":"Root.json#/definitions/TheoSize"}},"required":["kind"]}]},"VideoContentNode":{"className":"VideoContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["video"]},"width":{"type":"integer"},"height":{"type":"integer"},"duration":{"$ref":"Root.json#/definitions/TheoTime"},"time-samples":{"type":"array","items":{"$ref":"Root.json#/definitions/TheoTime"}}},"required":["kind"]}]}}}')},XeBu:function(e,t,o){var n=t,r=o("oAGj");n.HostTimer=r.defineProtocol("HostTimer",{cancel:"() -> Void"}),n.HostAsyncUtilsProtocol=r.defineProtocol("HostAsyncUtilsProtocol",{startTimer:"(Double, () -> Void) -> HostTimer",postOnMainThread:"(Double, () -> Void) -> Void",postOnWorkerThread:"(String, () -> Void) -> Void",getSystemUptimeInSeconds:"() -> Double",newLock:"() -> HostLockProtocol"}),n.HostLockProtocol=r.defineProtocol("HostLockProtocol",{runInLock:"(() -> Void) -> Void"})},Xjoe:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"SolidColor":{"className":"SolidColor","type":"object","properties":{"red":{"type":"number"},"green":{"type":"number"},"blue":{"type":"number"},"alpha":{"type":"number"}},"required":["red","green","blue","alpha"]},"TheoColor":{"className":"TheoColor","type":"object","properties":{"red":{"type":"number","description":"rgbcolor.red"},"green":{"type":"number","description":"rgbcolor.green"},"blue":{"type":"number","description":"rgbcolor.blue"},"alpha":{"type":"number","description":"rgbcolor.alpha"},"sparkElementID":{"type":"string"},"sparkRoles":{"type":"array","items":{"type":"string"}}},"required":["red","green","blue","alpha"]},"ColorSwatch":{"className":"ColorSwatch","type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"numTags":{"type":"integer"}},"patternProperties":{"key-[0-9]*":{"type":"string","description":"tags_[key-N] = value-N"},"value-[0-9]*":{"type":"string","description":"tags_[key-N] = value-N"}},"required":["id","path"]},"ColorSwatchTypes":{"oneOf":[{"$ref":"#/definitions/SimpleSwatch"}]},"ColorThemeDocument":{"className":"ColorThemeDocument","type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["colortheme"]},"type":{"type":"string","enum":["application/vnd.adobe.theo.color+dcx"]},"children":{"type":"array","items":{"$ref":"#/definitions/ColorSwatchTypes"}}},"required":["id","path","type"]},"PaletteID":{"anyOf":[{"type":"string"},{"type":"integer"}]},"ColorLibrary":{"className":"ColorLibrary","type":"object","properties":{"palette:id":{"$ref":"#/definitions/PaletteID"},"entries":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"color":{"$ref":"#/definitions/TheoColor"}}}}}},"SimpleSwatch":{"className":"SimpleSwatch","allOf":[{"$ref":"#/definitions/ColorSwatch"},{"properties":{"kind":{"type":"string","enum":["simple"]},"color":{"$ref":"#/definitions/SolidColor"}}}]},"ColorTableEntry":{"className":"ColorTableEntry","type":"object","properties":{"color-id":{"type":"string"},"color":{"$ref":"#/definitions/SolidColor"},"theme-index":{"type":"integer"}}},"ColorRole":{"type":"string","enum":["field-primary","field-secondary","border"]},"ColorTable":{"className":"ColorTable","type":"object","properties":{"entries":{"type":"array","items":{"type":"object","properties":{"role":{"$ref":"#/definitions/ColorRole"},"color-id":{"type":"string"},"color":{"$ref":"#/definitions/SolidColor"},"theme-index":{"type":"integer"}}}}}}}}')},YFY8:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("rKjb"),l=o("sq5L");r.PGMGraphEncoder=(n=function(){},i.defineClass({name:"PGMGraphEncoder",ctor:n,statics:{kotlin_workaround:null,encode:function(e){var t={};if(!e.canBeEncoded)return a.LegacyCoreAssert.fail("graph cannot be encoded because it failed entity validation",void 0,"PGMGraphEncoder.encode","PGMGraphEncoder.swift",25),t;var o={},n={},r={};return function e(t){var a,l;if(o[t.entity]=t.encode(),a=i.as(t,s.PGMComposite))for(var c=i.iter(a.children);!c.done;c.next()){var u=c.value;null==o[u.child.entity]&&e(u.child)}if(l=t.getTextStylesReferenced())for(var p=i.iter(l);!p.done;p.next()){var d=p.value;null==r[d.font.postScriptName]&&(r[d.font.postScriptName]=d.font.encode()),null==n[d.key]&&(n[d.key]=d.encode())}}(e.root),t[l.PGMGraph.PROP_VERSION]=l.PGMGraph.CURRENT_VERSION,t[l.PGMGraph.PROP_ROOT_ENTITY]=e.root.entity,t[l.PGMGraph.PROP_ENTITIES]=o,t[l.PGMGraph.PROP_TEXT_STYLES]=n,t[l.PGMGraph.PROP_FONTS]=r,t[l.PGMGraph.PROP_DURATION]=e.duration,t[l.PGMGraph.PROP_BOUNDS]=e.bounds.encodeJson(),t[l.PGMGraph.PROP_RESOURCES]=e.resources.encode(),t}}}),n)},YX5m:function(e,t,o){var n,r,i,a,s=t,l=o("oAGj"),c=o("c9Jm"),u=o("yGNn"),p=o("quOg"),d=o("FNB+"),h=o("x6FH"),f=o("9Lk3"),m=o("x35w");s.CreatePaddedCollageTest=(n=function(){this.actionSequence_CreatePaddedCollage=[function(){return new h.CreatePaddedCollageAction}],c.ActionTestBase.call(this)},l.defineClass({name:"CreatePaddedCollageTest",ctor:n,superName:"ActionTestBase",props:{validateAfterActionSequence:function(e,t){},validateAfterUndo:function(e,t){},validateAfterRedo:function(e,t){}}}),n),s.SetGridParametersTest=(r=function e(){this.actionSequence_SetGridParameters=[function(){return new h.EnterGridLayoutModeAction},function(){return new h.SetGridParametersAction(e.spacing_,e.margin_)}],this.gridForma_=null,this.oldMargin_=0,this.oldSpacing_=0,c.ActionTestBase.call(this)},l.defineClass({name:"SetGridParametersTest",ctor:r,superName:"ActionTestBase",statics:{margin_:10,spacing_:5},props:{canRunActionSequence:function(e,t,o){return this.gridForma_=l.first(o.firstPage.root.filterByControllerKind(f.GridController.KIND)),null!=this.gridForma_},setUpActionSequence:function(e,t,o){var n;(n=l.as(l.opt(this.gridForma_,(function(e){return e.controller})),f.GridController))&&(this.oldMargin_=n.margin,this.oldSpacing_=n.spacing)},validateAfterActionSequence:function(e,t){var o;(o=l.as(l.opt(this.gridForma_,(function(e){return e.controller})),f.GridController))&&(XCTAssertEqual(o.margin,r.margin_),XCTAssertEqual(o.spacing,r.spacing_))},validateAfterUndo:function(e,t){var o;(o=l.as(l.opt(this.gridForma_,(function(e){return e.controller})),f.GridController))&&(XCTAssertEqual(o.margin,this.oldMargin_),XCTAssertEqual(o.spacing,this.oldSpacing_))},validateAfterRedo:function(e,t){var o;(o=l.as(l.opt(this.gridForma_,(function(e){return e.controller})),f.GridController))&&(XCTAssertEqual(o.margin,r.margin_),XCTAssertEqual(o.spacing,r.spacing_))}}}),r),s.SetGridStyleTest=(i=function(){this.actionSequence_SetGridStyle=[function(){return new h.EnterGridLayoutModeAction}],this.actionSequence_SetGridStyleMovableShift=[function(){return new h.EnterGridLayoutModeAction}],this.gridForma_=null,this.gridLayouts_=null,this.oldGridStyle_=null,this.newGridStyle_=null,c.ActionTestBase.call(this)},l.defineClass({name:"SetGridStyleTest",ctor:i,superName:"ActionTestBase",props:{tearDown:function(){this.gridLayouts_=null,this.oldGridStyle_=null,this.newGridStyle_=null,c.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){var n;if(this.gridForma_=l.first(o.firstPage.root.filterByControllerKind(f.GridController.KIND)),n=l.as(l.opt(this.gridForma_,(function(e){return e.controller})),f.GridController)){var r=n.numCells;this.gridLayouts_=l.clone(o.gridLibrary.getGridsByCellNumber(r,!0))}return null!=this.gridForma_&&null!=this.gridLayouts_&&this.gridLayouts_.length>0},populateActionSequence:function(e,t,o){var n=this;return this.newGridStyle_=l.last(this.gridLayouts_),u.CorePromise.resolve(e.concat([function(){return new h.SetGridStyleAction(n.newGridStyle_,0)}]))},setUpActionSequence:function(e,t,o){var n,r,i="actionSequence_SetGridStyleMovableShift"==t;l.opt(this.newGridStyle_,(function(e){return e.moveableShift=i})),l.opt(this.oldGridStyle_,(function(e){return e.moveableShift=i})),(n=o.controller)&&(n.interactionMode=p.InteractionMode.AutomaticGrid),(r=l.as(l.opt(this.gridForma_,(function(e){return e.controller})),f.GridController))&&(this.oldGridStyle_=r.gridStyle)},validateAfterActionSequence:function(e,t){var o;(o=l.as(l.opt(this.gridForma_,(function(e){return e.controller})),f.GridController))&&XCTAssertEqual(l.opt(o.gridStyle,(function(e){return e.asString})),l.opt(this.newGridStyle_,(function(e){return e.asString})))},validateAfterUndo:function(e,t){var o;(o=l.as(l.opt(this.gridForma_,(function(e){return e.controller})),f.GridController))&&XCTAssertEqual(l.opt(o.gridStyle,(function(e){return e.asString})),l.opt(this.oldGridStyle_,(function(e){return e.asString})))},validateAfterRedo:function(e,t){var o;(o=l.as(l.opt(this.gridForma_,(function(e){return e.controller})),f.GridController))&&XCTAssertEqual(l.opt(o.gridStyle,(function(e){return e.asString})),l.opt(this.newGridStyle_,(function(e){return e.asString})))}}}),i),s.SwapGridFormaTest=(a=function(){this.actionSequence_SwapGridForma=[function(){return new h.EnterGridLayoutModeAction}],this.gridForma_=null,this.childA_=null,this.childB_=null,this.oldChildACell_=-1,this.oldChildBCell_=-1,c.ActionTestBase.call(this)},l.defineClass({name:"SwapGridFormaTest",ctor:a,superName:"ActionTestBase",statics:{margin_:10,spacing_:5},props:{canRunActionSequence:function(e,t,o){var n,r=this;return this.gridForma_=l.first(o.firstPage.root.filterByControllerKind(f.GridController.KIND)),(n=l.as(l.opt(this.gridForma_,(function(e){return e.controller})),f.GridController))&&l.opt(this.gridForma_,(function(e){return e.visit(d.FormaTraversal.PreOrder,(function(e,t,o){if(m.GridFacade.isChildSwappable(e))if(null==r.childA_)l.opt(n.gridStyle,(function(t){return null!=t.cellForForma(e)}))&&(r.childA_=e);else{var i,a=l.opt(n.gridStyle,(function(e){return e.cellForForma(r.childA_)}));null!=(i=l.opt(n.gridStyle,(function(t){return t.cellForForma(e)})))&&l.opt(a,(function(e){return e[0]!=i[0]}))&&(r.childB_=e)}return null!=r.childA_&&null!=r.childB_}))})),null!=this.gridForma_&&null!=this.childA_&&null!=this.childB_},populateActionSequence:function(e,t,o){var n=this;return u.CorePromise.resolve(e.concat([function(){return new h.SwapGridFormaAction(n.childA_,n.childB_)}]))},setUpActionSequence:function(e,t,o){var n,r;(n=l.as(l.opt(this.gridForma_,(function(e){return e.controller})),f.GridController))&&(r=n.gridStyle)&&(this.oldChildACell_=r.cellForForma(this.childA_)[0],this.oldChildBCell_=r.cellForForma(this.childB_)[0])},validateAfterActionSequence:function(e,t){var o,n;(o=l.as(l.opt(this.gridForma_,(function(e){return e.controller})),f.GridController))&&(n=o.gridStyle)&&(XCTAssertEqual(n.cellForForma(this.childA_)[0],this.oldChildBCell_),XCTAssertEqual(n.cellForForma(this.childB_)[0],this.oldChildACell_))},validateAfterUndo:function(e,t){var o,n;(o=l.as(l.opt(this.gridForma_,(function(e){return e.controller})),f.GridController))&&(n=o.gridStyle)&&(XCTAssertEqual(n.cellForForma(this.childA_)[0],this.oldChildACell_),XCTAssertEqual(n.cellForForma(this.childB_)[0],this.oldChildBCell_))},validateAfterRedo:function(e,t){var o,n;(o=l.as(l.opt(this.gridForma_,(function(e){return e.controller})),f.GridController))&&(n=o.gridStyle)&&(XCTAssertEqual(n.cellForForma(this.childA_)[0],this.oldChildBCell_),XCTAssertEqual(n.cellForForma(this.childB_)[0],this.oldChildACell_))}}}),a)},Yspk:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("gXiO"),l=o("RkYL");i.TheoTimeRange=(n=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var o=e||l.TheoTime.Zero;this.start=o,this.end=t||o,s.CoreObject.call(this)},r={},a.defineClass({name:"TheoTimeRange",ctor:n,superName:"CoreObject",statics:{Empty:{get:function(){return void 0===r.Empty&&(r.Empty=new n),r.Empty}},makeFromSeconds:function(e,t){return new n(l.TheoTime.fromSecondsAsMs(e),l.TheoTime.fromSecondsAsMs(t))},makeFromStartSeconds:function(e){return new n(l.TheoTime.fromSecondsAsMs(e))},makeFromStartAndDuration:function(e,t){return new n(e,e.add(t))},makeFromStartAndDurationSeconds:function(e,t){return n.makeFromSeconds(e,e+t)},makeFromDuration:function(e){return new n(l.TheoTime.Zero,e)},makeFromDurationSeconds:function(e){return n.makeFromDuration(l.TheoTime.fromSecondsAsMs(e))}},props:{isValid:{get:function(){return this.end.laterThan(this.start)||this.isEmpty}},isEmpty:{get:function(){return this.start.secondsEqual(this.end)}},isZero:{get:function(){return this.start.isZero&&this.end.isZero}},duration:{get:function(){return this.end.unsafeSubtract(this.start)}},durationInSeconds:{get:function(){return this.duration.seconds}},equals:function(e){return this.start.secondsEqual(e.start)&&this.end.secondsEqual(e.end)},containsTime:function(e){return e.laterThanOrEqual(this.start)&&e.earlierThanOrEqual(this.end)},overlaps:function(e){return this.containsTime(e.start)||this.containsTime(e.end)||e.containsTime(this.start)||e.containsTime(this.end)},contains:function(e){return this.intersect(e).equals(e)},intersect:function(e){return new n(l.TheoTime.later(this.start,e.start),l.TheoTime.earlier(this.end,e.end))},union:function(e){return new n(l.TheoTime.earlier(this.start,e.start),l.TheoTime.later(this.end,e.end))},offset:function(e){return new n(this.start.addSeconds(e),this.end.addSeconds(e))},padBy:function(e,t){void 0===t&&(t=null);var o,r=new n(this.start.addSeconds(-e),this.end.addSeconds(e));return(o=t)?r.intersect(o):r}}}),n)},"Z/1r":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"FontDescriptor":{"className":"FontDescriptor","type":"object","properties":{"postscript-name":{"type":"string"}},"required":["postscript-name"]},"TheoFont":{"className":"TheoFont","type":"object","properties":{"postscript-name":{"type":"string"},"sparkElementID":{"type":"string"},"sparkRoles":{"type":"array","items":{"type":"string"}}},"required":["postscript-name"]},"TextRange":{"type":"array","items":{"type":"integer"},"maxItems":2,"minItems":2},"TextAttribute":{"className":"TextAttribute","type":"object","properties":{"start":{"type":"integer"},"length":{"type":"integer"},"value":{"type":["string","object","number","integer"]}},"required":["start","length","value"]},"TextAttributeTypes":{"oneOf":[{"$ref":"#/definitions/UTF16Attribute"},{"$ref":"#/definitions/FontDescriptorAttribute"},{"$ref":"#/definitions/FontSizeAttribute"},{"$ref":"#/definitions/FontColorAttribute"},{"$ref":"#/definitions/FontStrokeColorAttribute"},{"$ref":"#/definitions/FontStrokeWidthAttribute"},{"$ref":"#/definitions/TextLookAttribute"},{"$ref":"#/definitions/TrackingAttribute"}]},"UTF16Attribute":{"className":"UTF16Attribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"string"}}}]},"FontDescriptorAttribute":{"className":"FontDescriptorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"#/definitions/FontDescriptor"}}}]},"FontSizeAttribute":{"className":"FontSizeAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"number"}}}]},"FontColorAttribute":{"className":"FontColorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"Color.json#/definitions/SolidColor"}}}]},"FontStrokeColorAttribute":{"className":"FontStrokeColorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"Color.json#/definitions/SolidColor"}}}]},"FontStrokeWidthAttribute":{"className":"FontStrokeWidthAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"number"}}}]},"TextLookAttribute":{"className":"TextLookAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"integer"}}}]},"TrackingAttribute":{"className":"TrackingAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"number"}}}]},"TextModel":{"className":"TextModel","type":"object","properties":{"text":{"type":"array","items":{"$ref":"#/definitions/UTF16Attribute"},"maxItems":1},"font-name":{"type":"array","items":{"$ref":"#/definitions/FontDescriptorAttribute"},"maxItems":1},"font-size":{"type":"array","items":{"$ref":"#/definitions/FontSizeAttribute"},"maxItems":1},"font-color":{"type":"array","items":{"$ref":"#/definitions/FontColorAttribute"},"maxItems":1},"font-strokecolor":{"type":"array","items":{"$ref":"#/definitions/FontStrokeColorAttribute"},"maxItems":1},"font-strokewidth":{"type":"array","items":{"$ref":"#/definitions/FontStrokeWidthAttribute"},"maxItems":1},"text-look":{"type":"array","items":{"$ref":"#/definitions/TextLookAttribute"},"maxItems":1},"tracking":{"type":"array","items":{"$ref":"#/definitions/TrackingAttribute"},"maxItems":1}}},"ContentTextModel":{"className":"ContentTextModel","type":"object","properties":{"text":{"type":"array","items":{"$ref":"#/definitions/UTF16Attribute"},"maxItems":1}}}}}')},ZA1K:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("tlHl");r.PGMSVG=(n=function e(t,o,n,r,i){a.PGMMedia.call(this,e.TYPE,t,o,n,r,i)},i.defineClass({name:"PGMSVG",ctor:n,superName:"PGMMedia",statics:{TYPE:"pgm-svg"},props:{withEntity:function(e){return new n(e,this.meta,this.animations,this.bounds,this.contentID)}}}),n)},ZTPx:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("smUN"),l=o("sq5L"),c=o("Zifs");r.PGMColorTransformFilterSpec=(n=function e(t,o,n,r,i){this.rdot=t,this.gdot=o,this.bdot=n,this.adot=r,this.bias=i||c.SolidColor.ZERO,s.PGMFilterSpec.call(this,e.TYPE)},i.defineClass({name:"PGMColorTransformFilterSpec",ctor:n,superName:"PGMFilterSpec",statics:{TYPE:"PGMColorTransformFilterSpec",PROP_RDOT:"rdot",PROP_GDOT:"gdot",PROP_BDOT:"bdot",PROP_ADOT:"adot",PROP_BIAS:"bias",createLuminosityTransform:function(){var e=new c.SolidColor(.2125,.7154,.0721,0);return new n(e,e,e,e,null)},createColorizeTransform:function(e,t){return void 0===t&&(t=null),new n(new c.SolidColor(e.red,0,0,0),new c.SolidColor(0,e.green,0,0),new c.SolidColor(0,0,e.blue,0),new c.SolidColor(0,0,0,e.alpha),t)},createOpacityTransform:function(e){return n.createColorizeTransform(new c.SolidColor(1,1,1,e),c.SolidColor.ZERO)},createContrastTransform:function(e){var t=.5*(1-e),o=new c.SolidColor(e,e,e,1),r=new c.SolidColor(t,t,t,0);return n.createColorizeTransform(o,r)},decodeSpec:function(e,t){var o,r,a,s,u;return(o=c.SolidColor.decodeJson(i.as(e[n.PROP_RDOT],"AnyObject")))&&(r=c.SolidColor.decodeJson(i.as(e[n.PROP_GDOT],"AnyObject")))&&(a=c.SolidColor.decodeJson(i.as(e[n.PROP_BDOT],"AnyObject")))&&(s=c.SolidColor.decodeJson(i.as(e[n.PROP_ADOT],"AnyObject")))&&(u=c.SolidColor.decodeJson(i.as(e[n.PROP_BIAS],"AnyObject")))?new n(o,r,a,s,u):(t.error(l.PGMError.BAD_FILTER_SPEC,"PGMColorTransformFilterSpec: missing parameter(s)"),null)}},props:{encode:function(){var e=s.PGMFilterSpec.prototype.encode.call(this);return e[n.PROP_RDOT]=this.rdot.encodeJson(),e[n.PROP_GDOT]=this.gdot.encodeJson(),e[n.PROP_BDOT]=this.bdot.encodeJson(),e[n.PROP_ADOT]=this.adot.encodeJson(),e[n.PROP_BIAS]=this.bias.encodeJson(),e},isEqualTo:function(e){return e===this||!!(t=i.as(e,n))&&i.eq(c._equality_SolidColor_SolidColor,t.rdot,this.rdot)&&i.eq(c._equality_SolidColor_SolidColor,t.gdot,this.gdot)&&i.eq(c._equality_SolidColor_SolidColor,t.bdot,this.bdot)&&i.eq(c._equality_SolidColor_SolidColor,t.adot,this.adot)&&i.eq(c._equality_SolidColor_SolidColor,t.bias,this.bias);var t},interpolate:function(e,t){return t<=0?this:t>=1?e:(o=i.as(e,n))?new n(this.rdot.interpolate(o.rdot,t),this.gdot.interpolate(o.gdot,t),this.bdot.interpolate(o.bdot,t),this.adot.interpolate(o.adot,t),this.bias.interpolate(o.bias,t)):(a.LegacyCoreAssert.fail("can't interpolate to a different function spec type",void 0,"PGMColorTransformFilterSpec.interpolate","PGMColorTransformFilterSpec.swift",154),this);var o}}}),n)},Zifs:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("gXiO"),l=o("m404"),c=o("dNmX"),u=o("fNpk"),p=o("3DEm"),d=o("b1vF");i.SolidColor=(n=function(e,t,o,n){u.LegacyCoreAssert.isTrue(e>=-.01&&e<=1.01,"red out of range",void 0,"SolidColor.init","SolidColor.swift",36),u.LegacyCoreAssert.isTrue(t>=-.01&&t<=1.01,"green out of range",void 0,"SolidColor.init","SolidColor.swift",37),u.LegacyCoreAssert.isTrue(o>=-.01&&o<=1.01,"blue out of range",void 0,"SolidColor.init","SolidColor.swift",38),u.LegacyCoreAssert.isTrue(n>=0&&n<=1,"alpha out of range",void 0,"SolidColor.init","SolidColor.swift",39),this.red=e,this.green=t,this.blue=o,this.alpha=n,s.CoreObject.call(this)},r={},a.defineClass({name:"SolidColor",ctor:n,superName:"CoreObject",statics:{ZERO:{get:function(){return void 0===r.ZERO&&(r.ZERO=new n(0,0,0,0)),r.ZERO}},BLACK:{get:function(){return void 0===r.BLACK&&(r.BLACK=new n(0,0,0,1)),r.BLACK}},WHITE:{get:function(){return void 0===r.WHITE&&(r.WHITE=new n(1,1,1,1)),r.WHITE}},fromAlphaOverride:function(e,t){return new n(e.red,e.green,e.blue,t)},fromHex:function(e,t){var o=16777215&e;return new n(a.toDouble(o>>16&255)/255,a.toDouble(o>>8&255)/255,a.toDouble(255&o)/255,t)},decodeJson:function(e){if(null==e)return null;var t=a.as(e,["Dictionary","String","Any"]);if(null==t)return u.LegacyCoreAssert.fail("SolidColor.decodeJson: object passed isn't a dictionary",void 0,"SolidColor.decodeJson","SolidColor.swift",318),null;var o=a.as(t.red,"Double"),r=a.as(t.green,"Double"),i=a.as(t.blue,"Double"),s=a.as(t.alpha,"Double");return null==o||null==r||null==i||null==s?(u.LegacyCoreAssert.fail("SolidColor.decodeJson: object passed is missing one or more red/green/blue/alpha parameters",void 0,"SolidColor.decodeJson","SolidColor.swift",328),null):new n(o,r,i,s)}},props:{blend:function(e,t){return new n(e.red*t+this.red*(1-t),e.green*t+this.green*(1-t),e.blue*t+this.blue*(1-t),this.alpha)},interpolate:function(e,t){return new n(e.red*t+this.red*(1-t),e.green*t+this.green*(1-t),e.blue*t+this.blue*(1-t),e.alpha*t+this.alpha*(1-t))},withAlphaOf:function(e){return e==this.alpha?this:new n(this.red,this.green,this.blue,e)},darkenForTint:function(){var e=this.asLAB;return new c.LABColor(Math.max(5,e.l-25),e.a,e.b,this.alpha).asRGB},lightenForTint:function(){var e=this.asLAB;return new c.LABColor(Math.min(95,e.l+25),e.a,e.b,this.alpha).asRGB},distanceTo:function(e){return this.asLAB.distanceTo(e.asLAB)},rgbDistanceTo:function(e){return p.MathUtils.absDouble(this.red-e.red)+p.MathUtils.absDouble(this.green-e.green)+p.MathUtils.absDouble(this.blue-e.blue)},asLAB:{get:function(){return null==this.lab_&&(this.lab_=c.LABColor.fromRGB(this),null==this.lab_&&(u.LegacyCoreAssert.fail("LABColor.fromRGB returns nil",void 0,"SolidColor","SolidColor.swift",136),this.lab_=c.LABColor.fromRGB(n.BLACK))),this.lab_}},lightness:{get:function(){return this.asLAB.l}},contrasts:function(e,t){void 0===t&&(t=!0);var o=this.lightness;this.alpha<1&&(o=e.blend(this,this.alpha).lightness);var n=40;return t||(n=o<50?20:10),p.MathUtils.absDouble(o-e.lightness)>n},lightnessDifference:function(e){var t=this.lightness;return this.alpha<1&&(t=e.blend(this,this.alpha).lightness),p.MathUtils.absDouble(t-e.lightness)},perceptualDifference:function(e){var t=this;return this.alpha<1&&(t=e.blend(this,this.alpha)),t.distanceTo(e)},contrastWithColor:function(e){var t=e.lightness,o=t<60?95:t-40,n=this.asLAB;return new c.LABColor(o,n.a,n.b,this.alpha).asRGB},contrastWithSelf:function(){var e=this.lightness<55?100:this.lightness-50,t=this.asLAB;return new c.LABColor(e,t.a,t.b,this.alpha).asRGB},isGrayscale:function(){return Math.max(this.red,this.green,this.blue)-Math.min(this.red,this.green,this.blue)<12/255},asHSB:{get:function(){return null==this.hsb_&&(this.hsb_=l.HSBColor.fromRGB(this)),this.hsb_}},asXYZ:{get:function(){return d.XYZColor.fromRGB(this)}},asArrayPremultipliedAlpha:{get:function(){return[this.red*this.alpha,this.green*this.alpha,this.blue*this.alpha,this.alpha]}},asArray:{get:function(){return[this.red,this.green,this.blue,this.alpha]}},isEqual:function(e){var t;return!!(t=a.as(e,n))&&(p.MathUtils.absDouble(t.red-this.red)<1e-4&&p.MathUtils.absDouble(t.green-this.green)<1e-4&&p.MathUtils.absDouble(t.blue-this.blue)<1e-4&&p.MathUtils.absDouble(t.alpha-this.alpha)<1e-4)},hash:{get:function(){return null==this.hash_&&(this.hash_=a.toInt(255*this.red+.5)+a.toInt(255*this.green+.5)<<8+a.toInt(255*this.blue+.5)<<16+a.toInt(255*this.alpha+.5)<<24),this.hash_}},encode:function(){return u.LegacyCoreAssert.fail("SolidColor: Use encodeJson(), not encode()",void 0,"SolidColor.encode","SolidColor.swift",293),[]},encodeJson:function(e){void 0===e&&(e=!1);var t={};function o(e){return Math.round(1e3*e)/1e3}return t.red=e?o(this.red):this.red,t.green=e?o(this.green):this.green,t.blue=e?o(this.blue):this.blue,t.alpha=e?o(this.alpha):this.alpha,t},print:function(){return a.toString("r: %.3f g %.3f b %.3f a: %.3f",255*this.red,255*this.green,255*this.blue,255*this.alpha)},asString:{get:function(){return this.print()}},hex:{get:function(){return a.toString("%02X%02X%02X%02X",a.toInt(255*this.red),a.toInt(255*this.green),a.toInt(255*this.blue),a.toInt(255*this.alpha))}},rgbHex:{get:function(){return a.toString("%02X%02X%02X",a.toInt(255*this.red),a.toInt(255*this.green),a.toInt(255*this.blue))}},rgbAsInt:{get:function(){return a.toInt(255*this.red)<<16|a.toInt(255*this.green)<<8|a.toInt(255*this.blue)}},rgbString:{get:function(){return a.toString("%03d%03d%03d",a.toInt(255*this.red),a.toInt(255*this.green),a.toInt(255*this.blue))}}}}),n),i._equality_SolidColor_SolidColor=function(e,t){return e.isEqual(t)}},ZoS2:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("gXiO"),s=o("MO6F");r.TheoPublishingObject=(n=function(){this.publishing_=new s.TheoBasePublishing,a.CoreObject.call(this),this.publishing_.owner=this},i.defineClass({name:"TheoPublishingObject",ctor:n,superName:"CoreObject",statics:{_implements:function(e){return"TheoMessagePublisher"==e}},props:{subscribeWithCallback:function(e,t){return this.publishing_.subscribeWithCallback(e,t)},subscribe:function(e,t){return this.publishing_.subscribe(e,t)},unsubscribe:function(e){return this.publishing_.unsubscribe(e)},publish:function(e){return this.publishing_.publish(e)}}}),n)},ZpoQ:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"TheoPath":{"className":"TheoPath","type":"object","properties":{"type":{"type":"string","enum":["empty","rect","ellipse","arbitrary"]}}},"TheoPathTypes":{"oneOf":[{"$ref":"#/definitions/TheoEmptyPath"},{"$ref":"#/definitions/TheoRectanglePath"},{"$ref":"#/definitions/TheoEllipsePath"},{"$ref":"#/definitions/TheoArbitraryPath"}]},"TheoEmptyPath":{"className":"TheoEmptyPath","allOf":[{"$ref":"#/definitions/TheoPath"},{"className":"TheoEmptyPath","properties":{"type":{"enum":["empty"]}}}]},"TheoRectanglePath":{"className":"TheoRectanglePath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["rect"]},"coords":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoEllipsePath":{"className":"TheoEllipsePath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["ellipse"]},"coords":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoArbitraryPath":{"className":"TheoArbitraryPath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["arbitrary"]},"fillRule":{"type":"string","enum":["none","nonzero","evenodd"]},"endType":{"type":"string","enum":["butt","round","square"]},"joinType":{"type":"string","enum":["miter","round","bevel"]},"strokeWeight":{"type":"number"},"miterLimit":{"type":"number"},"ops":{"type":"array","items":{"oneOf":[{"type":"string"},{"type":"number"}]}}}}]},"TheoArtworkNode":{"className":"TheoArtworkNode","type":"object","properties":{"type":{"type":"string"}},"required":["type"]},"TheoArtworkNodeTypes":{"oneOf":[{"$ref":"#/definitions/TheoArtworkShape"},{"$ref":"#/definitions/TheoArtworkClipGroup"},{"$ref":"#/definitions/TheoArtworkGroup"}]},"TheoArtworkShape":{"className":"TheoArtworkShape","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["shape"]},"path":{"$ref":"#/definitions/TheoPathTypes"},"paths":{"type":"array","items":{"$ref":"#/definitions/TheoPathTypes"}},"fill-color-role":{"$ref":"Color.json#/definitions/ColorRole"},"stroke-color-role":{"$ref":"Color.json#/definitions/ColorRole"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"stroke-color":{"$ref":"Color.json#/definitions/SolidColor"},"stroke-width":{"type":"number","default":0},"override-bounds":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoArtworkGroup":{"className":"TheoArtworkGroup","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["group"]},"stroke-width":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"},"description":"The constant in code is defined as PROPERTY_NODES but its value is \\"stroke-width\\""},"nodes":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"}}}}]},"TheoArtworkClipGroup":{"className":"TheoArtworkClipGroup","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["clip-group"]},"path":{"$ref":"#/definitions/TheoPathTypes"},"stroke-width":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"},"description":"The constant in code is defined as PROPERTY_NODES but its value is \\"stroke-width\\""},"nodes":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"}}}}]}}}')},Ztps:function(e,t,o){var n,r,i,a=t,s=o("oAGj"),l=o("Tq01"),c=o("4mEG"),u=o("c9Jm"),p=o("Aj/e"),d=o("yGNn"),h=o("9Lk3"),f=o("c+uM"),m=o("j89o"),g=o("T8w7"),y=o("uxH+"),T=o("cRpU");a.OpacityTest=(n=function(){this.actionSequence_SetOpacity=[function(){return new m.SetOpacityAction(.55)}],this.formaeToChangeOpacity_=[],this.initialOpacities_=[],u.ActionTestBase.call(this)},s.defineClass({name:"OpacityTest",ctor:n,superName:"ActionTestBase",props:{tearDown:function(){this.formaeToChangeOpacity_=[],u.ActionTestBase.prototype.tearDown.call(this)},setUpActionSequence:function(e,t,o){var n;this.formaeToChangeOpacity_=s.clone(this.allSelectableFormae(o,(function(e){return!(!(n=s.opt(e.controller,(function(e){return e.opacityChangeable})))&&null==n)&&n}))),this.initialOpacities_=this.formaeToChangeOpacity_.map((function(e){return g.OpacityFacade.getOpacityForForma(e)}),this),o.controller.selection.replaceSelectionWithFormae(this.formaeToChangeOpacity_)},validateAfterActionSequence:function(e,t){for(var o=s.iter(this.formaeToChangeOpacity_);!o.done;o.next()){var n=o.value,r=g.OpacityFacade.getOpacityForForma(n);XCTAssertEqual(r,.55)}},validateAfterUndo:function(e,t){for(var o=s.iter(s.range(0,this.formaeToChangeOpacity_.length,!1));!o.done;o.next()){var n=o.value,r=this.formaeToChangeOpacity_[n],i=g.OpacityFacade.getOpacityForForma(r),a=this.initialOpacities_[n];XCTAssertEqual(i,a)}},validateAfterRedo:function(e,t){for(var o=s.iter(this.formaeToChangeOpacity_);!o.done;o.next()){var n=o.value,r=g.OpacityFacade.getOpacityForForma(n);XCTAssertEqual(r,.55)}}}}),n),a.ShapeOpacityTest=(r=function(){this.actionSequence_ShapeOpacityTest=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.oldTextOpacity_=-1,this.oldShapetOpacity_=-1,u.ActionTestBase.call(this)},s.defineClass({name:"ShapeOpacityTest",ctor:r,superName:"ActionTestBase",statics:{testText_:"Shape Opacity"},props:{prepareDocument:function(e,t){var o=this,n=[];return n.push((function(){return new c.AddTextContentAction(r.testText_)})),n.push((function(){return o.textForma_=s.first(s.opt(s.as(o.getActionResult(0),l.FormaActionResult),(function(e){return e.formae}))),new p.ChangeBackgroundShapeAction([o.textForma_],f.LockupBacking.Rows,"rows",!1)})),n.push((function(){return s.opt(s.opt(o.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(o.textForma_)})),new T.SetTextLookAction(f.LockupTextLook.Fill)})),d.CorePromise.resolve(n)},populateActionSequence:function(e,t,o){var n=this;return d.CorePromise.resolve(e.concat([function(){return n.oldTextOpacity_=s.opt(n.textForma_,(function(e){return e.style})).textOpacity,n.oldShapetOpacity_=s.opt(n.textForma_,(function(e){return e.style})).backingOpacity,new m.SetShapeOpacityAction(.49,[n.textForma_])}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=s.opt(this.textForma_,(function(e){return e.style})).textOpacity,n=s.opt(this.textForma_,(function(e){return e.style})).backingOpacity;XCTAssertEqual(o,this.oldTextOpacity_),XCTAssertEqual(n,.49)},validateAfterUndo:function(e,t){var o=s.opt(this.textForma_,(function(e){return e.style})).textOpacity,n=s.opt(this.textForma_,(function(e){return e.style})).backingOpacity;XCTAssertEqual(o,this.oldTextOpacity_),XCTAssertEqual(n,this.oldShapetOpacity_)},validateAfterRedo:function(e,t){var o=s.opt(this.textForma_,(function(e){return e.style})).textOpacity,n=s.opt(this.textForma_,(function(e){return e.style})).backingOpacity;XCTAssertEqual(o,this.oldTextOpacity_),XCTAssertEqual(n,.49)}}}),r),a.BackgroundOpacityTest=(i=function(){this.testDoc_=null,this.rootForma_=null,this.actionSequence_SetBackgroundOpacity=[],u.ActionTestBase.call(this)},s.defineClass({name:"BackgroundOpacityTest",ctor:i,superName:"ActionTestBase",props:{canRunActionSequence:function(e,t,o){var n;return this.rootForma_=o.firstPage.root,this.testDoc_=o,!!(n=s.as(s.opt(this.rootForma_,(function(e){return e.controller})),y.RootController))&&n.suggestTransparentBackground()},populateActionSequence:function(e,t,o){return d.CorePromise.resolve([function(){return new m.SetBackgroundOpacityAction(0,o.firstPage)}])},setUpActionSequence:function(e,t,o){var n;if(n=s.as(s.opt(this.rootForma_,(function(e){return e.controller})),y.RootController)){XCTAssertTrue(n.suggestTransparentBackground());var r=g.OpacityFacade.getBackgroundOpacity(o.firstPage);XCTAssertTrue(1==r);for(var i=s.iter(this.rootForma_.filterWithCallback((function(e){return h.GridController.isBackgroundColoredCell(e)})));!i.done;i.next()){var a=i.value;XCTAssertTrue(1==a.style.opacity)}}else XCTFail("no root controller?")},validateAfterActionSequence:function(e,t){var o;if(o=s.as(s.opt(this.rootForma_,(function(e){return e.controller})),y.RootController)){XCTAssertTrue(o.suggestTransparentBackground());var n=g.OpacityFacade.getBackgroundOpacity(this.testDoc_.firstPage);XCTAssertTrue(0==n);for(var r=s.iter(this.rootForma_.filterWithCallback((function(e){return h.GridController.isBackgroundColoredCell(e)})));!r.done;r.next()){var i=r.value;XCTAssertTrue(0==i.style.opacity)}}else XCTFail("no root controller?")},validateAfterUndo:function(e,t){var o;if(o=s.as(s.opt(this.rootForma_,(function(e){return e.controller})),y.RootController)){XCTAssertTrue(o.suggestTransparentBackground());var n=g.OpacityFacade.getBackgroundOpacity(this.testDoc_.firstPage);XCTAssertTrue(1==n);for(var r=s.iter(this.rootForma_.filterWithCallback((function(e){return h.GridController.isBackgroundColoredCell(e)})));!r.done;r.next()){var i=r.value;XCTAssertTrue(1==i.style.opacity)}}else XCTFail("no root controller?")},validateAfterRedo:function(e,t){var o;if(o=s.as(s.opt(this.rootForma_,(function(e){return e.controller})),y.RootController)){XCTAssertTrue(o.suggestTransparentBackground());var n=g.OpacityFacade.getBackgroundOpacity(this.testDoc_.firstPage);XCTAssertTrue(0==n);for(var r=s.iter(this.rootForma_.filterWithCallback((function(e){return h.GridController.isBackgroundColoredCell(e)})));!r.done;r.next()){var i=r.value;XCTAssertTrue(0==i.style.opacity)}}else XCTFail("no root controller?")}}}),i)},"a+l3":function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("Tq01"),l=o("4mEG"),c=o("c9Jm"),u=o("Aj/e"),p=o("70fJ"),d=o("yGNn"),h=o("ascj"),f=o("R0Y+"),m=o("c+uM"),g=o("j89o"),y=o("Zifs"),T=o("cRpU"),A=o("umUn"),C=o("8t9B");i.SetTextColorPrimaryTest=(n=function(){this.actionSequence_SetTextColorPrimary=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRole_=h.ColorRole.FieldPrimary,this.oldColor_=null,this.newColor_=null,c.ActionTestBase.call(this)},r={},a.defineClass({name:"SetTextColorPrimaryTest",ctor:n,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===r.yellow_&&(r.yellow_=new y.SolidColor(239/255,130/255,13/255,1)),r.yellow_}}},props:{prepareDocument:function(e,t){var o=this,r=[];return r.push((function(){return new l.AddTextContentAction(n.testText_,void 0,!0)})),r.push((function(){return o.textForma_=a.first(a.opt(a.as(o.getActionResult(0),s.FormaActionResult),(function(e){return e.formae}))),new u.ChangeBackgroundShapeAction([o.textForma_],m.LockupBacking.Rows,"rows",!1)})),r.push((function(){return a.opt(a.opt(o.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(o.textForma_)})),new T.SetTextLookAction(m.LockupTextLook.Fill)})),d.CorePromise.resolve(r)},populateActionSequence:function(e,t,o){var r=this;return d.CorePromise.resolve(e.concat([function(){a.opt(a.opt(r.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(r.textForma_)})),r.oldColor_=a.opt(r.textForma_,(function(e){return e.style.colors.theoColor(r.testRole_)})),r.newColor_=A.TheoColor.init_5344(n.yellow_);var e=new f.TheoColorWithRole(r.testRole_,r.newColor_);return new p.ApplyColorWithRoleAction([r.textForma_],[e],!1)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this,n=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.newColor_.rgbColor)},validateAfterUndo:function(e,t){var o=this,n=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.oldColor_.rgbColor)},validateAfterRedo:function(e,t){var o=this,n=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.newColor_.rgbColor)}}}),n),i.SetTextColorSecondaryTest=function(){var e=function(){this.actionSequence_SetTextColorSecondary=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRole_=h.ColorRole.FieldSecondary,this.oldColor_=null,this.newColor_=null,c.ActionTestBase.call(this)},t={};return a.defineClass({name:"SetTextColorSecondaryTest",ctor:e,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===t.yellow_&&(t.yellow_=new y.SolidColor(239/255,130/255,13/255,1)),t.yellow_}}},props:{prepareDocument:function(t,o){var n=this,r=[];return r.push((function(){return new l.AddTextContentAction(e.testText_,void 0,!0)})),r.push((function(){return n.textForma_=a.first(a.opt(a.as(n.getActionResult(0),s.FormaActionResult),(function(e){return e.formae}))),new u.ChangeBackgroundShapeAction([n.textForma_],m.LockupBacking.Rows,"rows",!1)})),r.push((function(){return a.opt(a.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma_)})),new T.SetTextLookAction(m.LockupTextLook.Fill)})),r.push((function(){return new g.SetOpacityAction(1,[n.textForma_])})),d.CorePromise.resolve(r)},populateActionSequence:function(t,o,n){var r=this;return d.CorePromise.resolve(t.concat([function(){r.oldColor_=a.opt(r.textForma_,(function(e){return e.style.colors.theoColor(r.testRole_)})),r.newColor_=A.TheoColor.init_5344(e.yellow_);var t=new f.TheoColorWithRole(r.testRole_,r.newColor_);return new p.ApplyColorWithRoleAction([r.textForma_],[t],!1)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this,n=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.newColor_.rgbColor)},validateAfterUndo:function(e,t){var o=this,n=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.oldColor_.rgbColor)},validateAfterRedo:function(e,t){var o=this,n=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.newColor_.rgbColor)}}}),e}(),i.SetTextColorBorderTest=function(){var e=function(){this.actionSequence_SetTextColorBorder=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRole_=h.ColorRole.Border,this.oldColor_=null,this.newColor_=null,c.ActionTestBase.call(this)},t={};return a.defineClass({name:"SetTextColorBorderTest",ctor:e,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===t.yellow_&&(t.yellow_=new y.SolidColor(239/255,130/255,13/255,1)),t.yellow_}}},props:{prepareDocument:function(t,o){var n=this,r=[];return r.push((function(){return new l.AddTextContentAction(e.testText_,void 0,!0)})),r.push((function(){return n.textForma_=a.first(a.opt(a.as(n.getActionResult(0),s.FormaActionResult),(function(e){return e.formae}))),new u.ChangeBackgroundShapeAction([n.textForma_],m.LockupBacking.Rows,"rows",!1)})),r.push((function(){return a.opt(a.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma_)})),new T.SetTextLookAction(m.LockupTextLook.OutlineOnly)})),d.CorePromise.resolve(r)},populateActionSequence:function(t,o,n){var r=this;return d.CorePromise.resolve(t.concat([function(){r.oldColor_=a.opt(r.textForma_,(function(e){return e.style.colors.theoColor(r.testRole_)})),r.newColor_=A.TheoColor.init_5344(e.yellow_);var t=new f.TheoColorWithRole(r.testRole_,r.newColor_);return new p.ApplyColorWithRoleAction([r.textForma_],[t],!1)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this,n=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.newColor_.rgbColor)},validateAfterUndo:function(e,t){var o=this,n=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.oldColor_.rgbColor)},validateAfterRedo:function(e,t){var o=this,n=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.newColor_.rgbColor)}}}),e}(),i.SetTextColorShadowTest=function(){var e=function(){this.actionSequence_SetTextColorShadow=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRole_=h.ColorRole.Shadow,this.oldColor_=null,this.newColor_=null,c.ActionTestBase.call(this)},t={};return a.defineClass({name:"SetTextColorShadowTest",ctor:e,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===t.yellow_&&(t.yellow_=new y.SolidColor(239/255,130/255,13/255,1)),t.yellow_}}},props:{prepareDocument:function(t,o){var n=this,r=[];return r.push((function(){return new l.AddTextContentAction(e.testText_,void 0,!0)})),r.push((function(){return n.textForma_=a.first(a.opt(a.as(n.getActionResult(0),s.FormaActionResult),(function(e){return e.formae}))),new u.ChangeBackgroundShapeAction([n.textForma_],m.LockupBacking.Rows,"rows",!1)})),r.push((function(){return a.opt(a.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma_)})),new T.SetTextLookAction(m.LockupTextLook.Shadow)})),d.CorePromise.resolve(r)},populateActionSequence:function(t,o,n){var r=this;return d.CorePromise.resolve(t.concat([function(){a.opt(a.opt(r.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(r.textForma_)})),r.oldColor_=a.opt(r.textForma_,(function(e){return e.style.colors.theoColor(r.testRole_)})),r.newColor_=A.TheoColor.init_5344(e.yellow_);var t=new f.TheoColorWithRole(r.testRole_,r.newColor_);return new p.ApplyColorWithRoleAction([r.textForma_],[t],!1)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this,n=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.newColor_.rgbColor)},validateAfterUndo:function(e,t){var o=this,n=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.oldColor_.rgbColor)},validateAfterRedo:function(e,t){var o=this,n=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.newColor_.rgbColor)}}}),e}(),i.SetTextColorBorderAndShadowTest=function(){var e=function(){this.actionSequence_SetTextColorBorderAndShadow=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRoleBorder_=h.ColorRole.Border,this.testRoleShadow_=h.ColorRole.Shadow,this.oldBorderColor_=null,this.newBorderColor_=null,this.oldShadowColor_=null,this.newShadowColor_=null,c.ActionTestBase.call(this)},t={};return a.defineClass({name:"SetTextColorBorderAndShadowTest",ctor:e,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===t.yellow_&&(t.yellow_=new y.SolidColor(239/255,130/255,13/255,1)),t.yellow_}},white_:{get:function(){return void 0===t.white_&&(t.white_=new y.SolidColor(1,1,1,1)),t.white_}}},props:{prepareDocument:function(t,o){var n=this,r=[];return r.push((function(){return new l.AddTextContentAction(e.testText_,void 0,!0)})),r.push((function(){return n.textForma_=a.first(a.opt(a.as(n.getActionResult(0),s.FormaActionResult),(function(e){return e.formae}))),new u.ChangeBackgroundShapeAction([n.textForma_],m.LockupBacking.Rows,"rows",!1)})),r.push((function(){return a.opt(a.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma_)})),new T.SetTextLookAction(m.LockupTextLook.ShadowAndOutline)})),d.CorePromise.resolve(r)},populateActionSequence:function(t,o,n){var r=this;return d.CorePromise.resolve(t.concat([function(){r.oldBorderColor_=a.opt(r.textForma_,(function(e){return e.style.colors.theoColor(r.testRoleBorder_)})),r.newBorderColor_=A.TheoColor.init_5344(e.white_),r.oldShadowColor_=a.opt(r.textForma_,(function(e){return e.style.colors.theoColor(r.testRoleShadow_)})),r.newShadowColor_=A.TheoColor.init_5344(e.yellow_);var t=new f.TheoColorWithRole(r.testRoleBorder_,r.newBorderColor_),o=new f.TheoColorWithRole(r.testRoleShadow_,r.newShadowColor_);return new p.ApplyColorWithRoleAction([r.textForma_],[t,o],!1)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this,n=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(o.testRoleBorder_)})),r=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(o.testRoleShadow_)}));XCTAssertEqual(n.rgbColor,this.newBorderColor_.rgbColor),XCTAssertEqual(r.rgbColor,this.newShadowColor_.rgbColor)},validateAfterUndo:function(e,t){var o=this,n=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(o.testRoleBorder_)})),r=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(o.testRoleShadow_)}));XCTAssertEqual(n.rgbColor,this.oldBorderColor_.rgbColor),XCTAssertEqual(r.rgbColor,this.oldShadowColor_.rgbColor)},validateAfterRedo:function(e,t){var o=this,n=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(o.testRoleBorder_)})),r=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(o.testRoleShadow_)}));XCTAssertEqual(n.rgbColor,this.newBorderColor_.rgbColor),XCTAssertEqual(r.rgbColor,this.newShadowColor_.rgbColor)}}}),e}(),i.SetTextColorAllFourTest=function(){var e=function(){this.actionSequence_SetTextColorAllFourTest=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.oldPrimaryColor_=null,this.newPrimaryColor_=null,this.oldSecondaryColor_=null,this.newSecondaryColor_=null,this.oldBorderColor_=null,this.newBorderColor_=null,this.oldShadowColor_=null,this.newShadowColor_=null,c.ActionTestBase.call(this)},t={};return a.defineClass({name:"SetTextColorAllFourTest",ctor:e,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===t.yellow_&&(t.yellow_=new y.SolidColor(239/255,130/255,13/255,1)),t.yellow_}},white_:{get:function(){return void 0===t.white_&&(t.white_=new y.SolidColor(1,1,1,1)),t.white_}},red_:{get:function(){return void 0===t.red_&&(t.red_=new y.SolidColor(1,0,0,1)),t.red_}},black_:{get:function(){return void 0===t.black_&&(t.black_=new y.SolidColor(0,0,0,1)),t.black_}}},props:{prepareDocument:function(t,o){var n=this,r=[];return r.push((function(){return new l.AddTextContentAction(e.testText_,void 0,!0)})),r.push((function(){return n.textForma_=a.first(a.opt(a.as(n.getActionResult(0),s.FormaActionResult),(function(e){return e.formae}))),new u.ChangeBackgroundShapeAction([n.textForma_],m.LockupBacking.Rows,"rows",!1)})),r.push((function(){return a.opt(a.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma_)})),new T.SetTextLookAction(m.LockupTextLook.ShadowAndOutline)})),d.CorePromise.resolve(r)},populateActionSequence:function(t,o,n){var r=this;return d.CorePromise.resolve(t.concat([function(){r.oldPrimaryColor_=a.opt(r.textForma_,(function(e){return e.style.colors.theoColor(h.ColorRole.FieldPrimary)})),r.newPrimaryColor_=A.TheoColor.init_5344(e.yellow_),r.oldSecondaryColor_=a.opt(r.textForma_,(function(e){return e.style.colors.theoColor(h.ColorRole.FieldSecondary)})),r.newSecondaryColor_=A.TheoColor.init_5344(e.red_),r.oldBorderColor_=a.opt(r.textForma_,(function(e){return e.style.colors.theoColor(h.ColorRole.Border)})),r.newBorderColor_=A.TheoColor.init_5344(e.black_),r.oldShadowColor_=a.opt(r.textForma_,(function(e){return e.style.colors.theoColor(h.ColorRole.Shadow)})),r.newShadowColor_=A.TheoColor.init_5344(e.white_);var t=new f.TheoColorWithRole(h.ColorRole.FieldPrimary,r.newPrimaryColor_),o=new f.TheoColorWithRole(h.ColorRole.FieldSecondary,r.newSecondaryColor_),n=new f.TheoColorWithRole(h.ColorRole.Border,r.newBorderColor_),i=new f.TheoColorWithRole(h.ColorRole.Shadow,r.newShadowColor_);return new p.ApplyColorWithRoleAction([r.textForma_],[t,o,n,i],!1)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(h.ColorRole.FieldPrimary)})),n=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(h.ColorRole.FieldSecondary)})),r=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(h.ColorRole.Border)})),i=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(h.ColorRole.Shadow)}));XCTAssertEqual(o.rgbColor,this.newPrimaryColor_.rgbColor),XCTAssertEqual(n.rgbColor,this.newSecondaryColor_.rgbColor),XCTAssertEqual(r.rgbColor,this.newBorderColor_.rgbColor),XCTAssertEqual(i.rgbColor,this.newShadowColor_.rgbColor)},validateAfterUndo:function(e,t){var o=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(h.ColorRole.FieldPrimary)})),n=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(h.ColorRole.FieldSecondary)})),r=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(h.ColorRole.Border)})),i=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(h.ColorRole.Shadow)}));XCTAssertEqual(o.rgbColor,this.oldPrimaryColor_.rgbColor),XCTAssertEqual(n.rgbColor,this.oldSecondaryColor_.rgbColor),XCTAssertEqual(r.rgbColor,this.oldBorderColor_.rgbColor),XCTAssertEqual(i.rgbColor,this.oldShadowColor_.rgbColor)},validateAfterRedo:function(e,t){var o=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(h.ColorRole.FieldPrimary)})),n=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(h.ColorRole.FieldSecondary)})),r=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(h.ColorRole.Border)})),i=a.opt(a.opt(this.textForma_,(function(e){return e.style})),(function(e){return e.colors.theoColor(h.ColorRole.Shadow)}));XCTAssertEqual(o.rgbColor,this.newPrimaryColor_.rgbColor),XCTAssertEqual(n.rgbColor,this.newSecondaryColor_.rgbColor),XCTAssertEqual(r.rgbColor,this.newBorderColor_.rgbColor),XCTAssertEqual(i.rgbColor,this.newShadowColor_.rgbColor)}}}),e}(),i.SetCharStyleColorPrimaryTest=function(){var e=function(){this.actionSequence_SetCharStyleColorPrimary=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRole_=h.ColorRole.FieldPrimary,this.oldColor_=null,this.newColor_=null,c.ActionTestBase.call(this)},t={};return a.defineClass({name:"SetCharStyleColorPrimaryTest",ctor:e,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===t.yellow_&&(t.yellow_=new y.SolidColor(239/255,130/255,13/255,1)),t.yellow_}}},props:{prepareDocument:function(t,o){var n=this,r=[];return r.push((function(){return new l.AddTextContentAction(e.testText_,void 0,!0)})),r.push((function(){return n.textForma_=a.first(a.opt(a.as(n.getActionResult(0),s.FormaActionResult),(function(e){return e.formae}))),new u.ChangeBackgroundShapeAction([n.textForma_],m.LockupBacking.Rows,"rows",!1)})),r.push((function(){return a.opt(a.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma_)})),new T.SetTextLookAction(m.LockupTextLook.Fill)})),d.CorePromise.resolve(r)},populateActionSequence:function(t,o,n){var r=this;return d.CorePromise.resolve(t.concat([function(){return r.oldColor_=a.opt(a.as(a.opt(r.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(r.testRole_)})),r.newColor_=A.TheoColor.init_5344(e.yellow_),new T.EnterCharStyleModeAction(r.textForma_)},function(){var e=new f.TheoColorWithRole(r.testRole_,r.newColor_);return new p.ApplyColorWithRoleAction([r.textForma_],[e],!0)},function(){return new T.ExitCharStyleModeAction(r.textForma_)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this,n=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.characterStyles[C.TypeLockupController.HIGHLIGHT_STYLE]})),r=a.opt(n,(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.newColor_.rgbColor)},validateAfterUndo:function(e,t){var o=this,n=a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.oldColor_.rgbColor)},validateAfterRedo:function(e,t){var o=this,n=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.characterStyles[C.TypeLockupController.HIGHLIGHT_STYLE]})),r=a.opt(n,(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.newColor_.rgbColor)}}}),e}(),i.SetCharStyleColorSecondaryTest=function(){var e=function(){this.actionSequence_SetCharStyleColorSecondary=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRole_=h.ColorRole.FieldSecondary,this.oldColor_=null,this.newColor_=null,c.ActionTestBase.call(this)},t={};return a.defineClass({name:"SetCharStyleColorSecondaryTest",ctor:e,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===t.yellow_&&(t.yellow_=new y.SolidColor(239/255,130/255,13/255,1)),t.yellow_}}},props:{prepareDocument:function(t,o){var n=this,r=[];return r.push((function(){return new l.AddTextContentAction(e.testText_,void 0,!0)})),r.push((function(){return n.textForma_=a.first(a.opt(a.as(n.getActionResult(0),s.FormaActionResult),(function(e){return e.formae}))),new u.ChangeBackgroundShapeAction([n.textForma_],m.LockupBacking.Rows,"rows",!1)})),r.push((function(){return a.opt(a.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma_)})),new T.SetTextLookAction(m.LockupTextLook.Fill)})),r.push((function(){return new g.SetOpacityAction(1,[n.textForma_])})),d.CorePromise.resolve(r)},populateActionSequence:function(t,o,n){var r=this;return d.CorePromise.resolve(t.concat([function(){return r.oldColor_=a.opt(a.as(a.opt(r.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(r.testRole_)})),r.newColor_=A.TheoColor.init_5344(e.yellow_),new T.EnterCharStyleModeAction(r.textForma_)},function(){return new u.ChangeBackgroundShapeAction([r.textForma_],m.LockupBacking.Rows,"rows",!1)},function(){return new g.SetOpacityAction(1,[r.textForma_])},function(){var e=new f.TheoColorWithRole(r.testRole_,r.newColor_);return new p.ApplyColorWithRoleAction([r.textForma_],[e],!0)},function(){return new T.ExitCharStyleModeAction(r.textForma_)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this,n=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.characterStyles[C.TypeLockupController.HIGHLIGHT_STYLE]})),r=a.opt(n,(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.newColor_.rgbColor)},validateAfterUndo:function(e,t){var o=this,n=a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.oldColor_.rgbColor)},validateAfterRedo:function(e,t){var o=this,n=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.characterStyles[C.TypeLockupController.HIGHLIGHT_STYLE]})),r=a.opt(n,(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.newColor_.rgbColor)}}}),e}(),i.SetCharStyleColorBorderTest=function(){var e=function(){this.actionSequence_SetCharStyleColorBorder=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRole_=h.ColorRole.Border,this.oldColor_=null,this.newColor_=null,c.ActionTestBase.call(this)},t={};return a.defineClass({name:"SetCharStyleColorBorderTest",ctor:e,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===t.yellow_&&(t.yellow_=new y.SolidColor(239/255,130/255,13/255,1)),t.yellow_}}},props:{prepareDocument:function(t,o){var n=this,r=[];return r.push((function(){return new l.AddTextContentAction(e.testText_,void 0,!0)})),r.push((function(){return n.textForma_=a.first(a.opt(a.as(n.getActionResult(0),s.FormaActionResult),(function(e){return e.formae}))),new u.ChangeBackgroundShapeAction([n.textForma_],m.LockupBacking.Rows,"rows",!1)})),r.push((function(){return a.opt(a.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma_)})),new T.SetTextLookAction(m.LockupTextLook.OutlineOnly)})),d.CorePromise.resolve(r)},populateActionSequence:function(t,o,n){var r=this;return d.CorePromise.resolve(t.concat([function(){return r.oldColor_=a.opt(a.as(a.opt(r.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(r.testRole_)})),r.newColor_=A.TheoColor.init_5344(e.yellow_),new T.EnterCharStyleModeAction(r.textForma_)},function(){var e=new f.TheoColorWithRole(r.testRole_,r.newColor_);return new p.ApplyColorWithRoleAction([r.textForma_],[e],!0)},function(){return new T.ExitCharStyleModeAction(r.textForma_)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this,n=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.characterStyles[C.TypeLockupController.HIGHLIGHT_STYLE]})),r=a.opt(n,(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.newColor_.rgbColor)},validateAfterUndo:function(e,t){var o=this,n=a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.oldColor_.rgbColor)},validateAfterRedo:function(e,t){var o=this,n=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.characterStyles[C.TypeLockupController.HIGHLIGHT_STYLE]})),r=a.opt(n,(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.newColor_.rgbColor)}}}),e}(),i.SetCharStyleColorShadowTest=function(){var e=function(){this.actionSequence_SetCharStyleColorShadow=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRole_=h.ColorRole.Shadow,this.oldColor_=null,this.newColor_=null,c.ActionTestBase.call(this)},t={};return a.defineClass({name:"SetCharStyleColorShadowTest",ctor:e,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===t.yellow_&&(t.yellow_=new y.SolidColor(239/255,130/255,13/255,1)),t.yellow_}}},props:{prepareDocument:function(t,o){var n=this,r=[];return r.push((function(){return new l.AddTextContentAction(e.testText_,void 0,!0)})),r.push((function(){return n.textForma_=a.first(a.opt(a.as(n.getActionResult(0),s.FormaActionResult),(function(e){return e.formae}))),new u.ChangeBackgroundShapeAction([n.textForma_],m.LockupBacking.Rows,"rows",!1)})),r.push((function(){return a.opt(a.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma_)})),new T.SetTextLookAction(m.LockupTextLook.Shadow)})),d.CorePromise.resolve(r)},populateActionSequence:function(t,o,n){var r=this;return d.CorePromise.resolve(t.concat([function(){return r.oldColor_=a.opt(a.as(a.opt(r.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(r.testRole_)})),r.newColor_=A.TheoColor.init_5344(e.yellow_),new T.EnterCharStyleModeAction(r.textForma_)},function(){var e=new f.TheoColorWithRole(r.testRole_,r.newColor_);return new p.ApplyColorWithRoleAction([r.textForma_],[e],!0)},function(){return new T.ExitCharStyleModeAction(r.textForma_)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this,n=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.characterStyles[C.TypeLockupController.HIGHLIGHT_STYLE]})),r=a.opt(n,(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.newColor_.rgbColor)},validateAfterUndo:function(e,t){var o=this,n=a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.oldColor_.rgbColor)},validateAfterRedo:function(e,t){var o=this,n=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.characterStyles[C.TypeLockupController.HIGHLIGHT_STYLE]})),r=a.opt(n,(function(e){return e.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.newColor_.rgbColor)}}}),e}(),i.SetCharStyleColorBorderAndShadowTest=function(){var e=function(){this.actionSequence_SetCharStyleColorBorderAndShadow=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRoleBorder_=h.ColorRole.Border,this.testRoleShadow_=h.ColorRole.Shadow,this.oldBorderColor_=null,this.newBorderColor_=null,this.oldShadowColor_=null,this.newShadowColor_=null,c.ActionTestBase.call(this)},t={};return a.defineClass({name:"SetCharStyleColorBorderAndShadowTest",ctor:e,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===t.yellow_&&(t.yellow_=new y.SolidColor(239/255,130/255,13/255,1)),t.yellow_}},white_:{get:function(){return void 0===t.white_&&(t.white_=new y.SolidColor(1,1,1,1)),t.white_}}},props:{prepareDocument:function(t,o){var n=this,r=[];return r.push((function(){return new l.AddTextContentAction(e.testText_,void 0,!0)})),r.push((function(){return n.textForma_=a.first(a.opt(a.as(n.getActionResult(0),s.FormaActionResult),(function(e){return e.formae}))),new u.ChangeBackgroundShapeAction([n.textForma_],m.LockupBacking.Rows,"rows",!1)})),r.push((function(){return a.opt(a.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma_)})),new T.SetTextLookAction(m.LockupTextLook.ShadowAndOutline)})),d.CorePromise.resolve(r)},populateActionSequence:function(t,o,n){var r=this;return d.CorePromise.resolve(t.concat([function(){return r.oldBorderColor_=a.opt(a.as(a.opt(r.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(r.testRoleBorder_)})),r.newBorderColor_=A.TheoColor.init_5344(e.white_),r.oldShadowColor_=a.opt(a.as(a.opt(r.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(r.testRoleShadow_)})),r.newShadowColor_=A.TheoColor.init_5344(e.yellow_),new T.EnterCharStyleModeAction(r.textForma_)},function(){var e=new f.TheoColorWithRole(r.testRoleBorder_,r.newBorderColor_),t=new f.TheoColorWithRole(r.testRoleShadow_,r.newShadowColor_);return new p.ApplyColorWithRoleAction([r.textForma_],[e,t],!0)},function(){return new T.ExitCharStyleModeAction(r.textForma_)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this,n=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.characterStyles[C.TypeLockupController.HIGHLIGHT_STYLE]})),r=a.opt(n,(function(e){return e.colors.theoColor(o.testRoleBorder_)})),i=a.opt(n,(function(e){return e.colors.theoColor(o.testRoleShadow_)}));XCTAssertEqual(r.rgbColor,this.newBorderColor_.rgbColor),XCTAssertEqual(i.rgbColor,this.newShadowColor_.rgbColor)},validateAfterUndo:function(e,t){var o=this,n=a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(o.testRoleBorder_)})),r=a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(o.testRoleShadow_)}));XCTAssertEqual(n.rgbColor,this.oldBorderColor_.rgbColor),XCTAssertEqual(r.rgbColor,this.oldShadowColor_.rgbColor)},validateAfterRedo:function(e,t){var o=this,n=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.characterStyles[C.TypeLockupController.HIGHLIGHT_STYLE]})),r=a.opt(n,(function(e){return e.colors.theoColor(o.testRoleBorder_)})),i=a.opt(n,(function(e){return e.colors.theoColor(o.testRoleShadow_)}));XCTAssertEqual(r.rgbColor,this.newBorderColor_.rgbColor),XCTAssertEqual(i.rgbColor,this.newShadowColor_.rgbColor)}}}),e}(),i.SetCharStyleColorAllFourTest=function(){var e=function(){this.actionSequence_SetCharStyleColorAllFourTest=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.oldPrimaryColor_=null,this.newPrimaryColor_=null,this.oldSecondaryColor_=null,this.newSecondaryColor_=null,this.oldBorderColor_=null,this.newBorderColor_=null,this.oldShadowColor_=null,this.newShadowColor_=null,c.ActionTestBase.call(this)},t={};return a.defineClass({name:"SetCharStyleColorAllFourTest",ctor:e,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===t.yellow_&&(t.yellow_=new y.SolidColor(239/255,130/255,13/255,1)),t.yellow_}},white_:{get:function(){return void 0===t.white_&&(t.white_=new y.SolidColor(1,1,1,1)),t.white_}},red_:{get:function(){return void 0===t.red_&&(t.red_=new y.SolidColor(1,0,0,1)),t.red_}},black_:{get:function(){return void 0===t.black_&&(t.black_=new y.SolidColor(0,0,0,1)),t.black_}}},props:{prepareDocument:function(t,o){var n=this,r=[];return r.push((function(){return new l.AddTextContentAction(e.testText_,void 0,!0)})),r.push((function(){return n.textForma_=a.first(a.opt(a.as(n.getActionResult(0),s.FormaActionResult),(function(e){return e.formae}))),new u.ChangeBackgroundShapeAction([n.textForma_],m.LockupBacking.Rows,"rows",!1)})),r.push((function(){return a.opt(a.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma_)})),new T.SetTextLookAction(m.LockupTextLook.ShadowAndOutline)})),d.CorePromise.resolve(r)},populateActionSequence:function(t,o,n){var r=this;return d.CorePromise.resolve(t.concat([function(){return r.oldPrimaryColor_=a.opt(a.as(a.opt(r.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(h.ColorRole.FieldPrimary)})),r.newPrimaryColor_=A.TheoColor.init_5344(e.yellow_),r.oldSecondaryColor_=a.opt(a.as(a.opt(r.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(h.ColorRole.FieldSecondary)})),r.newSecondaryColor_=A.TheoColor.init_5344(e.red_),r.oldBorderColor_=a.opt(a.as(a.opt(r.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(h.ColorRole.Border)})),r.newBorderColor_=A.TheoColor.init_5344(e.black_),r.oldShadowColor_=a.opt(a.as(a.opt(r.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(h.ColorRole.Shadow)})),r.newShadowColor_=A.TheoColor.init_5344(e.white_),new T.EnterCharStyleModeAction(r.textForma_)},function(){return new u.ChangeBackgroundShapeAction([r.textForma_],m.LockupBacking.Rows,"rows",!1)},function(){return new g.SetOpacityAction(1,[r.textForma_])},function(){var e=new f.TheoColorWithRole(h.ColorRole.FieldPrimary,r.newPrimaryColor_),t=new f.TheoColorWithRole(h.ColorRole.FieldSecondary,r.newSecondaryColor_),o=new f.TheoColorWithRole(h.ColorRole.Border,r.newBorderColor_),n=new f.TheoColorWithRole(h.ColorRole.Shadow,r.newShadowColor_);return new p.ApplyColorWithRoleAction([r.textForma_],[e,t,o,n],!0)},function(){return new T.ExitCharStyleModeAction(r.textForma_)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.characterStyles[C.TypeLockupController.HIGHLIGHT_STYLE]})),n=a.opt(o,(function(e){return e.colors.theoColor(h.ColorRole.FieldPrimary)})),r=a.opt(o,(function(e){return e.colors.theoColor(h.ColorRole.FieldSecondary)})),i=a.opt(o,(function(e){return e.colors.theoColor(h.ColorRole.Border)})),s=a.opt(o,(function(e){return e.colors.theoColor(h.ColorRole.Shadow)}));XCTAssertEqual(n.rgbColor,this.newPrimaryColor_.rgbColor),XCTAssertEqual(r.rgbColor,this.newSecondaryColor_.rgbColor),XCTAssertEqual(i.rgbColor,this.newBorderColor_.rgbColor),XCTAssertEqual(s.rgbColor,this.newShadowColor_.rgbColor)},validateAfterUndo:function(e,t){var o=a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(h.ColorRole.FieldPrimary)})),n=a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(h.ColorRole.FieldSecondary)})),r=a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(h.ColorRole.Border)})),i=a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.styleController.targetedLockupStyle.colors.theoColor(h.ColorRole.Shadow)}));XCTAssertEqual(o.rgbColor,this.oldPrimaryColor_.rgbColor),XCTAssertEqual(n.rgbColor,this.oldSecondaryColor_.rgbColor),XCTAssertEqual(r.rgbColor,this.oldBorderColor_.rgbColor),XCTAssertEqual(i.rgbColor,this.oldShadowColor_.rgbColor)},validateAfterRedo:function(e,t){var o=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.characterStyles[C.TypeLockupController.HIGHLIGHT_STYLE]})),n=a.opt(o,(function(e){return e.colors.theoColor(h.ColorRole.FieldPrimary)})),r=a.opt(o,(function(e){return e.colors.theoColor(h.ColorRole.FieldSecondary)})),i=a.opt(o,(function(e){return e.colors.theoColor(h.ColorRole.Border)})),s=a.opt(o,(function(e){return e.colors.theoColor(h.ColorRole.Shadow)}));XCTAssertEqual(n.rgbColor,this.newPrimaryColor_.rgbColor),XCTAssertEqual(r.rgbColor,this.newSecondaryColor_.rgbColor),XCTAssertEqual(i.rgbColor,this.newBorderColor_.rgbColor),XCTAssertEqual(s.rgbColor,this.newShadowColor_.rgbColor)}}}),e}()},"a/9s":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("jLWG"),l=o("V93b"),c=o("hgLm");r.PGMMimicClipNode=(n=function(e,t,o,n){var r;(r=i.as(t.child,s.PGMClip))?this._paths=i.clone(r.clipPaths):(a.LegacyCoreAssert.fail("wrong pgm node type",void 0,"PGMMimicClipNode.init","PGMMimicClipNode.swift",23),this._paths=[]),l.PGMMimicGroupNode.call(this,e,t,o,n)},i.defineClass({name:"PGMMimicClipNode",ctor:n,superName:"PGMMimicGroupNode",statics:{PROP_PATHS:"paths"},props:{importProperties:function(){var e;this.startPropertyMutation(),(e=i.as(this.ref.child,s.PGMClip))?this.paths=i.clone(e.clipPaths):a.LegacyCoreAssert.fail("wrong pgm node type",void 0,"PGMMimicClipNode.importProperties","PGMMimicClipNode.swift",35),this.endPropertyMutation()},calculateMarkedBounds:function(){var e;if(e=l.PGMMimicGroupNode.prototype.calculateMarkedBounds.call(this)){var t=null;return this._paths.forEach((function(e){var o=e.bounds;t=i.opt(t,(function(e){return e.unionWith(o)}))||o})),null==t?null:e.intersectionWith(t)}return null},paths:{get:function(){return this._paths},set:function(e){c.TheoPath.arraysEqual(e,this._paths)||(this._paths=i.clone(e),this.mutateProperty(n.PROP_PATHS),this.invalidateMarkedBounds())}}}}),n)},aHDJ:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"ImageAdjustments":{"className":"ImageAdjustments","type":"object","properties":{"blur":{"type":"number"},"sharpness":{"type":"number"},"shadows":{"type":"number"},"highlights":{"type":"number"},"saturation":{"type":"number"},"brightness":{"type":"number"},"exposure":{"type":"number"},"contrast":{"type":"number"},"warmth":{"type":"number"},"tint":{"type":"number"},"fade":{"type":"number"},"vibrance":{"type":"number"}}},"FormaStyleBase":{"type":"object","properties":{"opacity":{"type":"number"},"color-table":{"$ref":"Color.json#/definitions/ColorTable"},"filter":{"$ref":"Filters.json#/definitions/ImageFilterTypes"},"adjustments":{"$ref":"#/definitions/ImageAdjustments"}}},"FormaStyle":{"className":"FormaStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"type":"string","enum":["FormaStyle"]}},"required":["kind"]}]},"FormaStyleTypes":{"oneOf":[{"$ref":"#/definitions/RootStyle"},{"$ref":"#/definitions/ShapeStyle"},{"$ref":"#/definitions/TextStyle"},{"$ref":"#/definitions/ImageStyle"},{"$ref":"#/definitions/VideoStyle"},{"$ref":"#/definitions/LockupStyle"},{"$ref":"#/definitions/GridStyle"},{"$ref":"#/definitions/FormaStyle"}]},"RootStyle":{"className":"RootStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["RootStyle"]},"color":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"}},"required":["kind"]}]},"ShapeStyle":{"className":"ShapeStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["ShapeStyle"]},"colors":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"}},"required":["kind"]}]},"TextStyle":{"className":"TextStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["TextStyle"]}},"required":["kind"]}]},"ImageStyleBase":{"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"name":{"type":"string","default":"None"},"colors":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"},"filter-name":{"type":"string","description":"Deprecated"}}}]},"ImageStyle":{"className":"ImageStyle","allOf":[{"$ref":"#/definitions/ImageStyleBase"},{"properties":{"kind":{"enum":["ImageStyle"]}},"required":["kind"]}]},"VideoStyle":{"className":"VideoStyle","allOf":[{"$ref":"#/definitions/ImageStyleBase"},{"properties":{"kind":{"enum":["VideoStyle"]}},"required":["kind"]}]},"LockupStyleBase":{"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["LockupStyle"]},"fonts":{"type":"array","items":{"$ref":"Text.json#/definitions/TheoFont"}},"linebreak":{"type":"boolean"},"backingArtworkID":{"type":"string"},"colors":{"allOf":[{"$ref":"Color.json#/definitions/ColorTable"},{"description":"Deprecated"}]}},"required":["kind"]}]},"LockupStyle":{"className":"LockupStyle","allOf":[{"$ref":"#/definitions/LockupStyleBase"},{"properties":{"spacing":{"type":"number","default":0.35},"tracking":{"type":"number","default":0},"padding":{"type":"number","default":0.65},"strokeWeight":{"type":"number","default":0.1},"backing":{"type":"integer","default":0},"layout":{"type":"integer","default":0},"opacityRule":{"type":"integer","default":0},"shadowAngle":{"type":"number","default":135},"shadowOffset":{"type":"number","default":0.5},"text-opacity":{"type":"number","default":1,"description":"Deprecated"},"backing-opacity":{"type":"number","default":1},"opacity":{"type":"number","description":"Deprecated"},"knockout":{"type":"integer","default":0},"character-styles":{"type":"object","patternProperties":{"^.*$":{"$ref":"#/definitions/CharacterStyle"}}}}}]},"CharacterStyle":{"className":"CharacterStyle","allOf":[{"$ref":"#/definitions/LockupStyleBase"},{"properties":{"spacing":{"type":"number","default":-1},"tracking":{"type":"number","default":-99},"padding":{"type":"number","default":0},"strokeWeight":{"type":"number","default":-1},"backing":{"type":"integer","default":0},"layout":{"type":"integer","default":-1},"opacityRule":{"type":"integer","default":-1},"shadowAngle":{"type":"number","default":-1},"shadowOffset":{"type":"number","default":-1},"text-opacity":{"type":"number","default":-1,"description":"Deprecated"},"backing-opacity":{"type":"number","default":-1},"opacity":{"type":"number","description":"Deprecated"},"knockout":{"type":"integer","default":-1}}}]},"GridStyle":{"className":"GridStyle","definitions":{"GridCell":{"type":"array","items":[{"$ref":"Root.json#/definitions/TheoRect"},{"type":"number"},{"type":"string"}]}},"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["GridStyle"]},"name":{"type":"string","default":"None"},"category":{"type":"string"},"spacing":{"type":"number","default":0},"crop-type":{"type":"integer"},"grid-cells":{"type":"array","items":{"$ref":"#/definitions/GridStyle/definitions/GridCell"}},"forma-mapping":{"type":"array","items":{"type":"array","items":[{"type":"string"},{"$ref":"#/definitions/GridStyle/definitions/GridCell"}]}}},"required":["kind"]}]}}}')},ascj:function(e,t,o){var n,r,i,a=t,s=o("oAGj"),l=o("9WSY"),c=o("yhkb"),u=o("dJuF"),p=o("ZhwN"),d=o("iCxV"),h=o("fNpk"),f=o("Quhx"),m=o("Zifs");a.ColorRole=s.defineEnum("ColorRole",{None:0,FieldPrimary:1,FieldSecondary:2,Border:3,Shadow:4}),a.ColorTableOwner=s.defineProtocol("ColorTableOwner",{colorTableSupportsRole:"(ColorRole) -> Boolean",colorTableBeforeChanged:"() -> Void",colorTableAfterChanged:"() -> Void",canColorEntriesBeEmpty:"() -> Boolean"}),a.ColorTableEntry=(n=function(e,t,o){this.colorID=e,this.color=t},s.defineClass({name:"ColorTableEntry",ctor:n}),n),a.ColorTable=(r=function(){this.colorLookup_=null},i={},s.defineClass({name:"ColorTable",ctor:r,superName:"PostPublishingObject",statics:{SCHEMA_CLASS_NAME:"ColorTable",codec:{get:function(){return void 0===i.codec&&(i.codec=u.DBPropertyCodec.registerCodec(r.SCHEMA_CLASS_NAME,u.DBPropertyCodec.directObjectCodec(r.SCHEMA_CLASS_NAME))),i.codec}},factory:{get:function(){return void 0===i.factory&&(i.factory=function(e,t,o,n){return r.init_866e(o,e)}),i.factory},set:function(e){i.factory=e}},PROPERTY_ENTRIES:"entries",PROPERTY_ENTRY_ROLE:"role",PROPERTY_ENTRY_COLORID:"color-id",PROPERTY_ENTRY_COLOR:"color",PROPERTY_ENTRY_THEME_INDEX:"theme-index",NAME_FIELD_PRIMARY:"field-primary",NAME_FIELD_SECONDARY:"field-secondary",NAME_BORDER:"border",createWithOneSolidColor:function(e){return r.init_2768(e,null)},createDefault:function(){return r.init_25f6([{key:a.ColorRole.FieldPrimary,value:c.ColorLibraryController.BLACK_KEY}])},entryArrayFromEntryDict:function(e){for(var t=[],o=s.iter(e,!0);!o.done;o.next()){var n,i,a,l=o.key,c=o.value,u={role:l};null!=(n=c.colorID)&&(u[r.PROPERTY_ENTRY_COLORID]=n),(i=c.color)&&(u[r.PROPERTY_ENTRY_COLOR]=i),null!=(a=c.themeIndex)&&(u[r.PROPERTY_ENTRY_THEME_INDEX]=a),t.push(u)}return t},_implements:function(e){return"IDBObject"==e||"TheoMessageSubscriber"==e||"TheoMessagePublisher"==e}},props:{init_866e:function(e,t){s.super_init(this,f.PostPublishingObject,f.PostPublishingObject.prototype.init_866e,e,t)},init_25f6:function(e){for(var t={},o=s.iter(e);!o.done;o.next()){var n=o.value,i=n.key,l=n.value;t[i]=new a.ColorTableEntry(l,null,null)}var c={entries:s.clone(r.entryArrayFromEntryDict(t))};s.super_init(this,f.PostPublishingObject,f.PostPublishingObject.prototype.init_dd5d,{},c)},init_2768:function(e,t){var o={};null!=e&&(o[a.ColorRole.FieldPrimary]=new a.ColorTableEntry(null,e,null)),null!=t&&(o[a.ColorRole.FieldSecondary]=new a.ColorTableEntry(null,t,null));var n={entries:s.clone(r.entryArrayFromEntryDict(o))};s.super_init(this,f.PostPublishingObject,f.PostPublishingObject.prototype.init_dd5d,{},n)},className:{get:function(){return r.SCHEMA_CLASS_NAME}},owner:{get:function(){return this.owner_},set:function(e){this.owner_=e}},library:{get:function(){return this.library_},set:function(e){var t=this;this.library_=e,s.opt(this.librarySubscription_,(function(e){return e.unsubscribe()})),this.librarySubscription_=s.opt(this.library_,(function(e){return e.subscribe(t,l.ColorLibraryChangedMessage.TYPE)}))}},setColorLibraryWithoutSubscribing:function(e){this.library_=e,h.LegacyCoreAssert.isTrue(null==this.librarySubscription_,"shouldn't have an exisiting library subscription",void 0,"ColorTable.setColorLibraryWithoutSubscribing","ColorTable.swift",209)},onMessage:function(e){var t;if(t=s.as(e,l.ColorLibraryChangedMessage)){for(var o=!1,n=s.iter(this.colorLookup,!0);!n.done;n.next()){var r=n.value;if(null!=r.colorID&&(o=t.affectedColorIDs.includes(r.colorID)))break}o&&(t.isBefore?s.opt(this.owner_,(function(e){return e.colorTableBeforeChanged()})):s.opt(this.owner_,(function(e){return e.colorTableAfterChanged()})))}},willChangeState:function(e){s.opt(this.owner,(function(e){return e.colorTableBeforeChanged()})),f.PostPublishingObject.prototype.willChangeState.call(this,e)},didChangeState:function(e){f.PostPublishingObject.prototype.didChangeState.call(this,e),s.opt(this.owner,(function(e){return e.colorTableAfterChanged()})),null!=e[r.PROPERTY_ENTRIES]&&(this.colorLookup_=null)},colorLookup:{get:function(){if(null==this.colorLookup_){var e,t={};if(e=s.as(this.get(r.PROPERTY_ENTRIES),["Array",["Dictionary","String","Any"]])){for(var o=s.iter(e);!o.done;o.next()){var n,i,l,c=o.value,u=s.as(c[r.PROPERTY_ENTRY_ROLE],a.ColorRole);null!=u&&u!=a.ColorRole.None?(null!=(n=s.as(c[r.PROPERTY_ENTRY_COLORID],"String"))?t[u]=new a.ColorTableEntry(n,null,null):(i=s.as(c[r.PROPERTY_ENTRY_COLOR],m.SolidColor))?t[u]=new a.ColorTableEntry(null,i,null):s.opt(d.Host.logging,(function(e){return e.warning("ColorTable: couldn't decode color")})),null!=(l=s.as(c[r.PROPERTY_ENTRY_THEME_INDEX],"Int"))&&s.opt(t[u],(function(e){return e.themeIndex=l}))):s.opt(d.Host.logging,(function(e){return e.warning("ColorTable: couldn't decode role")}))}var p;(p=this.owner)&&h.LegacyCoreAssert.isFalse(!p.canColorEntriesBeEmpty()&&0==s.count(t),"ColorTable: not entries filled out",void 0,"ColorTable","ColorTable.swift",271)}else s.opt(d.Host.logging,(function(e){return e.warning("ColorTable: entries not defined or not a dict")}));this.colorLookup_=s.clone(t)}return this.colorLookup_}},setNewEntries:function(e){var t=s.clone(r.entryArrayFromEntryDict(e));this.set(r.PROPERTY_ENTRIES,t),this.colorLookup_=null},colorEntryAsString:function(e,t){var o,n=t.color;null!=(o=t.colorID)&&(n=s.opt(s.opt(this.library,(function(e){return e.color(o)})),(function(e){return e.rgbColor})));var r="";return null!=n&&(r+="Role: "+e+"\n",r+="Color: "+n.asString+"\n"),r},hasReferencedColorsFromColorLibrary:function(){var e,t=a.ColorRole.FieldPrimary;return!(!(e=this.colorLookup[t])||null==e.colorID)},color:function(e){var t,o;return(t=this.colorLookup[e])?null!=(o=t.colorID)?s.opt(s.opt(this.library_,(function(e){return e.color(o)})),(function(e){return e.rgbColor})):t.color:null},theoColor:function(e){var t,o;return(t=this.colorLookup[e])&&null!=(o=t.colorID)?s.opt(this.library_,(function(e){return e.color(o)})):null},colorID:function(e){return s.opt(this.colorLookup[e],(function(e){return e.colorID}))},themeIndex:function(e){return s.opt(this.colorLookup[e],(function(e){return e.themeIndex}))},supportsRole:function(e){return null==this.owner||this.owner.colorTableSupportsRole(e)},fieldPrimary:{get:function(){return this.color(a.ColorRole.FieldPrimary)},set:function(e){this.setColor(a.ColorRole.FieldPrimary,e)}},fieldSecondary:{get:function(){return this.color(a.ColorRole.FieldSecondary)},set:function(e){this.setColor(a.ColorRole.FieldSecondary,e)}},fieldShadows:{get:function(){return this.color(a.ColorRole.FieldPrimary)},set:function(e){this.setColor(a.ColorRole.FieldPrimary,e)}},fieldHighlights:{get:function(){return this.color(a.ColorRole.FieldSecondary)},set:function(e){this.setColor(a.ColorRole.FieldSecondary,e)}},border:{get:function(){return this.color(a.ColorRole.Border)},set:function(e){this.setColor(a.ColorRole.Border,e)}},shadow:{get:function(){return this.color(a.ColorRole.Shadow)},set:function(e){this.setColor(a.ColorRole.Shadow,e)}},forEachColor:function(e){for(var t=this.library,o=s.iter(this.colorLookup,!0);!o.done;o.next()){var n,r=o.key,i=o.value;null!=(n=i.colorID)?e(r,n,s.opt(s.opt(t,(function(e){return e.color(n)})),(function(e){return e.rgbColor}))):e(r,null,i.color)}},asString:{get:function(){var e,t,o,n,r="";return(e=this.colorLookup[a.ColorRole.FieldPrimary])&&(r+=this.colorEntryAsString(a.ColorRole.FieldPrimary,e)),(t=this.colorLookup[a.ColorRole.FieldSecondary])&&(r+=this.colorEntryAsString(a.ColorRole.FieldSecondary,t)),(o=this.colorLookup[a.ColorRole.Border])&&(r+=this.colorEntryAsString(a.ColorRole.Border,o)),(n=this.colorLookup[a.ColorRole.Shadow])&&(r+=this.colorEntryAsString(a.ColorRole.Shadow,n)),r}},equalTo:function(e){if(this.count!=e.count)return!1;for(var t=s.iter(this.colorLookup,!0);!t.done;t.next()){var o,n=t.key,r=t.value;if(!(o=e.colorLookup[n]))return!1;if(null!=o.colorID){if(o.colorID!=r.colorID)return!1}else if(!s.eq(m._equality_SolidColor_SolidColor,o.color,r.color))return!1;if(o.themeIndex!=r.themeIndex)return!1}return!0},isInDefaultState:{get:function(){return 0==s.count(this.colorLookup)}},count:{get:function(){return s.count(this.colorLookup)}},clone:function(){return this.fork(p.GUIDUtils.makeGUID())},match:function(e){this.makeMutable(),s.opt(this.owner,(function(e){return e.colorTableBeforeChanged()}));for(var t={},o=s.iter(e.colorLookup,!0);!o.done;o.next()){var n=o.key,r=o.value;t[n]=new a.ColorTableEntry(r.colorID,r.color,r.themeIndex)}this.setNewEntries(t),s.opt(this.owner,(function(e){return e.colorTableAfterChanged()}))},clearCache:function(){f.PostPublishingObject.prototype.clearCache.call(this),this.colorLookup_=null},setColorId:function(e,t){this.setColorIDs([{key:e,value:t}])},setColorIDs:function(e,t){void 0===t&&(t=!0);for(var o=!1,n=s.clone(this.colorLookup),r=s.iter(e);!r.done;r.next()){var i=r.value,l=i.key,c=i.value,u=n[l];null==c?null!=u&&(!o&&t&&(this.makeMutable(),s.opt(this.owner,(function(e){return e.colorTableBeforeChanged()})),o=!0),s.removeKey(n,l)):this.supportsRole(l)?null!=u&&u.colorID==c||(!o&&t&&(this.makeMutable(),s.opt(this.owner,(function(e){return e.colorTableBeforeChanged()})),o=!0),null==u?n[l]=new a.ColorTableEntry(c,null,null):(u.colorID=c,u.color=null,n[l]=u)):s.opt(d.Host.logging,(function(e){return e.warning("Attempt to set a color role on a table that doesn't support role: "+l+" in setColorIDs")}))}this.setNewEntries(n),o&&t&&s.opt(this.owner,(function(e){return e.colorTableAfterChanged()}))},setColor:function(e,t){var o=this.colorLookup[e];if(null==t){if(null!=o){this.makeMutable(),s.opt(this.owner,(function(e){return e.colorTableBeforeChanged()}));var n=s.clone(this.colorLookup);s.removeKey(n,e),this.setNewEntries(n),s.opt(this.owner,(function(e){return e.colorTableAfterChanged()}))}}else this.supportsRole(e)?null!=(o=this.colorLookup[e])&&s.eq(m._equality_SolidColor_SolidColor,o.color,t)||(this.makeMutable(),s.opt(this.owner,(function(e){return e.colorTableBeforeChanged()})),n=s.clone(this.colorLookup),null==o?n[e]=new a.ColorTableEntry(null,t,null):(o.colorID=null,o.color=t,n[e]=o),this.setNewEntries(n),s.opt(this.owner,(function(e){return e.colorTableAfterChanged()}))):s.opt(d.Host.logging,(function(t){return t.warning("Attempt to set a color role on a table that doesn't support role: "+e+" in setColor")}))},setBlendedColor:function(e,t,o,n){if(t.isEqual(o))this.setColor(e,t);else{var r=t.blend(o,n);this.setColor(e,r)}},setThemeIndex:function(e,t){var o;if(this.supportsRole(e))if(o=this.colorLookup[e])o.themeIndex=t;else{this.makeMutable();var n=s.clone(this.colorLookup);n[e]=new a.ColorTableEntry(null,null,t),this.setNewEntries(n)}else s.opt(d.Host.logging,(function(t){return t.warning("Attempt to set a theme index on a table that doesn't support that role: "+e)}))},setColorAndIndex:function(e,t,o){this.setColor(e,t),this.setThemeIndex(e,o)}}}),r)},b1vF:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("gXiO"),l=o("Zifs");i.XYZColor=(n=function(e,t,o,n){this.x=e,this.y=t,this.z=o,this.alpha=n,s.CoreObject.call(this)},r={},a.defineClass({name:"XYZColor",ctor:n,superName:"CoreObject",statics:{D50XYZ:{get:function(){return void 0===r.D50XYZ&&(r.D50XYZ=new n(.964212,1,.825188,1)),r.D50XYZ}},D65XYZ:{get:function(){return void 0===r.D65XYZ&&(r.D65XYZ=new n(.950429,1,1.0889,1)),r.D65XYZ}},fromRGB:function(e){function t(e){return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}var o=t(e.red),r=t(e.green),i=t(e.blue);return new n(.4124*o+.3576*r+.1805*i,.2126*o+.7152*r+.0722*i,.0193*o+.1192*r+.9505*i,e.alpha)}},props:{asRGB:{get:function(){return null==this.rgb_&&(this.rgb_=this.toRGB()),this.rgb_}},toRGB:function(){function e(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055}var t=e(3.2406*this.x+-1.5372*this.y+-.4986*this.z),o=e(-.9689*this.x+1.8758*this.y+.0415*this.z),n=e(.0557*this.x+-.204*this.y+1.067*this.z);return new l.SolidColor(Math.min(Math.max(t,0),1),Math.min(Math.max(o,0),1),Math.min(Math.max(n,0),1),this.alpha)}}}),n)},b94u:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("PlOi");i.PGMResourceProviderList=(n=function(e){this.providers=a.clone(e)},r={},a.defineClass({name:"PGMResourceProviderList",ctor:n,statics:{EMPTY:{get:function(){return void 0===r.EMPTY&&(r.EMPTY=new n({})),r.EMPTY}},decode:function(e){var t,o={};if(t=a.as(e,["Dictionary","String",["Dictionary","String","Any"]]))for(var r=a.iter(t);!r.done;r.next()){var i,l=r.key,c=r.value;(i=s.PGMResourceProvider.decode(c))&&(o[l]=i)}return new n(o)}},props:{byContentID:function(e){return this.providers[e]},forEach:function(e){for(var t=a.iter(this.providers);!t.done;t.next())e(t.key,t.value)},isEqualTo:function(e){if(this===e)return!0;if(a.count(this.providers)!=a.count(e.providers))return!1;for(var t=a.iter(this.providers);!t.done;t.next()){var o,n=t.key,r=t.value;if(!(o=e.providers[n]))return!1;if(!r.isEqualTo(o))return!1}return!0},encode:function(){for(var e={},t=a.iter(this.providers);!t.done;t.next()){var o=t.key,n=t.value;e[o]=n.encode()}return e},combine:function(e){for(var t=a.clone(this.providers),o=a.iter(e.providers);!o.done;o.next()){var r=o.key,i=o.value;null==t[r]&&(t[r]=i)}return new n(t)},adding:function(e,t){var o=a.clone(this.providers);return o[e]=t,new n(o)}}}),n)},bAjp:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("sq5L"),l=o("WGnI"),c=o("hauK"),u=o("W6ub");r.PGMText=(n=function e(t,o,n,r,i,a,s){this.text=i,this.style=a,this.renderRuns=s,l.PGMLeaf.call(this,e.TYPE,t,o,n,r)},i.defineClass({name:"PGMText",ctor:n,superName:"PGMLeaf",statics:{TYPE:"pgm-text",PROP_TEXT:"text",PROP_STYLE_KEY:"style-key",PROP_RENDERRUNS:"render-runs",decodeLeaf:function(e,t,o,r,l,c,p,d){var h,f,m;if(a.LegacyCoreAssert.isTrue(t==n.TYPE,"Asked to decode non-text leaf",{type:t},"PGMText.decodeLeaf","PGMText.swift",109),null!=(h=i.as(e[n.PROP_TEXT],"String"))&&null!=(f=i.as(e[n.PROP_STYLE_KEY],"String"))&&(m=p.constructTextStyle(f,d))){var g=u.PGMRenderRuns.decode(i.as(e[n.PROP_RENDERRUNS],["Dictionary","String","Any"]))||u.PGMRenderRuns.EMPTY;return new n(o,r,l,c,h,m,g)}return d.error(s.PGMError.BAD_TEXT,"Didn't get a required input."),null}},props:{getTextStylesReferenced:function(){return[this.style]},isEqualTo:function(e){return e===this||!!(t=i.as(e,n))&&this.text==t.text&&this.style.isEqualTo(t.style)&&this.renderRuns.isEqualTo(t.renderRuns)&&l.PGMLeaf.prototype.isEqualTo.call(this,e);var t},encode:function(){var e=l.PGMLeaf.prototype.encode.call(this);return e[c.PGMNode.PROP_TYPE]=n.TYPE,e[n.PROP_TEXT]=this.text,e[n.PROP_STYLE_KEY]=this.style.key,this.renderRuns.isEmpty()||(e[n.PROP_RENDERRUNS]=this.renderRuns.encode()),e},withEntity:function(e){return new n(e,this.meta,this.animations,this.bounds,this.text,this.style,this.renderRuns)},withAnimations:function(e){return e===this.animations?this:new n(this.entity,this.meta,e,this.bounds,this.text,this.style,this.renderRuns)},canInterpolate:function(e){return this.text==e.text&&this.style.canInterpolate(e.style)}}}),n)},bJhu:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("iCxV"),s=o("sq5L"),l=o("Zifs");r.interp=function(e,t,o){return e+(t-e)*o},r.MAX_STYLE_LRU_SIZE_PER_FONT=10,r.PGMTextStyle=(n=function(e,t,o,n,r){this.key_=null,this.font=e,this.fillColor=t,this.strokeColor=o,this.strokeWidth=n,this.tracking=r},i.defineClass({name:"PGMTextStyle",ctor:n,statics:{PROP_SIZE:"size",PROP_FONT:"font",PROP_FILL_COLOR:"fill-color",PROP_STROKE_COLOR:"stroke-color",PROP_STROKE_WIDTH:"stroke-width",PROP_TRACKING:"tracking",ROUNDED_CORNER_THRESHOLD:.06,cache:{},createCacheable:function(e,t,o,a,s){var c,u,p;if((u=n.cache[e.postScriptName])?c=u:(c=[],n.cache[e.postScriptName]=c),p=c.find((function(e){return i.eq(l._equality_SolidColor_SolidColor,e.fillColor,t)&&i.eq(l._equality_SolidColor_SolidColor,e.strokeColor,o)&&e.strokeWidth==a&&e.tracking==s}),this))return c[0]!==p&&(i.remove(c,p),c.splice(0,0,p)),p;var d=new n(e,t,o,a,s);return c.splice(0,0,d),c.length>r.MAX_STYLE_LRU_SIZE_PER_FONT&&c.pop(),d},decode:function(e,t,o){var r,a,c,u,p;return(c=e)?null!=(u=i.as(c[n.PROP_FONT],"String"))&&(p=t.constructFont(u,o))?new n(p,l.SolidColor.decodeJson(i.as(c[n.PROP_FILL_COLOR],"AnyObject")),l.SolidColor.decodeJson(i.as(c[n.PROP_STROKE_COLOR],"AnyObject")),(r=i.as(c[n.PROP_STROKE_WIDTH],"Double"))||null!=r?r:0,(a=i.as(c[n.PROP_TRACKING],"Double"))||null!=a?a:0):(o.error(s.PGMError.BAD_TEXT_STYLE,"Missing required property or can't find font"),null):null}},props:{key:{get:function(){var e;if(null==this.key_){var t,o,n=[];n.push("font:"+this.font.asString),(t=this.fillColor)&&n.push("fill:"+t.asString),(o=this.strokeColor)&&n.push("stroke:"+o.asString),this.strokeWidth>0&&n.push("stroke-width:"+i.toString(this.strokeWidth)),0!=this.tracking&&n.push("tracking:"+i.toString(this.tracking));var r="PGMTextStyle("+n.join(";")+")";this.key_=(e=i.opt(a.Host.crypto,(function(e){return e.md5(r)})))||null!=e?e:r}return this.key_}},encode:function(){var e={};return e[n.PROP_FONT]=this.font.postScriptName,null!=this.fillColor&&(e[n.PROP_FILL_COLOR]=this.fillColor.encodeJson()),null!=this.strokeColor&&(e[n.PROP_STROKE_COLOR]=this.strokeColor.encodeJson()),this.strokeWidth>0&&(e[n.PROP_STROKE_WIDTH]=this.strokeWidth),0!=this.tracking&&(e[n.PROP_TRACKING]=this.tracking),e},interpOptionalColors:function(e,t,o){return null==e&&null==t?null:null==e?this.interpOptionalColors(new l.SolidColor(0,0,0,0),t,o):null==t?this.interpOptionalColors(e,new l.SolidColor(0,0,0,0),o):e.interpolate(t,o)},interpolate:function(e,t){return new n(t>.5?e.font:this.font,this.interpOptionalColors(this.fillColor,e.fillColor,t),this.interpOptionalColors(this.strokeColor,e.strokeColor,t),r.interp(this.strokeWidth,e.strokeWidth,t),r.interp(this.tracking,e.tracking,t))},canInterpolate:function(e){return this.font.isEqualTo(e.font)},isEqualTo:function(e){return this===e||this.font.isEqualTo(e.font)&&i.eq(l._equality_SolidColor_SolidColor,this.fillColor,e.fillColor)&&i.eq(l._equality_SolidColor_SolidColor,this.strokeColor,e.strokeColor)&&this.strokeWidth==e.strokeWidth&&this.tracking==e.tracking}}}),n)},bQB8:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"TheoPath":{"className":"TheoPath","type":"object","properties":{"type":{"type":"string","enum":["empty","rect","ellipse","arbitrary"]}}},"TheoPathTypes":{"oneOf":[{"$ref":"#/definitions/TheoEmptyPath"},{"$ref":"#/definitions/TheoRectanglePath"},{"$ref":"#/definitions/TheoEllipsePath"},{"$ref":"#/definitions/TheoArbitraryPath"}]},"TheoEmptyPath":{"className":"TheoEmptyPath","allOf":[{"$ref":"#/definitions/TheoPath"},{"className":"TheoEmptyPath","properties":{"type":{"enum":["empty"]}}}]},"TheoRectanglePath":{"className":"TheoRectanglePath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["rect"]},"coords":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoEllipsePath":{"className":"TheoEllipsePath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["ellipse"]},"coords":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoArbitraryPath":{"className":"TheoArbitraryPath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["arbitrary"]},"fillRule":{"type":"string","enum":["none","nonzero","evenodd"]},"endType":{"type":"string","enum":["butt","round","square"]},"joinType":{"type":"string","enum":["miter","round","bevel"]},"strokeWeight":{"type":"number"},"miterLimit":{"type":"number"},"ops":{"type":"array","items":{"oneOf":[{"type":"string"},{"type":"number"}]}}}}]},"TheoArtworkNode":{"className":"TheoArtworkNode","type":"object","properties":{"type":{"type":"string"}},"required":["type"]},"TheoArtworkNodeTypes":{"oneOf":[{"$ref":"#/definitions/TheoArtworkShape"},{"$ref":"#/definitions/TheoArtworkClipGroup"},{"$ref":"#/definitions/TheoArtworkGroup"}]},"TheoArtworkShape":{"className":"TheoArtworkShape","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["shape"]},"path":{"$ref":"#/definitions/TheoPathTypes"},"paths":{"type":"array","items":{"$ref":"#/definitions/TheoPathTypes"}},"fill-color-role":{"$ref":"Color.json#/definitions/ColorRole"},"stroke-color-role":{"$ref":"Color.json#/definitions/ColorRole"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"stroke-color":{"$ref":"Color.json#/definitions/SolidColor"},"stroke-width":{"type":"number","default":0},"override-bounds":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoArtworkGroup":{"className":"TheoArtworkGroup","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["group"]},"stroke-width":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"},"description":"The constant in code is defined as PROPERTY_NODES but its value is \\"stroke-width\\""},"nodes":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"}}}}]},"TheoArtworkClipGroup":{"className":"TheoArtworkClipGroup","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["clip-group"]},"path":{"$ref":"#/definitions/TheoPathTypes"},"stroke-width":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"},"description":"The constant in code is defined as PROPERTY_NODES but its value is \\"stroke-width\\""},"nodes":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"}}}}]}}}')},bZga:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"ContentNode":{"className":"ContentNode","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"tags":{"type":"object","patternProperties":{"^.*$":{"type":"string"}}}},"required":["id","path"]}]},"NonRootContentNodeTypes":{"oneOf":[{"$ref":"#/definitions/GroupContentNode"},{"$ref":"#/definitions/ImageContentNode"},{"$ref":"#/definitions/TextContentNode"},{"$ref":"#/definitions/VectorContentNode"},{"$ref":"#/definitions/VideoContentNode"}]},"GroupContentNodeBase":{"allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"children":{"type":"array","items":{"$ref":"#/definitions/NonRootContentNodeTypes"}}}}]},"GroupContentNode":{"className":"GroupContentNode","allOf":[{"$ref":"#/definitions/GroupContentNodeBase"},{"properties":{"kind":{"enum":["group"]}},"required":["kind"]}]},"RootContentNode":{"className":"RootContentNode","allOf":[{"$ref":"#/definitions/GroupContentNodeBase"},{"properties":{"kind":{"enum":["root"]}},"required":["kind"]}]},"ImageColorData":{"className":"ImageColorData","type":"object","properties":{"red":{"type":"number"},"green":{"type":"number"},"blue":{"type":"number"},"alpha":{"type":"number"},"coverage":{"type":"number"}}},"ImageContentNode":{"className":"ImageContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["image"]},"pixel-width":{"type":"integer"},"pixel-height":{"type":"integer"},"image-has_alpha":{"type":"boolean"},"image-color-data":{"type":"array","items":{"$ref":"#/definitions/ImageColorData"}}},"required":["kind"]}]},"TextContentNode":{"className":"TextContentNode","allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"kind":{"enum":["text"]},"text-model":{"$ref":"Text.json#/definitions/TextModel"}},"required":["kind"]}]},"MediaMetadata":{"className":"MediaMetadata","type":"object","properties":{"search":{"type":"string"},"type":{"type":"string"},"source_name":{"type":"string"},"source_url":{"type":"string"},"owner":{"type":"string"},"asset_id":{"type":"string"},"creator_user_id":{"type":"string"},"creator_display_name":{"type":"string"},"design_intent":{"type":"string"},"source":{"type":"string"},"photo_name":{"type":"string"},"tags":{"type":"string"}}},"URLBasedContentNode":{"className":"URLBasedContentNode","allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"data-url":{"type":"string"},"mimetype":{"type":"string"},"element-id":{"type":"string"},"roles":{"type":"array","items":{"type":"string"}},"components":{"type":"array","items":{"type":"object","properties":{"url":{"type":"string"},"id":{"type":"string"},"length":{"type":"integer"},"name":{"type":"string"},"path":{"type":"string"},"mimeType":{"type":"string"},"etag":{"type":"string"}}},"maxItems":1},"media-metadata":{"$ref":"#/definitions/MediaMetadata"}}}]},"VectorContentNode":{"className":"VectorContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["vector"]},"size":{"$ref":"Root.json#/definitions/TheoSize"}},"required":["kind"]}]},"VideoContentNode":{"className":"VideoContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["video"]},"width":{"type":"integer"},"height":{"type":"integer"},"duration":{"$ref":"Root.json#/definitions/TheoTime"},"time-samples":{"type":"array","items":{"$ref":"Root.json#/definitions/TheoTime"}}},"required":["kind"]}]}}}')},bauG:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("tlHl");r.PGMImage=(n=function e(t,o,n,r,i){a.PGMMedia.call(this,e.TYPE,t,o,n,r,i)},i.defineClass({name:"PGMImage",ctor:n,superName:"PGMMedia",statics:{TYPE:"pgm-image",decodeMedia:function(e,t,o,r,i,a,s){return new n(t,o,r,i,a)}},props:{withEntity:function(e){return new n(e,this.meta,this.animations,this.bounds,this.contentID)}}}),n)},bpSr:function(e,t,o){var n,r,i,a,s,l,c,u,p,d,h,f,m,g,y,T,A,C,_,S,P,F,v,R,b=t,E=o("oAGj"),N=o("Tq01"),k=o("4mEG"),D=o("c9Jm"),I=o("70fJ"),M=o("CWW7"),x=o("yGNn"),w=o("4JYN"),O=o("FNB+"),L=o("6ZWm"),B=o("cmoc"),G=o("QbzR"),q=o("xWmh"),j=o("bqbo"),X=o("U010"),$=o("fdtz"),U=o("lmwz"),H=o("uWOl"),Y=o("sTUO"),V=o("MYNe"),z=o("VkKB"),K=o("434x"),W=o("j89o"),J=o("Zifs"),Z=o("djAF"),Q=o("umUn"),ee=o("oKlP");b.ReplaceImagesWithColorsTest=(n=function e(){this.actionSequence_ReplaceImagesWithColors=[function(){return new j.ReplaceImagesWithColorsAction(null,[e.green_])}],this.formaToReplace_=null,D.ActionTestBase.call(this)},r={},E.defineClass({name:"ReplaceImagesWithColorsTest",ctor:n,superName:"ActionTestBase",statics:{green_:{get:function(){return void 0===r.green_&&(r.green_=Q.TheoColor.init_5344(new J.SolidColor(0,1,0,1))),r.green_}}},props:{replacementForma:{get:function(){return E.first(E.opt(E.as(this.getActionResult(0),N.FormaActionResult),(function(e){return e.formae})))}},tearDown:function(){this.formaToReplace_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.formaToReplace_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e instanceof B.FrameForma&&E.opt(E.as(e,B.FrameForma),(function(e){return e.childAt(0)instanceof $.ImageForma}))}))),B.FrameForma),null!=this.formaToReplace_},setUpActionSequence:function(e,t,o){XCTAssertNotNil(this.formaToReplace_),null!=this.formaToReplace_&&o.controller.selection.replaceSelection(this.formaToReplace_)},validateAfterActionSequence:function(e,t){var o;if(XCTAssertNotNil(this.replacementForma),XCTAssertTrue(this.replacementForma instanceof Z.ShapeForma),XCTAssertNil(E.opt(this.formaToReplace_,(function(e){return e.parent}))),o=E.as(this.replacementForma,Z.ShapeForma)){var r=o.style.colors.fieldPrimary;XCTAssertNotNil(r),XCTAssertEqual(r,n.green_.rgbColor)}},validateAfterUndo:function(e,t){XCTAssertNil(E.opt(this.replacementForma,(function(e){return e.parent}))),XCTAssertNotNil(E.opt(this.formaToReplace_,(function(e){return e.parent})))},validateAfterRedo:function(e,t){var o;if(XCTAssertNotNil(this.replacementForma),XCTAssertTrue(this.replacementForma instanceof Z.ShapeForma),XCTAssertNil(E.opt(this.formaToReplace_,(function(e){return e.parent}))),o=E.as(this.replacementForma,Z.ShapeForma)){var r=o.style.colors.fieldPrimary;XCTAssertNotNil(r),XCTAssertEqual(r,n.green_.rgbColor)}this.formaToReplace_=null}}}),n),b.SetImageFilterTest=(i=function(){this.actionSequence_SetImageFilter=[],this.formaToChange_=null,this.originalStyleName_=null,D.ActionTestBase.call(this)},E.defineClass({name:"SetImageFilterTest",ctor:i,superName:"ActionTestBase",props:{tearDown:function(){this.formaToChange_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.formaToChange_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e instanceof B.FrameForma&&E.opt(E.as(e,B.FrameForma),(function(e){return e.childAt(0)instanceof $.ImageForma}))}))),B.FrameForma),null!=this.formaToChange_},populateActionSequence:function(e,t,o){return x.CorePromise.resolve([function(){return new j.SetImageFilterAction(o.firstPage.imageFilterLibrary.getImageStyle(H.ImageStyle.NAME_GREYSCALE))}])},setUpActionSequence:function(e,t,o){XCTAssertNotNil(this.formaToChange_),null!=this.formaToChange_&&(this.originalStyleName_=E.opt(E.as(E.opt(E.as(E.opt(this.formaToChange_,(function(e){return e.childAt(0)})),$.ImageForma),(function(e){return e.style})),H.ImageStyle),(function(e){return e.name})),o.controller.selection.replaceSelection(this.formaToChange_))},validateAfterActionSequence:function(e,t){if(null!=this.formaToChange_){var o=E.as(E.opt(this.formaToChange_,(function(e){return e.childAt(0)})),$.ImageForma);XCTAssertNotNil(o);var n=E.as(E.opt(o,(function(e){return e.style})),H.ImageStyle);XCTAssertNotNil(n),XCTAssertTrue(E.opt(n,(function(e){return e.name==H.ImageStyle.NAME_GREYSCALE})))}},validateAfterUndo:function(e,t){if(null!=this.formaToChange_){var o=E.as(E.opt(this.formaToChange_,(function(e){return e.childAt(0)})),$.ImageForma);XCTAssertNotNil(o),XCTAssertEqual(this.originalStyleName_,E.opt(E.as(E.opt(o,(function(e){return e.style})),H.ImageStyle),(function(e){return e.name})))}},validateAfterRedo:function(e,t){if(null!=this.formaToChange_){var o=E.as(E.opt(this.formaToChange_,(function(e){return e.childAt(0)})),$.ImageForma);XCTAssertNotNil(o);var n=E.as(E.opt(o,(function(e){return e.style})),H.ImageStyle);XCTAssertNotNil(n),XCTAssertTrue(E.opt(n,(function(e){return e.name==H.ImageStyle.NAME_GREYSCALE}))),this.formaToChange_=null}}}}),i),b.SetImageFilterDuotoneTest=(a=function(){this.actionSequence_SetImageFilter=[],this.formaToChange_=null,this.originalStyleName_=null,this.duotonePreset_=w.DuotonePreset.DEFAULT,D.ActionTestBase.call(this)},E.defineClass({name:"SetImageFilterDuotoneTest",ctor:a,superName:"ActionTestBase",props:{tearDown:function(){this.formaToChange_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.formaToChange_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e instanceof B.FrameForma&&E.opt(E.as(e,B.FrameForma),(function(e){return e.childAt(0)instanceof $.ImageForma}))}))),B.FrameForma),this.duotonePreset_=o.firstPage.imageFilterLibrary.getDefaultDuotonePreset(!1),XCTAssertFalse(this.duotonePreset_.shadows.isEqual(this.duotonePreset_.highlights)),null!=this.formaToChange_},populateActionSequence:function(e,t,o){var n=this;return x.CorePromise.resolve([function(){return new j.SetImageFilterAction(o.firstPage.imageFilterLibrary.getImageStyle(H.ImageStyle.NAME_NEWDUOTONE),!1,n.duotonePreset_.shadows,n.duotonePreset_.highlights)}])},setUpActionSequence:function(e,t,o){XCTAssertNotNil(this.formaToChange_),null!=this.formaToChange_&&(this.originalStyleName_=E.opt(E.as(E.opt(E.as(E.opt(this.formaToChange_,(function(e){return e.childAt(0)})),$.ImageForma),(function(e){return e.style})),H.ImageStyle),(function(e){return e.name})),o.controller.selection.replaceSelection(this.formaToChange_))},validateAfterActionSequence:function(e,t){if(null!=this.formaToChange_){var o=E.as(E.opt(this.formaToChange_,(function(e){return e.childAt(0)})),$.ImageForma);XCTAssertNotNil(o);var n=E.as(E.opt(o,(function(e){return e.style})),H.ImageStyle);XCTAssertNotNil(n),XCTAssertTrue(E.opt(n,(function(e){return e.name==H.ImageStyle.NAME_NEWDUOTONE}))),XCTAssertTrue(n.colors.fieldShadows.isEqual(this.duotonePreset_.shadows)),XCTAssertTrue(n.colors.fieldHighlights.isEqual(this.duotonePreset_.highlights))}},validateAfterUndo:function(e,t){if(null!=this.formaToChange_){var o=E.as(E.opt(this.formaToChange_,(function(e){return e.childAt(0)})),$.ImageForma);XCTAssertNotNil(o),XCTAssertEqual(this.originalStyleName_,E.opt(E.as(E.opt(o,(function(e){return e.style})),H.ImageStyle),(function(e){return e.name})))}},validateAfterRedo:function(e,t){if(null!=this.formaToChange_){var o=E.as(E.opt(this.formaToChange_,(function(e){return e.childAt(0)})),$.ImageForma);XCTAssertNotNil(o);var n=E.as(E.opt(o,(function(e){return e.style})),H.ImageStyle);XCTAssertNotNil(n),XCTAssertTrue(E.opt(n,(function(e){return e.name==H.ImageStyle.NAME_NEWDUOTONE}))),XCTAssertTrue(n.colors.fieldShadows.isEqual(this.duotonePreset_.shadows)),XCTAssertTrue(n.colors.fieldHighlights.isEqual(this.duotonePreset_.highlights)),this.formaToChange_=null}}}}),a),b.ShuffleImageFilterTest=(s=function(){this.actionSequence_ShuffleImageFilter=[],this.page_=null,this.formaToChange_=null,this.styleToShuffle_=null,this.originalStyleName_=null,D.ActionTestBase.call(this)},E.defineClass({name:"ShuffleImageFilterTest",ctor:s,superName:"ActionTestBase",props:{tearDown:function(){this.page_=null,this.formaToChange_=null,this.styleToShuffle_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.formaToChange_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e instanceof B.FrameForma&&E.opt(E.as(e,B.FrameForma),(function(e){return e.childAt(0)instanceof $.ImageForma}))}))),B.FrameForma),null!=this.formaToChange_},prepareDocument:function(e,t){var o=this;return this.page_=e.firstPage,this.styleToShuffle_=this.page_.imageFilterLibrary.getImageStyle(H.ImageStyle.NAME_MULTIPLY),null!=this.formaToChange_&&e.controller.selection.replaceSelection(this.formaToChange_),x.CorePromise.resolve([function(){return new j.SetImageFilterAction(o.styleToShuffle_)}])},populateActionSequence:function(e,t,o){var n=this;return x.CorePromise.resolve([function(){return new j.ShuffleImageFilterAction(n.styleToShuffle_,n.page_)}])},setUpActionSequence:function(e,t,o){XCTAssertNotNil(this.formaToChange_),null!=this.formaToChange_&&(this.originalStyleName_=E.opt(E.as(E.opt(E.as(E.opt(this.formaToChange_,(function(e){return e.childAt(0)})),$.ImageForma),(function(e){return e.style})),H.ImageStyle),(function(e){return e.name})),o.controller.selection.replaceSelection(this.formaToChange_))},validateAfterActionSequence:function(e,t){if(null!=this.formaToChange_){var o=E.as(E.opt(this.formaToChange_,(function(e){return e.childAt(0)})),$.ImageForma);XCTAssertNotNil(o);var n=E.as(E.opt(o,(function(e){return e.style})),H.ImageStyle);XCTAssertNotNil(n),XCTAssertTrue(E.opt(n,(function(e){return e.name==H.ImageStyle.NAME_MULTIPLY})))}},validateAfterUndo:function(e,t){if(null!=this.formaToChange_){var o=E.as(E.opt(this.formaToChange_,(function(e){return e.childAt(0)})),$.ImageForma);XCTAssertNotNil(o),XCTAssertEqual(this.originalStyleName_,E.opt(E.as(E.opt(o,(function(e){return e.style})),H.ImageStyle),(function(e){return e.name})))}},validateAfterRedo:function(e,t){if(null!=this.formaToChange_){var o=E.as(E.opt(this.formaToChange_,(function(e){return e.childAt(0)})),$.ImageForma);XCTAssertNotNil(o);var n=E.as(E.opt(o,(function(e){return e.style})),H.ImageStyle);XCTAssertNotNil(n),XCTAssertTrue(E.opt(n,(function(e){return e.name==H.ImageStyle.NAME_MULTIPLY}))),this.formaToChange_=null}}}}),s),b.ChangeImageAdjustmentsTest=(l=function(){this.actionSequence_ChangeImageAdjustments=[function(){return j.ChangeImageAdjustmentsAction.init_dd66("saturation",100)}],this.formaToAdjust_=null,this.oldValue_=null,D.ActionTestBase.call(this)},E.defineClass({name:"ChangeImageAdjustmentsTest",ctor:l,superName:"ActionTestBase",props:{tearDown:function(){this.formaToAdjust_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.formaToAdjust_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e instanceof B.FrameForma&&E.opt(E.as(e,B.FrameForma),(function(e){return e.childAt(0)instanceof $.ImageForma}))}))),B.FrameForma),null!=this.formaToAdjust_},setUpActionSequence:function(e,t,o){if(XCTAssertNotNil(this.formaToAdjust_),null!=this.formaToAdjust_){var n=E.as(E.opt(this.formaToAdjust_,(function(e){return e.childAt(0)})),$.ImageForma);this.oldValue_=E.opt(E.opt(n,(function(e){return e.style.adjustments})),(function(e){return e.saturation})),o.controller.selection.replaceSelection(this.formaToAdjust_)}},validateAfterActionSequence:function(e,t){var o;if(null!=this.formaToAdjust_){var n=E.as(E.opt(this.formaToAdjust_,(function(e){return e.childAt(0)})),$.ImageForma);XCTAssertNotNil(n);var r=E.as(E.opt(n,(function(e){return e.style})),H.ImageStyle);XCTAssertNotNil(r),XCTAssertEqual(100,(o=E.opt(E.opt(r,(function(e){return e.adjustments})),(function(e){return e.saturation})))||null!=o?o:0)}},validateAfterUndo:function(e,t){var o,n;if(null!=this.formaToAdjust_){var r=E.as(E.opt(this.formaToAdjust_,(function(e){return e.childAt(0)})),$.ImageForma);XCTAssertNotNil(r);var i=E.as(E.opt(r,(function(e){return e.style})),H.ImageStyle);XCTAssertNotNil(i),XCTAssertEqual((o=this.oldValue_)||null!=o?o:0,(n=E.opt(E.opt(i,(function(e){return e.adjustments})),(function(e){return e.saturation})))||null!=n?n:0)}},validateAfterRedo:function(e,t){var o;if(null!=this.formaToAdjust_){var n=E.as(E.opt(this.formaToAdjust_,(function(e){return e.childAt(0)})),$.ImageForma);XCTAssertNotNil(n);var r=E.as(E.opt(n,(function(e){return e.style})),H.ImageStyle);XCTAssertNotNil(r),XCTAssertEqual(100,(o=E.opt(E.opt(r,(function(e){return e.adjustments})),(function(e){return e.saturation})))||null!=o?o:0),this.formaToAdjust_=null}}}}),l),b.SetImageAsFloatingTest=(c=function(){this.actionSequence_SetAsFloating=[function(){return new j.SetImageAsFloatingAction}],this.frameForma_=null,D.ActionTestBase.call(this)},E.defineClass({name:"SetImageAsFloatingTest",ctor:c,superName:"ActionTestBase",props:{tearDown:function(){this.frameForma_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.frameForma_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e.isBackgroundImage()}))),B.FrameForma),null!=this.frameForma_},setUpActionSequence:function(e,t,o){XCTAssertFalse(this.frameForma_.controller.floating),o.controller.selection.replaceSelection(this.frameForma_)},validateAfterActionSequence:function(e,t){XCTAssertTrue(this.frameForma_.controller.floating)},validateAfterUndo:function(e,t){XCTAssertFalse(this.frameForma_.controller.floating)},validateAfterRedo:function(e,t){XCTAssertTrue(this.frameForma_.controller.floating)}}}),c),b.SetImageAsBackgroundTest=(u=function(){this.actionSequence_SetAsBackground=[function(){return new j.SetImageAsBackgroundAction}],this.oneFrameForma_=null,this.frameForma_=null,D.ActionTestBase.call(this)},E.defineClass({name:"SetImageAsBackgroundTest",ctor:u,superName:"ActionTestBase",props:{tearDown:function(){this.oneFrameForma_=null,this.frameForma_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.oneFrameForma_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e.isImage()}))),B.FrameForma),null!=this.oneFrameForma_},prepareDocument:function(e,t){var o=[];return this.frameForma_=E.as(E.last(this.allSelectableFormae(e,(function(e){return e.isImage()&&!e.isBackgroundImage()}))),B.FrameForma),null==this.frameForma_&&(this.frameForma_=this.oneFrameForma_,e.controller.selection.replaceSelection(this.frameForma_),o.push((function(){return new j.SetImageAsFloatingAction}))),x.CorePromise.resolve(o)},setUpActionSequence:function(e,t,o){XCTAssertTrue(this.frameForma_.controller.floating),o.controller.selection.replaceSelection(this.frameForma_)},validateAfterActionSequence:function(e,t){XCTAssertFalse(this.frameForma_.controller.floating)},validateAfterUndo:function(e,t){XCTAssertTrue(this.frameForma_.controller.floating)},validateAfterRedo:function(e,t){XCTAssertFalse(this.frameForma_.controller.floating)}}}),u),b.CropToRatioTest=(p=function(){this.actionSequence_CropToRatio=[],this.oneFrameForma_=null,this.frameForma_=null,this.imageForma_=null,this.initialRatio_=1,this.cropRatio_=1,D.ActionTestBase.call(this)},E.defineClass({name:"CropToRatioTest",ctor:p,superName:"ActionTestBase",props:{tearDown:function(){this.oneFrameForma_=null,this.frameForma_=null,this.imageForma_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.oneFrameForma_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e.isImage()}))),B.FrameForma),null!=this.oneFrameForma_},populateActionSequence:function(e,t,o){var n=this;return x.CorePromise.resolve([function(){return n.initialRatio_=n.frameForma_.bounds.aspectRatio,n.cropRatio_=n.initialRatio_<1?4/3:3/4,new j.CropImageToRatioAction(n.imageForma_,n.cropRatio_,null)}])},prepareDocument:function(e,t){var o=[];return this.frameForma_=E.as(E.last(this.allSelectableFormae(e,(function(e){return e.isImage()&&!e.isBackgroundImage()}))),B.FrameForma),null==this.frameForma_&&(this.frameForma_=this.oneFrameForma_,e.controller.selection.replaceSelection(this.frameForma_),o.push((function(){return new j.SetImageAsFloatingAction}))),this.imageForma_=U.ImageFacade.getImageFormaForForma(this.frameForma_),x.CorePromise.resolve(o)},validateAfterActionSequence:function(e,t){var o=this.frameForma_.bounds.aspectRatio;XCTAssertEqual(o,this.cropRatio_,.001)},validateAfterUndo:function(e,t){var o=this.frameForma_.bounds.aspectRatio;XCTAssertEqual(o,this.initialRatio_,.001)},validateAfterRedo:function(e,t){var o=this.frameForma_.bounds.aspectRatio;XCTAssertEqual(o,this.cropRatio_,.001)}}}),p),b.ApplyShapeMaskTest=(d=function(){this.actionSequence_ApplyShapeMask=[],this.oneFrameForma_=null,this.frameForma_=null,D.ActionTestBase.call(this)},E.defineClass({name:"ApplyShapeMaskTest",ctor:d,superName:"ActionTestBase",props:{tearDown:function(){this.oneFrameForma_=null,this.frameForma_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.oneFrameForma_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e.isImage()}))),B.FrameForma),null!=this.oneFrameForma_},populateActionSequence:function(e,t,o){var n=this;return x.CorePromise.resolve([function(){return new j.ApplyShapeMaskToImageAction(n.frameForma_,"diamond")}])},prepareDocument:function(e,t){var o=this,n=[];return this.frameForma_=E.as(E.last(this.allSelectableFormae(e,(function(e){return e.isImage()&&!e.isBackgroundImage()}))),B.FrameForma),null==this.frameForma_&&(this.frameForma_=this.oneFrameForma_,e.controller.selection.replaceSelection(this.frameForma_),n.push((function(){return new j.SetImageAsFloatingAction}))),U.ImageFacade.formaHasMask(this.frameForma_)&&n.push((function(){return new j.ApplyShapeMaskToImageAction(o.frameForma_)})),x.CorePromise.resolve(n)},validateAfterActionSequence:function(e,t){var o;if(o=E.as(E.opt(this.frameForma_,(function(e){return e.controller})),L.FrameController)){var n=E.as(o.mask,Z.ShapeForma);XCTAssertNotNil(n),XCTAssertEqual(n.shapeLibraryID,"diamond")}},validateAfterUndo:function(e,t){var o;(o=E.as(E.opt(this.frameForma_,(function(e){return e.controller})),L.FrameController))&&XCTAssertNil(o.mask)},validateAfterRedo:function(e,t){var o;if(o=E.as(E.opt(this.frameForma_,(function(e){return e.controller})),L.FrameController)){var n=E.as(o.mask,Z.ShapeForma);XCTAssertNotNil(n),XCTAssertEqual(n.shapeLibraryID,"diamond")}}}}),d),b.ApplyCutoutTest=(h=function(){this.actionSequence_ApplyCutout=[],this.oneFrameForma_=null,this.frameForma_=null,D.ActionTestBase.call(this)},E.defineClass({name:"ApplyCutoutTest",ctor:h,superName:"ActionTestBase",props:{tearDown:function(){this.oneFrameForma_=null,this.frameForma_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.oneFrameForma_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e.isImage()}))),B.FrameForma),null!=this.oneFrameForma_},populateActionSequence:function(e,t,o){var n=this,r=X.ImageCutoutLibrary.getImageCutout(X.CutoutMode.BackgroundRemoval);return x.CorePromise.resolve([function(){return new j.SetImageCutoutAction(n.frameForma_,r,X.ImageCutoutModelLibrary.CURRENT_MODEL)}])},prepareDocument:function(e,t){var o=this,n=[];return this.frameForma_=E.as(E.last(this.allSelectableFormae(e,(function(e){return e.isImage()&&!e.isBackgroundImage()}))),B.FrameForma),null==this.frameForma_&&(this.frameForma_=this.oneFrameForma_,e.controller.selection.replaceSelection(this.frameForma_),n.push((function(){return new j.SetImageAsFloatingAction}))),U.ImageFacade.getCutoutModeForForma(this.frameForma_)!=X.CutoutMode.Off&&n.push((function(){return new j.SetImageCutoutAction(o.frameForma_,new X.CutoutStyle(X.CutoutMode.Off),void 0,void 0,60)})),x.CorePromise.resolve(n)},validateAfterActionSequence:function(e,t){var o;(o=E.as(E.opt(this.frameForma_,(function(e){return e.controller})),L.FrameController))&&(XCTAssertNotNil(o.cutout),XCTAssertEqual(U.ImageFacade.getCutoutModeForForma(this.frameForma_),X.CutoutMode.BackgroundRemoval))},validateAfterUndo:function(e,t){var o;(o=E.as(E.opt(this.frameForma_,(function(e){return e.controller})),L.FrameController))&&XCTAssertNil(o.cutout)},validateAfterRedo:function(e,t){var o;(o=E.as(E.opt(this.frameForma_,(function(e){return e.controller})),L.FrameController))&&(XCTAssertNotNil(o.cutout),XCTAssertEqual(U.ImageFacade.getCutoutModeForForma(this.frameForma_),X.CutoutMode.BackgroundRemoval))}}}),h),b.RemoveCutoutTest=(f=function(){this.actionSequence_RemoveCutout=[],this.oneFrameForma_=null,this.frameForma_=null,D.ActionTestBase.call(this)},E.defineClass({name:"RemoveCutoutTest",ctor:f,superName:"ActionTestBase",props:{tearDown:function(){this.oneFrameForma_=null,this.frameForma_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.oneFrameForma_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e.isImage()}))),B.FrameForma),null!=this.oneFrameForma_},populateActionSequence:function(e,t,o){var n=this;return x.CorePromise.resolve([function(){return new j.SetImageCutoutAction(n.frameForma_,new X.CutoutStyle(X.CutoutMode.Off))}])},prepareDocument:function(e,t){var o=this,n=[];if(this.frameForma_=E.as(E.last(this.allSelectableFormae(e,(function(e){return e.isImage()&&!e.isBackgroundImage()}))),B.FrameForma),null==this.frameForma_&&(this.frameForma_=this.oneFrameForma_,e.controller.selection.replaceSelection(this.frameForma_),n.push((function(){return new j.SetImageAsFloatingAction}))),U.ImageFacade.getCutoutModeForForma(this.frameForma_)!=X.CutoutMode.BackgroundRemoval){var r=X.ImageCutoutLibrary.getImageCutout(X.CutoutMode.BackgroundRemoval);n.push((function(){return new j.SetImageCutoutAction(o.frameForma_,r)}))}return x.CorePromise.resolve(n)},validateAfterActionSequence:function(e,t){var o;(o=E.as(E.opt(this.frameForma_,(function(e){return e.controller})),L.FrameController))&&(XCTAssertNil(o.cutout),XCTAssertNotNil(U.ImageFacade.getCutoutMaskFormaForForma(this.frameForma_)))},validateAfterUndo:function(e,t){var o;(o=E.as(E.opt(this.frameForma_,(function(e){return e.controller})),L.FrameController))&&(XCTAssertNotNil(o.cutout),XCTAssertEqual(U.ImageFacade.getCutoutModeForForma(this.frameForma_),X.CutoutMode.BackgroundRemoval))},validateAfterRedo:function(e,t){var o;(o=E.as(E.opt(this.frameForma_,(function(e){return e.controller})),L.FrameController))&&(XCTAssertNil(o.cutout),XCTAssertNotNil(U.ImageFacade.getCutoutMaskFormaForForma(this.frameForma_)))}}}),f),b.AllowFreeformCropTest=(m=function(){this.actionSequence_AllowFreeformCrop=[],this.oneFrameForma_=null,this.frameForma_=null,D.ActionTestBase.call(this)},E.defineClass({name:"AllowFreeformCropTest",ctor:m,superName:"ActionTestBase",props:{tearDown:function(){this.oneFrameForma_=null,this.frameForma_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.oneFrameForma_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e.isImage()}))),B.FrameForma),null!=this.oneFrameForma_},populateActionSequence:function(e,t,o){var n=this;return x.CorePromise.resolve([function(){return new j.SetImageCropToFreeformAction(n.frameForma_)}])},prepareDocument:function(e,t){var o=this,n=[];return this.frameForma_=E.as(E.last(this.allSelectableFormae(e,(function(e){return e.isImage()&&!e.isBackgroundImage()}))),B.FrameForma),null==this.frameForma_&&(this.frameForma_=this.oneFrameForma_,e.controller.selection.replaceSelection(this.frameForma_),n.push((function(){return new j.SetImageAsFloatingAction}))),U.ImageFacade.formaHasMask(this.frameForma_)||n.push((function(){return new j.ApplyShapeMaskToImageAction(o.frameForma_,"diamond")})),x.CorePromise.resolve(n)},validateAfterActionSequence:function(e,t){XCTAssertTrue(U.ImageFacade.usesFreeformCropPreset(this.frameForma_)),XCTAssertFalse(U.ImageFacade.formaHasShapeMask(this.frameForma_))},validateAfterUndo:function(e,t){XCTAssertFalse(U.ImageFacade.usesFreeformCropPreset(this.frameForma_)),XCTAssertTrue(U.ImageFacade.formaHasShapeMask(this.frameForma_))},validateAfterRedo:function(e,t){XCTAssertTrue(U.ImageFacade.usesFreeformCropPreset(this.frameForma_)),XCTAssertFalse(U.ImageFacade.formaHasShapeMask(this.frameForma_))}}}),m),b.EnterCropModeTest=(g=function(){this.actionSequence_EnterCropMode=[],this.oneFrameForma_=null,this.frameForma_=null,D.ActionTestBase.call(this)},E.defineClass({name:"EnterCropModeTest",ctor:g,superName:"ActionTestBase",props:{tearDown:function(){this.oneFrameForma_=null,this.frameForma_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.oneFrameForma_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e.isImage()}))),B.FrameForma),null!=this.oneFrameForma_},populateActionSequence:function(e,t,o){var n=this;return x.CorePromise.resolve([function(){return new j.EnterCropModeAction(n.frameForma_)}])},prepareDocument:function(e,t){var o=this,n=[];return this.frameForma_=E.as(E.last(this.allSelectableFormae(e,(function(e){return e.isImage()&&!e.isBackgroundImage()}))),B.FrameForma),null==this.frameForma_&&(this.frameForma_=this.oneFrameForma_,e.controller.selection.replaceSelection(this.frameForma_),n.push((function(){return new j.SetImageAsFloatingAction})),n.push((function(){var e=o.frameForma_.bounds.aspectRatio<1?4/3:3/4;return new j.CropImageToRatioAction(o.frameForma_,e,null)}))),x.CorePromise.resolve(n)},validateAfterActionSequence:function(e,t){var o,n=null;if(o=E.opt(this.frameForma_,(function(e){return e.parent})))for(var r=E.iter(o.visitAsArray(O.FormaTraversal.JustChildren));!r.done;r.next()){var i=r.value;i.hasIntent(O.Forma.INTENT_TEMP_IMAGE_CROP)&&(n=i)}XCTAssertNotNil(n)},validateAfterUndo:function(e,t){var o,n=null;if(o=E.opt(this.frameForma_,(function(e){return e.parent})))for(var r=E.iter(o.visitAsArray(O.FormaTraversal.JustChildren));!r.done;r.next()){var i=r.value;i.hasIntent(O.Forma.INTENT_TEMP_IMAGE_CROP)&&(n=i)}XCTAssertNil(n)},validateAfterRedo:function(e,t){var o,n=null;if(o=E.opt(this.frameForma_,(function(e){return e.parent})))for(var r=E.iter(o.visitAsArray(O.FormaTraversal.JustChildren));!r.done;r.next()){var i=r.value;i.hasIntent(O.Forma.INTENT_TEMP_IMAGE_CROP)&&(n=i)}XCTAssertNotNil(n)}}}),g),b.ExitCropModeTest=(y=function(){this.actionSequence_ExitCropMode=[],this.oneFrameForma_=null,this.frameForma_=null,D.ActionTestBase.call(this)},E.defineClass({name:"ExitCropModeTest",ctor:y,superName:"ActionTestBase",props:{tearDown:function(){this.oneFrameForma_=null,this.frameForma_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.oneFrameForma_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e.isImage()}))),B.FrameForma),null!=this.oneFrameForma_},populateActionSequence:function(e,t,o){return x.CorePromise.resolve([function(){return new j.ExitCropModeAction}])},prepareDocument:function(e,t){var o=this,n=[];return this.frameForma_=E.as(E.last(this.allSelectableFormae(e,(function(e){return e.isImage()&&!e.isBackgroundImage()}))),B.FrameForma),null==this.frameForma_&&(this.frameForma_=this.oneFrameForma_,e.controller.selection.replaceSelection(this.frameForma_),n.push((function(){return new j.SetImageAsFloatingAction})),n.push((function(){var e=o.frameForma_.bounds.aspectRatio<1?4/3:3/4;return new j.CropImageToRatioAction(o.frameForma_,e,null)})),n.push((function(){return new j.EnterCropModeAction(o.frameForma_)}))),x.CorePromise.resolve(n)}}}),y),b.AddHiddenImageToGridTest=(T=function(){this.actionSequence_AddHidden=[],this.oneFrameForma_=null,this.frameForma_=null,this.imageForma_=null,D.ActionTestBase.call(this)},E.defineClass({name:"AddHiddenImageToGridTest",ctor:T,superName:"ActionTestBase",props:{tearDown:function(){this.oneFrameForma_=null,this.frameForma_=null,this.imageForma_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.oneFrameForma_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e.isImage()}))),B.FrameForma),null!=this.oneFrameForma_},populateActionSequence:function(e,t,o){var n=this;return x.CorePromise.resolve([function(){return new j.AddHiddenImageToGridAction([n.imageForma_])}])},prepareDocument:function(e,t){var o=this,n=[];return this.frameForma_=E.as(E.last(this.allSelectableFormae(e,(function(e){return e.isImage()&&!e.isBackgroundImage()}))),B.FrameForma),null==this.frameForma_&&(this.frameForma_=this.oneFrameForma_,e.controller.selection.replaceSelection(this.frameForma_),n.push((function(){return new j.SetImageAsFloatingAction}))),this.imageForma_=U.ImageFacade.getImageFormaForForma(this.frameForma_),n.push((function(){return new W.SetOpacityAction(0,[o.imageForma_])})),x.CorePromise.resolve(n)},validateAfterActionSequence:function(e,t){XCTAssertFalse(this.frameForma_.controller.floating),XCTAssertEqual(this.imageForma_.style.opacity,1)},validateAfterUndo:function(e,t){XCTAssertTrue(this.frameForma_.controller.floating),XCTAssertEqual(this.imageForma_.style.opacity,0)},validateAfterRedo:function(e,t){XCTAssertFalse(this.frameForma_.controller.floating),XCTAssertEqual(this.imageForma_.style.opacity,1)}}}),T),b.SetBlendScreenIconTest=(A=function(){this.actionSequence_ApplyBlend=[],this.testBlendMode_=G.FormaBlendMode.Screen,D.ActionTestBase.call(this)},E.defineClass({name:"SetBlendScreenIconTest",ctor:A,superName:"ActionTestBase",props:{iconForma:{get:function(){return E.first(E.opt(E.as(this.getPrepActionResult(0),N.FormaActionResult),(function(e){return e.formae})))}},prepareDocument:function(e,t){var o,n=(o=this.urlForAsset("dog1.svg"))||null!=o?o:"";return x.CorePromise.resolve([function(){return new k.AddIconContentAction(n,z.MediaMetadata.init_4d41(),null,void 0,void 0,null)}])},populateActionSequence:function(e,t,o){var n=this;return x.CorePromise.resolve(e.concat([function(){return new W.SetBlendModeAction(n.testBlendMode_,[n.iconForma])}]))},validateAfterActionSequence:function(e,t){var o=E.opt(E.opt(this.iconForma,(function(e){return e.style})),(function(e){return e.blendMode}));XCTAssertEqual(o,this.testBlendMode_)},validateAfterUndo:function(e,t){var o=E.opt(E.opt(this.iconForma,(function(e){return e.style})),(function(e){return e.blendMode}));XCTAssertEqual(o,G.FormaBlendMode.Normal)},validateAfterRedo:function(e,t){var o=E.opt(E.opt(this.iconForma,(function(e){return e.style})),(function(e){return e.blendMode}));XCTAssertEqual(o,this.testBlendMode_)}}}),A),b.SetBlendMultiplyIconTest=(C=function(){this.actionSequence_ApplyBlend=[],this.testBlendMode_=G.FormaBlendMode.Multiply,D.ActionTestBase.call(this)},E.defineClass({name:"SetBlendMultiplyIconTest",ctor:C,superName:"ActionTestBase",props:{iconForma:{get:function(){return E.first(E.opt(E.as(this.getPrepActionResult(0),N.FormaActionResult),(function(e){return e.formae})))}},prepareDocument:function(e,t){var o,n=(o=this.urlForAsset("dog1.svg"))||null!=o?o:"";return x.CorePromise.resolve([function(){return new k.AddIconContentAction(n,z.MediaMetadata.init_4d41(),null,void 0,void 0,null)}])},populateActionSequence:function(e,t,o){var n=this;return x.CorePromise.resolve(e.concat([function(){return new W.SetBlendModeAction(n.testBlendMode_,[n.iconForma])}]))},validateAfterActionSequence:function(e,t){var o=E.opt(E.opt(this.iconForma,(function(e){return e.style})),(function(e){return e.blendMode}));XCTAssertEqual(o,this.testBlendMode_)},validateAfterUndo:function(e,t){var o=E.opt(E.opt(this.iconForma,(function(e){return e.style})),(function(e){return e.blendMode}));XCTAssertEqual(o,G.FormaBlendMode.Normal)},validateAfterRedo:function(e,t){var o=E.opt(E.opt(this.iconForma,(function(e){return e.style})),(function(e){return e.blendMode}));XCTAssertEqual(o,this.testBlendMode_)}}}),C),b.SetBlendScreenImageTest=(_=function(){this.actionSequence_ApplyBlend=[],this.imageURL_="",this.imageMimeType_="",this.imageWidth_=0,this.imageHeight_=0,this.testBlendMode_=G.FormaBlendMode.Screen,this.rootForma_=null,D.ActionTestBase.call(this)},E.defineClass({name:"SetBlendScreenImageTest",ctor:_,superName:"ActionTestBase",props:{imageForma:{get:function(){return E.opt(E.as(E.first(E.opt(E.as(this.getPrepActionResult(0),N.FormaActionResult),(function(e){return e.formae}))),B.FrameForma),(function(e){return e.image}))}},frameForma:{get:function(){return E.as(E.first(E.opt(E.as(this.getPrepActionResult(0),N.FormaActionResult),(function(e){return e.formae}))),B.FrameForma)}},hasImage:function(){var e=this,t=!1;return E.opt(this.rootForma_,(function(o){return o.visitAll(O.FormaTraversal.PreOrder,(function(o){var n,r;(n=E.as(o,$.ImageForma))&&(r=n.contentNode)&&r.url==e.imageURL_&&r.mimeType==e.imageMimeType_&&r.pixelWidth==e.imageWidth_&&r.pixelHeight==e.imageHeight_&&(t=!0)}))})),t},prepareDocument:function(e,t){var o=this,n=e.firstPage;return this.imageDataForAsset("dog1.jpeg").then((function(e){var t;if(t=E.as(e,q.ActionTestImageData)){var r=new M.AddFormaParams(N.ControllerSettingsBehaviorEnum.IgnoreControllerSettings,!0,null,M.FloatingImageStrategy.Always);return o.imageURL_=t.url,o.imageMimeType_="image/jpeg",o.imageWidth_=t.width,o.imageHeight_=t.height,x.CorePromise.resolve([function(){return new k.AddImageContentAction(n,o.imageURL_,o.imageMimeType_,o.imageWidth_,o.imageHeight_,!1,z.MediaMetadata.init_4d41(),null,null,r)}])}return XCTFail("Could not get image data for SetBlendScreenImageTest"),x.CorePromise.resolve([])}))},populateActionSequence:function(e,t,o){var n=this;return x.CorePromise.resolve(e.concat([function(){return new W.SetBlendModeAction(n.testBlendMode_,[n.frameForma])}]))},setUpActionSequence:function(e,t,o){this.rootForma_=o.firstPage.root},validateAfterActionSequence:function(e,t){XCTAssertTrue(this.hasImage());var o=E.opt(E.opt(this.frameForma,(function(e){return e.style})),(function(e){return e.blendMode}));XCTAssertEqual(o,this.testBlendMode_)},validateAfterUndo:function(e,t){var o=E.opt(E.opt(this.frameForma,(function(e){return e.style})),(function(e){return e.blendMode}));XCTAssertEqual(o,G.FormaBlendMode.Normal)},validateAfterRedo:function(e,t){XCTAssertTrue(this.hasImage());var o=E.opt(E.opt(this.frameForma,(function(e){return e.style})),(function(e){return e.blendMode}));XCTAssertEqual(o,this.testBlendMode_)}}}),_),b.SetBlendMultiplyImageTest=(S=function(){this.actionSequence_ApplyBlend=[],this.imageURL_="",this.imageMimeType_="",this.imageWidth_=0,this.imageHeight_=0,this.testBlendMode_=G.FormaBlendMode.Multiply,this.rootForma_=null,D.ActionTestBase.call(this)},E.defineClass({name:"SetBlendMultiplyImageTest",ctor:S,superName:"ActionTestBase",props:{imageForma:{get:function(){return E.opt(E.as(E.first(E.opt(E.as(this.getPrepActionResult(0),N.FormaActionResult),(function(e){return e.formae}))),B.FrameForma),(function(e){return e.image}))}},frameForma:{get:function(){return E.as(E.first(E.opt(E.as(this.getPrepActionResult(0),N.FormaActionResult),(function(e){return e.formae}))),B.FrameForma)}},hasImage:function(){var e=this,t=!1;return E.opt(this.rootForma_,(function(o){return o.visitAll(O.FormaTraversal.PreOrder,(function(o){var n,r;(n=E.as(o,$.ImageForma))&&(r=n.contentNode)&&r.url==e.imageURL_&&r.mimeType==e.imageMimeType_&&r.pixelWidth==e.imageWidth_&&r.pixelHeight==e.imageHeight_&&(t=!0)}))})),t},prepareDocument:function(e,t){var o=this,n=e.firstPage;return this.imageDataForAsset("dog1.jpeg").then((function(e){var t;if(t=E.as(e,q.ActionTestImageData)){var r=new M.AddFormaParams(N.ControllerSettingsBehaviorEnum.IgnoreControllerSettings,!0,null,M.FloatingImageStrategy.Always);return o.imageURL_=t.url,o.imageMimeType_="image/jpeg",o.imageWidth_=t.width,o.imageHeight_=t.height,x.CorePromise.resolve([function(){return new k.AddImageContentAction(n,o.imageURL_,o.imageMimeType_,o.imageWidth_,o.imageHeight_,!1,z.MediaMetadata.init_4d41(),null,null,r)}])}return XCTFail("Could not get image data for SetBlendMultiplyImageTest"),x.CorePromise.resolve([])}))},populateActionSequence:function(e,t,o){var n=this;return x.CorePromise.resolve(e.concat([function(){return new W.SetBlendModeAction(n.testBlendMode_,[n.frameForma])}]))},setUpActionSequence:function(e,t,o){this.rootForma_=o.firstPage.root},validateAfterActionSequence:function(e,t){XCTAssertTrue(this.hasImage());var o=E.opt(E.opt(this.frameForma,(function(e){return e.style})),(function(e){return e.blendMode}));XCTAssertEqual(o,this.testBlendMode_)},validateAfterUndo:function(e,t){var o=E.opt(E.opt(this.frameForma,(function(e){return e.style})),(function(e){return e.blendMode}));XCTAssertEqual(o,G.FormaBlendMode.Normal)},validateAfterRedo:function(e,t){XCTAssertTrue(this.hasImage());var o=E.opt(E.opt(this.frameForma,(function(e){return e.style})),(function(e){return e.blendMode}));XCTAssertEqual(o,this.testBlendMode_)}}}),S),b.UpdateCutoutMaskTest=(P=function(){this.actionSequence_UpdateCutoutMask=[],this.frameForma_=null,D.ActionTestBase.call(this)},E.defineClass({name:"UpdateCutoutMaskTest",ctor:P,superName:"ActionTestBase",props:{tearDown:function(){this.frameForma_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.frameForma_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e.isImage()}))),B.FrameForma),null!=this.frameForma_},populateActionSequence:function(e,t,o){var n;return(n=this.frameForma_)?this.imageDataForAsset("mask1.png").then((function(e){var t;return(t=E.as(e,q.ActionTestImageData))?x.CorePromise.resolve([function(){return new j.UpdateCutoutMaskAction(n,void 0,t.url)}]):null})):x.CorePromise.reject("No frame")},prepareDocument:function(e,t){var o=this,n=E.clone(b.EnterRefineCutoutModeTest.prepareEnterRefineCutout(this.frameForma_));return n.push((function(){return new j.EnterRefineCutoutModeAction(o.frameForma_)})),x.CorePromise.resolve(n)}}}),P),b.EnterRefineCutoutModeTest=(F=function(){this.actionSequence_EnterRefineCutoutMode=[],this.frameForma_=null,D.ActionTestBase.call(this)},E.defineClass({name:"EnterRefineCutoutModeTest",ctor:F,superName:"ActionTestBase",statics:{prepareEnterRefineCutout:function(e){var t,o,n,r,i=[];if((t=e)&&(o=t.controller)&&(n=t.page.document)&&(r=n.controller)){r.selection.replaceSelection(t),o.floating||i.push((function(){return new j.SetImageAsFloatingAction}));var a=X.ImageCutoutLibrary.getImageCutout(X.CutoutMode.BackgroundRemoval);i.push((function(){return new j.SetImageCutoutAction(t,a,X.ImageCutoutModelLibrary.CURRENT_MODEL,void 0,60)})),i.push((function(){return new j.ApplyShapeMaskToImageAction(t,"circle")})),i.push((function(){var e=Q.TheoColor.init_5344(new J.SolidColor(1,0,1,1));return new I.ApplyColorAction([t],[e])})),i.push((function(){return new W.SetBlendModeAction(G.FormaBlendMode.Screen,[t])})),i.push((function(){return new j.SetImageFilterAction(n.firstPage.imageFilterLibrary.getImageStyle(H.ImageStyle.NAME_DARKEN))})),i.push((function(){return new W.SetOpacityAction(.33,[t])})),i.push((function(){return new Y.SendForwardBackwardAction(V.ZOrderEnum.Back,[t])}))}return i}},props:{tearDown:function(){this.frameForma_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.frameForma_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e.isImage()}))),B.FrameForma),null!=this.frameForma_},populateActionSequence:function(e,t,o){var n;return(n=this.frameForma_)?x.CorePromise.resolve([function(){return new j.EnterRefineCutoutModeAction(n)}]):x.CorePromise.reject("No frame")},prepareDocument:function(e,t){return x.CorePromise.resolve(F.prepareEnterRefineCutout(this.frameForma_))}}}),F),b.ExitRefineCutoutModeTest=(v=function(){this.actionSequence_ExitRefineCutoutMode=[],this.frameForma_=null,D.ActionTestBase.call(this)},E.defineClass({name:"ExitRefineCutoutModeTest",ctor:v,superName:"ActionTestBase",props:{tearDown:function(){this.frameForma_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.frameForma_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e.isImage()}))),B.FrameForma),null!=this.frameForma_},populateActionSequence:function(e,t,o){var n;return(n=this.frameForma_)?x.CorePromise.resolve([function(){return new j.ExitRefineCutoutModeAction(n,!1)}]):x.CorePromise.reject("No frame")},prepareDocument:function(e,t){var o=this,n=E.clone(b.EnterRefineCutoutModeTest.prepareEnterRefineCutout(this.frameForma_));return n.push((function(){return new j.EnterRefineCutoutModeAction(o.frameForma_)})),x.CorePromise.resolve(n)}}}),v),b.ToggleRefineCutoutFullImageActionTest=(R=function(){this.actionSequence_ToggleRefineCutoutFullImage=[],this.frameForma_=null,D.ActionTestBase.call(this)},E.defineClass({name:"ToggleRefineCutoutFullImageActionTest",ctor:R,superName:"ActionTestBase",props:{tearDown:function(){this.frameForma_=null,D.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.frameForma_=E.as(E.last(this.allSelectableFormae(o,(function(e){return e.isImage()}))),B.FrameForma),null!=this.frameForma_},populateActionSequence:function(e,t,o){var n;return(n=this.frameForma_)?x.CorePromise.resolve([function(){return new K.NudgeAction(new ee.TheoPoint(10,0),[n])},function(){return new K.NudgeAction(new ee.TheoPoint(-10,0),[n])},function(){return new j.ToggleRefineCutoutFullImageAction(n)},function(){return new K.NudgeAction(new ee.TheoPoint(10,0),[n])},function(){return new K.NudgeAction(new ee.TheoPoint(-10,0),[n])}]):x.CorePromise.reject("No frame")},prepareDocument:function(e,t){var o;if(o=this.frameForma_){var n=E.clone(b.EnterRefineCutoutModeTest.prepareEnterRefineCutout(o));return n.push((function(){return new j.EnterRefineCutoutModeAction(o)})),x.CorePromise.resolve(n)}return x.CorePromise.reject("No frame")}}}),R)},brBl:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"ImageFilter":{"className":"ImageFilter","type":"object","properties":{"kind":{"type":"string"},"name":{"type":"string","default":""}}},"ImageFilterTypes":{"oneOf":[{"$ref":"#/definitions/AlphaBlendFilter"},{"$ref":"#/definitions/CompositeFilter"}]},"AlphaBlendFilter":{"className":"AlphaBlendFilter","allOf":[{"$ref":"#/definitions/ImageFilter"},{"properties":{"kind":{"enum":["AlphaBlend"]},"mix":{"type":"number"},"filter1":{"$ref":"#/definitions/ImageFilterTypes"},"filter2":{"$ref":"#/definitions/ImageFilterTypes"}},"required":["kind"]}]},"CompositeFilter":{"className":"CompositeFilter","allOf":[{"$ref":"#/definitions/ImageFilter"},{"properties":{"kind":{"enum":["CompositeFilter"]},"mix":{"type":"number","default":1},"blend":{"type":"string","default":"normal"},"grayscale":{"type":"boolean","default":false},"contrast":{"type":"number","default":1},"color-operation":{"type":"string","default":""},"saturation-offset":{"type":"number","default":0},"brightness-offset":{"type":"number","default":0},"blur-radius":{"type":"number","default":0},"reduce-contrast":{"type":"boolean","description":"If true, contrast == 0.5"}},"required":["kind"]}]}}}')},byfQ:function(e,t,o){var n,r,i,a,s,l=t,c=o("oAGj"),u=o("gXiO"),p=o("ascj"),d=o("ZhwN"),h=o("ezSu"),f=o("hgLm"),m=o("sIWg");l.TheoArtworkRenderer=c.defineProtocol("TheoArtworkRenderer",{beginGroup:"() -> Void",endGroup:"() -> Void",beginClipGroup:"(TheoPath) -> Void",endClipGroup:"() -> Void",fill:"(ColorRole, SolidColor) -> Void",stroke:"(ColorRole, SolidColor, Double) -> Void"}),l.TheoArtworkNode=(n=function(e,t){var o;this.type=t,this.uid=(o=e)||null!=o?o:d.GUIDUtils.makeGUID(),u.CoreObject.call(this)},c.defineClass({name:"TheoArtworkNode",ctor:n,superName:"CoreObject",statics:{PROPERTY_UID:"immutable-id",PROPERTY_TYPE:"type",PROPERTY_PATH:"path",PROPERTY_PATHS:"paths",PROPERTY_FILLCOLORROLE:"fill-color-role",PROPERTY_STROKECOLORROLE:"stroke-color-role",PROPERTY_FILLCOLOR:"fill-color",PROPERTY_STROKECOLOR:"stroke-color",PROPERTY_STROKEWIDTH:"stroke-width",PROPERTY_NODES:"stroke-width",PROPERTY_CHILD_NODES:"nodes",PROPERTY_OVERRIDE_BOUNDS:"override-bounds"},props:{bounds:{get:function(){return null}},render:function(e){},forEachChild:function(e){},getHash:function(){return"getHash(TODO)"},clone:function(){return new n(null,"invalid clone")},applySlicing:function(e,t,o,n,r){return this}}}),n),l.TheoArtworkShape=(r=function(){},c.defineClass({name:"TheoArtworkShape",ctor:r,superName:"TheoArtworkNode",statics:{TYPE:{get:function(){return"shape"}},fromPath:function(e){return r.init_d1d0(null,[e],p.ColorRole.FieldPrimary,p.ColorRole.None)}},props:{init_9312:function(e,t){this.fillColorRole_=p.ColorRole.None,this.strokeColorRole_=p.ColorRole.None,this.fillColor_=null,this.strokeColor_=null,this.strokeWidth_=0,this.overrideBounds_=null,this.paths_=c.clone(t),l.TheoArtworkNode.call(this,e,r.TYPE)},init_d1d0:function(e,t,o,n,i,a,s,u){void 0===i&&(i=null),void 0===a&&(a=null),void 0===s&&(s=0),void 0===u&&(u=null),this.paths_=c.clone(t),this.fillColorRole_=o,this.strokeColorRole_=n,this.fillColor_=i,this.strokeColor_=a,this.strokeWidth_=s,this.overrideBounds_=u,l.TheoArtworkNode.call(this,e,r.TYPE)},fillColorRole:{get:function(){return this.fillColorRole_}},fillColor:{get:function(){return this.fillColor_}},strokeColorRole:{get:function(){return this.strokeColorRole_}},strokeColor:{get:function(){return this.strokeColor_}},strokeWidth:{get:function(){return this.strokeWidth_}},paths:{get:function(){return this.paths_}},overrideBounds:{get:function(){return this.overrideBounds_}},bounds:{get:function(){if(null!=this.overrideBounds_)return this.overrideBounds_;if(0==this.paths_.length)return m.TheoRect.Zero;for(var e=this.paths_[0].bounds,t=c.iter(this.paths_);!t.done;t.next()){var o=t.value;e=e.unionWith(o.bounds)}return e}},applySlicing:function(e,t,o,n,i){var a=[];if(t!=e&&this.paths_.length>0){for(var s=!0,l=this.paths_[0].pathFillType,u=this.paths_[0].pathStrokeWeight,p=this.paths_[0].pathEndcapType,d=this.paths_[0].pathJoinType,m=this.paths_[0].pathMiterLimit,g=c.iter(this.paths_);!g.done;g.next())if((_=g.value).pathFillType!=l||_.pathStrokeWeight!=u||_.pathEndcapType!=p||_.pathJoinType!=d||_.pathMiterLimit!=m){s=!1;break}if(s){for(var y=f.TheoPathBuilder.init_31cf(l,p,d,u*n,m),T=new h.NineSlicingFilter(y,o||e,e,t,n,i),A=c.iter(this.paths_);!A.done;A.next())(_=A.value).render(T);a=[y.simplestForm]}else for(var C=c.iter(this.paths_);!C.done;C.next()){var _=C.value;y=f.TheoPathBuilder.init_31cf(_.pathFillType,_.pathEndcapType,_.pathJoinType,_.pathStrokeWeight*n,_.pathMiterLimit),T=new h.NineSlicingFilter(y,o||e,e,t,n,i),_.render(T),a.push(y.simplestForm)}}return r.init_d1d0(null,a,this.fillColorRole_,this.strokeColorRole_,this.fillColor_,this.strokeColor_,this.strokeWidth_,null)},render:function(e){for(var t=c.iter(this.paths_);!t.done;t.next()){var o=t.value;if(o.render(e),o.pathFillType!=f.TheoPath.PATHFILL_NONE)e.fill(this.fillColorRole_!=p.ColorRole.None?this.fillColorRole_:p.ColorRole.FieldPrimary,this.fillColor_);else if(o.pathStrokeWeight>0){var n=null!=this.strokeColor_?this.strokeColor_:this.fillColor_,r=this.strokeColorRole_!=p.ColorRole.None?this.strokeColorRole_:p.ColorRole.FieldPrimary;e.stroke(r,n,o.pathStrokeWeight)}}},cloneWithBounds:function(e){return r.init_d1d0(null,this.paths_,this.fillColorRole_,this.strokeColorRole_,this.fillColor_,this.strokeColor_,this.strokeWidth_,e)},clone:function(){return r.init_d1d0(null,this.paths_,this.fillColorRole_,this.strokeColorRole_,this.fillColor_,this.strokeColor_,this.strokeWidth_,this.overrideBounds_)}}}),r),l.TheoArtworkGroup=(i=function e(t,o,n){void 0===n&&(n=e.TYPE),this.children_=c.clone(o),l.TheoArtworkNode.call(this,t,n)},c.defineClass({name:"TheoArtworkGroup",ctor:i,superName:"TheoArtworkNode",statics:{TYPE:{get:function(){return"group"}}},props:{childCount:{get:function(){return this.children_.length}},childAt:function(e){return this.children_[e]},applySlicing:function(e,t,o,n,r){var a=this.children_.map((function(i){return i.applySlicing(e,t,o,n,r)}),this);return new i(null,a)},forEachChild:function(e){for(var t=c.iter(this.children_);!t.done;t.next())e(t.value)},children:{get:function(){return this.children_}},bounds:{get:function(){if(null==this.bounds_)for(var e=c.iter(this.children_);!e.done;e.next()){var t;(t=e.value.bounds)&&(this.bounds_=null==this.bounds_?t:this.bounds_.unionWith(t))}return this.bounds_}},render:function(e){e.beginGroup();for(var t=c.iter(this.children_);!t.done;t.next())t.value.render(e);e.endGroup()},clone:function(){var e=this.children_.map((function(e){return e.clone()}),this);return new i(null,e)}}}),i),l.TheoArtworkClipGroup=(a=function e(t,o,n){this.path_=n,l.TheoArtworkGroup.call(this,t,o,e.TYPE)},c.defineClass({name:"TheoArtworkClipGroup",ctor:a,superName:"TheoArtworkGroup",statics:{TYPE:{get:function(){return"clip-group"}}},props:{path:{get:function(){return this.path_}},applySlicing:function(e,t,o,n,r){if(t!=e){var i=f.TheoPathBuilder.init_d41d(),s=new h.NineSlicingFilter(i,o||e,e,t,n,r);this.path_.render(s);var l=this.children.map((function(i){return i.applySlicing(e,t,o,n,r)}),this);return new a(null,l,i.simplestForm)}return l=this.children.map((function(i){return i.applySlicing(e,t,o,n,r)}),this),new a(null,l,this.path_)},bounds:{get:function(){return this.path_.bounds}},render:function(e){e.beginClipGroup(this.path_),this.forEachChild((function(t){return t.render(e)})),e.endClipGroup()},clone:function(){var e=this.children.map((function(e){return e.clone()}),this);return new a(null,e,this.path_)}}}),a),l.TheoArtworkGroupBuilder=(s=function(){this.children_=[]},c.defineClass({name:"TheoArtworkGroupBuilder",ctor:s,superName:"CoreObject",props:{init_d41d:function(){this.path_=f.TheoPath.emptyPath(),u.CoreObject.call(this)},init_d6fe:function(e){this.path_=e,u.CoreObject.call(this)},appendChild:function(e){this.children_.push(e)},insertChild:function(e,t){this.children_.splice(t,0,e)},removeChild:function(e){c.remove(this.children_,e)},clear:function(){this.children_.splice(0)},group:{get:function(){return new l.TheoArtworkGroup(null,this.children_.concat())}},clipGroup:{get:function(){return new l.TheoArtworkClipGroup(null,this.children_.concat(),this.path_)}}}}),s)},"c/q3":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"ImageAdjustments":{"className":"ImageAdjustments","type":"object","properties":{"blur":{"type":"number"},"sharpness":{"type":"number"},"shadows":{"type":"number"},"highlights":{"type":"number"},"saturation":{"type":"number"},"brightness":{"type":"number"},"exposure":{"type":"number"},"contrast":{"type":"number"},"warmth":{"type":"number"},"tint":{"type":"number"},"fade":{"type":"number"},"vibrance":{"type":"number"}}},"FormaStyleBase":{"type":"object","properties":{"opacity":{"type":"number"},"color-table":{"$ref":"Color.json#/definitions/ColorTable"},"filter":{"$ref":"Filters.json#/definitions/ImageFilterTypes"},"adjustments":{"$ref":"#/definitions/ImageAdjustments"}}},"FormaStyle":{"className":"FormaStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"type":"string","enum":["FormaStyle"]}},"required":["kind"]}]},"FormaStyleTypes":{"oneOf":[{"$ref":"#/definitions/RootStyle"},{"$ref":"#/definitions/ShapeStyle"},{"$ref":"#/definitions/TextStyle"},{"$ref":"#/definitions/ImageStyle"},{"$ref":"#/definitions/VideoStyle"},{"$ref":"#/definitions/LockupStyle"},{"$ref":"#/definitions/GridStyle"},{"$ref":"#/definitions/FormaStyle"}]},"RootStyle":{"className":"RootStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["RootStyle"]},"color":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"}},"required":["kind"]}]},"ShapeStyle":{"className":"ShapeStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["ShapeStyle"]},"colors":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"}},"required":["kind"]}]},"TextStyle":{"className":"TextStyle","allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["TextStyle"]}},"required":["kind"]}]},"ImageStyleBase":{"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"name":{"type":"string","default":"None"},"colors":{"type":"array","items":{"$ref":"Color.json#/definitions/SolidColor"},"description":"Deprecated"},"filter-name":{"type":"string","description":"Deprecated"}}}]},"ImageStyle":{"className":"ImageStyle","allOf":[{"$ref":"#/definitions/ImageStyleBase"},{"properties":{"kind":{"enum":["ImageStyle"]}},"required":["kind"]}]},"VideoStyle":{"className":"VideoStyle","allOf":[{"$ref":"#/definitions/ImageStyleBase"},{"$comment":"Video is in version 18000, but QE test files were created in 15200, so we need the schema for it here","properties":{"kind":{"enum":["VideoStyle"]},"volume":{"type":"number"},"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"duration":{"$ref":"Root.json#/definitions/TheoTime"}},"required":["kind"]}]},"LockupStyleBase":{"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["LockupStyle"]},"fonts":{"type":"array","items":{"$ref":"Text.json#/definitions/TheoFont"}},"linebreak":{"type":"boolean"},"backingArtworkID":{"type":"string"},"colors":{"allOf":[{"$ref":"Color.json#/definitions/ColorTable"},{"description":"Deprecated"}]}},"required":["kind"]}]},"TextPath":{"type":"object","properties":{"flex":{"type":"number","default":1},"segment":{"type":"array","items":{"$ref":"#/definitions/TextPathSegment"}}}},"TextPathSegment":{"type":"object","properties":{"p0":{"$ref":"Root.json#/definitions/TheoPoint"},"p1":{"$ref":"Root.json#/definitions/TheoPoint"},"p2":{"$ref":"Root.json#/definitions/TheoPoint"},"p3":{"$ref":"Root.json#/definitions/TheoPoint"}}},"LockupStyle":{"className":"LockupStyle","allOf":[{"$ref":"#/definitions/LockupStyleBase"},{"properties":{"spacing":{"type":"number","default":0.35},"tracking":{"type":"number","default":0},"padding":{"type":"number","default":0.65},"strokeWeight":{"type":"number","default":0.1},"backing":{"type":"integer","default":0},"layout":{"type":"integer","default":0},"alignment":{"type":"integer","default":-1},"pathID":{"type":"integer","default":-1},"customPath":{"$ref":"#/definitions/TextPath"},"opacityRule":{"type":"integer","default":0},"shadowAngle":{"type":"number","default":135},"shadowOffset":{"type":"number","default":0.5},"text-opacity":{"type":"number","default":1,"description":"Deprecated"},"backing-opacity":{"type":"number","default":1},"opacity":{"type":"number","description":"Deprecated"},"knockout":{"type":"integer","default":0},"wheel-used":{"type":"boolean","default":false},"character-styles":{"type":"object","patternProperties":{"^.*$":{"$ref":"#/definitions/CharacterStyle"}}}}}]},"CharacterStyle":{"className":"CharacterStyle","allOf":[{"$ref":"#/definitions/LockupStyleBase"},{"properties":{"spacing":{"type":"number","default":-1},"tracking":{"type":"number","default":-99},"padding":{"type":"number","default":0},"strokeWeight":{"type":"number","default":-1},"backing":{"type":"integer","default":0},"layout":{"type":"integer","default":-1},"alignment":{"type":"integer","default":-1},"pathID":{"type":"integer","default":-1},"customPath":{"$ref":"#/definitions/TextPath"},"opacityRule":{"type":"integer","default":-1},"shadowAngle":{"type":"number","default":-1},"shadowOffset":{"type":"number","default":-1},"text-opacity":{"type":"number","default":-1,"description":"Deprecated"},"backing-opacity":{"type":"number","default":-1},"opacity":{"type":"number","description":"Deprecated"},"knockout":{"type":"integer","default":-1}}}]},"GridStyle":{"className":"GridStyle","definitions":{"GridCell":{"type":"array","items":[{"$ref":"Root.json#/definitions/TheoRect"},{"type":"number"},{"type":"string"}]}},"allOf":[{"$ref":"#/definitions/FormaStyleBase"},{"properties":{"kind":{"enum":["GridStyle"]},"name":{"type":"string","default":"None"},"category":{"type":"string"},"spacing":{"type":"number","default":0},"crop-type":{"type":"integer"},"grid-cells":{"type":"array","items":{"$ref":"#/definitions/GridStyle/definitions/GridCell"}},"forma-mapping":{"type":"array","items":{"type":"array","items":[{"type":"string"},{"$ref":"#/definitions/GridStyle/definitions/GridCell"}]}}},"required":["kind"]}]}}}')},c9Jm:function(e,t,o){var n,r,i,a,s,l=t,c=o("oAGj"),u=o("Tq01"),p=o("kYI4"),d=o("yvDn"),h=o("yGNn"),f=o("C42b"),m=o("iCxV"),g=o("3lr5"),y=o("sRQj"),T=o("jcfx"),A=o("umUn"),C=o("VJ9E");l.ActionTestBase=(n=function(){this.canRun_=!0,this.runningSequenceName_="",this.qualifiedSequenceName_="",this.completePath_="",this.path_="",this.undoToIndex_=0,this.performanceFilename="performance.json",this.validationState_=new l.ValidationState,this.prepResults_=[],this.actionResults_=[],this.synchronizer=null,this.FAKE_COLOR_ELEMENT_PRIMARY_ID="themeColor0",this.FAKE_COLOR_ELEMENT_SECONDARY_ID1="themeColor1",this.FAKE_COLOR_ELEMENT_SECONDARY_ID2="themeColor2",this.FAKE_COLOR_ELEMENT_SHADE_ID0="themeColor3",this.FAKE_COLOR_ELEMENT_SHADE_ID1="themeColor4",this.FAKE_COLOR_ELEMENT_SHADE_ID2="themeColor5",this.FAKE_COLOR_ELEMENT_SHADE_ID3="themeColor6",this.FAKE_COLOR_ELEMENT_SHADE_ID4="themeColor7",this.FAKE_COLOR_ELEMENT_SHADE_ID5="themeColor8",this.FAKE_COLOR_ELEMENT_SHADE_ID6="themeColor9",this.FAKE_LOGO_ELEMENT_PRIMARY_ID="logo-001",this.FAKE_LOGO_ELEMENT_STAMP_ID="logo-002",this.FAKE_FONT_ELEMENT_HEADLINE_ID="fnt-001",this.FAKE_FONT_ELEMENT_BODY_ID="fnt-002",this.FAKE_COLOR_ELEMENT_PRIMARY_ID_2="themeColor0-2",this.FAKE_COLOR_ELEMENT_SECONDARY_ID1_2="themeColor1-2",this.FAKE_COLOR_ELEMENT_SECONDARY_ID2_2="themeColor2-2",this.FAKE_COLOR_ELEMENT_SHADE_ID0_2="themeColor3-2",this.FAKE_COLOR_ELEMENT_SHADE_ID1_2="themeColor4-2",this.FAKE_COLOR_ELEMENT_SHADE_ID2_2="themeColor5-2",this.FAKE_COLOR_ELEMENT_SHADE_ID3_2="themeColor6-2",this.FAKE_COLOR_ELEMENT_SHADE_ID4_2="themeColor7-2",this.FAKE_COLOR_ELEMENT_SHADE_ID5_2="themeColor8-2",this.FAKE_COLOR_ELEMENT_SHADE_ID6_2="themeColor9-2",this.FAKE_LOGO_ELEMENT_PRIMARY_ID_2="logo-001-2",this.FAKE_LOGO_ELEMENT_STAMP_ID_2="logo-002-2",this.FAKE_FONT_ELEMENT_HEADLINE_ID_2="fnt-001-2",this.FAKE_FONT_ELEMENT_BODY_ID_2="fnt-002-2"},c.defineClass({name:"ActionTestBase",ctor:n,statics:{renderPerformanceData:{},actionPerformanceData:{},undoPerformanceData:{},redoPerformanceData:{}},props:{lastActionResult:{get:function(){return c.last(this.actionResults_)}},appendActionResult:function(e){this.actionResults_.push(e)},getActionResult:function(e){return e>=0&&e<this.actionResults_.length?this.actionResults_[e]:null},getPrepActionResult:function(e){return e>=0&&e<this.prepResults_.length?this.prepResults_[e]:null},testName:{get:function(){return"ActionTest:"+this.path_+"::"+this.runningSequenceName_}},initializeDocPath:function(e){this.completePath_=e,this.path_=c.toString(c.last(e.split("/")))},initializeTestParameters:function(e,t,o){this.runningSequence_=c.clone(e),this.runningSequenceName_=t,this.qualifiedSequenceName_=o},setUp:function(){var e=this;this.doc_=c.opt(m.Host.actionTesting,(function(t){return t.openDocument(e.completePath_)}))},tearDown:function(){var e=this;this.prepareSequence_=null,this.runningSequence_=null,this.prepResults_=[],this.actionResults_=[],c.opt(m.Host.actionTesting,(function(t){return t.closeDocument(e.completePath_)}))},validateActionSequence:function(){var e=this,t=this.nextValidationState();c.opt(m.Host.actionTesting,(function(o){return o.awaitResult(t,e.synchronizer)}))},nextValidationState:function(){var e,t,o,r=this;switch(this.validationState_.next()){case 0:return new h.CorePromise((function(e,t){var o;(o=r.doc_)?(f.CoreRandom.seedRandom(5489),r.canRun_=r.canRunActionSequence(r.runningSequence_,r.runningSequenceName_,o),r.canRun_||r.validationState_.finish()):r.validationState_.fail(),e(null)})).then((function(e){return r.nextValidationState()}));case 1:return this.prepareDocument(this.doc_,this.runningSequenceName_).then((function(t){return r.prepareSequence_=c.clone((e=c.as(t,["Array","Function"]))||null!=e?e:[]),r.runActions(r.prepareSequence_)})).then((function(e){return r.nextValidationState()}));case 2:return this.populateActionSequence(this.runningSequence_,this.runningSequenceName_,this.doc_).then((function(e){return r.runningSequence_=c.clone(c.as(e,["Array","Function"])),null})).then((function(e){return r.nextValidationState()}));case 3:return new h.CorePromise((function(e,t){r.setUpActionSequence(r.runningSequence_,r.runningSequenceName_,r.doc_),e(null)})).then((function(e){return r.nextValidationState()}));case 4:return new h.CorePromise((function(e,t){r.renderBeforeRunning(r.runningSequence_,r.runningSequenceName_),e(null)})).then((function(e){return r.nextValidationState()}));case 5:var i=0;return h.CorePromise.resolve(null).then((function(e){return i=m.Host.async.getSystemUptimeInSeconds(),h.CorePromise.resolve(null)})).then((function(e){return r.runActionSequence(r.runningSequence_,r.runningSequenceName_)})).then((function(e){var t=m.Host.async.getSystemUptimeInSeconds()-i,o=m.Host.locale.formatNumber(t,3),a=r.qualifiedSequenceName_+"/"+r.path_;return n.actionPerformanceData[a]={time:o,buffer:"99.99"},r.nextValidationState()}));case 6:return new h.CorePromise((function(e,t){r.validateAfterActionSequence(r.runningSequence_,r.runningSequenceName_),e(null)})).then((function(e){return r.nextValidationState()}));case 7:return h.CorePromise.resolve(null).then((function(e){return h.CorePromise.resolve(null)})).then((function(e){return r.renderAfterRunning(r.runningSequence_,r.runningSequenceName_)})).then((function(e){if(((t=c.opt(m.Host.actionTesting,(function(e){return e.allActionsEnabled})))||null!=t)&&!t){var i=r.path_,a=c.clone((o=c.as(e,["Dictionary","String","String"]))||null!=o?o:{time:"0.00",format:"image",buffer:"99.99"});n.renderPerformanceData[i]={time:a.time,buffer:a.buffer,format:a.format};var s={render:n.renderPerformanceData};c.opt(m.Host.actionTesting,(function(e){return e.writeJsonToFile(s,r.performanceFilename)}))}return r.nextValidationState()}));case 8:return i=0,h.CorePromise.resolve(null).then((function(e){return i=m.Host.async.getSystemUptimeInSeconds(),h.CorePromise.resolve(null)})).then((function(e){return r.undoActionSequence(r.runningSequence_,r.runningSequenceName_)})).then((function(e){var t=m.Host.async.getSystemUptimeInSeconds()-i,o=m.Host.locale.formatNumber(t,3),a=r.qualifiedSequenceName_+"/"+r.path_;return n.undoPerformanceData[a]={time:o,buffer:"99.99"},r.nextValidationState()}));case 9:return new h.CorePromise((function(e,t){r.validateAfterUndo(r.runningSequence_,r.runningSequenceName_),e(null)})).then((function(e){return r.nextValidationState()}));case 10:return new h.CorePromise((function(e,t){r.renderAfterUndo(r.runningSequence_,r.runningSequenceName_),e(null)})).then((function(e){return r.nextValidationState()}));case 11:return i=0,h.CorePromise.resolve(null).then((function(e){return i=m.Host.async.getSystemUptimeInSeconds(),h.CorePromise.resolve(null)})).then((function(e){return r.redoActionSequence(r.runningSequence_,r.runningSequenceName_)})).then((function(e){var t=m.Host.async.getSystemUptimeInSeconds()-i,o=m.Host.locale.formatNumber(t,3),a=r.qualifiedSequenceName_+"/"+r.path_;return n.redoPerformanceData[a]={time:o,buffer:"99.99"},r.nextValidationState()}));case 12:return new h.CorePromise((function(e,t){r.validateAfterRedo(r.runningSequence_,r.runningSequenceName_),e(null)})).then((function(e){return r.nextValidationState()}));case 13:return new h.CorePromise((function(e,t){r.renderAfterRedo(r.runningSequence_,r.runningSequenceName_),e(null)})).then((function(e){return r.nextValidationState()}));case 14:return new h.CorePromise((function(e,t){r.shutdown(r.runningSequence_,r.runningSequenceName_,r.doc_),e(null)})).then((function(e){return r.nextValidationState()}));default:return h.CorePromise.resolve(null)}},canRunActionSequence:function(e,t,o){return!0},populateActionSequence:function(e,t,o){return h.CorePromise.resolve(e)},prepareDocument:function(e,t){return h.CorePromise.resolve([])},setUpActionSequence:function(e,t,o){},renderBeforeRunning:function(e,t){this.render(this.doc_,"before/"+this.qualifiedSequenceName_)},runActions:function(e){var t=this,o=new l.TestActionHandler(this.doc_.controller),n=c.clone(e);if(0==n.length)return h.CorePromise.resolve(null);var r=o.doAction(n.shift()()).then((function(e){return t.appendActionResult(u.ActionResult.fromPromiseAny(e))}));if(0==!n.length)for(var i=c.iter(n);!i.done;i.next()){var a=i.value;r=r.then((function(e){var t=a();return o.doAction(t)})).then((function(e){return t.appendActionResult(u.ActionResult.fromPromiseAny(e))}))}return r},clearResultsBeforeRunning:function(){this.prepResults_=c.clone(this.actionResults_),this.actionResults_=[]},runActionSequence:function(e,t){var o,n=this;return this.clearResultsBeforeRunning(),XCTAssertTrue(e.length>0,"should not run a test with no actions. Implement CanRun for this test to skip if the test can't be run on it"),(o=c.opt(c.opt(this.doc_,(function(e){return e.controller})),(function(e){return e.undoRedoMgr})))&&(this.undoToIndex_=o.getCurrentTimelineIndex()),this.runActions(e).then((function(t){return XCTAssertTrue(n.actionResults_.length==e.length)})).fail((function(e){var t;return(t=c.as(e,d.CoreStringError))?XCTFail(c.toString(t.message)):XCTFail("Failed with error: "+c.toString(e)),h.CorePromise.reject(e)}))},validateAfterActionSequence:function(e,t){},renderAfterRunning:function(e,t){var o,r,i,a=this,s=!(o=c.opt(m.Host.actionTesting,(function(e){return e.allActionsEnabled})))&&null==o||o?"after_actions/":"",l=!(r=c.opt(m.Host.actionTesting,(function(e){return e.allActionsEnabled})))&&null==r||r?this.qualifiedSequenceName_:"",u=c.clone(this.render(this.doc_,s+l));if(!(i=c.opt(m.Host.actionTesting,(function(e){return e.allActionsEnabled})))&&null==i||i){var p={action:n.actionPerformanceData};c.opt(m.Host.actionTesting,(function(e){return e.writeJsonToFile(p,s+a.performanceFilename)}))}return u},undoActionSequence:function(e,t){var o,n=h.CorePromise.resolve(null);if(0==!e.length&&(o=c.opt(c.opt(this.doc_,(function(e){return e.controller})),(function(e){return e.undoRedoMgr})))){n=n.then((function(e){return XCTAssertTrue(null!=o.getUndoDescription(),"Undo not found before undoing tested actions"),XCTAssertTrue(null==o.getRedoDescription(),"Redo found before undoing tested actions"),null}));for(var r=this.undoToIndex_,i=c.iter(c.range(0,e.length,!1));!i.done;i.next())n=n.then((function(e){return new h.CorePromise((function(e,t){o.getCurrentTimelineIndex()>r?o.undo((function(){return e(null)})):e(null)}))}));n=n.then((function(e){return XCTAssertTrue(null!=o.getRedoDescription(),"No redo found after undoing tested actions"),null}))}return n},validateAfterUndo:function(e,t){},renderAfterUndo:function(e,t){var o=this;this.render(this.doc_,"after_undo/"+this.qualifiedSequenceName_);var r={undo:n.undoPerformanceData};c.opt(m.Host.actionTesting,(function(e){return e.writeJsonToFile(r,"after_undo/"+o.performanceFilename)}))},redoActionSequence:function(e,t){var o,n=h.CorePromise.resolve(null);if(0==!e.length&&(o=c.opt(c.opt(this.doc_,(function(e){return e.controller})),(function(e){return e.undoRedoMgr})))){n=n.then((function(e){return XCTAssertTrue(null!=o.getRedoDescription(),"Redo not found before redoing tested actions"),null}));for(var r=c.iter(c.range(0,e.length,!1));!r.done;r.next())n=n.then((function(e){return new h.CorePromise((function(e,t){return o.redo((function(){return e(null)}))}))}));n=n.then((function(e){return XCTAssertTrue(null==o.getRedoDescription(),"Extra redo found after redoing tested actions"),XCTAssertTrue(null!=o.getUndoDescription(),"No undo found after redoing tested actions"),null}))}return n},validateAfterRedo:function(e,t){},renderAfterRedo:function(e,t){var o=this;this.render(this.doc_,"after_redo/"+this.qualifiedSequenceName_);var r={redo:n.redoPerformanceData};c.opt(m.Host.actionTesting,(function(e){return e.writeJsonToFile(r,"after_redo/"+o.performanceFilename)}))},shutdown:function(e,t,o){},allSelectableFormae:function(e,t){var o;return void 0===t&&(t=null),e.firstPage.root.filterWithCallback((function(e){return null!=e.controller&&e.controller.selectable&&(!(o=c.opt(t,(function(t){return t(e)})))&&null==o||o)}))},findLargestForma:function(e){return e.reduce(this.chooseLargerForma,[null,0])[0]},chooseLargerForma:function(e,t){var o,n=(o=c.opt(t.bounds,(function(e){return e.area})))||null!=o?o:0;return n>e[1]?[t,n]:e},test_ValidateActionSequence:function(e,t){},installBrandkit:function(e){(new T.ProfilingColorMap).reset();var t=[],o=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_PRIMARY_ID,[A.TheoColor.SPARK_COLOR_ROLE_PRIMARY],25.5,127.5,255,1),n=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SECONDARY_ID1,[A.TheoColor.SPARK_COLOR_ROLE_SECONDARY],125,128,255,1),r=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SECONDARY_ID2,[A.TheoColor.SPARK_COLOR_ROLE_SECONDARY],25,228,155,1),i=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID0,[A.TheoColor.SPARK_COLOR_ROLE_SHADE0],30,20,40,1),a=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID1,[A.TheoColor.SPARK_COLOR_ROLE_SHADE1],60,40,80,1),s=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID2,[A.TheoColor.SPARK_COLOR_ROLE_SHADE2],100,50,255,1),l=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID3,[A.TheoColor.SPARK_COLOR_ROLE_SHADE3],140,60,120,1),u=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID4,[A.TheoColor.SPARK_COLOR_ROLE_SHADE4],190,80,160,1),d=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID5,[A.TheoColor.SPARK_COLOR_ROLE_SHADE5],230,100,200,1),h=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID6,[A.TheoColor.SPARK_COLOR_ROLE_SHADE6],255,255,255,1),f=A.TheoColor.init_bb45(o);t.push(f),t.push(A.TheoColor.init_bb45(n)),t.push(A.TheoColor.init_bb45(r)),t.push(A.TheoColor.init_bb45(i)),t.push(A.TheoColor.init_bb45(a)),t.push(A.TheoColor.init_bb45(s)),t.push(A.TheoColor.init_bb45(l)),t.push(A.TheoColor.init_bb45(u)),t.push(A.TheoColor.init_bb45(d)),t.push(A.TheoColor.init_bb45(h)),m.Host.fontProvider.getSuggestableFonts(g.ANY_DOCUMENT);var _=c.opt(m.Host.fontProvider,(function(e){return e.descriptorForPostScriptName("Yellowtail",g.ANY_DOCUMENT)})),S=c.opt(m.Host.fontProvider,(function(e){return e.descriptorForPostScriptName("WanderlustShine-Regular ",g.ANY_DOCUMENT)})),P=[],F=new y.MockAuthoringContextFont(this.FAKE_FONT_ELEMENT_HEADLINE_ID,C.TheoFont.SPARK_FONT_ROLE_HEADLINE,_),v=new y.MockAuthoringContextFont(this.FAKE_FONT_ELEMENT_BODY_ID,C.TheoFont.SPARK_FONT_ROLE_BODY,S);P.push(F),P.push(v);var R=new y.MockAuthoringContextLogo(this.FAKE_LOGO_ELEMENT_PRIMARY_ID,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNg/sXzHwAEFgIJ5hSCsQAAAABJRU5ErkJggg==",p.SPARK_LOGO_ROLE_PRIMARY,1,1),b=new y.MockAuthoringContextLogo(this.FAKE_LOGO_ELEMENT_STAMP_ID,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAIAAADZSiLoAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+IEmuOgAAABZJREFUCJlj+P//PwMDA4REpf7//w8A4D0O8mtAqaUAAAAASUVORK5CYII=",p.SPARK_LOGO_ROLE_POST_STAMP,3,3),E=[];E.push(R),E.push(b);var N=y.MockAuthoringContext.init_44fd("Fake Brandkit","brandkit-for-actions",[o,n,r,i,a,s,l,u,d,h],P,E);m.Host.brandkitManager.fakeBrandkitForElementsForTesting=N},installSecondBrandkit:function(e){(new T.ProfilingColorMap).reset();var t=[],o=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_PRIMARY_ID_2,[A.TheoColor.SPARK_COLOR_ROLE_PRIMARY],65.5,167.5,222,1),n=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SECONDARY_ID1_2,[A.TheoColor.SPARK_COLOR_ROLE_SECONDARY],25,108,201,1),r=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SECONDARY_ID2_2,[A.TheoColor.SPARK_COLOR_ROLE_SECONDARY],75,208,105,1),i=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID0_2,[A.TheoColor.SPARK_COLOR_ROLE_SHADE0],245,245,245,1),a=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID1_2,[A.TheoColor.SPARK_COLOR_ROLE_SHADE1],230,100,200,1),s=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID2_2,[A.TheoColor.SPARK_COLOR_ROLE_SHADE2],190,80,160,1),l=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID3_2,[A.TheoColor.SPARK_COLOR_ROLE_SHADE3],140,60,120,1),u=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID4_2,[A.TheoColor.SPARK_COLOR_ROLE_SHADE4],100,50,255,1),d=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID5_2,[A.TheoColor.SPARK_COLOR_ROLE_SHADE5],60,40,80,1),h=new y.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID6_2,[A.TheoColor.SPARK_COLOR_ROLE_SHADE6],30,20,40,1),f=A.TheoColor.init_bb45(o);t.push(f),t.push(A.TheoColor.init_bb45(n)),t.push(A.TheoColor.init_bb45(r)),t.push(A.TheoColor.init_bb45(i)),t.push(A.TheoColor.init_bb45(a)),t.push(A.TheoColor.init_bb45(s)),t.push(A.TheoColor.init_bb45(l)),t.push(A.TheoColor.init_bb45(u)),t.push(A.TheoColor.init_bb45(d)),t.push(A.TheoColor.init_bb45(h)),m.Host.fontProvider.getSuggestableFonts(g.ANY_DOCUMENT);var _=c.opt(m.Host.fontProvider,(function(e){return e.descriptorForPostScriptName("Yellowtail",g.ANY_DOCUMENT)})),S=c.opt(m.Host.fontProvider,(function(e){return e.descriptorForPostScriptName("WanderlustShine-Regular ",g.ANY_DOCUMENT)})),P=[],F=new y.MockAuthoringContextFont(this.FAKE_FONT_ELEMENT_HEADLINE_ID_2,C.TheoFont.SPARK_FONT_ROLE_HEADLINE,_),v=new y.MockAuthoringContextFont(this.FAKE_FONT_ELEMENT_BODY_ID_2,C.TheoFont.SPARK_FONT_ROLE_BODY,S);P.push(F),P.push(v);var R=new y.MockAuthoringContextLogo(this.FAKE_LOGO_ELEMENT_PRIMARY_ID_2,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNg/sXzHwAEFgIJ5hSCsQAAAABJRU5ErkJggg==",p.SPARK_LOGO_ROLE_PRIMARY,1,1),b=new y.MockAuthoringContextLogo(this.FAKE_LOGO_ELEMENT_STAMP_ID_2,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAIAAADZSiLoAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+IEmuOgAAABZJREFUCJlj+P//PwMDA4REpf7//w8A4D0O8mtAqaUAAAAASUVORK5CYII=",p.SPARK_LOGO_ROLE_POST_STAMP,3,3),E=[];E.push(R),E.push(b);var N=y.MockAuthoringContext.init_44fd("Fake Brandkit 2","brandkit-for-actions-2",[o,n,r,i,a,s,l,u,d,h],P,E);m.Host.brandkitManager.fakeBrandkitForElementsForTesting=N},removeBrandkit:function(e){m.Host.brandkitManager.fakeBrandkitForElementsForTesting=null,(new T.ProfilingColorMap).reset()},urlForAsset:function(e){return c.opt(m.Host.actionTesting,(function(t){return t.urlForAsset(e)}))},imageDataForAsset:function(e){return null!=m.Host.actionTesting?m.Host.actionTesting.imageDataForAsset(e):h.CorePromise.resolve(null)},render:function(e,t,o){void 0===o&&(o="");var n,r=this,i=((n=c.opt(m.Host.actionTesting,(function(e){return e.outputFolder})))||null!=n?n:"")+t+"/";return c.opt(m.Host.actionTesting,(function(t){return t.render(e,i,r.path_+o)}))}}}),n),l.TestActionHandler=(r=function(e){this.actionQueue=[],this.executingAction=null,this.dc=e},c.defineClass({name:"TestActionHandler",ctor:r,statics:{_implements:function(e){return"IActionHandler"==e}},props:{canDoAction:function(e){return XCTAssertTrue(e.canDo(this.dc)),e.canDo(this.dc)},finishAction:function(){this.executingAction=null;var e=c.first(this.actionQueue);null!=e&&(this.actionQueue.shift(),this.doActionWithCallback(e[0],e[1]))},doActionWithCallback:function(e,t){var o,n=this;if(null!=this.executingAction)this.actionQueue.push([e,t]);else if(o=this.dc){var r=null;o.undoRedoMgr.beginUserActionAsync(e.getUserAction(o)).then((function(t){return e.execute(o)})).then((function(e){return r=e,o.undoRedoMgr.endUserActionAsync()})).then((function(t){return e.updateSelection(o)})).then((function(e){return t(u.ActionResult.fromPromiseAny(r),null)})).fail((function(e){return t(null,e)})).then((function(e){return n.finishAction()}))}else XCTFail("Document controller destroyed")},doAction:function(e){var t=this;return new h.CorePromise((function(o,n){return t.doActionWithCallback(e,(function(e,t){var r;null!=(r=t)?n(r):o(e)}))}))}}}),r),l.TestState=c.defineEnum("TestState",{kFailed:-1,kCanRun:0,kPrepDoc:1,kPopulate:2,kSetUp:3,kRenderBeforeRunning:4,kRun:5,kValidateAfterRunning:6,kRenderAfterRunning:7,kUndo:8,kValidateAfterUndo:9,kRenderAfterUndo:10,kRedo:11,kValidateAfterRedo:12,kRenderAfterRedo:13,kShutdown:14,kFinished:15}),l.EnabledTestStates=(i=function(){},a={},c.defineClass({name:"EnabledTestStates",ctor:i,statics:{kRunStates:{get:function(){return void 0===a.kRunStates&&(a.kRunStates=i.init_34d9([l.TestState.kCanRun,l.TestState.kPrepDoc,l.TestState.kPopulate,l.TestState.kSetUp,l.TestState.kRun,l.TestState.kValidateAfterRunning,l.TestState.kRenderAfterRunning,l.TestState.kShutdown])),a.kRunStates}},kActionTestSpecificStates:{get:function(){return void 0===a.kActionTestSpecificStates&&(a.kActionTestSpecificStates=i.init_34d9([l.TestState.kRenderBeforeRunning])),a.kActionTestSpecificStates}},kUndoStates:{get:function(){return void 0===a.kUndoStates&&(a.kUndoStates=i.init_34d9([l.TestState.kUndo,l.TestState.kValidateAfterUndo,l.TestState.kRenderAfterUndo])),a.kUndoStates}},kRedoStates:{get:function(){return void 0===a.kRedoStates&&(a.kRedoStates=i.init_34d9([l.TestState.kRedo,l.TestState.kValidateAfterRedo,l.TestState.kRenderAfterRedo])),a.kRedoStates}},kRenderingStates:{get:function(){return void 0===a.kRenderingStates&&(a.kRenderingStates=i.init_34d9([l.TestState.kRenderBeforeRunning,l.TestState.kRenderAfterRunning,l.TestState.kRenderAfterUndo,l.TestState.kRenderAfterRedo])),a.kRenderingStates}},kValidationStates:{get:function(){return void 0===a.kValidationStates&&(a.kValidationStates=i.init_34d9([l.TestState.kValidateAfterRunning,l.TestState.kValidateAfterUndo,l.TestState.kValidateAfterRedo])),a.kValidationStates}},kAllStates:{get:function(){return void 0===a.kAllStates&&(a.kAllStates=i.init_34d9([l.TestState.kCanRun,l.TestState.kPrepDoc,l.TestState.kPopulate,l.TestState.kSetUp,l.TestState.kRenderBeforeRunning,l.TestState.kRun,l.TestState.kValidateAfterRunning,l.TestState.kRenderAfterRunning,l.TestState.kUndo,l.TestState.kValidateAfterUndo,l.TestState.kRenderAfterUndo,l.TestState.kRedo,l.TestState.kValidateAfterRedo,l.TestState.kRenderAfterRedo,l.TestState.kShutdown])),a.kAllStates}}},props:{init_5d5e:function(e){this.rawValue=e},init_b14a:function(e){this.rawValue=1<<e},init_34d9:function(e){this.rawValue=e.reduce((function(e,t){return e|1<<t}),0)},enabled:function(e){return this.rawValue&1<<e!=0},enable:function(e){return i.init_5d5e(this.rawValue|1<<e)},disable:function(e){return i.init_5d5e(this.rawValue&(i.kAllStates.rawValue^1<<e))},subtracting:function(e){return i.init_5d5e(this.rawValue&(i.kAllStates.rawValue^e.rawValue))}}}),i),l.ValidationState=(s=function(){var e,t,o,n;this.state_=l.TestState.kCanRun,this.enabledStates_=l.EnabledTestStates.kAllStates,!(e=c.opt(m.Host.actionTesting,(function(e){return e.allActionsEnabled})))&&null==e||e||(this.enabledStates_=this.enabledStates_.subtracting(l.EnabledTestStates.kActionTestSpecificStates)),((t=c.opt(m.Host.actionTesting,(function(e){return e.renderingEnabled})))||null!=t)&&t||(this.enabledStates_=this.enabledStates_.subtracting(l.EnabledTestStates.kRenderingStates)),((o=c.opt(m.Host.actionTesting,(function(e){return e.undoEnabled})))||null!=o)&&o||(this.enabledStates_=this.enabledStates_.subtracting(l.EnabledTestStates.kUndoStates),this.enabledStates_=this.enabledStates_.subtracting(l.EnabledTestStates.kRedoStates)),((n=c.opt(m.Host.actionTesting,(function(e){return e.validationEnabled})))||null!=n)&&n||(this.enabledStates_=this.enabledStates_.subtracting(l.EnabledTestStates.kValidationStates))},c.defineClass({name:"ValidationState",ctor:s,props:{next:function(){var e,t,o=this.state_;for(this.state_=(e=l.TestState.toCaseValue(this.state_+1))||null!=e?e:l.TestState.kFailed;!this.enabledStates_.enabled(this.state_)&&this.hasNext;)this.state_=(t=l.TestState.toCaseValue(this.state_+1))||null!=t?t:l.TestState.kFailed;return o},hasNext:{get:function(){return this.state_!=l.TestState.kFailed&&this.state_!=l.TestState.kFinished}},fail:function(){this.state_=l.TestState.kFailed},finish:function(){this.hasNext&&(this.state_=l.TestState.kFinished)}}}),s)},cCxC:function(e,t,o){var n=t,r=o("oAGj");n.HostLifetimeProtocol=r.defineProtocol("HostLifetimeProtocol",{terminate:"(Boolean, String) -> Void"})},cMl4:function(e,t,o){var n=t,r=o("oAGj");n.HostTestingProtocol=r.defineProtocol("HostTestingProtocol",{urlForTestAsset:"(String) -> String",urlForTestResource:"(String, String) -> String",throwAsyncTestCase:"(CorePromise, Double) -> Void",setNetworkMock:"(HostNetworkProtocol) -> Void"})},caeu:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"ImageFilter":{"className":"ImageFilter","type":"object","properties":{"kind":{"type":"string"},"name":{"type":"string","default":""}}},"ImageFilterTypes":{"oneOf":[{"$ref":"#/definitions/AlphaBlendFilter"},{"$ref":"#/definitions/CompositeFilter"}]},"AlphaBlendFilter":{"className":"AlphaBlendFilter","allOf":[{"$ref":"#/definitions/ImageFilter"},{"properties":{"kind":{"enum":["AlphaBlend"]},"mix":{"type":"number"},"filter1":{"$ref":"#/definitions/ImageFilterTypes"},"filter2":{"$ref":"#/definitions/ImageFilterTypes"}},"required":["kind"]}]},"CompositeFilter":{"className":"CompositeFilter","allOf":[{"$ref":"#/definitions/ImageFilter"},{"properties":{"kind":{"enum":["CompositeFilter"]},"mix":{"type":"number","default":1},"blend":{"type":"string","default":"normal"},"grayscale":{"type":"boolean","default":false},"contrast":{"type":"number","default":1},"color-operation":{"type":"string","default":""},"saturation-offset":{"type":"number","default":0},"brightness-offset":{"type":"number","default":0},"blur-radius":{"type":"number","default":0},"reduce-contrast":{"type":"boolean","description":"If true, contrast == 0.5"}},"required":["kind"]}]}}}')},cmig:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"Forma":{"className":"Forma","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"placement":{"$ref":"Root.json#/definitions/Matrix2D"},"animation":{"$ref":"Animation.json#/definitions/FormaAnimation"},"moveable":{"type":"boolean"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"controller-kind":{"type":"string","default":""},"controller-metadata":{"$ref":"#/definitions/ControllerMetadata"}},"required":["id","path","placement"]}]},"ControllerMetadata":{"className":"ControllerMetadata","type":"object","properties":{"size":{"$ref":"Root.json#/definitions/TheoSize"},"backing-shape-id":{"type":"string"},"content-id":{"type":"string"},"wrapper-id":{"type":"string"},"highlightMethod":{"type":"integer"},"charstyle-ranges":{"type":"object","properties":{"Highlight":{"type":"array","items":{"type":"integer"}}}}}},"NonRootFormaTypes":{"oneOf":[{"$ref":"#/definitions/GroupForma"},{"$ref":"#/definitions/TextForma"},{"$ref":"#/definitions/ShapeForma"},{"$ref":"#/definitions/FrameForma"},{"$ref":"#/definitions/ImageForma"},{"$ref":"#/definitions/VectorForma"},{"$ref":"#/definitions/VideoForma"},{"$ref":"#/definitions/SmartGroupForma"}]},"GroupFormaBase":{"allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"character-styles":{"type":"object","description":"lockupStyle.characterStyles","patternProperties":{"^.*$":{"$ref":"Styles.json#/definitions/LockupStyle"}}},"character-ranges":{"type":"object","description":"lockupStyle.characterStyles","patternProperties":{"^.*$":{"type":"array","items":{"type":"integer"}}}},"children":{"type":"array","items":{"$ref":"#/definitions/NonRootFormaTypes"}}}}]},"GroupForma":{"className":"GroupForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"kind":{"enum":["group"]}},"required":["kind"]}]},"RootForma":{"className":"RootForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"root-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"kind":{"enum":["Root"]}},"required":["kind"]}]},"FrameForma":{"className":"FrameForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"clipmode":{"type":"boolean","default":true},"kind":{"enum":["Frame"]}},"required":["kind"]}]},"SmartGroupForma":{"className":"SmartGroupForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"kind":{"enum":["smart-group"]}},"required":["kind"]}]},"ImageFormaBase":{"allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"image-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"content-id":{"type":"string","default":""}}}]},"ImageForma":{"className":"ImageForma","allOf":[{"$ref":"#/definitions/ImageFormaBase"},{"properties":{"kind":{"enum":["Image"]}},"required":["kind"]}]},"VideoForma":{"className":"VideoForma","allOf":[{"$ref":"#/definitions/ImageFormaBase"},{"properties":{"video-content-id":{"type":"string","default":""},"kind":{"enum":["Video"]}},"required":["kind"]}]},"ShapeForma":{"className":"ShapeForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"artwork":{"$ref":"Artwork.json#/definitions/TheoArtworkNodeTypes"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"content-id":{"type":"string","default":""},"shape-id":{"type":"string"},"size":{"$ref":"Root.json#/definitions/TheoSize"},"slice-box":{"$ref":"Root.json#/definitions/TheoRect"},"content-region":{"$ref":"Root.json#/definitions/TheoRect"},"text-box":{"$ref":"Root.json#/definitions/TheoRect"},"prescale":{"type":"number"},"kind":{"enum":["Shape"]}},"required":["kind"]}]},"TextForma":{"className":"TextForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"text":{"$ref":"Text.json#/definitions/TextModel"},"text-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"range-in-lockup":{"$ref":"Text.json#/definitions/TextRange"},"row-index":{"type":"integer","default":0},"kind":{"enum":["Text"]}},"required":["text","kind"]}]},"VectorForma":{"className":"VectorForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"content-id":{"type":"string","default":""},"size":{"$ref":"Root.json#/definitions/TheoSize"},"color":{"$ref":"Color.json#/definitions/SolidColor"},"kind":{"enum":["Vector"]}},"required":["kind"]}]},"FormaPage":{"className":"FormaPage","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["forma-document"]},"kind":{"type":"string"},"template-id":{"type":"string","default":""},"size":{"$ref":"Root.json#/definitions/TheoSize"},"size-id":{"type":"string","default":"Instagram"},"export-data":{"$ref":"#/definitions/FormaPageExportData"},"color-library":{"$ref":"Color.json#/definitions/ColorLibrary"},"children":{"type":"array","items":{"$ref":"#/definitions/RootForma"},"maxItems":1}},"required":["id","color-library"]}]},"FormaPageExportData":{"className":"FormaPageExportData","type":"object","properties":{"dimensions":{"$ref":"Root.json#/definitions/TheoSize"},"format":{"type":"integer","default":0},"ppi":{"type":"number"}}}}}')},dNmX:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("gXiO"),s=o("fNpk"),l=o("b1vF");r.LABColor=(n=function(e,t,o,n){s.LegacyCoreAssert.isFalse(isNaN(e)||isNaN(t)||isNaN(o)||isNaN(n),"lab color initilized with NaN values",void 0,"LABColor.init","LABColor.swift",32),s.LegacyCoreAssert.isTrue(e>=-.1&&e<=101,"lab color 'l' out of range",void 0,"LABColor.init","LABColor.swift",33),s.LegacyCoreAssert.isTrue(t>=-129&&t<=129,"lab color 'a' out of range",void 0,"LABColor.init","LABColor.swift",34),s.LegacyCoreAssert.isTrue(o>=-129&&o<=129,"lab color 'b' out of range",void 0,"LABColor.init","LABColor.swift",35),s.LegacyCoreAssert.isTrue(n>=0&&n<=1,"lab color alpha out of range",void 0,"LABColor.init","LABColor.swift",36),this.l=e,this.a=t,this.b=o,this.alpha=n,a.CoreObject.call(this)},i.defineClass({name:"LABColor",ctor:n,superName:"CoreObject",statics:{fromRGB:function(e){return n.fromXYZ(l.XYZColor.fromRGB(e),l.XYZColor.D65XYZ)},fromXYZ:function(e,t){function o(e){return e>.008856?Math.pow(e,1/3):7.787*e+.13793}var r=o(e.x/t.x),i=o(e.y/t.y),a=o(e.z/t.z);return new n(Math.min(Math.max(116*i-16,0),100),500*(r-i),200*(i-a),Math.min(Math.max(e.alpha,0),1))}},props:{distanceTo:function(e){var t=this.l-e.l,o=this.a-e.a,n=this.b-e.b;return Math.sqrt(t*t+o*o+n*n)},hueDistance:function(e){var t=this.hue,o=e.hue,n=Math.min(t/360,o/360),r=Math.max(t/360,o/360);return Math.min(r-n,n+1-r)},hue:{get:function(){return 180*Math.atan2(this.b,this.a)/3.14159265+180}},asXYZ:{get:function(){return null==this.xyz_&&(this.xyz_=this.toXYZ(l.XYZColor.D65XYZ)),this.xyz_}},asRGB:{get:function(){if(null==this.rgb_){var e=this.asXYZ;this.rgb_=e.asRGB}return this.rgb_}},print:function(){return i.toString("l: %.3f a %.3f b %.3f a: %.3f",this.l,this.a,this.b,this.alpha)},toXYZ:function(e){var t=(this.l+16)/116,o=Math.pow(t,3),n=this.a/500+t,r=Math.pow(n,3),i=t-this.b/200,a=Math.pow(i,3),s=r>.008856?r:(n-.13793)/7.787,c=o>.008856?o:(t-.13793)/7.787,u=a>.008856?a:(i-.13793)/7.787;return new l.XYZColor(s*e.x,c*e.y,u*e.z,this.alpha)}}}),n)},dZc9:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"FormaAnimation":{"className":"FormaAnimation","type":"object","properties":{"kind":{"type":"string","enum":["FormaAnimation"]},"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"end-time":{"$ref":"Root.json#/definitions/TheoTime"},"key-frames":{"type":"array","items":{"$ref":"#/definitions/KeyFrame"}},"animation-style":{"$ref":"#/definitions/AnimationStyle"},"name":{"type":"string"}},"required":["start-time","end-time","key-frames"]},"KeyFrame":{"className":"KeyFrame","type":"object","properties":{"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"timing-function":{"type":"string"},"placement":{"$ref":"Root.json#/definitions/Matrix2D"},"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"}}},"AnimationStyle":{"className":"AnimationStyle","type":"object","properties":{"name":{"type":"string"},"variant":{"type":"integer"},"variant-count":{"type":"integer"},"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"end-time":{"$ref":"Root.json#/definitions/TheoTime"},"category":{"type":"string"},"looping":{"type":"boolean","default":false},"text-style":{"type":"boolean"},"image-style":{"type":"boolean"}},"required":["name","variant","variant-count"]}}}')},"djS+":function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("djwB"),l=o("sq5L"),c=o("WGnI"),u=o("hauK"),p=o("b94u"),d=o("bJhu"),h=o("sIWg");i.PGMGraphDecoderNodeEntry=(n=function(){this.constructing=!1,this.node=null},a.defineClass({name:"PGMGraphDecoderNodeEntry",ctor:n}),n),i.PGMGraphDecoder=(r=function(e){var t,o,n,r,i,s,u,d;this.dummy=null,this.constructedNodes={},this.constructedTextStyles={},this.constructedFonts={},this.dict=e,this.rootEntity=(t=a.as(e[l.PGMGraph.PROP_ROOT_ENTITY],"String"))||null!=t?t:"",(r=a.as(e[l.PGMGraph.PROP_ENTITIES],["Dictionary","String","Any"]))?this.entityMap=r:this.entityMap={},(i=a.as(e[l.PGMGraph.PROP_TEXT_STYLES],["Dictionary","String","Any"]))?this.styleMap=i:this.styleMap={},(s=a.as(e[l.PGMGraph.PROP_FONTS],["Dictionary","String","Any"]))?this.fontMap=s:this.fontMap={},(u=h.TheoRect.decodeJson(a.as(e[c.PGMLeaf.PROP_BOUNDS],"AnyObject")))?this.bounds=u:this.bounds=h.TheoRect.Zero,(d=a.as(e[l.PGMGraph.PROP_RESOURCES],["Dictionary","String","Any"]))?this.resources=p.PGMResourceProviderList.decode(d):this.resources=new p.PGMResourceProviderList({}),this.duration=(o=a.as(e[l.PGMGraph.PROP_DURATION],"Double"))||null!=o?o:0,this.version=(n=a.as(e[l.PGMGraph.PROP_VERSION],"Int"))||null!=n?n:0},a.defineClass({name:"PGMGraphDecoder",ctor:r,statics:{_implements:function(e){return"IPGMDecoderFactory"==e}},props:{decode:function(e){var t,o=null,n=Math.floor(a.toDouble(this.version)/1e3),r=Math.floor(a.toDouble(l.PGMGraph.CURRENT_VERSION)/1e3);return 0==n?e.error(l.PGMError.NO_VERSION,"No version property found in graph."):n>r?e.error(l.PGMError.BREAKING_VERSION,"Graph was written by a newer major version of the code; can't decode."):a.isEmpty(this.rootEntity)?e.error(l.PGMError.NO_ROOT_ENTITY,"No root entity found in dictionary."):(t=this.constructNode(this.rootEntity,e))&&(o=new l.PGMGraph(t,this.bounds,this.duration,this.resources)),o},constructNode:function(e,t){var o,n;if(o=this.constructedNodes[e])return o.constructing?(t.error(l.PGMError.CYCLIC_GRAPH,"This graph has a cycle at entity "+e),null):o.node;if(n=a.as(this.entityMap[e],["Dictionary","String","Any"])){var r=new i.PGMGraphDecoderNodeEntry;return this.constructedNodes[e]=r,r.constructing=!0,r.node=u.PGMNode.decode(n,this,t),r.constructing=!1,r.node}return t.error(l.PGMError.MISSING_ENTITY,"Entity "+e+" is referenced but does not exist"),null},constructTextStyle:function(e,t){var o,n,r;return(n=this.constructedTextStyles[e])?o=n:(r=a.as(this.styleMap[e],["Dictionary","String","Any"]))?(o=d.PGMTextStyle.decode(r,this,t),this.constructedTextStyles[e]=o):(t.error(l.PGMError.MISSING_TEXT_STYLE,"Text style with hash "+e+" is referenced but does not exist"),o=null),o},constructFont:function(e,t){var o,n,r;return(n=this.constructedFonts[e])?o=n:(r=a.as(this.fontMap[e],["Dictionary","String","Any"]))?(o=s.PGMFont.decode(r,t),this.constructedFonts[e]=o):(t.error(l.PGMError.MISSING_FONT,"Font with key "+e+" is referenced but does not exist"),o=null),o}}}),r)},djwB:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("sq5L");r.PGMFont=(n=function(e,t,o,n,r,i,a,s){this.postScriptName=e,this.cssName=t,this.style=o,this.weight=n,this.family=r,this.capRatio=i,this.ascentRatio=a,this.descentRatio=s},i.defineClass({name:"PGMFont",ctor:n,statics:{library:{},PROP_CSS_NAME:"cssName",PROP_POSTSCRIPT_NAME:"postScriptName",PROP_STYLE:"style",PROP_WEIGHT:"weight",PROP_FAMILY:"family",PROP_CAP_RATIO:"capRatio",PROP_ASCENT_RATIO:"ascent-ratio",PROP_DESCENT_RATIO:"descent-ratio",PROP_CONTENT_ID:"content-id",fromDescriptor:function(e){var t;return(t=n.library[e.postScriptName])?t:n.getOrCreate(e.postScriptName,e.cssName,e.style,e.weight,e.resolveFamily(),e.capRatio,e.ascentRatio,e.descentRatio)},getOrCreate:function(e,t,o,r,i,a,s,l){var c;if(c=n.library[e])return c;var u=new n(e,t,o,r,i,a,s,l);return n.library[e]=u,u},decode:function(e,t){var o,r,s,l,c,u,p,d,h;return(o=e)?null!=(r=i.as(o[n.PROP_POSTSCRIPT_NAME],"String"))&&null!=(s=i.as(o[n.PROP_CSS_NAME],"String"))&&null!=(l=i.as(o[n.PROP_STYLE],"String"))&&null!=(c=i.as(o[n.PROP_WEIGHT],"Int"))&&null!=(u=i.as(o[n.PROP_FAMILY],"String"))&&null!=(p=i.as(o[n.PROP_CAP_RATIO],"Double"))&&null!=(d=i.as(o[n.PROP_ASCENT_RATIO],"Double"))&&null!=(h=i.as(o[n.PROP_DESCENT_RATIO],"Double"))?n.getOrCreate(r,s,l,c,u,p,d,h):(t.error(a.PGMError.BAD_FONT,"Missing required parameter"),null):null}},props:{encode:function(){var e={};return e[n.PROP_POSTSCRIPT_NAME]=this.postScriptName,e[n.PROP_CSS_NAME]=this.cssName,e[n.PROP_STYLE]=this.style,e[n.PROP_WEIGHT]=this.weight,e[n.PROP_FAMILY]=this.family,e[n.PROP_CAP_RATIO]=this.capRatio,e[n.PROP_ASCENT_RATIO]=this.ascentRatio,e[n.PROP_DESCENT_RATIO]=this.descentRatio,e[n.PROP_CONTENT_ID]="font:"+this.postScriptName,e},asString:{get:function(){return"PGMFont(postScriptName:"+this.postScriptName+"cssName:"+this.cssName+"style:"+this.style+"weight:"+i.toString(this.weight)+";family:"+this.family+";capRatio:"+i.toString(this.capRatio)+";ascentRatio:"+i.toString(this.ascentRatio)+";descentRatio:"+i.toString(this.descentRatio)+")"}},isEqualTo:function(e){return this.postScriptName==e.postScriptName&&this.cssName==e.cssName&&this.style==e.style&&this.weight==e.weight&&this.family==e.family&&this.capRatio==e.capRatio&&this.ascentRatio==e.ascentRatio&&this.descentRatio==e.descentRatio}}}),n)},dmHI:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("rKjb"),s=o("smUN"),l=o("sq5L");r.PGMFilter=(n=function e(t,o,n,r,i){this.spec=i,a.PGMComposite.call(this,e.TYPE,t,o,n,r)},i.defineClass({name:"PGMFilter",ctor:n,superName:"PGMComposite",statics:{TYPE:"pgm-filter",PROP_SPEC:"spec",decodeComposite:function(e,t,o,r,a,c){var u,p;if(u=i.as(e[n.PROP_SPEC],["Dictionary","String","Any"])){if(p=s.PGMFilterSpec.decode(u,c))return new n(t,o,r,a,p)}else c.error(l.PGMError.BAD_FILTER_SPEC,"no filter spec property found");return null}},props:{encode:function(){var e=a.PGMComposite.prototype.encode.call(this);return e[n.PROP_SPEC]=this.spec.encode(),e},withEntity:function(e){return new n(e,this.meta,this.animations,this.children,this.spec)},withEntityAndChildren:function(e,t){return new n(e,this.meta,this.animations,t,this.spec)},isEqualTo:function(e){return this===e||!!(t=i.as(e,n))&&a.PGMComposite.prototype.isEqualTo.call(this,t)&&this.spec.isEqualTo(t.spec);var t}}}),n)},dz2e:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("smUN"),l=o("sq5L"),c=o("Zifs");r.PGMOverlayFilterSpec=(n=function e(t){this.filterColor=t,s.PGMFilterSpec.call(this,e.TYPE)},i.defineClass({name:"PGMOverlayFilterSpec",ctor:n,superName:"PGMFilterSpec",statics:{TYPE:"PGMOverlayFilterSpec",PROP_FILTER_COLOR:"filterColor",decodeSpec:function(e,t){var o;return(o=c.SolidColor.decodeJson(i.as(e[n.PROP_FILTER_COLOR],"AnyObject")))?new n(o):(t.error(l.PGMError.BAD_FILTER_SPEC,"PGMOverlayFilterSpec: missing parameter(s)"),null)}},props:{encode:function(){var e=s.PGMFilterSpec.prototype.encode.call(this);return e[n.PROP_FILTER_COLOR]=this.filterColor.encodeJson(),e},isEqualTo:function(e){return this===e||!!(t=i.as(e,n))&&i.eq(c._equality_SolidColor_SolidColor,this.filterColor,t.filterColor);var t},interpolate:function(e,t){return t<=0?this:t>=1?e:(o=i.as(e,n))?new n(this.filterColor.interpolate(o.filterColor,t)):(a.LegacyCoreAssert.fail("can't interpolate to a different function spec type",void 0,"PGMOverlayFilterSpec.interpolate","PGMOverlayFilterSpec.swift",73),this);var o}}}),n)},eLhV:function(e,t,o){var n,r,i,a,s=t,l=o("oAGj"),c=o("Tq01"),u=o("4mEG"),p=o("c9Jm"),d=o("yGNn"),h=o("FNB+"),f=o("iCxV"),m=o("3lr5"),g=o("cRpU"),y=o("enh0"),T=o("Vm85"),A=o("VJ9E"),C=o("8t9B"),_=o("uUew");s.SetHighlightMethodTest=(n=function e(){this.actionSequence_SetHighlightMethod=[function(){return new u.AddTextContentAction(e.initialText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.lockupFont_=null,p.ActionTestBase.call(this)},l.defineClass({name:"SetHighlightMethodTest",ctor:n,superName:"ActionTestBase",statics:{initialText_:"Some text that is long enough to span lines",testFont_:"Bellfort",getTheoFont:function(e){var t=A.TheoFont.init_9e5c(f.Host.fontProvider.getIncludedFonts(m.ANY_DOCUMENT).find((function(t){return t.postScriptName==e})));return XCTAssertEqual(t.fontData.postScriptName,e),t}},props:{textForma:{get:function(){return l.first(l.opt(l.as(this.getActionResult(0),c.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var r=this;return d.CorePromise.resolve(e.concat([function(){return r.lockupFont_=l.opt(l.opt(l.opt(l.as(l.opt(r.textForma,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.font})),(function(e){return e.fontData.postScriptName})),l.opt(l.opt(r.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(r.textForma)})),new g.EnterCharStyleModeAction(r.textForma)},function(){return new g.SetHighlightMethodAction(C.HighlightMethod.EvenRows,!0)},function(){return new g.SetFontAction(n.getTheoFont(n.testFont_))},function(){return new g.ExitCharStyleModeAction(r.textForma)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=l.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var r=l.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(r===this.textForma),XCTAssertEqual(l.opt(l.opt(r,(function(e){return e.controller})),(function(e){return e.kind})),C.TypeLockupController.KIND),XCTAssertEqual(l.opt(l.opt(l.opt(l.as(l.opt(r,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.font})),(function(e){return e.fontData.postScriptName})),this.lockupFont_),r.visit(h.FormaTraversal.PreOrder,(function(e,t,o){var r;return(r=l.as(e,y.TextForma))&&r.rowIndex%2==0&&XCTAssertEqual(r.fontDescriptor.postScriptName,n.testFont_),!1}))},validateAfterUndo:function(e,t){var o=this;XCTAssertEqual(l.opt(l.opt(l.opt(l.as(l.opt(this.textForma,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.font})),(function(e){return e.fontData.postScriptName})),this.lockupFont_),XCTAssertNil(l.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)})))},validateAfterRedo:function(e,t){var o=this,r=l.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(r),XCTAssertEqual(l.opt(l.opt(r,(function(e){return e.controller})),(function(e){return e.kind})),C.TypeLockupController.KIND),XCTAssertEqual(l.opt(l.opt(l.opt(l.as(l.opt(r,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.font})),(function(e){return e.fontData.postScriptName})),this.lockupFont_),r.visit(h.FormaTraversal.PreOrder,(function(e,t,o){var r;return(r=l.as(e,y.TextForma))&&r.rowIndex%2==0&&XCTAssertEqual(r.fontDescriptor.postScriptName,n.testFont_),!1}))}}}),n),s.ApplyCharStyleTest=(r=function e(){this.actionSequence_ApplyCharStyle=[function(){return new u.AddTextContentAction(e.initialText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldRanges_=null,this.lastChildForma_=null,p.ActionTestBase.call(this)},l.defineClass({name:"ApplyCharStyleTest",ctor:r,superName:"ActionTestBase",statics:{initialText_:"0 1 2 3 4"},props:{textForma:{get:function(){return l.first(l.opt(l.as(this.getActionResult(0),c.FormaActionResult),(function(e){return e.formae})))}},tearDown:function(){this.lastChildForma_=null,p.ActionTestBase.prototype.tearDown.call(this)},populateActionSequence:function(e,t,o){var n=this;return d.CorePromise.resolve(e.concat([function(){return n.oldRanges_=l.clone(l.opt(l.as(l.opt(n.textForma,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.charStyleRanges}))||[]),l.opt(l.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)})),n.textForma.visit(h.FormaTraversal.PreOrder,(function(e,t,o){var r;return(r=l.as(e,y.TextForma))&&(n.lastChildForma_=r),!1})),new g.EnterCharStyleModeAction(n.textForma)},function(){return new g.ApplyCharStyleAction(n.lastChildForma_,C.TypeLockupController.HIGHLIGHT_STYLE,C.CharStyleApplyMode.Apply,new _.TextRange(0,0))},function(){return new g.ExitCharStyleModeAction(n.textForma)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=l.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n,r=l.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(r===this.textForma),XCTAssertEqual(l.opt(l.opt(r,(function(e){return e.controller})),(function(e){return e.kind})),C.TypeLockupController.KIND),XCTAssertNotNil(l.opt(l.as(l.opt(r,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.charStyleRanges}))),(n=l.opt(l.as(l.opt(r,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.charStyleRanges})))&&(XCTAssertEqual(l.last(n).start,this.lastChildForma_.rangeInLockup.start),XCTAssertEqual(l.last(n).end,this.lastChildForma_.rangeInLockup.end))},validateAfterUndo:function(e,t){var o=this;XCTAssertEqual(l.opt(l.as(l.opt(this.textForma,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.charStyleRanges})),this.oldRanges_),XCTAssertNil(l.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)})))},validateAfterRedo:function(e,t){var o,n=this,r=l.opt(this.testPage_,(function(e){return e.formaByID(n.testFormaID_)}));XCTAssertNotNil(r),XCTAssertEqual(l.opt(l.opt(r,(function(e){return e.controller})),(function(e){return e.kind})),C.TypeLockupController.KIND),XCTAssertNotNil(l.opt(l.as(l.opt(r,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.charStyleRanges}))),(o=l.opt(l.as(l.opt(r,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.charStyleRanges})))&&(XCTAssertEqual(l.last(o).start,this.lastChildForma_.rangeInLockup.start),XCTAssertEqual(l.last(o).end,this.lastChildForma_.rangeInLockup.end))}}}),r),s.ApplyCharStyleWithoutUITest=(i=function e(){this.actionSequence_ApplyCharStyle=[function(){return new u.AddTextContentAction(e.initialText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldRanges_=null,this.lastChildForma_=null,p.ActionTestBase.call(this)},l.defineClass({name:"ApplyCharStyleWithoutUITest",ctor:i,superName:"ActionTestBase",statics:{initialText_:"0 1 2 3 4"},props:{textForma:{get:function(){return l.first(l.opt(l.as(this.getActionResult(0),c.FormaActionResult),(function(e){return e.formae})))}},tearDown:function(){this.lastChildForma_=null,p.ActionTestBase.prototype.tearDown.call(this)},populateActionSequence:function(e,t,o){var n=this;return d.CorePromise.resolve(e.concat([function(){return n.oldRanges_=l.clone(l.opt(l.as(l.opt(n.textForma,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.charStyleRanges}))||[]),l.opt(l.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)})),n.textForma.visit(h.FormaTraversal.PreOrder,(function(e,t,o){var r;return(r=l.as(e,y.TextForma))&&(n.lastChildForma_=r),!1})),new g.ApplyCharStyleWithoutUIAction(n.lastChildForma_,C.TypeLockupController.HIGHLIGHT_STYLE,C.CharStyleApplyMode.Apply,new _.TextRange(0,0))}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=l.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n,r=l.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(r===this.textForma),XCTAssertEqual(l.opt(l.opt(r,(function(e){return e.controller})),(function(e){return e.kind})),C.TypeLockupController.KIND),XCTAssertNotNil(l.opt(l.as(l.opt(r,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.charStyleRanges}))),(n=l.opt(l.as(l.opt(r,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.charStyleRanges})))&&(XCTAssertEqual(l.last(n).start,this.lastChildForma_.rangeInLockup.start),XCTAssertEqual(l.last(n).end,this.lastChildForma_.rangeInLockup.end))},validateAfterUndo:function(e,t){var o=this;XCTAssertEqual(l.opt(l.as(l.opt(this.textForma,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.charStyleRanges})),this.oldRanges_),XCTAssertNil(l.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)})))},validateAfterRedo:function(e,t){var o,n=this,r=l.opt(this.testPage_,(function(e){return e.formaByID(n.testFormaID_)}));XCTAssertNotNil(r),XCTAssertEqual(l.opt(l.opt(r,(function(e){return e.controller})),(function(e){return e.kind})),C.TypeLockupController.KIND),XCTAssertNotNil(l.opt(l.as(l.opt(r,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.charStyleRanges}))),(o=l.opt(l.as(l.opt(r,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.charStyleRanges})))&&(XCTAssertEqual(l.last(o).start,this.lastChildForma_.rangeInLockup.start),XCTAssertEqual(l.last(o).end,this.lastChildForma_.rangeInLockup.end))}}}),i),s.UpdateCharStyleRangeTest=(a=function e(){this.actionSequence_UpdateCharStyleRange=[function(){return new u.AddTextContentAction(e.initialText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.lockupFont_=null,p.ActionTestBase.call(this)},l.defineClass({name:"UpdateCharStyleRangeTest",ctor:a,superName:"ActionTestBase",statics:{initialText_:"1 2 3 4 5",newText_:"one two three four five",testFont_:"Bellfort",getTheoFont:function(e){var t=A.TheoFont.init_9e5c(f.Host.fontProvider.getIncludedFonts(m.ANY_DOCUMENT).find((function(t){return t.postScriptName==e})));return XCTAssertEqual(t.fontData.postScriptName,e),t}},props:{textForma:{get:function(){return l.first(l.opt(l.as(this.getActionResult(0),c.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var n=this;return d.CorePromise.resolve(e.concat([function(){return n.lockupFont_=l.opt(l.opt(l.opt(l.as(l.opt(n.textForma,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.font})),(function(e){return e.fontData.postScriptName})),l.opt(l.opt(n.testDoc_,(function(e){return e.controller})),(function(e){return e.selection.replaceSelection(n.textForma)})),new g.EnterCharStyleModeAction(n.textForma)},function(){return new g.SetTextAction(a.newText_,n.textForma,[new _.TextRange(0,4)],T.ReplaceTextStrategy.PreventOverlap)},function(){return new g.SetFontAction(a.getTheoFont(a.testFont_))},function(){return new g.ExitCharStyleModeAction(n.textForma)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){var o=this;this.testFormaID_=l.opt(this.textForma,(function(e){return e.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var n=l.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertTrue(n===this.textForma),XCTAssertEqual(l.opt(l.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),C.TypeLockupController.KIND),XCTAssertEqual(l.opt(l.opt(l.opt(l.as(l.opt(n,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.font})),(function(e){return e.fontData.postScriptName})),this.lockupFont_),n.visit(h.FormaTraversal.PreOrder,(function(e,t,n){var r;return(r=l.as(e,y.TextForma))&&(0==r.rangeInLockup.start?XCTAssertEqual(r.fontDescriptor.postScriptName,a.testFont_):XCTAssertEqual(r.fontDescriptor.postScriptName,o.lockupFont_)),!1}))},validateAfterUndo:function(e,t){var o=this;XCTAssertEqual(l.opt(l.opt(l.opt(l.as(l.opt(this.textForma,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.font})),(function(e){return e.fontData.postScriptName})),this.lockupFont_),XCTAssertNil(l.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)})))},validateAfterRedo:function(e,t){var o=this,n=l.opt(this.testPage_,(function(e){return e.formaByID(o.testFormaID_)}));XCTAssertNotNil(n),XCTAssertEqual(l.opt(l.opt(n,(function(e){return e.controller})),(function(e){return e.kind})),C.TypeLockupController.KIND),XCTAssertEqual(l.opt(l.opt(l.opt(l.as(l.opt(n,(function(e){return e.controller})),C.TypeLockupController),(function(e){return e.lockupStyle})),(function(e){return e.font})),(function(e){return e.fontData.postScriptName})),this.lockupFont_),n.visit(h.FormaTraversal.PreOrder,(function(e,t,n){var r;return(r=l.as(e,y.TextForma))&&(0==r.rangeInLockup.start?XCTAssertEqual(r.fontDescriptor.postScriptName,a.testFont_):XCTAssertEqual(r.fontDescriptor.postScriptName,o.lockupFont_)),!1}))}}}),a)},etz5:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"TheoPath":{"className":"TheoPath","type":"object","properties":{"type":{"type":"string","enum":["empty","rect","ellipse","arbitrary"]}}},"TheoPathTypes":{"oneOf":[{"$ref":"#/definitions/TheoEmptyPath"},{"$ref":"#/definitions/TheoRectanglePath"},{"$ref":"#/definitions/TheoEllipsePath"},{"$ref":"#/definitions/TheoArbitraryPath"}]},"TheoEmptyPath":{"className":"TheoEmptyPath","allOf":[{"$ref":"#/definitions/TheoPath"},{"className":"TheoEmptyPath","properties":{"type":{"enum":["empty"]}}}]},"TheoRectanglePath":{"className":"TheoRectanglePath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["rect"]},"coords":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoEllipsePath":{"className":"TheoEllipsePath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["ellipse"]},"coords":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoArbitraryPath":{"className":"TheoArbitraryPath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["arbitrary"]},"fillRule":{"type":"string","enum":["none","nonzero","evenodd"]},"endType":{"type":"string","enum":["butt","round","square"]},"joinType":{"type":"string","enum":["miter","round","bevel"]},"strokeWeight":{"type":"number"},"miterLimit":{"type":"number"},"ops":{"type":"array","items":{"oneOf":[{"type":"string"},{"type":"number"}]}}}}]},"TheoArtworkNode":{"className":"TheoArtworkNode","type":"object","properties":{"type":{"type":"string"}},"required":["type"]},"TheoArtworkNodeTypes":{"oneOf":[{"$ref":"#/definitions/TheoArtworkShape"},{"$ref":"#/definitions/TheoArtworkClipGroup"},{"$ref":"#/definitions/TheoArtworkGroup"}]},"TheoArtworkShape":{"className":"TheoArtworkShape","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["shape"]},"path":{"$ref":"#/definitions/TheoPathTypes"},"paths":{"type":"array","items":{"$ref":"#/definitions/TheoPathTypes"}},"fill-color-role":{"$ref":"Color.json#/definitions/ColorRole"},"stroke-color-role":{"$ref":"Color.json#/definitions/ColorRole"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"stroke-color":{"$ref":"Color.json#/definitions/SolidColor"},"stroke-width":{"type":"number","default":0},"override-bounds":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoArtworkGroup":{"className":"TheoArtworkGroup","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["group"]},"stroke-width":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"},"description":"The constant in code is defined as PROPERTY_NODES but its value is \\"stroke-width\\""},"nodes":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"}}}}]},"TheoArtworkClipGroup":{"className":"TheoArtworkClipGroup","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["clip-group"]},"path":{"$ref":"#/definitions/TheoPathTypes"},"stroke-width":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"},"description":"The constant in code is defined as PROPERTY_NODES but its value is \\"stroke-width\\""},"nodes":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"}}}}]}}}')},euLT:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("Ird5"),s=o("WGnI"),l=o("yjxF"),c=o("sIWg");r.PGMNullNode=(n=function e(t){s.PGMLeaf.call(this,e.TYPE,t,l.PGMNodeMetadata.EMPTY,a.PGMAnimationList.EMPTY,c.TheoRect.Zero)},i.defineClass({name:"PGMNullNode",ctor:n,superName:"PGMLeaf",statics:{TYPE:"null"},props:{withEntity:function(e){return new n(e)}}}),n)},ezSu:function(e,t,o){var n,r,i,a,s,l=t,c=o("oAGj"),u=o("sIWg");l.PathSlicingFilter=(n=function(e){this.sink=e},c.defineClass({name:"PathSlicingFilter",ctor:n,superName:"CoreObject",statics:{_implements:function(e){return"TheoPathRenderer"==e}},props:{transformX:function(e){return e},transformY:function(e){return e},rectangle:function(e,t,o,n){this.sink.rectangle(this.transformX(e),this.transformY(t),this.transformX(o),this.transformY(n))},ellipse:function(e,t,o,n){this.sink.ellipse(this.transformX(e),this.transformY(t),this.transformX(o),this.transformY(n))},newPath:function(e,t,o,n,r){this.sink.newPath(e,t,o,n,r)},moveTo:function(e,t){this.sink.moveTo(this.transformX(e),this.transformY(t))},lineTo:function(e,t){this.sink.lineTo(this.transformX(e),this.transformY(t))},cubicBezier:function(e,t,o,n,r,i){this.sink.cubicBezier(this.transformX(e),this.transformY(t),this.transformX(o),this.transformY(n),this.transformX(r),this.transformY(i))},quadraticBezier:function(e,t,o,n){this.sink.quadraticBezier(this.transformX(e),this.transformY(t),this.transformX(o),this.transformY(n))},closePath:function(){this.sink.closePath()}}}),n),l.DoubleRange=(r=function(e,t){this.lower=e,this.upper=t},c.defineClass({name:"DoubleRange",ctor:r}),r),l.NineSlicingOuterRange=(i=function(e,t){this.range=e,this.prescribedPrescale=t},c.defineClass({name:"NineSlicingOuterRange",ctor:i}),i),l.NineSlicingOuterBounds=(a=function(e,t){this.bounds=e,this.prescribedPrescale=t},c.defineClass({name:"NineSlicingOuterBounds",ctor:a}),a),l.NineSlicingFilter=(s=function(e,t,o,n,r,i){this.guides=t,this.preScale=r,this.forward=i,this.originX=n.minX-o.minX,this.originY=n.minY-o.minY,this.translateX=n.width/r-o.width,this.translateY=n.height/r-o.height,this.ratioX=1+this.translateX/t.width,this.ratioY=1+this.translateY/t.height,l.PathSlicingFilter.call(this,e)},c.defineClass({name:"NineSlicingFilter",ctor:s,superName:"PathSlicingFilter",statics:{requiredPrescaleForMapping:function(e,t,o){return t.lower<=e.lower&&t.upper<=e.lower||t.lower>=e.upper&&t.upper>=e.upper?(o.upper-o.lower)/(t.upper-t.lower):null},calculateOuterRangeForMapping:function(e,t,o,n,r){var i=0,a=0,s=(e.upper-t.upper)*o,c=(t.lower-e.lower)*o;if(n.upper>=t.upper&&(a=r.upper+(e.upper-n.upper)*o),n.lower<=t.lower)i=r.lower-(n.lower-e.lower)*o,n.upper<=t.lower?a=i+c+s:n.upper<t.upper&&(a=i+c+(r.upper-(i+c))*(t.upper-t.lower)/(n.upper-t.lower)+s);else if(n.lower<t.upper)if(n.upper<t.upper){var u=(r.upper-r.lower)/(n.upper-n.lower);i=r.lower-u*(n.lower-t.lower)-c,a=r.upper+u*(t.upper-n.upper)+s}else i=a-s-(a-s-r.lower)*(t.upper-t.lower)/(t.upper-n.lower)-c;else i=a-c-s;return new l.DoubleRange(i,a)},justOutsetTenPercent:!1,calculateOuterBoundsForMapping:function(e,t,o,n,r){var i,a,c;if(s.justOutsetTenPercent)return new l.NineSlicingOuterBounds(new u.TheoRect(r.minX-.1*r.width,r.minY-.1*r.width,r.maxX+.1*r.width,r.maxY+.1*r.width),null);var p=new l.DoubleRange(t.minX,t.maxX),d=new l.DoubleRange(t.minY,t.maxY),h=new l.DoubleRange(n.minX,n.maxX),f=new l.DoubleRange(n.minY,n.maxY),m=new l.DoubleRange(r.minX,r.maxX),g=new l.DoubleRange(r.minY,r.maxY),y=(i=s.requiredPrescaleForMapping(p,h,m))||null!=i?i:s.requiredPrescaleForMapping(d,f,g),T=s.calculateOuterRangeForMapping(new l.DoubleRange(e.minX,e.maxX),p,(a=y)||null!=a?a:o,h,m),A=s.calculateOuterRangeForMapping(new l.DoubleRange(e.minY,e.maxY),d,(c=y)||null!=c?c:o,f,g);return new l.NineSlicingOuterBounds(new u.TheoRect(T.lower,A.lower,T.upper,A.upper),y)},_implements:function(e){return"TheoPathRenderer"==e}},props:{transformX:function(e){if(this.forward){var t=0;return t=e<=this.guides.minX?e:e>=this.guides.maxX?e+this.translateX:this.guides.minX+(e-this.guides.minX)*this.ratioX,this.originX+t*this.preScale}var o=(e-this.originX)/this.preScale;return o<=this.guides.minX?o:o>=this.guides.maxX+this.translateX?o-this.translateX:this.guides.minX+(o-this.guides.minX)/this.ratioX},transformY:function(e){if(this.forward){var t=0;return t=e<=this.guides.minY?e:e>=this.guides.maxY?e+this.translateY:this.guides.minY+(e-this.guides.minY)*this.ratioY,this.originY+t*this.preScale}var o=(e-this.originY)/this.preScale;return o<=this.guides.minY?o:o>=this.guides.maxY+this.translateY?o-this.translateY:this.guides.minY+(o-this.guides.minY)/this.ratioY}}}),s)},"f/aw":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("5D0C"),s=o("7hc0"),l=o("sq5L"),c=o("W6ub"),u=o("bJhu"),p=o("sIWg");r.PGMTextAnimation=(n=function e(t,o,n,r,i,s,l){this.startBounds=o,this.endBounds=r,this.startStyle=n,this.endStyle=i,this.startRenderRuns=s,this.endRenderRuns=l,a.PGMAnimation.call(this,e.TYPE,t)},i.defineClass({name:"PGMTextAnimation",ctor:n,superName:"PGMAnimation",statics:{TYPE:"pgm-anim-text",PROP_START_BOUNDS:"start-bounds",PROP_START_STYLE:"start-style",PROP_END_BOUNDS:"end-bounds",PROP_END_STYLE:"end-style",PROP_START_RENDERRUNS:"start-render-runs",PROP_END_RENDERRUNS:"end-render-runs",decodeAnimation:function(e,t,o,r){var a,s,d,h,f,m;return(a=p.TheoRect.decodeJson(i.as(e[n.PROP_START_BOUNDS],"AnyObject")))&&(s=u.PGMTextStyle.decode(i.as(e[n.PROP_START_STYLE],["Dictionary","String","Any"]),o,r))&&(d=p.TheoRect.decodeJson(i.as(e[n.PROP_END_BOUNDS],"AnyObject")))&&(h=u.PGMTextStyle.decode(i.as(e[n.PROP_END_STYLE],["Dictionary","String","Any"]),o,r))&&(f=c.PGMRenderRuns.decode(i.as(e[n.PROP_START_RENDERRUNS],["Dictionary","String","Any"])))&&(m=c.PGMRenderRuns.decode(i.as(e[n.PROP_END_RENDERRUNS],["Dictionary","String","Any"])))?new n(t,a,s,d,h,f,m):(r.error(l.PGMError.BAD_TEXT_ANIMATION,"Couldn't decode required parameter(s)"),null)}},props:{encode:function(){var e=a.PGMAnimation.prototype.encode.call(this);return e[a.PGMAnimation.PROP_TYPE]=n.TYPE,e[n.PROP_START_BOUNDS]=this.startBounds.encodeJson(),e[n.PROP_START_STYLE]=this.startStyle.encode(),e[n.PROP_END_BOUNDS]=this.endBounds.encodeJson(),e[n.PROP_END_STYLE]=this.endStyle.encode(),e[n.PROP_START_RENDERRUNS]=this.startRenderRuns.encode(),e[n.PROP_END_RENDERRUNS]=this.endRenderRuns.encode(),e},isEqualTo:function(e){return this===e||!!(t=i.as(e,n))&&this.startBounds.equal(t.startBounds)&&this.startStyle.isEqualTo(t.startStyle)&&this.endBounds.equal(t.endBounds)&&this.endStyle.isEqualTo(t.endStyle)&&this.startRenderRuns.isEqualTo(t.startRenderRuns)&&this.endRenderRuns.isEqualTo(t.endRenderRuns)&&a.PGMAnimation.prototype.isEqualTo.call(this,e);var t},interpolate:function(e){var t=s.PGMAnimationUtils.bound01(this.timeFn.apply(e));return{bounds:this.startBounds.interpolate(this.endBounds,t),style:this.startStyle.interpolate(this.endStyle,t),renderRuns:this.startRenderRuns.interpolate(this.endRenderRuns,t)}}}}),n)},fS1o:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"TheoPath":{"className":"TheoPath","type":"object","properties":{"type":{"type":"string","enum":["empty","rect","ellipse","arbitrary"]}}},"TheoPathTypes":{"oneOf":[{"$ref":"#/definitions/TheoEmptyPath"},{"$ref":"#/definitions/TheoRectanglePath"},{"$ref":"#/definitions/TheoEllipsePath"},{"$ref":"#/definitions/TheoArbitraryPath"}]},"TheoEmptyPath":{"className":"TheoEmptyPath","allOf":[{"$ref":"#/definitions/TheoPath"},{"className":"TheoEmptyPath","properties":{"type":{"enum":["empty"]}}}]},"TheoRectanglePath":{"className":"TheoRectanglePath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["rect"]},"coords":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoEllipsePath":{"className":"TheoEllipsePath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["ellipse"]},"coords":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoArbitraryPath":{"className":"TheoArbitraryPath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["arbitrary"]},"fillRule":{"type":"string","enum":["none","nonzero","evenodd"]},"endType":{"type":"string","enum":["butt","round","square"]},"joinType":{"type":"string","enum":["miter","round","bevel"]},"strokeWeight":{"type":"number"},"miterLimit":{"type":"number"},"ops":{"type":"array","items":{"oneOf":[{"type":"string"},{"type":"number"}]}}}}]},"TheoArtworkNode":{"className":"TheoArtworkNode","type":"object","properties":{"type":{"type":"string"}},"required":["type"]},"TheoArtworkNodeTypes":{"oneOf":[{"$ref":"#/definitions/TheoArtworkShape"},{"$ref":"#/definitions/TheoArtworkClipGroup"},{"$ref":"#/definitions/TheoArtworkGroup"}]},"TheoArtworkShape":{"className":"TheoArtworkShape","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["shape"]},"path":{"$ref":"#/definitions/TheoPathTypes"},"paths":{"type":"array","items":{"$ref":"#/definitions/TheoPathTypes"}},"fill-color-role":{"$ref":"Color.json#/definitions/ColorRole"},"stroke-color-role":{"$ref":"Color.json#/definitions/ColorRole"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"stroke-color":{"$ref":"Color.json#/definitions/SolidColor"},"stroke-width":{"type":"number","default":0},"override-bounds":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoArtworkGroup":{"className":"TheoArtworkGroup","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["group"]},"stroke-width":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"},"description":"The constant in code is defined as PROPERTY_NODES but its value is \\"stroke-width\\""}}}]},"TheoArtworkClipGroup":{"className":"TheoArtworkClipGroup","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["clip-group"]},"path":{"$ref":"#/definitions/TheoPathTypes"},"stroke-width":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"},"description":"The constant in code is defined as PROPERTY_NODES but its value is \\"stroke-width\\""}}}]}}}')},fnrT:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("yGNn"),s=o("IUM5"),l=o("GINV");r.StorageSpecApplicationResource=(n=function e(t,o){this.categoryID=t,this.resourceID=o,l.StorageSpec.call(this,e.KIND)},i.defineClass({name:"StorageSpecApplicationResource",ctor:n,superName:"StorageSpec",statics:{KIND:"app-resource",KEY_CATEGORY_ID:"category-id",KEY_RESOURCE_ID:"resource-id",decodeSpec:function(e){var t,o;if(null!=(o=i.as(e[n.KEY_RESOURCE_ID],"String"))){var r=(t=i.as(e[n.KEY_CATEGORY_ID],"String"))||null!=t?t:s.CATEGORY_ID_IMAGES;return new n(r,o)}return null}},props:{encode:function(){var e={};return e[l.StorageSpec.KEY_KIND]=n.KIND,e[n.KEY_CATEGORY_ID]=this.categoryID,e[n.KEY_RESOURCE_ID]=this.resourceID,e},isEqualTo:function(e){return this===e||!!(t=i.as(e,n))&&this.categoryID==t.categoryID&&this.resourceID==t.resourceID;var t},read:function(){return a.CorePromise.reject("StorageSpecApplicationResource: read is a todo")},canRead:function(){return!0},readUsingContext:function(e){return this.read()}}}),n)},g6aL:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("rKjb");r.PGMSimpleGroup=(n=function e(t,o,n,r){a.PGMComposite.call(this,e.TYPE,t,o,n,r)},i.defineClass({name:"PGMSimpleGroup",ctor:n,superName:"PGMComposite",statics:{TYPE:"pgm-group",decodeComposite:function(e,t,o,r,i,a){return new n(t,o,r,i)}},props:{encode:function(){return a.PGMComposite.prototype.encode.call(this)},withEntity:function(e){return new n(e,this.meta,this.animations,this.children)},withEntityAndChildren:function(e,t){return new n(e,this.meta,this.animations,t)}}}),n)},gLl0:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"ContentNode":{"className":"ContentNode","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"tags":{"type":"object","patternProperties":{"^.*$":{"type":"string"}}}},"required":["id","path"]}]},"NonRootContentNodeTypes":{"oneOf":[{"$ref":"#/definitions/GroupContentNode"},{"$ref":"#/definitions/ImageContentNode"},{"$ref":"#/definitions/TextContentNode"},{"$ref":"#/definitions/VectorContentNode"},{"$ref":"#/definitions/VideoContentNode"}]},"GroupContentNodeBase":{"allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"children":{"type":"array","items":{"$ref":"#/definitions/NonRootContentNodeTypes"}}}}]},"GroupContentNode":{"className":"GroupContentNode","allOf":[{"$ref":"#/definitions/GroupContentNodeBase"},{"properties":{"kind":{"enum":["group"]}},"required":["kind"]}]},"RootContentNode":{"className":"RootContentNode","allOf":[{"$ref":"#/definitions/GroupContentNodeBase"},{"properties":{"kind":{"enum":["root"]}},"required":["kind"]}]},"ImageColorData":{"className":"ImageColorData","type":"object","properties":{"red":{"type":"number"},"green":{"type":"number"},"blue":{"type":"number"},"alpha":{"type":"number"},"coverage":{"type":"number"}}},"ImageContentNode":{"className":"ImageContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["image"]},"pixel-width":{"type":"integer"},"pixel-height":{"type":"integer"},"image-has_alpha":{"type":"boolean"},"image-color-data":{"type":"array","items":{"$ref":"#/definitions/ImageColorData"}},"saliency-width":{"type":"integer"},"saliency-height":{"type":"integer"},"saliency-data":{"type":"array","items":{"type":"number"}},"edge-data":{"type":"array","items":{"type":"number"}},"focus-region":{"$ref":"Root.json#/definitions/TheoRect"}},"required":["kind"]}]},"TextContentNode":{"className":"TextContentNode","allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"kind":{"enum":["text"]},"text-model":{"$ref":"Text.json#/definitions/ContentTextModel"}},"required":["kind"]}]},"MediaMetadata":{"className":"MediaMetadata","type":"object","properties":{"search":{"type":"string"},"type":{"type":"string"},"source_name":{"type":"string"},"source_url":{"type":"string"},"owner":{"type":"string"},"asset_id":{"type":"string"},"creator_user_id":{"type":"string"},"creator_display_name":{"type":"string"},"design_intent":{"type":"string"},"source":{"type":"string"},"photo_name":{"type":"string"},"tags":{"type":"string"}}},"URLBasedContentNode":{"className":"URLBasedContentNode","allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"data-url":{"type":"string"},"mimetype":{"type":"string"},"element-id":{"type":"string"},"roles":{"type":"array","items":{"type":"string"}},"components":{"type":"array","items":{"type":"object","properties":{"url":{"type":"string"},"id":{"type":"string"},"length":{"type":"integer"},"name":{"type":"string"},"path":{"type":"string"},"mimeType":{"type":"string"},"etag":{"type":"string"}}},"maxItems":1},"media-metadata":{"$ref":"#/definitions/MediaMetadata"}}}]},"VectorContentNode":{"className":"VectorContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["vector"]},"size":{"$ref":"Root.json#/definitions/TheoSize"}},"required":["kind"]}]},"VideoContentNode":{"className":"VideoContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["video"]},"width":{"type":"integer"},"height":{"type":"integer"},"duration":{"$ref":"Root.json#/definitions/TheoTime"},"time-samples":{"type":"array","items":{"$ref":"Root.json#/definitions/TheoTime"}}},"required":["kind"]}]}}}')},gXiO:function(e,t,o){var n,r=t,i=o("oAGj");r.CoreObject=(n=function(){},i.defineClass({name:"CoreObject",ctor:n}),n)},"gl/o":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"FormaAnimation":{"className":"FormaAnimation","type":"object","properties":{"kind":{"type":"string","enum":["FormaAnimation"]},"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"end-time":{"$ref":"Root.json#/definitions/TheoTime"},"key-frames":{"type":"array","items":{"$ref":"#/definitions/KeyFrame"}},"animation-style":{"$ref":"#/definitions/AnimationStyle"},"name":{"type":"string"}},"required":["start-time","end-time","key-frames"]},"KeyFrame":{"className":"KeyFrame","type":"object","properties":{"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"timing-function":{"type":"string"},"placement":{"$ref":"Root.json#/definitions/Matrix2D"},"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"}}},"AnimationStyle":{"className":"AnimationStyle","type":"object","properties":{"name":{"type":"string"},"variant":{"type":"integer"},"variant-count":{"type":"integer"},"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"end-time":{"$ref":"Root.json#/definitions/TheoTime"},"category":{"type":"string"},"looping":{"type":"boolean","default":false},"text-style":{"type":"boolean"},"image-style":{"type":"boolean"}},"required":["name","variant","variant-count"]}}}')},h8iP:function(e,t,o){o("oAGj")},hJmx:function(e,t,o){var n=t,r=o("oAGj");n.HostFactoriesProtocol=r.defineProtocol("HostFactoriesProtocol",{constructDocumentStateManager:"(TheoDocument) -> IDocumentStateManager"})},hauK:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("tGKA"),l=o("Ird5"),c=o("rKjb"),u=o("sq5L"),p=o("WGnI"),d=o("yjxF");r.IPGMDecoderFactory=i.defineProtocol("IPGMDecoderFactory",{constructNode:"(String, IPGMLog) -> PGMNode",constructTextStyle:"(String, IPGMLog) -> PGMTextStyle",constructFont:"(String, IPGMLog) -> PGMFont"}),r.PGMNode=(n=function(e,t,o,n){this.type=e,this.entity=t,this.meta=o,this.animations=n},i.defineClass({name:"PGMNode",ctor:n,statics:{PROP_ENTITY:"entity",PROP_TYPE:"type",PROP_ANIMATIONS:"animations",PROP_META:"meta",decode:function(e,t,o){var r,a,s;if(null!=(a=i.as(e[n.PROP_ENTITY],"String"))&&null!=(s=i.as(e[n.PROP_TYPE],"String"))){var h,f,m=d.PGMNodeMetadata.decode(i.as(e[n.PROP_META],["Dictionary","String","Any"]),o),g=l.PGMAnimationList.decode(i.as(e[n.PROP_ANIMATIONS],["Array","Any"]),t,o);(h=p.PGMLeaf.decodeNode(e,s,a,m,g,t,o))?r=h:(f=c.PGMComposite.decodeNode(e,s,a,m,g,t,o))?r=f:(o.error(u.PGMError.UNKNOWN_NODE_TYPE,"Not a handled node type: "+s+"."),r=null)}else o.error(u.PGMError.BAD_NODE,"Missing entity and/or type properties."),r=null;return r}},props:{encode:function(){var e={};return e[n.PROP_TYPE]=this.type,e[n.PROP_ENTITY]=this.entity,this.animations.isEmpty||(e[n.PROP_ANIMATIONS]=this.animations.encode()),this.meta.isEmpty()||(e[n.PROP_META]=this.meta.encode()),e},getTextStylesReferenced:function(){return null},withEntity:function(e){return a.LegacyCoreAssert.fail("cloning a base PGMNode?",void 0,"PGMNode.withEntity","PGMNode.swift",67),new n(this.type,e,this.meta,this.animations)},visit:function(e){e(this)},visitByRef:function(e){},visitEx:function(e,t,o,n,r){return void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=s.Matrix2D.Identity),void 0===r&&(r=s.Matrix2D.Identity),e(this,n,r)?null:this},countIf:function(e){var t=0;return this.visit((function(o){e(o)&&(t+=1)})),t},isEqualTo:function(e){return this===e||this.type==e.type&&this.entity==e.entity&&this.meta.isEqualTo(e.meta)&&this.animations.isEqualTo(e.animations)}}}),n)},hgLm:function(e,t,o){var n,r,i,a,s,l,c,u,p,d,h,f,m,g,y,T,A=t,C=o("oAGj"),_=o("gXiO"),S=o("dJuF"),P=o("iCxV"),F=o("fNpk"),v=o("tGKA"),R=o("oKlP"),b=o("sIWg");A.TheoPathRenderer=C.defineProtocol("TheoPathRenderer",{rectangle:"(Double, Double, Double, Double) -> Void",ellipse:"(Double, Double, Double, Double) -> Void",newPath:"(String, String, String, Double, Double) -> Void",moveTo:"(Double, Double) -> Void",lineTo:"(Double, Double) -> Void",cubicBezier:"(Double, Double, Double, Double, Double, Double) -> Void",quadraticBezier:"(Double, Double, Double, Double) -> Void",closePath:"() -> Void"}),A.PROPERTY_TYPE="type",A.PROPERTY_FILLRULE="fillRule",A.PROPERTY_STROKEWEIGHT="strokeWeight",A.PROPERTY_JOINTYPE="joinType",A.PROPERTY_ENDTYPE="endType",A.PROPERTY_MITERLIMIT="miterLimit",A.PROPERTY_COORDS="coords",A.TheoPath=(n=function e(t,o,n,r,i,a){this.appearanceHash_=null,void 0===o&&(o=e.PATHFILL_DEFAULT),void 0===n&&(n=e.PATHEND_DEFAULT),void 0===r&&(r=e.PATHJOIN_DEFAULT),void 0===i&&(i=e.PATHSTROKE_DEFAULT),void 0===a&&(a=e.PATHMITERLIMIT_DEFFAULT),this.type=t,this.pathFillType=o,this.pathEndcapType=n,this.pathJoinType=r,this.pathStrokeWeight=i,this.pathMiterLimit=a,_.CoreObject.call(this)},r={},C.defineClass({name:"TheoPath",ctor:n,superName:"CoreObject",statics:{emptyPath:function(){return new A.TheoEmptyPath},PATHFILL_NONE:"none",PATHFILL_NONZERO:"nonzero",PATHFILL_EVENODD:"evenodd",PATHEND_BUTT:"butt",PATHEND_ROUND:"round",PATHEND_SQUARE:"square",PATHJOIN_MITER:"miter",PATHJOIN_ROUND:"round",PATHJOIN_BEVEL:"bevel",PATHFILL_DEFAULT:{get:function(){return void 0===r.PATHFILL_DEFAULT&&(r.PATHFILL_DEFAULT=n.PATHFILL_NONZERO),r.PATHFILL_DEFAULT}},PATHEND_DEFAULT:{get:function(){return void 0===r.PATHEND_DEFAULT&&(r.PATHEND_DEFAULT=n.PATHEND_BUTT),r.PATHEND_DEFAULT}},PATHJOIN_DEFAULT:{get:function(){return void 0===r.PATHJOIN_DEFAULT&&(r.PATHJOIN_DEFAULT=n.PATHJOIN_MITER),r.PATHJOIN_DEFAULT}},PATHSTROKE_DEFAULT:0,PATHMITERLIMIT_DEFFAULT:4,decodeJson:function(e){var t,o,r,i,a,s,l;if(null==e);else if(l=C.as(e,["Dictionary","String","Any"])){var c;if(null!=(c=C.as(l[A.PROPERTY_TYPE],"String"))){var u=(t=C.as(l[A.PROPERTY_FILLRULE],"String"))||null!=t?t:n.PATHFILL_DEFAULT,p=(o=C.as(l[A.PROPERTY_ENDTYPE],"String"))||null!=o?o:n.PATHEND_DEFAULT,d=(r=C.as(l[A.PROPERTY_JOINTYPE],"String"))||null!=r?r:n.PATHJOIN_DEFAULT,h=(i=C.as(l[A.PROPERTY_STROKEWEIGHT],"Double"))||null!=i?i:n.PATHSTROKE_DEFAULT,f=(a=C.as(l[A.PROPERTY_MITERLIMIT],"Double"))||null!=a?a:n.PATHMITERLIMIT_DEFFAULT;c==A.TheoEmptyPath.TYPE?s=n.emptyPath():c==A.TheoRectanglePath.TYPE?s=A.TheoRectanglePath.decodeJsonDict(l,u,p,d,h,f):c==A.TheoEllipsePath.TYPE?s=A.TheoEllipsePath.decodeJsonDict(l,u,p,d,h,f):c==A.TheoArbitraryPath.TYPE?s=A.TheoPathBuilder.decodeJsonDict(l,u,p,d,h,f):F.LegacyCoreAssert.fail("Unrecognized type",{type:c},"TheoPath.decodeJson","TheoPath.swift",126)}else F.LegacyCoreAssert.fail("No type field",void 0,"TheoPath.decodeJson","TheoPath.swift",129)}else F.LegacyCoreAssert.fail("Not a dictionary",void 0,"TheoPath.decodeJson","TheoPath.swift",132);return s},arraysEqual:function(e,t){if(e.length!=t.length)return!1;for(var o=C.iter(C.range(0,e.length,!1));!o.done;o.next()){var n=o.value;if(!e[n].isEqualTo(t[n]))return!1}return!0}},props:{bounds:{get:function(){return null}},render:function(e){},encodeJson:function(){var e={};return e[A.PROPERTY_TYPE]=this.type,e[A.PROPERTY_FILLRULE]=this.pathFillType,e[A.PROPERTY_JOINTYPE]=this.pathJoinType,e[A.PROPERTY_ENDTYPE]=this.pathEndcapType,F.LegacyCoreAssert.isFalse(isNaN(this.pathStrokeWeight),"Can't persist NaN pathStrokeWeight value",void 0,"TheoPath.encodeJson","TheoPath.swift",144),e[A.PROPERTY_STROKEWEIGHT]=this.pathStrokeWeight,F.LegacyCoreAssert.isFalse(isNaN(this.pathMiterLimit),"Can't persist NaN pathMiterLimit value",void 0,"TheoPath.encodeJson","TheoPath.swift",147),e[A.PROPERTY_MITERLIMIT]=this.pathMiterLimit,e},appearanceHash:{get:function(){var e;if(null!=(e=this.appearanceHash_))return e;var t=this.calculateAppearanceHash();return this.appearanceHash_=t,t}},calculateAppearanceHash:function(){return F.LegacyCoreAssert.fail("subclass must implement",void 0,"TheoPath.calculateAppearanceHash","TheoPath.swift",167),"not impl"},isEqualTo:function(e){return this===e||this.appearanceHash==e.appearanceHash}}}),n),A.TheoEmptyPath=(i=function e(){A.TheoPath.call(this,e.TYPE)},C.defineClass({name:"TheoEmptyPath",ctor:i,superName:"TheoPath",statics:{TYPE:{get:function(){return"empty"}}},props:{render:function(e){},calculateAppearanceHash:function(){var e;return(e=C.opt(P.Host.crypto,(function(e){return e.md5("(empty)")})))||null!=e?e:"(empty)"}}}),i),A.TheoRectanglePath=(a=function e(t,o,n,r,i,a){void 0===o&&(o=A.TheoPath.PATHFILL_DEFAULT),void 0===n&&(n=A.TheoPath.PATHEND_DEFAULT),void 0===r&&(r=A.TheoPath.PATHJOIN_DEFAULT),void 0===i&&(i=A.TheoPath.PATHSTROKE_DEFAULT),void 0===a&&(a=A.TheoPath.PATHMITERLIMIT_DEFFAULT),this.rect=t,A.TheoPath.call(this,e.TYPE,o,n,r,i,a)},C.defineClass({name:"TheoRectanglePath",ctor:a,superName:"TheoPath",statics:{TYPE:{get:function(){return"rect"}},oneByOne:function(){return new a(b.TheoRect.ONE_BY_ONE)},decodeJsonDict:function(e,t,o,n,r,i){var s;return(s=b.TheoRect.decodeJson(C.as(e[A.PROPERTY_COORDS],"AnyObject")))?new a(s,t,o,n,r,i):null}},props:{bounds:{get:function(){return this.rect}},render:function(e){e.rectangle(this.rect.minX,this.rect.minY,this.rect.maxX,this.rect.maxY)},encodeJson:function(){var e=A.TheoPath.prototype.encodeJson.call(this);return e[A.PROPERTY_COORDS]=this.rect.encodeJson(),e},calculateAppearanceHash:function(){var e,t="(rect:"+this.rect.asString+")";return(e=C.opt(P.Host.crypto,(function(e){return e.md5(t)})))||null!=e?e:t}}}),a),A.TheoEllipsePath=(s=function e(t,o,n,r,i,a){void 0===o&&(o=A.TheoPath.PATHFILL_DEFAULT),void 0===n&&(n=A.TheoPath.PATHEND_DEFAULT),void 0===r&&(r=A.TheoPath.PATHJOIN_DEFAULT),void 0===i&&(i=A.TheoPath.PATHSTROKE_DEFAULT),void 0===a&&(a=A.TheoPath.PATHMITERLIMIT_DEFFAULT),this.rect=t,A.TheoPath.call(this,e.TYPE,o,n,r,i,a)},C.defineClass({name:"TheoEllipsePath",ctor:s,superName:"TheoPath",statics:{TYPE:"ellipse",oneByOne:function(){return new s(b.TheoRect.ONE_BY_ONE)},decodeJsonDict:function(e,t,o,n,r,i){var a;return(a=b.TheoRect.decodeJson(C.as(e[A.PROPERTY_COORDS],"AnyObject")))?new s(a,t,o,n,r,i):null}},props:{bounds:{get:function(){return this.rect}},render:function(e){e.ellipse(this.rect.minX,this.rect.minY,this.rect.maxX,this.rect.maxY)},encodeJson:function(){var e=A.TheoPath.prototype.encodeJson.call(this);return e[A.PROPERTY_COORDS]=this.rect.encodeJson(),e},calculateAppearanceHash:function(){var e,t="(ellipse:"+this.rect.asString+")";return(e=C.opt(P.Host.crypto,(function(e){return e.md5(t)})))||null!=e?e:t}}}),s),A.DecodeState=(l=function(e,t){this.arr=e,this.index=t},C.defineClass({name:"DecodeState",ctor:l}),l),A.TheoPathOperation=(c=function(e){this.type=e},C.defineClass({name:"TheoPathOperation",ctor:c,statics:{decodeFromArray:function(e){return null}},props:{bounds:{get:function(){return null}},boundsFrom:function(e){return this.bounds},trailingPoint:function(){return R.TheoPoint.INVALID},render:function(e){},encodeToArray:function(e){e.push(this.type)},asString:{get:function(){return F.LegacyCoreAssert.fail("unimplemented in subclass",void 0,"TheoPathOperation","TheoPath.swift",350),"subclass, implement me"}}}}),c),A.TheoPathOpMoveTo=(u=function e(t){this.point=t,A.TheoPathOperation.call(this,e.TYPE)},C.defineClass({name:"TheoPathOpMoveTo",ctor:u,superName:"TheoPathOperation",statics:{TYPE:"M",decodeFromArray:function(e){var t=new u(new R.TheoPoint(e.arr[e.index],e.arr[e.index+1]));return e.index+=2,t}},props:{bounds:{get:function(){return b.TheoRect.fromXYWH(this.point.x,this.point.y,0,0)}},trailingPoint:function(){return this.point},render:function(e){e.moveTo(this.point.x,this.point.y)},encodeToArray:function(e){A.TheoPathOperation.prototype.encodeToArray.call(this,e),F.LegacyCoreAssert.isFalse(isNaN(this.point.x),"Can't persist NaN point.x value",void 0,"TheoPathOpMoveTo.encodeToArray","TheoPath.swift",392),F.LegacyCoreAssert.isFalse(isNaN(this.point.y),"Can't persist NaN point.y value",void 0,"TheoPathOpMoveTo.encodeToArray","TheoPath.swift",393),e.push(this.point.x),e.push(this.point.y)},asString:{get:function(){return"M "+this.point.x+" "+this.point.y}}}}),u),A.TheoPathOpLineTo=(p=function e(t){this.point=t,A.TheoPathOperation.call(this,e.TYPE)},C.defineClass({name:"TheoPathOpLineTo",ctor:p,superName:"TheoPathOperation",statics:{TYPE:"L",decodeFromArray:function(e){var t=new p(new R.TheoPoint(e.arr[e.index],e.arr[e.index+1]));return e.index+=2,t}},props:{bounds:{get:function(){return b.TheoRect.fromXYWH(this.point.x,this.point.y,0,0)}},boundsFrom:function(e){return b.TheoRect.boundsOfPoints([e,this.point])},trailingPoint:function(){return this.point},render:function(e){e.lineTo(this.point.x,this.point.y)},encodeToArray:function(e){A.TheoPathOperation.prototype.encodeToArray.call(this,e),F.LegacyCoreAssert.isFalse(isNaN(this.point.x),"Can't persist NaN point.x value",void 0,"TheoPathOpLineTo.encodeToArray","TheoPath.swift",442),F.LegacyCoreAssert.isFalse(isNaN(this.point.y),"Can't persist NaN point.y value",void 0,"TheoPathOpLineTo.encodeToArray","TheoPath.swift",443),e.push(this.point.x),e.push(this.point.y)},asString:{get:function(){return"L "+this.point.x+" "+this.point.y}}}}),p),A.TheoPathOpCubicBezier=(d=function e(t,o,n){this.pt1=t,this.pt2=o,this.point=n,A.TheoPathOperation.call(this,e.TYPE)},C.defineClass({name:"TheoPathOpCubicBezier",ctor:d,superName:"TheoPathOperation",statics:{TYPE:"C",decodeFromArray:function(e){var t=new d(new R.TheoPoint(e.arr[e.index],e.arr[e.index+1]),new R.TheoPoint(e.arr[e.index+2],e.arr[e.index+3]),new R.TheoPoint(e.arr[e.index+4],e.arr[e.index+5]));return e.index+=6,t}},props:{bounds:{get:function(){return b.TheoRect.boundsOfPoints([this.pt1,this.pt2,this.point])}},boundsFrom:function(e){var t=[e,this.point],o=C.clone(this.CubicCriticalTimes(e,this.pt1,this.pt2,this.point));return C.first(o).x>0&&C.first(o).x<1&&t.push(this.evaluateAtTime(C.first(o).x,e,this.pt1,this.pt2,this.point)),C.first(o).y>0&&C.first(o).y<1&&t.push(this.evaluateAtTime(C.first(o).y,e,this.pt1,this.pt2,this.point)),C.last(o).x>0&&C.last(o).x<1&&t.push(this.evaluateAtTime(C.last(o).x,e,this.pt1,this.pt2,this.point)),C.last(o).y>0&&C.last(o).y<1&&t.push(this.evaluateAtTime(C.last(o).y,e,this.pt1,this.pt2,this.point)),b.TheoRect.boundsOfPoints(t)},trailingPoint:function(){return this.point},sqrtPoint:function(e){return new R.TheoPoint(Math.sqrt(e.x),Math.sqrt(e.y))},CubicCriticalTimes:function(e,t,o,n){var r=R._minus_TheoPoint_TheoPoint(t,e),i=R._minus_TheoPoint_TheoPoint(o,t),a=R._minus_TheoPoint_TheoPoint(n,o),s=R._minus_TheoPoint_TheoPoint(i,r),l=R._minus_TheoPoint_TheoPoint(a,i),c=R._minus_TheoPoint_TheoPoint(l,s),u=R._minus_TheoPoint_TheoPoint(s.multiplyPoint(s),r.multiplyPoint(c));function p(e){return Math.abs(e)<=1e-6?0:e}u=new R.TheoPoint(p(u.x),p(u.y)),s=new R.TheoPoint(p(s.x),p(s.y)),c=new R.TheoPoint(p(c.x),p(c.y));var d=this.sqrtPoint(u),h=[R._plus_TheoPoint_TheoPoint(R._negate_TheoPoint(s),d).dividePoint(c),R._minus_TheoPoint_TheoPoint(R._negate_TheoPoint(s),d).dividePoint(c)],f=R._negate_TheoPoint(r.dividePoint(s).divide(2));return 0==c.x&&0!=s.x&&(s.x>0?h[0]=new R.TheoPoint(f.x,C.first(h).y):h[1]=new R.TheoPoint(f.x,C.last(h).y)),0==c.y&&0!=s.y&&(s.y>0?h[0]=new R.TheoPoint(C.first(h).x,f.y):h[1]=new R.TheoPoint(C.last(h).x,f.y)),h},evaluateAtTime:function(e,t,o,n,r){return R._plus_TheoPoint_TheoPoint(R._plus_TheoPoint_TheoPoint(R._plus_TheoPoint_TheoPoint(t.multiply((1-e)*(1-e)*(1-e)),o.multiply(3*e*(1-e)*(1-e))),n.multiply(3*e*e*(1-e))),r.multiply(e*e*e))},render:function(e){e.cubicBezier(this.pt1.x,this.pt1.y,this.pt2.x,this.pt2.y,this.point.x,this.point.y)},encodeToArray:function(e){A.TheoPathOperation.prototype.encodeToArray.call(this,e),F.LegacyCoreAssert.isFalse(isNaN(this.pt1.x),"Can't persist NaN pt1.x value",void 0,"TheoPathOpCubicBezier.encodeToArray","TheoPath.swift",587),F.LegacyCoreAssert.isFalse(isNaN(this.pt1.y),"Can't persist NaN pt1.y value",void 0,"TheoPathOpCubicBezier.encodeToArray","TheoPath.swift",588),F.LegacyCoreAssert.isFalse(isNaN(this.pt2.x),"Can't persist NaN pt2.x value",void 0,"TheoPathOpCubicBezier.encodeToArray","TheoPath.swift",589),F.LegacyCoreAssert.isFalse(isNaN(this.pt2.y),"Can't persist NaN pt2.y value",void 0,"TheoPathOpCubicBezier.encodeToArray","TheoPath.swift",590),F.LegacyCoreAssert.isFalse(isNaN(this.point.x),"Can't persist NaN point.x value",void 0,"TheoPathOpCubicBezier.encodeToArray","TheoPath.swift",591),F.LegacyCoreAssert.isFalse(isNaN(this.point.y),"Can't persist NaN point.y value",void 0,"TheoPathOpCubicBezier.encodeToArray","TheoPath.swift",592),e.push(this.pt1.x),e.push(this.pt1.y),e.push(this.pt2.x),e.push(this.pt2.y),e.push(this.point.x),e.push(this.point.y)},asString:{get:function(){return"C "+C.toString(this.pt1.x)+" "+C.toString(this.pt1.y)+" "+C.toString(this.pt2.x)+" "+C.toString(this.pt2.y)+" "+C.toString(this.point.x)+" "+C.toString(this.point.y)}}}}),d),A.TheoPathOpQuadraticBezier=(h=function e(t,o){this.pt1=t,this.point=o,A.TheoPathOperation.call(this,e.TYPE)},C.defineClass({name:"TheoPathOpQuadraticBezier",ctor:h,superName:"TheoPathOperation",statics:{TYPE:"Q",decodeFromArray:function(e){var t=new h(new R.TheoPoint(e.arr[e.index],e.arr[e.index+1]),new R.TheoPoint(e.arr[e.index+2],e.arr[e.index+3]));return e.index+=4,t}},props:{bounds:{get:function(){return b.TheoRect.boundsOfPoints([this.pt1,this.point])}},boundsFrom:function(e){var t=[e,this.point],o=this.QuadraticCriticalTime(e,this.pt1,this.point);return o.x>0&&o.x<1&&t.push(this.evaluateAtTime(o.x,e,this.pt1,this.point)),o.y>0&&o.y<1&&t.push(this.evaluateAtTime(o.y,e,this.pt1,this.point)),b.TheoRect.boundsOfPoints(t)},trailingPoint:function(){return this.point},QuadraticCriticalTime:function(e,t,o){var n=R._minus_TheoPoint_TheoPoint(t,e),r=R._minus_TheoPoint_TheoPoint(o,t),i=R._minus_TheoPoint_TheoPoint(r,n);return R._negate_TheoPoint(n.dividePoint(i))},evaluateAtTime:function(e,t,o,n){return R._plus_TheoPoint_TheoPoint(R._plus_TheoPoint_TheoPoint(t.multiply((1-e)*(1-e)),o.multiply(2*e*(1-e))),n.multiply(e*e))},render:function(e){e.quadraticBezier(this.pt1.x,this.pt1.y,this.point.x,this.point.y)},encodeToArray:function(e){A.TheoPathOperation.prototype.encodeToArray.call(this,e),F.LegacyCoreAssert.isFalse(isNaN(this.pt1.x),"Can't persist NaN pt1.x value",void 0,"TheoPathOpQuadraticBezier.encodeToArray","TheoPath.swift",702),F.LegacyCoreAssert.isFalse(isNaN(this.pt1.y),"Can't persist NaN pt1.y value",void 0,"TheoPathOpQuadraticBezier.encodeToArray","TheoPath.swift",703),F.LegacyCoreAssert.isFalse(isNaN(this.point.x),"Can't persist NaN point.x value",void 0,"TheoPathOpQuadraticBezier.encodeToArray","TheoPath.swift",704),F.LegacyCoreAssert.isFalse(isNaN(this.point.y),"Can't persist NaN point.y value",void 0,"TheoPathOpQuadraticBezier.encodeToArray","TheoPath.swift",705),e.push(this.pt1.x),e.push(this.pt1.y),e.push(this.point.x),e.push(this.point.y)},asString:{get:function(){return"Q "+C.toString(this.pt1.x)+" "+C.toString(this.pt1.y)+" "+C.toString(this.point.x)+" "+C.toString(this.point.y)}}}}),h),A.TheoPathOpRectangle=(f=function e(t){this.rect=t,A.TheoPathOperation.call(this,e.TYPE)},C.defineClass({name:"TheoPathOpRectangle",ctor:f,superName:"TheoPathOperation",statics:{TYPE:"R",decodeFromArray:function(e){if(e.arr.length>=e.index+4){var t=C.as(e.arr[e.index],"Double"),o=C.as(e.arr[e.index+1],"Double"),n=C.as(e.arr[e.index+2],"Double"),r=C.as(e.arr[e.index+3],"Double");return e.index+=4,null==t&&(t=0),null==n&&(n=100),null==o&&(o=0),null==r&&(r=100),new f(new b.TheoRect(t,o,n,r))}return null}},props:{bounds:{get:function(){return this.rect}},render:function(e){e.rectangle(this.rect.minX,this.rect.minY,this.rect.maxX,this.rect.maxY)},encodeToArray:function(e){A.TheoPathOperation.prototype.encodeToArray.call(this,e),F.LegacyCoreAssert.isFalse(isNaN(this.rect.minX),"Can't persist NaN rect.minX value",void 0,"TheoPathOpRectangle.encodeToArray","TheoPath.swift",777),F.LegacyCoreAssert.isFalse(isNaN(this.rect.minY),"Can't persist NaN rect.minY value",void 0,"TheoPathOpRectangle.encodeToArray","TheoPath.swift",778),F.LegacyCoreAssert.isFalse(isNaN(this.rect.maxX),"Can't persist NaN rect.maxX value",void 0,"TheoPathOpRectangle.encodeToArray","TheoPath.swift",779),F.LegacyCoreAssert.isFalse(isNaN(this.rect.maxY),"Can't persist NaN rect.maxY value",void 0,"TheoPathOpRectangle.encodeToArray","TheoPath.swift",780),e.push(this.rect.minX),e.push(this.rect.minY),e.push(this.rect.maxX),e.push(this.rect.maxY)},asString:{get:function(){return"R "+C.toString(this.rect.minX)+" "+C.toString(this.rect.minY)+" "+C.toString(this.rect.maxX)+" "+C.toString(this.rect.maxY)}}}}),f),A.TheoPathOpEllipse=(m=function e(t){this.rect=t,A.TheoPathOperation.call(this,e.TYPE)},C.defineClass({name:"TheoPathOpEllipse",ctor:m,superName:"TheoPathOperation",statics:{TYPE:"E",decodeFromArray:function(e){var t=new m(new b.TheoRect(e.arr[e.index],e.arr[e.index+1],e.arr[e.index+2],e.arr[e.index+3]));return e.index+=4,t}},props:{bounds:{get:function(){return this.rect}},render:function(e){e.ellipse(this.rect.minX,this.rect.minY,this.rect.maxX,this.rect.maxY)},encodeToArray:function(e){A.TheoPathOperation.prototype.encodeToArray.call(this,e),F.LegacyCoreAssert.isFalse(isNaN(this.rect.minX),"Can't persist NaN rect.minX value",void 0,"TheoPathOpEllipse.encodeToArray","TheoPath.swift",830),F.LegacyCoreAssert.isFalse(isNaN(this.rect.minY),"Can't persist NaN rect.minY value",void 0,"TheoPathOpEllipse.encodeToArray","TheoPath.swift",831),F.LegacyCoreAssert.isFalse(isNaN(this.rect.maxX),"Can't persist NaN rect.maxX value",void 0,"TheoPathOpEllipse.encodeToArray","TheoPath.swift",832),F.LegacyCoreAssert.isFalse(isNaN(this.rect.maxY),"Can't persist NaN rect.maxY value",void 0,"TheoPathOpEllipse.encodeToArray","TheoPath.swift",833),e.push(this.rect.minX),e.push(this.rect.minY),e.push(this.rect.maxX),e.push(this.rect.maxY)},asString:{get:function(){return"E "+C.toString(this.rect.minX)+" "+C.toString(this.rect.minY)+" "+C.toString(this.rect.maxX)+" "+C.toString(this.rect.maxY)}}}}),m),A.TheoPathOpClosePath=(g=function e(){A.TheoPathOperation.call(this,e.TYPE)},C.defineClass({name:"TheoPathOpClosePath",ctor:g,superName:"TheoPathOperation",statics:{TYPE:"Z",decodeFromArray:function(e){return new g}},props:{trailingPoint:function(){return R.TheoPoint.INVALID},render:function(e){e.closePath()},asString:{get:function(){return"Z"}}}}),g),A.PROPERTY_OPERATIONS="ops",A.AppendPathRenderer=(y=function(e,t){this.sink=e,this.transform=t},C.defineClass({name:"AppendPathRenderer",ctor:y,superName:"CoreObject",statics:{_implements:function(e){return"TheoPathRenderer"==e}},props:{rectangle:function(e,t,o,n){var r=this.transform.transformPoint(new R.TheoPoint(e,t));this.sink.moveTo(r.x,r.y),r=this.transform.transformPoint(new R.TheoPoint(o,t)),this.sink.lineTo(r.x,r.y),r=this.transform.transformPoint(new R.TheoPoint(o,n)),this.sink.lineTo(r.x,r.y),r=this.transform.transformPoint(new R.TheoPoint(e,n)),this.sink.lineTo(r.x,r.y),this.sink.closePath()},ellipse:function(e,t,o,n){var r=(o-e)/2,i=(n-t)/2,a=new R.TheoPoint((e+o)/2,(t+n)/2);function s(e,t){return new R.TheoPoint(e,t)}var l=4*(Math.sqrt(2)-1)/3,c=[s(1,0),s(1,l),s(l,1),s(0,1),s(-l,1),s(-1,l),s(-1,0),s(-1,-l),s(-l,-1),s(0,-1),s(l,-1),s(1,-l),s(1,0)],u=v.Matrix2D.scalingXY(r,i).translate(a).concat(this.transform);c=C.clone(u.transformPoints(c)),this.sink.moveTo(c[0].x,c[0].y);for(var p=C.iter(C.stride(1,13,3));!p.done;p.next()){var d=p.value;this.sink.cubicBezier(c[d+0].x,c[d+0].y,c[d+1].x,c[d+1].y,c[d+2].x,c[d+2].y)}this.sink.closePath()},newPath:function(e,t,o,n,r){this.sink.newPath(e,t,o,n,r)},moveTo:function(e,t){var o=this.transform.transformPoint(new R.TheoPoint(e,t));this.sink.moveTo(o.x,o.y)},lineTo:function(e,t){var o=this.transform.transformPoint(new R.TheoPoint(e,t));this.sink.lineTo(o.x,o.y)},cubicBezier:function(e,t,o,n,r,i){var a=this.transform.transformPoint(new R.TheoPoint(e,t)),s=this.transform.transformPoint(new R.TheoPoint(o,n)),l=this.transform.transformPoint(new R.TheoPoint(r,i));this.sink.cubicBezier(a.x,a.y,s.x,s.y,l.x,l.y)},quadraticBezier:function(e,t,o,n){var r=this.transform.transformPoint(new R.TheoPoint(e,t)),i=this.transform.transformPoint(new R.TheoPoint(o,n));this.sink.quadraticBezier(r.x,r.y,i.x,i.y)},closePath:function(){this.sink.closePath()}}}),y),A.TheoArbitraryPath=(T=function e(t,o,n,r,i,a){this.ops_=C.clone(t),A.TheoPath.call(this,e.TYPE,o,n,r,i,a)},C.defineClass({name:"TheoArbitraryPath",ctor:T,superName:"TheoPath",statics:{TYPE:{get:function(){return"arbitrary"}},ArbitraryPathFromPath:function(e,t){var o=A.TheoPathBuilder.init_31cf(e.pathFillType,e.pathEndcapType,e.pathJoinType,e.pathStrokeWeight,e.pathMiterLimit);return o.addPath(e,t),o.path}},props:{bounds:{get:function(){if(null==this.bounds_){for(var e=R.TheoPoint.INVALID,t=C.iter(this.ops_);!t.done;t.next()){var o,n=t.value;(o=n.boundsFrom(e))&&(this.bounds_=o.unionWith(this.bounds_),e=n.trailingPoint())}if(null!=this.bounds_&&this.pathFillType==A.TheoPath.PATHFILL_NONE&&this.pathStrokeWeight>0){var r=-1*this.pathStrokeWeight/2;this.bounds_=this.bounds_.insetXY(r,r)}}return this.bounds_}},operations:{get:function(){return this.ops_}},isOnlyMoves:function(){for(var e=C.iter(this.ops_);!e.done;e.next())if(e.value.type!=A.TheoPathOpMoveTo.TYPE)return!1;return!0},render:function(e){e.newPath(this.pathFillType,this.pathEndcapType,this.pathJoinType,this.pathStrokeWeight,this.pathMiterLimit),this.ops_.forEach((function(t){return t.render(e)}))},encodeJson:function(){var e=A.TheoPath.prototype.encodeJson.call(this),t=[];e[A.PROPERTY_OPERATIONS]=t;for(var o=C.iter(this.ops_);!o.done;o.next())o.value.encodeToArray(t);return e},calculateAppearanceHash:function(){var e,t="(arb:"+this.ops_.map((function(e){return e.asString}),this).join(";")+")";return(e=C.opt(P.Host.crypto,(function(e){return e.md5(t)})))||null!=e?e:t}}}),T),A.TheoPathBuilder=function(){var e=function(){this.ops_=[]},t={};return C.defineClass({name:"TheoPathBuilder",ctor:e,superName:"CoreObject",statics:{OP_FROM_ARRAY:{get:function(){return void 0===t.OP_FROM_ARRAY&&(t.OP_FROM_ARRAY={M:function(e,t){return[new A.TheoPathOpMoveTo(new R.TheoPoint(e[t+1].doubleValue,e[t+2].doubleValue)),3]},L:function(e,t){return[new A.TheoPathOpLineTo(new R.TheoPoint(e[t+1].doubleValue,e[t+2].doubleValue)),3]},C:function(e,t){return[new A.TheoPathOpCubicBezier(new R.TheoPoint(e[t+1].doubleValue,e[t+2].doubleValue),new R.TheoPoint(e[t+3].doubleValue,e[t+4].doubleValue),new R.TheoPoint(e[t+5].doubleValue,e[t+6].doubleValue)),7]},Q:function(e,t){return[new A.TheoPathOpQuadraticBezier(new R.TheoPoint(e[t+1].doubleValue,e[t+2].doubleValue),new R.TheoPoint(e[t+3].doubleValue,e[t+4].doubleValue)),5]},R:function(e,t){var o,n,r,i;return[new A.TheoPathOpRectangle(new b.TheoRect((o=e[t+1].doubleValue)||null!=o?o:0,(n=e[t+2].doubleValue)||null!=n?n:0,(r=e[t+3].doubleValue)||null!=r?r:100,(i=e[t+4].doubleValue)||null!=i?i:100)),5]},E:function(e,t){return[new A.TheoPathOpEllipse(new b.TheoRect(e[t+1].doubleValue,e[t+2].doubleValue,e[t+3].doubleValue,e[t+4].doubleValue)),5]},Z:function(e,t){return e[t],[new A.TheoPathOpClosePath,1]}}),t.OP_FROM_ARRAY}},OP_TO_ARRAY:{get:function(){return void 0===t.OP_TO_ARRAY&&(t.OP_TO_ARRAY={M:function(e,t,o){var n,r=e,i=t;return(n=C.as(o,A.TheoPathOpMoveTo))?[S.DBProperty.stringProperty(r.append(C.toString(i)),n.type),S.DBProperty.doubleProperty(r.append(C.toString(i+1)),n.point.x),S.DBProperty.doubleProperty(r.append(C.toString(i+2)),n.point.y)]:(F.LegacyCoreAssert.fail("expected a move to operation",void 0,"TheoPathBuilder","TheoPath.swift",1091),[])},L:function(e,t,o){var n,r=e,i=t;return(n=C.as(o,A.TheoPathOpLineTo))?[S.DBProperty.stringProperty(r.append(C.toString(i)),n.type),S.DBProperty.doubleProperty(r.append(C.toString(i+1)),n.point.x),S.DBProperty.doubleProperty(r.append(C.toString(i+2)),n.point.y)]:(F.LegacyCoreAssert.fail("expected a line to operation",void 0,"TheoPathBuilder","TheoPath.swift",1102),[])},C:function(e,t,o){var n,r=e,i=t;return(n=C.as(o,A.TheoPathOpCubicBezier))?[S.DBProperty.stringProperty(r.append(C.toString(i)),n.type),S.DBProperty.doubleProperty(r.append(C.toString(i+1)),n.pt1.x),S.DBProperty.doubleProperty(r.append(C.toString(i+2)),n.pt1.y),S.DBProperty.doubleProperty(r.append(C.toString(i+3)),n.pt2.x),S.DBProperty.doubleProperty(r.append(C.toString(i+4)),n.pt2.y),S.DBProperty.doubleProperty(r.append(C.toString(i+5)),n.point.x),S.DBProperty.doubleProperty(r.append(C.toString(i+6)),n.point.y)]:(F.LegacyCoreAssert.fail("expected a cubic bezier operation",void 0,"TheoPathBuilder","TheoPath.swift",1117),[])},Q:function(e,t,o){var n,r=e,i=t;return(n=C.as(o,A.TheoPathOpQuadraticBezier))?[S.DBProperty.stringProperty(r.append(C.toString(i)),n.type),S.DBProperty.doubleProperty(r.append(C.toString(i+1)),n.pt1.x),S.DBProperty.doubleProperty(r.append(C.toString(i+2)),n.pt1.y),S.DBProperty.doubleProperty(r.append(C.toString(i+3)),n.point.x),S.DBProperty.doubleProperty(r.append(C.toString(i+4)),n.point.y)]:(F.LegacyCoreAssert.fail("expected a quadratic bezier operation",void 0,"TheoPathBuilder","TheoPath.swift",1130),[])},R:function(e,t,o){var n,r=e,i=t;return(n=C.as(o,A.TheoPathOpRectangle))?[S.DBProperty.stringProperty(r.append(C.toString(i)),n.type),S.DBProperty.doubleProperty(r.append(C.toString(i+1)),n.rect.minX),S.DBProperty.doubleProperty(r.append(C.toString(i+2)),n.rect.minY),S.DBProperty.doubleProperty(r.append(C.toString(i+3)),n.rect.maxX),S.DBProperty.doubleProperty(r.append(C.toString(i+4)),n.rect.maxY)]:(F.LegacyCoreAssert.fail("expected a rectangle operation",void 0,"TheoPathBuilder","TheoPath.swift",1143),[])},E:function(e,t,o){var n,r=e,i=t;return(n=C.as(o,A.TheoPathOpEllipse))?[S.DBProperty.stringProperty(r.append(C.toString(i)),n.type),S.DBProperty.doubleProperty(r.append(C.toString(i+1)),n.rect.minX),S.DBProperty.doubleProperty(r.append(C.toString(i+2)),n.rect.minY),S.DBProperty.doubleProperty(r.append(C.toString(i+3)),n.rect.maxX),S.DBProperty.doubleProperty(r.append(C.toString(i+4)),n.rect.maxY)]:(F.LegacyCoreAssert.fail("expected an ellipse operation",void 0,"TheoPathBuilder","TheoPath.swift",1156),[])},Z:function(e,t,o){var n,r=e,i=t;return(n=C.as(o,A.TheoPathOpClosePath))?[S.DBProperty.stringProperty(r.append(C.toString(i)),n.type)]:(F.LegacyCoreAssert.fail("expected a close operation",void 0,"TheoPathBuilder","TheoPath.swift",1165),[])}}),t.OP_TO_ARRAY}},getEncodedOperations:function(t,o){var n=[];return o.operations.forEach((function(o){return C.append(n,e.OP_TO_ARRAY[o.type](t,n.length,o))})),n},decodeJsonDict:function(t,o,n,r,i,a){var s;if(void 0===o&&(o=A.TheoPath.PATHFILL_DEFAULT),void 0===n&&(n=A.TheoPath.PATHEND_DEFAULT),void 0===r&&(r=A.TheoPath.PATHJOIN_DEFAULT),void 0===i&&(i=A.TheoPath.PATHSTROKE_DEFAULT),void 0===a&&(a=A.TheoPath.PATHMITERLIMIT_DEFFAULT),s=C.as(t[A.PROPERTY_OPERATIONS],["Array","Any"])){for(var l=e.init_31cf(o,n,r,i,a),c=new A.DecodeState(s,0);c.index<s.length;){var u;if(null!=(u=C.as(s[c.index],"String")))if(c.index+=1,u==A.TheoPathOpMoveTo.TYPE)l.ops_.push(A.TheoPathOpMoveTo.decodeFromArray(c));else if(u==A.TheoPathOpLineTo.TYPE)l.ops_.push(A.TheoPathOpLineTo.decodeFromArray(c));else if(u==A.TheoPathOpRectangle.TYPE){var p;(p=A.TheoPathOpRectangle.decodeFromArray(c))&&l.ops_.push(p)}else u==A.TheoPathOpEllipse.TYPE?l.ops_.push(A.TheoPathOpEllipse.decodeFromArray(c)):u==A.TheoPathOpCubicBezier.TYPE?l.ops_.push(A.TheoPathOpCubicBezier.decodeFromArray(c)):u==A.TheoPathOpQuadraticBezier.TYPE?l.ops_.push(A.TheoPathOpQuadraticBezier.decodeFromArray(c)):u==A.TheoPathOpClosePath.TYPE&&l.ops_.push(A.TheoPathOpClosePath.decodeFromArray(c));else c.index+=1,F.LegacyCoreAssert.fail("unexpected non-string in ops chain",void 0,"TheoPathBuilder.decodeJsonDict","TheoPath.swift",1405)}return l.path}return null},_implements:function(e){return"TheoPathRenderer"==e}},props:{init_7691:function(t,o,n,r,i,a){this.pathFillType_=o,this.pathEndcapType_=n,this.pathJoinType_=r,this.pathStrokeWeight_=i,this.pathMiterLimit_=a;for(var s=C.clone(t),l=0;l<s.length;){var c;if(null!=(c=s[l].stringValue)){var u=e.OP_FROM_ARRAY[c](s,l),p=u[0],d=u[1];null!=p&&this.ops_.push(p),l+=d}else l+=1,F.LegacyCoreAssert.fail("unexpected non-string in ops chain",void 0,"TheoPathBuilder.init","TheoPath.swift",1190)}},init_d41d:function(){this.pathFillType_=A.TheoPath.PATHFILL_DEFAULT,this.pathEndcapType_=A.TheoPath.PATHEND_DEFAULT,this.pathJoinType_=A.TheoPath.PATHJOIN_DEFAULT,this.pathStrokeWeight_=A.TheoPath.PATHSTROKE_DEFAULT,this.pathMiterLimit_=A.TheoPath.PATHMITERLIMIT_DEFFAULT},init_31cf:function(e,t,o,n,r){this.pathFillType_=e,this.pathEndcapType_=t,this.pathJoinType_=o,this.pathStrokeWeight_=n,this.pathMiterLimit_=r},newPath:function(e,t,o,n,r){},clear:function(){this.ops_.splice(0)},moveTo:function(e,t){this.ops_.push(new A.TheoPathOpMoveTo(new R.TheoPoint(e,t)))},lineTo:function(e,t){this.ops_.push(new A.TheoPathOpLineTo(new R.TheoPoint(e,t)))},addLines:function(e){if(e.length>0){this.ops_.push(new A.TheoPathOpMoveTo(e[0]));var t=e.concat();t.shift();for(var o=C.iter(t);!o.done;o.next()){var n=o.value;this.ops_.push(new A.TheoPathOpLineTo(n))}}},cubicBezier:function(e,t,o,n,r,i){this.ops_.push(new A.TheoPathOpCubicBezier(new R.TheoPoint(e,t),new R.TheoPoint(o,n),new R.TheoPoint(r,i)))},quadraticBezier:function(e,t,o,n){this.ops_.push(new A.TheoPathOpQuadraticBezier(new R.TheoPoint(e,t),new R.TheoPoint(o,n)))},closePath:function(){this.ops_.push(new A.TheoPathOpClosePath)},addPath:function(e,t){e.render(new A.AppendPathRenderer(this,t))},rectangle:function(e,t,o,n){this.ops_.push(new A.TheoPathOpRectangle(new b.TheoRect(e,t,o,n)))},roundedRectangle:function(e,t,o,n,r,i){var a=4*(Math.sqrt(2)-1)/3,s=a*r,l=a*i;this.moveTo(e+r,t),this.lineTo(o-r,t);var c=o-r+s,u=t+i-l;this.cubicBezier(c,t,o,u,o,t+i),this.lineTo(o,n-i);var p=n-i+l,d=o-r+s;this.cubicBezier(o,p,d,n,o-r,n),this.lineTo(e+r,n);var h=e+r-s,f=n-i+l;this.cubicBezier(h,n,e,f,e,n-i),this.lineTo(e,t+i);var m=t+i-l,g=e+r-s;this.cubicBezier(e,m,g,t,e+r,t),this.closePath()},ellipse:function(e,t,o,n){this.ops_.push(new A.TheoPathOpEllipse(new b.TheoRect(e,t,o,n)))},simplestForm:{get:function(){if(null==this.simplestForm_){var e,t;if(1==this.ops_.length)(e=C.as(this.ops_[0],A.TheoPathOpRectangle))?this.simplestForm_=new A.TheoRectanglePath(e.rect,this.pathFillType_,this.pathEndcapType_,this.pathJoinType_,this.pathStrokeWeight_,this.pathMiterLimit_):(t=C.as(this.ops_[0],A.TheoPathOpEllipse))&&(this.simplestForm_=new A.TheoEllipsePath(t.rect,this.pathFillType_,this.pathEndcapType_,this.pathJoinType_,this.pathStrokeWeight_,this.pathMiterLimit_));else 0==this.ops_.length&&(this.simplestForm_=A.TheoPath.emptyPath());if(null==this.simplestForm_)return this.path}return this.simplestForm_}},path:{get:function(){return new A.TheoArbitraryPath(this.ops_.concat(),this.pathFillType_,this.pathEndcapType_,this.pathJoinType_,this.pathStrokeWeight_,this.pathMiterLimit_)}}}}),e}()},iCxV:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("gXiO"),s=o("U010"),l=o("fNpk");r.Host=(n=function(){a.CoreObject.call(this)},i.defineClass({name:"Host",ctor:n,superName:"CoreObject",statics:{locale_:null,platform_:null,textModelUtils_:null,pathUtils_:null,asyncPersist_:null,persistUtils_:null,logging_:null,fontProvider_:null,imageAnalysis_:null,resourceUtils_:null,featureFlags_:null,async_:null,brandkitManager_:null,learning_:null,deviceUtils_:null,factories_:null,videoUtils_:null,exception_:null,lifetime_:null,crypto_:null,schema_:null,testing_:null,actionTesting_:null,network_:null,dataFactory_:null,stockLicense_:null,isInitialized_:!1,initializedCallbacks_:[],locale:{get:function(){return n.locale_},set:function(e){n.locale_=e}},platform:{get:function(){return n.platform_},set:function(e){n.platform_=e}},textModelUtils:{get:function(){return n.textModelUtils_},set:function(e){n.textModelUtils_=e}},logging:{get:function(){return n.logging_},set:function(e){n.logging_=e}},fontProvider:{get:function(){return n.fontProvider_},set:function(e){n.fontProvider_=e}},imageAnalysis:{get:function(){return n.imageAnalysis_},set:function(e){n.imageAnalysis_=e}},pathUtils:{get:function(){return n.pathUtils_},set:function(e){n.pathUtils_=e}},asyncPersist:{get:function(){return n.asyncPersist_},set:function(e){n.asyncPersist_=e}},persistUtils:{get:function(){return n.persistUtils_},set:function(e){n.persistUtils_=e}},resourceUtils:{get:function(){return n.resourceUtils_},set:function(e){n.resourceUtils_=e}},featureFlags:{get:function(){return n.featureFlags_},set:function(e){n.featureFlags_=e}},async:{get:function(){return n.async_},set:function(e){n.async_=e}},brandkitManager:{get:function(){return n.brandkitManager_},set:function(e){n.brandkitManager_=e}},learning:{get:function(){return n.learning_},set:function(e){n.learning_=e}},deviceUtils:{get:function(){return n.deviceUtils_},set:function(e){n.deviceUtils_=e}},crypto:{get:function(){return n.crypto_},set:function(e){n.crypto_=e}},factories:{get:function(){return n.factories_},set:function(e){n.factories_=e}},schema:{get:function(){return n.schema_},set:function(e){n.schema_=e}},videoUtils:{get:function(){return n.videoUtils_},set:function(e){n.videoUtils_=e}},exception:{get:function(){return n.exception_},set:function(e){n.exception_=e}},lifetime:{get:function(){return n.lifetime_},set:function(e){n.lifetime_=e}},testing:{get:function(){return n.testing_},set:function(e){n.testing_=e}},actionTesting:{get:function(){return n.actionTesting_},set:function(e){n.actionTesting_=e}},network:{get:function(){return n.network_},set:function(e){n.network_=e}},dataFactory:{get:function(){return n.dataFactory_},set:function(e){n.dataFactory_=e}},stockLicense:{get:function(){return n.stockLicense_},set:function(e){n.stockLicense_=e}},initialized:function(){l.LegacyCoreAssert.isFalse(n.isInitialized_,"Host initialized twice?",void 0,"Host.initialized","Host.swift",275),s.ImageCutoutModelLibrary.instance.setup(),n.isInitialized_=!0;for(var e=i.iter(n.initializedCallbacks_);!e.done;e.next())(0,e.value)()},whenInitialized:function(e){n.isInitialized_?e():n.initializedCallbacks_.push(e)}}}),n)},iR9k:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"FormaAnimation":{"className":"FormaAnimation","type":"object","properties":{"kind":{"type":"string","enum":["FormaAnimation"]},"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"end-time":{"$ref":"Root.json#/definitions/TheoTime"},"key-frames":{"type":"array","items":{"$ref":"#/definitions/KeyFrame"}},"animation-style":{"$ref":"#/definitions/AnimationStyle"},"name":{"type":"string"}},"required":["start-time","end-time","key-frames"]},"KeyFrame":{"className":"KeyFrame","type":"object","properties":{"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"timing-function":{"type":"string"},"placement":{"$ref":"Root.json#/definitions/Matrix2D"},"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"}}},"AnimationStyle":{"className":"AnimationStyle","type":"object","properties":{"name":{"type":"string"},"variant":{"type":"integer"},"variant-count":{"type":"integer"},"start-time":{"$ref":"Root.json#/definitions/TheoTime"},"end-time":{"$ref":"Root.json#/definitions/TheoTime"},"category":{"type":"string"},"looping":{"type":"boolean","default":false},"text-style":{"type":"boolean"},"image-style":{"type":"boolean"}},"required":["name","variant","variant-count"]}}}')},inX8:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"Assets":{"read-data":false,"type":"object","properties":{"path":{"type":"string","enum":["assets"]}}},"LinkedObject":{"type":"object","properties":{"id":{"type":"string"},"type":{"type":"string"},"name":{"type":"string"},"path":{"type":"string"}}},"TheoSize":{"type":"array","minItems":2,"items":[{"type":"number","minimum":0,"description":"width"},{"type":"number","minimum":0,"description":"height"}]},"TheoPoint":{"type":"array","minItems":2,"items":[{"type":"number","description":"x"},{"type":"number","description":"y"}]},"TheoRect":{"anyOf":[{"type":"string","pattern":"^[-+]?\\\\d*\\\\.?\\\\d+([eE][-+]?\\\\d+)?(\\\\s*,\\\\s*[-+]?\\\\d*\\\\.?\\\\d+([eE][-+]?\\\\d+)?){3}$","description":"Comma-separated list of 4 doubles in minX, maxX, minY, maxY order"},{"type":"array","minItems":4,"items":[{"type":"number","description":"minX"},{"type":"number","description":"minY"},{"type":"number","description":"maxX"},{"type":"number","description":"maxY"}]}]},"Matrix2D":{"type":"array","minItems":6,"items":[{"type":"number","description":"a"},{"type":"number","description":"b"},{"type":"number","description":"c"},{"type":"number","description":"d"},{"type":"number","description":"tx"},{"type":"number","description":"ty"}]},"TheoTime":{"type":"array","minItems":2,"items":[{"type":"integer","description":"value"},{"type":"integer","description":"timescale"}]},"TheoDocumentData":{"className":"TheoDocumentData","type":"object","properties":{"shareData":{"type":"object","properties":{"scope":{"type":"string"}}}}},"ContentDocument":{"className":"ContentDocument","allOf":[{"$ref":"#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["content"]},"type":{"type":"string","default":"application/vnd.adobe.theo.content+dcx"},"children":{"type":"array","items":[{"$ref":"ContentNodes.json#/definitions/RootContentNode"}]}},"required":["id","path","type"]}]},"DocumentHistory":{"className":"DocumentHistory","allOf":[{"$ref":"#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["document-history"]},"entries":{"type":"array","items":{"type":"string"},"maxItems":100}},"required":["id","path","entries"]}]},"TheoDocument":{"className":"TheoDocument","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","default":"theo-document"},"type":{"type":"string"},"format-version":{"type":"integer"},"watermark-enabled":{"type":"boolean","default":true},"shared":{"type":"boolean","default":false},"modified-since-share":{"type":"boolean","default":false},"cp#assetId":{"type":"string"},"cp#shortId":{"type":"string"},"cp#publishedEtag":{"type":"string"},"cp#projectId":{"type":"string"},"cp#isExported":{"type":"boolean"},"authctx#ctxid":{"$comment":"should only be written as a string from now on, but earlier version have had this set to an object. Including object as a possible type to allow reading of older documents","anyOf":[{"type":"string"},{"type":"object"}]},"authctx#themeid":{"type":"string"},"authctx#uses-branded-elements":{"type":"boolean","description":"authoringContextID_.length > 0"},"doc#data":{"$ref":"#/definitions/TheoDocumentData"},"constrainedImages":{"type":"object","properties":{"stockImages":{"type":"object","properties":{"extended":{"type":"array","items":{"type":"string"}},"standard":{"type":"array","items":{"type":"string"}},"unlicensed":{"type":"array","items":{"type":"string"}}}}}},"children":{"type":"array","items":{"anyOf":[{"$ref":"Formae.json#/definitions/FormaPage"},{"$ref":"#/definitions/ContentDocument"},{"$ref":"Color.json#/definitions/ColorThemeDocument"},{"$ref":"#/definitions/DocumentHistory"},{"$ref":"#/definitions/Assets"}]},"uniqueItems":true}},"required":["id"]}},"$ref":"#/definitions/TheoDocument"}')},jE7t:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("c9Jm"),s=o("o+xL");r.RotateTest=(n=function(){this.actionSequence_Rotate=[function(){return new s.RotateAction(Math.PI/2,null,null,!1)}],this.formaeToRotate_=[],this.formaeToTest_=[],this.initialTransforms_=[],a.ActionTestBase.call(this)},i.defineClass({name:"RotateTest",ctor:n,superName:"ActionTestBase",props:{setUpActionSequence:function(e,t,o){var n;this.formaeToRotate_=i.clone(this.allSelectableFormae(o,(function(e){return!(!(n=i.opt(e.controller,(function(e){return e.rotateable})))&&null==n)&&n}))),this.initialTransforms_=this.formaeToTest_.map((function(e){return e.placement}),this),o.controller.selection.replaceSelectionWithFormae(this.formaeToRotate_)},validateAfterActionSequence:function(e,t){for(var o=i.iter(i.range(0,this.formaeToTest_.length,!1));!o.done;o.next()){var n=o.value,r=this.initialTransforms_[n].rotate(0,1);XCTAssertEqual(this.formaeToTest_[n].placement.transformValues.rotSine,r.transformValues.rotSine,.001),XCTAssertEqual(this.formaeToTest_[n].placement.transformValues.rotCosine,r.transformValues.rotCosine,.001)}},validateAfterUndo:function(e,t){for(var o=i.iter(i.range(0,this.formaeToTest_.length,!1));!o.done;o.next()){var n=o.value;XCTAssertEqual(this.formaeToTest_[n].placement.transformValues.rotSine,this.initialTransforms_[n].transformValues.rotSine),XCTAssertEqual(this.formaeToTest_[n].placement.transformValues.rotCosine,this.initialTransforms_[n].transformValues.rotCosine)}},validateAfterRedo:function(e,t){for(var o=i.iter(i.range(0,this.formaeToTest_.length,!1));!o.done;o.next()){var n=o.value,r=this.initialTransforms_[n].rotate(0,1);XCTAssertEqual(this.formaeToTest_[n].placement.transformValues.rotSine,r.transformValues.rotSine,.001),XCTAssertEqual(this.formaeToTest_[n].placement.transformValues.rotCosine,r.transformValues.rotCosine,.001)}},tearDown:function(){this.formaeToRotate_=[],this.formaeToTest_=[],a.ActionTestBase.prototype.tearDown.call(this)}}}),n)},jLWG:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("rKjb"),s=o("sq5L"),l=o("hgLm");r.PGMClip=(n=function e(t,o,n,r,s){this.clipPaths=i.clone(s),a.PGMComposite.call(this,e.TYPE,t,o,n,r)},i.defineClass({name:"PGMClip",ctor:n,superName:"PGMComposite",statics:{TYPE:"pgm-clip",PROP_CLIP_PATHS:"clip-paths",decodeComposite:function(e,t,o,r,a,c){var u;if(u=i.as(e[n.PROP_CLIP_PATHS],["Array","Any"])){for(var p=[],d=i.iter(u);!d.done;d.next()){var h,f=d.value;(h=l.TheoPath.decodeJson(i.as(f,"AnyObject")))&&p.push(h)}return new n(t,o,r,a,p)}return c.error(s.PGMError.BAD_CLIP,"PGMClip decode: missing clipping paths property"),null}},props:{encode:function(){for(var e=a.PGMComposite.prototype.encode.call(this),t=[],o=i.iter(this.clipPaths);!o.done;o.next()){var r=o.value;t.push(r.encodeJson())}return e[n.PROP_CLIP_PATHS]=t,e},withEntity:function(e){return new n(e,this.meta,this.animations,this.children,this.clipPaths)},withEntityAndChildren:function(e,t){return new n(e,this.meta,this.animations,t,this.clipPaths)},clipBounds:{get:function(){var e=null;if(1==this.clipPaths.length)e=this.clipPaths[0].bounds;else for(var t=i.iter(this.clipPaths);!t.done;t.next()){var o=t.value;e=null!=e?i.opt(e,(function(e){return e.unionWith(o.bounds)})):o.bounds}return e}}}}),n)},jSYS:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("sJQG"),l=o("sWrh");i.PGMLinearFunction=(n=function e(t,o){l.PGMUnaryFunction.call(this,e.TYPE,t,o)},r={},a.defineClass({name:"PGMLinearFunction",ctor:n,superName:"PGMUnaryFunction",statics:{TYPE:"pgm-linear-function",UNIT:{get:function(){return void 0===r.UNIT&&(r.UNIT=new n(s.PGMRange.UNIT,s.PGMRange.UNIT)),r.UNIT}},decodeFn:function(e,t,o){return new n(t,o)}},props:{apply:function(e){return this.range.applyU(this.domain.boundedU(e))},isEqualTo:function(e){return l.PGMUnaryFunction.prototype.isEqualTo.call(this,e)},encode:function(){return l.PGMUnaryFunction.prototype.encode.call(this)}}}),n)},jfiy:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("smUN"),l=o("sq5L"),c=o("Zifs");r.PGMFillFilterSpec=(n=function e(t){this.filterColor=t,s.PGMFilterSpec.call(this,e.TYPE)},i.defineClass({name:"PGMFillFilterSpec",ctor:n,superName:"PGMFilterSpec",statics:{TYPE:"PGMFillFilterSpec",PROP_FILTER_COLOR:"filterColor",decodeSpec:function(e,t){var o;return(o=c.SolidColor.decodeJson(i.as(e[n.PROP_FILTER_COLOR],"AnyObject")))?new n(o):(t.error(l.PGMError.BAD_FILTER_SPEC,"PGMFillFilterSpec: missing parameter(s)"),null)}},props:{encode:function(){var e=s.PGMFilterSpec.prototype.encode.call(this);return e[n.PROP_FILTER_COLOR]=this.filterColor.encodeJson(),e},isEqualTo:function(e){return this===e||!!(t=i.as(e,n))&&i.eq(c._equality_SolidColor_SolidColor,this.filterColor,t.filterColor);var t},interpolate:function(e,t){return t<=0?this:t>=1?e:(o=i.as(e,n))?new n(this.filterColor.interpolate(o.filterColor,t)):(a.LegacyCoreAssert.fail("can't interpolate to a different function spec type",void 0,"PGMFillFilterSpec.interpolate","PGMFillFilterSpec.swift",72),this);var o}}}),n)},jfma:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("tGKA");i.PGMBlendModeEnum=a.defineEnum("PGMBlendModeEnum",{Normal:"normal",Multiply:"multiply",Screen:"screen"}),i.PGMCompositingParams=(n=function(e,t,o){void 0===t&&(t=1),void 0===o&&(o=i.PGMBlendModeEnum.Normal),this.placement=e,this.opacity=t,this.blendMode=o},r={},a.defineClass({name:"PGMCompositingParams",ctor:n,statics:{PROP_REF_PLACEMENT:"placement",PROP_REF_OPACITY:"opacity",PROP_REF_BLEND_MODE:"blend-mode",DEFAULT:{get:function(){return void 0===r.DEFAULT&&(r.DEFAULT=new n(s.Matrix2D.Identity,1,i.PGMBlendModeEnum.Normal)),r.DEFAULT}},decode:function(e,t){var o,r,l;if(l=e){var c,u;c=null!=(u=l[n.PROP_REF_PLACEMENT])?s.Matrix2D.decodeJson(a.as(u,"AnyObject")):s.Matrix2D.Identity;var p,d,h=(o=a.as(l[n.PROP_REF_OPACITY],"Double"))||null!=o?o:1;return p=null==(d=a.as(l[n.PROP_REF_BLEND_MODE],"String"))||!(r=i.PGMBlendModeEnum.toCaseValue(d))&&null==r?i.PGMBlendModeEnum.Normal:r,n.smartInit(c,h,p)}return null},smartInit:function(e,t,o){return void 0===t&&(t=1),void 0===o&&(o=i.PGMBlendModeEnum.Normal),e.isIdentity&&1==t&&o==i.PGMBlendModeEnum.Normal?n.DEFAULT:new n(e,t,o)}},props:{withPlacement:function(e){return this.placement.equal(e)?this:n.smartInit(e,this.opacity,this.blendMode)},withOpacity:function(e){return e==this.opacity?this:n.smartInit(this.placement,e,this.blendMode)},equal:function(e){return this.placement.equal(e.placement)&&this.opacity==e.opacity&&this.blendMode==e.blendMode},isDefault:function(){return this.placement.isIdentity&&1==this.opacity&&this.blendMode==i.PGMBlendModeEnum.Normal},encode:function(){var e={};return this.placement.isIdentity||(e[n.PROP_REF_PLACEMENT]=this.placement.encodeJson()),1!=this.opacity&&(e[n.PROP_REF_OPACITY]=this.opacity),this.blendMode!=i.PGMBlendModeEnum.Normal&&(e[n.PROP_REF_BLEND_MODE]=this.blendMode),e},asString:{get:function(){return"comp(pl:"+this.placement.asString+";op:"+this.opacity+";bl:"+this.blendMode+")"}}}}),n)},jxBj:function(e,t,o){var n=t,r=o("oAGj");n.HostDCXBranch=r.defineProtocol("HostDCXBranch",{root:"HostDCXNode",allComponents:"Array<HostDCXComponent>",getNodeWithAbsolutePath:"(String) -> HostDCXNode",getComponentWithId:"(String) -> HostDCXComponent",getComponentWithAbsolutePath:"(String) -> HostDCXComponent"})},k6St:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("WF+G"),s=o("yGNn"),l=o("fNpk"),c=o("GINV");r.StorageSpecLocalCompositeMulti=(n=function e(t){this.absPathToNode=t,c.StorageSpec.call(this,e.KIND)},i.defineClass({name:"StorageSpecLocalCompositeMulti",ctor:n,superName:"StorageSpec",statics:{KIND:"local-multi",KEY_ABS_PATH_TO_NODE:"abspath",decodeSpec:function(e){var t;return null!=(t=i.as(e[n.KEY_ABS_PATH_TO_NODE],"String"))?new n(new a.CorePath(t).forceAbsolute):(l.LegacyCoreAssert.fail("missing parameter",void 0,"StorageSpecLocalCompositeMulti.decodeSpec","StorageSpecLocalCompositeMulti.swift",35),null)}},props:{encode:function(){var e={};return e[c.StorageSpec.KEY_KIND]=n.KIND,e[n.KEY_ABS_PATH_TO_NODE]=this.absPathToNode.asString,e},read:function(e){return s.CorePromise.reject("todo")},write:function(e,t){return s.CorePromise.reject("todo")},canRead:function(){return!0},readUsingContext:function(e){return this.read(e.composite)},canWrite:function(){return!0},writeUsingContext:function(e,t){return this.write(e.composite,t)}}}),n)},kEiY:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("tlHl"),l=o("rtbu"),c=o("wH/i"),u=o("PlOi"),p=o("s3Tu"),d=o("sIWg");r.PGMMimicMediaNode=(n=function(e,t,o,n){var r;this._mediaTime=0,this._mediaStartTime=0,this._mediaPosterTime=0,(r=i.as(t.child,s.PGMMedia))?(this._contentID=r.contentID,this._bounds=r.bounds,this._contentResource=e.newState.graph.resources.byContentID(r.contentID)||u.PGMResourceProvider.INVALID):(a.LegacyCoreAssert.fail("wrong pgm node type",void 0,"PGMMimicMediaNode.init","PGMMimicMediaNode.swift",34),this._contentID="",this._bounds=d.TheoRect.Zero,this._contentResource=u.PGMResourceProvider.INVALID),l.PGMMimicNode.call(this,e,t,o,n)},i.defineClass({name:"PGMMimicMediaNode",ctor:n,superName:"PGMMimicNode",statics:{PROP_CONTENT_ID:"content-id",PROP_CONTENT_RESOURCE:"content-resource",PROP_BOUNDS:"bounds",PROP_MEDIA_TIME:"media-time",PROP_MEDIA_POSTER_TIME:"media-poster-time",PROP_MEDIA_TIME_OFFSET:"media-time-offset"},props:{importProperties:function(){var e,t;this.startPropertyMutation(),(e=i.as(this.ref.child,s.PGMMedia))?(this.bounds=e.bounds,this.contentID=e.contentID,(t=i.as(e,p.PGMVideo))&&(this.mediaStartTime=t.offset,this.mediaPosterTime=t.posterTime),this.contentResource=this.newState.graph.resources.byContentID(e.contentID)||u.PGMResourceProvider.INVALID):a.LegacyCoreAssert.fail("wrong pgm node type",void 0,"PGMMimicMediaNode.importProperties","PGMMimicMediaNode.swift",54),this.endPropertyMutation()},applyAnimation:function(e,t){var o;(o=i.as(e,c.PGMMediaPlayAnimation))?this.mediaTime=o.interpolate(t)+this.mediaStartTime:l.PGMMimicNode.prototype.applyAnimation.call(this,e,t)},calculateMarkedBounds:function(){return this.bounds},restoreAfterAnimation:function(e){e instanceof c.PGMMediaPlayAnimation?this.mediaTime=0:l.PGMMimicNode.prototype.restoreAfterAnimation.call(this,e)},contentID:{get:function(){return this._contentID},set:function(e){e!=this._contentID&&(this._contentID=e,this.mutateProperty(n.PROP_CONTENT_ID))}},contentResource:{get:function(){return this._contentResource},set:function(e){e.isEqualTo(this._contentResource)||(this._contentResource=e,this.mutateProperty(n.PROP_CONTENT_RESOURCE))}},bounds:{get:function(){return this._bounds},set:function(e){e.equal(this._bounds)||(this._bounds=e,this.invalidateMarkedBounds(),this.mutateProperty(n.PROP_BOUNDS))}},mediaTime:{get:function(){return this._mediaTime},set:function(e){e!=this._mediaTime&&(this._mediaTime=e,this.mutateProperty(n.PROP_MEDIA_TIME))}},mediaStartTime:{get:function(){return this._mediaStartTime},set:function(e){e!=this._mediaStartTime&&(this._mediaStartTime=e,this.mutateProperty(n.PROP_MEDIA_TIME_OFFSET))}},mediaPosterTime:{get:function(){return this._mediaPosterTime},set:function(e){e!=this._mediaPosterTime&&(this._mediaPosterTime=e,this.mutateProperty(n.PROP_MEDIA_POSTER_TIME))}}}}),n)},kJ8p:function(e,t,o){var n,r,i,a,s,l=t,c=o("oAGj"),u=o("yvDn"),p=o("fNpk");l.HostNetworkRequestMethod=c.defineEnum("HostNetworkRequestMethod",{get:0,post:1,put:2,patch:3,delete:4,head:5}),l.HostNetworkRequest=(n=function(e){this.timeout=0,this.method=l.HostNetworkRequestMethod.get,this.headers={},this.url=e},c.defineClass({name:"HostNetworkRequest",ctor:n,superName:"CoreObject"}),n),l.HostNetworkResponse=(r=function(e,t,o,n,r){this.status=e,this.mimeType=t,this.encoding=o,this.data=n,this.headers=c.clone(r),p.LegacyCoreAssert.isTrue(null==c.keys(r).find((function(e){return e.toLowerCase()!=e}),this),"All header names must be lowercased.",void 0,"HostNetworkResponse.init","HostNetworkProtocol.swift",46)},c.defineClass({name:"HostNetworkResponse",ctor:r,superName:"CoreObject"}),r),l.HostNetworkErrorType=c.defineEnum("HostNetworkErrorType",{BadRequest:0,NoInternetConnection:1,SaveResponse:2,Authorization:3,Timeout:4,NotFound:5,ServiceUnavailable:6,BadResponse:7,Unreachable:8,Unknown:9}),l.HostCutoutMaskErrorType=c.defineEnum("HostCutoutMaskErrorType",{UnsupportedImageFormat:0,ImageTooSmall:1,ImageTooLarge:2,InvalidImageUploaded:3,NoForegroundObjectImage:4,Unknown:5}),l.HostNetworkError=(i=function(e,t,o,n){void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=null),this.type=e,this.status=t,this.headers=c.clone(n),u.CoreStringError.call(this,o,!0)},c.defineClass({name:"HostNetworkError",ctor:i,superName:"CoreStringError",props:{description:{get:function(){var e;return"Type:"+this.type+" Message:"+((e=c.as(this.message,"String"))||null!=e?e:"N/A")}},equals:function(e){var t;return!!(t=c.as(e,i))&&this.type==t.type&&u.CoreStringError.prototype.equals.call(this,e)}}}),i),l.HostCutoutMaskError=(a=function(e,t){void 0===t&&(t=null),this.type=e,u.CoreStringError.call(this,t,!0)},c.defineClass({name:"HostCutoutMaskError",ctor:a,superName:"CoreStringError",props:{description:{get:function(){var e;return"Type:"+this.type+" Message:"+((e=c.as(this.message,"String"))||null!=e?e:"N/A")}},equals:function(e){var t;return!!(t=c.as(e,a))&&this.type==t.type&&u.CoreStringError.prototype.equals.call(this,e)}}}),a),l.HostComponentResponse=(s=function(e,t,o,n,r,i){this.url=e,this.id=t,this.name=o,this.type=n,this.md5=r,this.etag=i},c.defineClass({name:"HostComponentResponse",ctor:s,superName:"CoreObject"}),s),l.HostNetworkProtocol=c.defineProtocol("HostNetworkProtocol",{request:"(HostNetworkRequest) -> CorePromise",getAuthToken:"() -> CorePromise",saveImageComponent:"(HostDataProtocol, String) -> CorePromise"})},kUMq:function(e,t,o){var n=t,r=o("oAGj");n.HostDCXComponent=r.defineProtocol("HostDCXComponent",{absolutePath:"CorePath",componentId:"String",name:"String",path:"String",contentType:"String",etag:"String",relationship:"String",storage:"StorageSpec",updateContent:"(StorageSpec) -> HostDCXComponent"})},kXpF:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"Forma":{"className":"Forma","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"placement":{"$ref":"Root.json#/definitions/Matrix2D"},"animation":{"$ref":"Animation.json#/definitions/FormaAnimation"},"moveable":{"type":"boolean"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"controller-kind":{"type":"string","default":""},"controller-metadata":{"$ref":"#/definitions/ControllerMetadata"},"intent":{"type":"string","enum":["logo","pattern","icon","floating-shape","grid-cell","sticker"]},"source":{"type":"string"}},"required":["id","path","placement"]}]},"ControllerMetadata":{"className":"ControllerMetadata","type":"object","properties":{"size":{"$ref":"Root.json#/definitions/TheoSize"},"backing-shape-id":{"type":"string"},"content-id":{"type":"string"},"wrapper-id":{"type":"string"},"highlightMethod":{"type":"integer"},"charstyle-ranges":{"type":"object","properties":{"Highlight":{"type":"array","items":{"type":"integer"}}}}}},"NonRootFormaTypes":{"oneOf":[{"$ref":"#/definitions/GroupForma"},{"$ref":"#/definitions/TextForma"},{"$ref":"#/definitions/ShapeForma"},{"$ref":"#/definitions/FrameForma"},{"$ref":"#/definitions/ImageForma"},{"$ref":"#/definitions/VectorForma"},{"$ref":"#/definitions/VideoForma"},{"$ref":"#/definitions/SmartGroupForma"}]},"GroupFormaBase":{"allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"character-styles":{"type":"object","description":"lockupStyle.characterStyles","patternProperties":{"^.*$":{"$ref":"Styles.json#/definitions/LockupStyle"}}},"character-ranges":{"type":"object","description":"lockupStyle.characterStyles","patternProperties":{"^.*$":{"type":"array","items":{"type":"integer"}}}},"children":{"type":"array","items":{"$ref":"#/definitions/NonRootFormaTypes"}}}}]},"GroupForma":{"className":"GroupForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"kind":{"enum":["group"]}},"required":["kind"]}]},"RootForma":{"className":"RootForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"root-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"kind":{"enum":["Root"]}},"required":["kind"]}]},"FrameForma":{"className":"FrameForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"clipmode":{"type":"boolean","default":true},"kind":{"enum":["Frame"]}},"required":["kind"]}]},"SmartGroupForma":{"className":"SmartGroupForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"kind":{"enum":["smart-group"]}},"required":["kind"]}]},"ImageFormaBase":{"allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"image-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"content-id":{"type":"string","default":""}}}]},"ImageForma":{"className":"ImageForma","allOf":[{"$ref":"#/definitions/ImageFormaBase"},{"properties":{"kind":{"enum":["Image"]}},"required":["kind"]}]},"VideoForma":{"className":"VideoForma","allOf":[{"$ref":"#/definitions/ImageFormaBase"},{"properties":{"video-content-id":{"type":"string","default":""},"kind":{"enum":["Video"]}},"required":["kind"]}]},"ShapeForma":{"className":"ShapeForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"artwork":{"$ref":"Artwork.json#/definitions/TheoArtworkNodeTypes"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"content-id":{"type":"string","default":""},"shape-id":{"type":"string"},"size":{"$ref":"Root.json#/definitions/TheoSize"},"slice-box":{"$ref":"Root.json#/definitions/TheoRect"},"content-region":{"$ref":"Root.json#/definitions/TheoRect"},"text-box":{"$ref":"Root.json#/definitions/TheoRect"},"prescale":{"type":"number"},"kind":{"enum":["Shape"]}},"required":["kind"]}]},"TextForma":{"className":"TextForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"text":{"$ref":"Text.json#/definitions/TextModel"},"text-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"range-in-lockup":{"$ref":"Text.json#/definitions/TextRange"},"row-index":{"type":"integer","default":0},"kind":{"enum":["Text"]}},"required":["text","kind"]}]},"VectorForma":{"className":"VectorForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"content-id":{"type":"string","default":""},"size":{"$ref":"Root.json#/definitions/TheoSize"},"color":{"$ref":"Color.json#/definitions/SolidColor"},"kind":{"enum":["Vector"]}},"required":["kind"]}]},"FormaPage":{"className":"FormaPage","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["forma-document"]},"kind":{"type":"string"},"template-id":{"type":"string","default":""},"size":{"$ref":"Root.json#/definitions/TheoSize"},"size-id":{"type":"string","default":"Instagram"},"custom-size-format":{"type":"integer","default":0},"custom-size-ppi":{"type":"number","default":300},"export-data":{"$ref":"#/definitions/FormaPageExportData"},"color-library":{"$ref":"Color.json#/definitions/ColorLibrary"},"children":{"type":"array","items":{"$ref":"#/definitions/RootForma"},"maxItems":1}},"required":["id","color-library","size-id"]}]},"FormaPageExportData":{"className":"FormaPageExportData","type":"object","properties":{"dimensions":{"$ref":"Root.json#/definitions/TheoSize"},"format":{"type":"integer","default":0},"ppi":{"type":"number"}}}}}')},ko5Z:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("tvh+"),s=o("fNpk");r.CoreContentBase64=(n=function e(t,o,n){void 0===n&&(n=null),this.data=t,a.CoreContent.call(this,e.KIND,o,n)},i.defineClass({name:"CoreContentBase64",ctor:n,superName:"CoreContent",statics:{KIND:"base64",decodePayload:function(e,t,o){var r;return null!=(r=i.as(e[a.CoreContent.KEY_DATA],"String"))?new n(r,t,o):(s.LegacyCoreAssert.fail("missing payload",void 0,"CoreContentBase64.decodePayload","CoreContentBase64.swift",33),null)}},props:{encodePayload:function(e){e[a.CoreContent.KEY_DATA]=this.data},isEqualTo:function(e){var t;return!!(t=i.as(e,n))&&(this===e||this.data==t.data&&a.CoreContent.prototype.isEqualTo.call(this,e))}}}),n)},kpMz:function(e,t,o){var n=t,r=o("oAGj");n.HostFSEntity=r.defineProtocol("HostFSEntity",{parent:"HostFSFolder",filename:"String",absPath:"CorePath"}),n.HostFSFolder=r.defineProtocol("HostFSFolder",{find:"((HostFSEntity) -> Boolean) -> HostFSEntity",createFolder:"(String) -> HostFSFolder",createFile:"(String) -> HostFSFile",delete:"(String) -> Boolean"}),n.HostFSFile=r.defineProtocol("HostFSFile",{read:"() -> CorePromise",write:"(CoreContent) -> CorePromise"})},kuo1:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"Assets":{"read-data":false,"type":"object","properties":{"path":{"type":"string","enum":["assets"]}}},"LinkedObject":{"type":"object","properties":{"id":{"type":"string"},"type":{"type":"string"},"name":{"type":"string"},"path":{"type":"string"}}},"TheoSize":{"type":"array","minItems":2,"items":[{"type":"number","minimum":0,"description":"width"},{"type":"number","minimum":0,"description":"height"}]},"TheoPoint":{"type":"array","minItems":2,"items":[{"type":"number","description":"x"},{"type":"number","description":"y"}]},"TheoRect":{"anyOf":[{"type":"string","pattern":"^[-+]?\\\\d*\\\\.?\\\\d+([eE][-+]?\\\\d+)?(\\\\s*,\\\\s*[-+]?\\\\d*\\\\.?\\\\d+([eE][-+]?\\\\d+)?){3}$","description":"Comma-separated list of 4 doubles in minX, maxX, minY, maxY order"},{"type":"array","minItems":4,"items":[{"type":"number","description":"minX"},{"type":"number","description":"minY"},{"type":"number","description":"maxX"},{"type":"number","description":"maxY"}]}]},"Matrix2D":{"type":"array","minItems":6,"items":[{"type":"number","description":"a"},{"type":"number","description":"b"},{"type":"number","description":"c"},{"type":"number","description":"d"},{"type":"number","description":"tx"},{"type":"number","description":"ty"}]},"TheoTime":{"type":"array","minItems":2,"items":[{"type":"integer","description":"value"},{"type":"integer","description":"timescale"}]},"TheoDocumentData":{"className":"TheoDocumentData","type":"object","properties":{"shareData":{"type":"object","properties":{"scope":{"type":"string"}}}}},"ContentDocument":{"className":"ContentDocument","allOf":[{"$ref":"#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["content"]},"type":{"type":"string","default":"application/vnd.adobe.theo.content+dcx"},"children":{"type":"array","items":[{"$ref":"ContentNodes.json#/definitions/RootContentNode"}]}},"required":["id","path","type"]}]},"DocumentHistory":{"className":"DocumentHistory","allOf":[{"$ref":"#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["document-history"]},"entries":{"type":"array","items":{"type":"string"},"maxItems":100}},"required":["id","path","entries"]}]},"TheoDocument":{"className":"TheoDocument","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","default":"theo-document"},"type":{"type":"string"},"format-version":{"type":"integer"},"watermark-enabled":{"type":"boolean","default":true},"shared":{"type":"boolean","default":false},"modified-since-share":{"type":"boolean","default":false},"cp#assetId":{"type":"string"},"cp#shortId":{"type":"string"},"cp#publishedEtag":{"type":"string"},"cp#projectId":{"type":"string"},"cp#isExported":{"type":"boolean"},"authctx#ctxid":{"$comment":"should only be written as a string from now on, but earlier version have had this set to an object. Including object as a possible type to allow reading of older documents","anyOf":[{"type":"string"},{"type":"object"}]},"authctx#themeid":{"type":"string"},"authctx#uses-branded-elements":{"type":"boolean","description":"authoringContextID_.length > 0"},"doc#data":{"$ref":"#/definitions/TheoDocumentData"},"constrainedImages":{"type":"object","properties":{"stockImages":{"type":"object","properties":{"extended":{"type":"array","items":{"type":"string"}},"standard":{"type":"array","items":{"type":"string"}},"unlicensed":{"type":"array","items":{"type":"string"}}}}}},"children":{"type":"array","items":{"anyOf":[{"$ref":"Formae.json#/definitions/FormaPage"},{"$ref":"#/definitions/ContentDocument"},{"$ref":"Color.json#/definitions/ColorThemeDocument"},{"$ref":"#/definitions/DocumentHistory"},{"$ref":"#/definitions/Assets"}]},"uniqueItems":true}},"required":["id","format-version"]}},"$ref":"#/definitions/TheoDocument"}')},l77X:function(e,t,o){var n;!function(r){"use strict";var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijos@tTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function a(){var e=arguments[0],t=a.cache;return t[e]&&t.hasOwnProperty(e)||(t[e]=a.parse(e)),a.format.call(null,t[e],arguments)}a.format=function(e,t){var o,n,r,s,c,p,d,h=1,f=e.length,m="",g=[],y=!0,T="";for(n=0;n<f;n++)if("string"===(m=l(e[n])))g[g.length]=e[n];else if("array"===m){if((s=e[n])[2])for(o=t[h],r=0;r<s[2].length;r++){if(!o.hasOwnProperty(s[2][r]))throw new Error(a('[sprintf] property "%s" does not exist',s[2][r]));o=o[s[2][r]]}else o=s[1]?t[s[1]]:t[h++];if(i.not_type.test(s[8])&&i.not_primitive.test(s[8])&&"function"==l(o)&&(o=o()),i.numeric_arg.test(s[8])&&"number"!=l(o)&&isNaN(o))throw new TypeError(a("[sprintf] expecting number but found %s",l(o)));switch(i.number.test(s[8])&&(y=o>=0),s[8]){case"b":o=parseInt(o,10).toString(2);break;case"c":o=String.fromCharCode(parseInt(o,10));break;case"d":case"i":o=parseInt(o,10);break;case"j":o=JSON.stringify(o,null,s[6]?parseInt(s[6]):0);break;case"e":o=s[7]?parseFloat(o).toExponential(s[7]):parseFloat(o).toExponential();break;case"f":o=s[7]?parseFloat(o).toFixed(s[7]):parseFloat(o);break;case"g":o=s[7]?parseFloat(o).toPrecision(s[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":case"@":o=String(o),o=s[7]?o.substring(0,s[7]):o;break;case"t":o=String(!!o),o=s[7]?o.substring(0,s[7]):o;break;case"T":o=l(o),o=s[7]?o.substring(0,s[7]):o;break;case"u":o=parseInt(o,10)>>>0;break;case"v":o=o.valueOf(),o=s[7]?o.substring(0,s[7]):o;break;case"x":o=parseInt(o,10).toString(16);break;case"X":o=parseInt(o,10).toString(16).toUpperCase()}i.json.test(s[8])?g[g.length]=o:(!i.number.test(s[8])||y&&!s[3]?T="":(T=y?"+":"-",o=o.toString().replace(i.sign,"")),p=s[4]?"0"===s[4]?"0":s[4].charAt(1):" ",d=s[6]-(T+o).length,c=s[6]&&d>0?u(p,d):"",g[g.length]=s[5]?T+o+c:"0"===p?T+c+o:c+T+o)}return g.join("")},a.cache={},a.parse=function(e){for(var t=e,o=[],n=[],r=0;t;){if(null!==(o=i.text.exec(t)))n[n.length]=o[0];else if(null!==(o=i.modulo.exec(t)))n[n.length]="%";else{if(null===(o=i.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(o[2]){r|=1;var a=[],s=o[2],l=[];if(null===(l=i.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a[a.length]=l[1];""!==(s=s.substring(l[0].length));)if(null!==(l=i.key_access.exec(s)))a[a.length]=l[1];else{if(null===(l=i.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");a[a.length]=l[1]}o[2]=a}else r|=2;if(3===r)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n[n.length]=o}t=t.substring(o[0].length)}return n};var s=function(e,t,o){return(o=(t||[]).slice(0)).splice(0,0,e),a.apply(null,o)};function l(e){return"number"==typeof e?"number":"string"==typeof e?"string":Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var c={0:["","0","00","000","0000","00000","000000","0000000"]," ":[""," ","  ","   ","    ","     ","      ","       "],_:["","_","__","___","____","_____","______","_______"]};function u(e,t){return t>=0&&t<=7&&c[e]?c[e][t]:Array(t+1).join(e)}t.sprintf=a,t.vsprintf=s,void 0!==r&&(r.sprintf=a,r.vsprintf=s,void 0===(n=function(){return{sprintf:a,vsprintf:s}}.call(t,o,t,e))||(e.exports=n))}("undefined"==typeof window?this:window)},lBMd:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"Assets":{"read-data":false,"type":"object","properties":{"path":{"type":"string","enum":["assets"]}}},"LinkedObject":{"type":"object","properties":{"id":{"type":"string"},"type":{"type":"string"},"name":{"type":"string"},"path":{"type":"string"}}},"TheoSize":{"type":"array","minItems":2,"items":[{"type":"number","minimum":0,"description":"width"},{"type":"number","minimum":0,"description":"height"}]},"TheoPoint":{"type":"array","minItems":2,"items":[{"type":"number","description":"x"},{"type":"number","description":"y"}]},"TheoRect":{"anyOf":[{"type":"string","pattern":"^[-+]?\\\\d*\\\\.?\\\\d+([eE][-+]?\\\\d+)?(\\\\s*,\\\\s*[-+]?\\\\d*\\\\.?\\\\d+([eE][-+]?\\\\d+)?){3}$","description":"Comma-separated list of 4 doubles in minX, maxX, minY, maxY order"},{"type":"array","minItems":4,"items":[{"type":"number","description":"minX"},{"type":"number","description":"minY"},{"type":"number","description":"maxX"},{"type":"number","description":"maxY"}]}]},"Matrix2D":{"type":"array","minItems":6,"items":[{"type":"number","description":"a"},{"type":"number","description":"b"},{"type":"number","description":"c"},{"type":"number","description":"d"},{"type":"number","description":"tx"},{"type":"number","description":"ty"}]},"TheoTime":{"type":"array","minItems":2,"items":[{"type":"integer","description":"value"},{"type":"integer","description":"timescale"}]},"TheoDocumentData":{"className":"TheoDocumentData","type":"object","properties":{"shareData":{"type":"object","properties":{"scope":{"type":"string"}}}}},"ContentDocument":{"className":"ContentDocument","allOf":[{"$ref":"#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["content"]},"type":{"type":"string","default":"application/vnd.adobe.theo.content+dcx"},"children":{"type":"array","items":[{"$ref":"ContentNodes.json#/definitions/RootContentNode"}]}},"required":["id","path","type"]}]},"DocumentHistory":{"className":"DocumentHistory","allOf":[{"$ref":"#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["document-history"]},"entries":{"type":"array","items":{"type":"string"},"maxItems":100}},"required":["id","path","entries"]}]},"TheoDocument":{"className":"TheoDocument","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","default":"My Post"},"type":{"type":"string"},"format-version":{"type":"integer"},"watermark-enabled":{"type":"boolean","default":true},"shared":{"type":"boolean"},"modified-since-share":{"type":"boolean","default":false},"cp#assetId":{"type":"string"},"cp#shortId":{"type":"string"},"cp#publishedEtag":{"type":"string"},"cp#projectId":{"type":"string"},"cp#isExported":{"type":"boolean"},"authctx#ctxid":{"$comment":"should only be written as a string from now on, but earlier version have had this set to an object. Including object as a possible type to allow reading of older documents","anyOf":[{"type":"string"},{"type":"object"}]},"authctx#themeid":{"type":"string"},"authctx#uses-branded-elements":{"type":"boolean","description":"authoringContextID_.length > 0"},"doc#data":{"$ref":"#/definitions/TheoDocumentData"},"constrainedImages":{"type":"object","properties":{"stockImages":{"type":"object","properties":{"extended":{"type":"array","items":{"type":"string"}},"standard":{"type":"array","items":{"type":"string"}},"unlicensed":{"type":"array","items":{"type":"string"}}}}}},"children":{"type":"array","items":{"anyOf":[{"$ref":"Formae.json#/definitions/FormaPage"},{"$ref":"#/definitions/ContentDocument"},{"$ref":"Color.json#/definitions/ColorThemeDocument"},{"$ref":"#/definitions/DocumentHistory"},{"$ref":"#/definitions/Assets"}]},"uniqueItems":true}},"required":["id","format-version","doc#data"]}},"$ref":"#/definitions/TheoDocument"}')},lQGc:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"SolidColor":{"className":"SolidColor","type":"object","properties":{"red":{"type":"number"},"green":{"type":"number"},"blue":{"type":"number"},"alpha":{"type":"number"}},"required":["red","green","blue","alpha"]},"TheoColor":{"className":"TheoColor","type":"object","properties":{"red":{"type":"number","description":"rgbcolor.red"},"green":{"type":"number","description":"rgbcolor.green"},"blue":{"type":"number","description":"rgbcolor.blue"},"alpha":{"type":"number","description":"rgbcolor.alpha"},"sparkElementID":{"type":"string"},"sparkRoles":{"type":"array","items":{"type":"string"}}},"required":["red","green","blue","alpha"]},"ColorSwatch":{"className":"ColorSwatch","type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"numTags":{"type":"integer"}},"patternProperties":{"key-[0-9]*":{"type":"string","description":"tags_[key-N] = value-N"},"value-[0-9]*":{"type":"string","description":"tags_[key-N] = value-N"}},"required":["id","path"]},"ColorSwatchTypes":{"oneOf":[{"$ref":"#/definitions/SimpleSwatch"}]},"ColorThemeDocument":{"className":"ColorThemeDocument","type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["colortheme"]},"type":{"type":"string","default":"application/vnd.adobe.theo.color+dcx","enum":["application/vnd.adobe.theo.color+dcx"]},"children":{"type":"array","items":{"$ref":"#/definitions/ColorSwatchTypes"}}},"required":["id","path"]},"PaletteID":{"anyOf":[{"type":"string"},{"type":"integer"}]},"ColorLibrary":{"className":"ColorLibrary","type":"object","properties":{"palette:id":{"$ref":"#/definitions/PaletteID"},"entries":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"color":{"$ref":"#/definitions/TheoColor"}}}}}},"SimpleSwatch":{"className":"SimpleSwatch","allOf":[{"$ref":"#/definitions/ColorSwatch"},{"properties":{"kind":{"type":"string","enum":["simple"]},"color":{"$ref":"#/definitions/SolidColor"}}}]},"ColorTableEntry":{"className":"ColorTableEntry","type":"object","properties":{"color-id":{"type":"string"},"color":{"$ref":"#/definitions/SolidColor"},"theme-index":{"type":"integer"}}},"ColorRole":{"type":"string","enum":["field-primary","field-secondary","border","shadow"]},"ColorTable":{"className":"ColorTable","type":"object","properties":{"entries":{"type":"array","items":{"type":"object","properties":{"role":{"$ref":"#/definitions/ColorRole"},"color-id":{"type":"string"},"color":{"$ref":"#/definitions/SolidColor"},"theme-index":{"type":"integer"}}}}}}}}')},"ll2+":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("WF+G"),s=o("yGNn"),l=o("9lcg"),c=o("fNpk"),u=o("GINV");r.StorageSpecLocalFile=(n=function e(t){this.absPath=t,u.StorageSpec.call(this,e.KIND)},i.defineClass({name:"StorageSpecLocalFile",ctor:n,superName:"StorageSpec",statics:{KIND:"local-file",KEY_ABSPATH:"abspath",decodeSpec:function(e){var t;return null!=(t=i.as(e[n.KEY_ABSPATH],"String"))?new n(new a.CorePath(t)):(c.LegacyCoreAssert.fail("no abspath parameter found",void 0,"StorageSpecLocalFile.decodeSpec","StorageSpecLocalFile.swift",29),null)}},props:{read:function(e){var t;return(t=l.HostFileUtils.getFileAtPath(e,this.absPath,!1))?t.read():s.CorePromise.reject("read: could not obtain file reference at path "+this.absPath.asString)},write:function(e,t){var o;return(o=l.HostFileUtils.getFileAtPath(e,this.absPath,!0))?o.write(t):s.CorePromise.reject("write: could not obtain file reference at path "+this.absPath.asString)},encode:function(){var e={};return e[u.StorageSpec.KEY_KIND]=n.KIND,e[n.KEY_ABSPATH]=this.absPath.asString,e},isEqualTo:function(e){return e===this||!!(t=i.as(e,n))&&this.absPath.isEqualTo(t.absPath)&&u.StorageSpec.prototype.isEqualTo.call(this,e);var t},canRead:function(){return!0},readUsingContext:function(e){return this.read(e.localFolder)},canWrite:function(){return!0},writeUsingContext:function(e,t){return this.write(e.localFolder,t)}}}),n)},m404:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("Zifs");r.HSBColor=(n=function(e,t,o,n){a.LegacyCoreAssert.isFalse(isNaN(e)||isNaN(t)||isNaN(o)||isNaN(n),"HSB color initilized with NaN values",void 0,"HSBColor.init","HSBColor.swift",20),a.LegacyCoreAssert.isTrue(e>=0&&e<=1,"hue out of range",void 0,"HSBColor.init","HSBColor.swift",21),a.LegacyCoreAssert.isTrue(t>=0&&t<=1,"saturation out of range",void 0,"HSBColor.init","HSBColor.swift",22),a.LegacyCoreAssert.isTrue(o>=0&&o<=1,"brightness out of range",void 0,"HSBColor.init","HSBColor.swift",23),a.LegacyCoreAssert.isTrue(n>=0&&n<=1,"alpha out of range",void 0,"HSBColor.init","HSBColor.swift",24),this.h=e,this.s=t,this.b=o,this.alpha=n},i.defineClass({name:"HSBColor",ctor:n,superName:"CoreObject",statics:{fromRGB:function(e){var t=Math.max(e.red,Math.max(e.green,e.blue)),o=t-Math.min(e.red,Math.min(e.green,e.blue));if(0==o)return new n(0,0,t,e.alpha);var r=0;return(r=e.red==t?(e.green-e.blue)/o:e.green==t?2+(e.blue-e.red)/o:4+(e.red-e.green)/o)<0?r=(60*r+360)%360/360:r/=6,new n(r,o/t,t,Math.min(Math.max(e.alpha,0),1))}},props:{hueDistance:function(e){var t=Math.min(e.h,this.h),o=Math.max(e.h,this.h);return Math.min(o-t,t+1-o)},asRGB:{get:function(){var e=i.toInt(Math.floor(6*this.h)),t=6*this.h-i.toDouble(e),o=this.b*(1-this.s),n=this.b*(1-t*this.s),r=this.b*(1-(1-t)*this.s);switch(e%6){case 0:return new s.SolidColor(this.b,r,o,this.alpha);case 1:return new s.SolidColor(n,this.b,o,this.alpha);case 2:return new s.SolidColor(o,this.b,r,this.alpha);case 3:return new s.SolidColor(o,n,this.b,this.alpha);case 4:return new s.SolidColor(r,o,this.b,this.alpha);case 5:return new s.SolidColor(this.b,o,n,this.alpha);default:return new s.SolidColor(0,0,0,0)}}}}}),n)},mBzD:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("gXiO");r.VideoInfo=(n=function(e,t,o,n){this.duration=e,this.rate=t,this.width=o,this.height=n,a.CoreObject.call(this)},i.defineClass({name:"VideoInfo",ctor:n,superName:"CoreObject"}),n),r.HostVideoUtilsProtocol=i.defineProtocol("HostVideoUtilsProtocol",{hostSupportsIdBasedVideos:"() -> Boolean",hostSupportsPGMVideos:"() -> Boolean",trimVideoAtUrl:"(String, String, TheoTimeRange, (Double) -> Boolean) -> CorePromise",trimVideoWithId:"(String, String, TheoTimeRange, (Double) -> Boolean) -> CorePromise",getAttributesForVideoAtUrl:"(String) -> CorePromise",getAttributesForVideoWithId:"(String) -> CorePromise"})},mSLX:function(e,t,o){var n,r,i,a,s,l=t,c=o("oAGj"),u=o("Tq01"),p=o("4mEG"),d=o("c9Jm"),h=o("kYI4"),f=o("70fJ"),m=o("yGNn"),g=o("ascj"),y=o("rsKm"),T=o("FNB+"),A=o("x6FH"),C=o("iCxV"),_=o("VkKB"),S=o("JO5d"),P=o("Zifs"),F=o("umUn"),v=o("8t9B");l.ApplyColorIconTest=(n=function e(){this.actionSequence_ApplyColorIcon=[function(){return new p.AddIconContentAction(e.originalIconURL_,_.MediaMetadata.init_4d41(),null,void 0,void 0,null)}],this.testDoc_=null,this.testPage_=null,this.testColor_=null,this.oldIconColor_=null,d.ActionTestBase.call(this)},r={},c.defineClass({name:"ApplyColorIconTest",ctor:n,superName:"ActionTestBase",statics:{originalIconURL_:"",purple_:{get:function(){return void 0===r.purple_&&(r.purple_=new P.SolidColor(.4,.2,.6,1)),r.purple_}}},props:{iconForma:{get:function(){return c.first(c.opt(c.as(this.getActionResult(0),u.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(e,t,o){var r=this;return m.CorePromise.resolve(e.concat([function(){return r.oldIconColor_=c.opt(c.opt(r.iconForma,(function(e){return e.style})),(function(e){return e.colors.theoColor(g.ColorRole.FieldPrimary)})),r.testColor_=F.TheoColor.init_5344(n.purple_),new f.ApplyColorAction([r.iconForma],[r.testColor_],!1,0)}]))},setUpActionSequence:function(e,t,o){var r;this.testDoc_=o,this.testPage_=o.firstPage,null!=(r=this.urlForAsset("dog1.svg"))&&(n.originalIconURL_=r)},validateAfterActionSequence:function(e,t){var o=c.opt(c.opt(this.iconForma,(function(e){return e.style})),(function(e){return e.colors.theoColor(g.ColorRole.FieldPrimary)}));XCTAssertEqual(o,this.testColor_)},validateAfterUndo:function(e,t){var o=c.opt(c.opt(this.iconForma,(function(e){return e.style})),(function(e){return e.colors.theoColor(g.ColorRole.FieldPrimary)}));XCTAssertEqual(o,this.oldIconColor_)},validateAfterRedo:function(e,t){var o=c.opt(c.opt(this.iconForma,(function(e){return e.style})),(function(e){return e.colors.theoColor(g.ColorRole.FieldPrimary)}));XCTAssertEqual(o,this.testColor_)}}}),n),l.ApplyColorRootTest=function(){var e=function(){this.actionSequence_ApplyColorRoot=[],this.testDoc_=null,this.testPage_=null,this.rootForma_=null,this.testColor_=null,this.oldColor_=null,d.ActionTestBase.call(this)},t={};return c.defineClass({name:"ApplyColorRootTest",ctor:e,superName:"ActionTestBase",statics:{purple_:{get:function(){return void 0===t.purple_&&(t.purple_=new P.SolidColor(.4,.2,.6,1)),t.purple_}}},props:{populateActionSequence:function(t,o,n){var r=this;return m.CorePromise.resolve(t.concat([function(){return r.oldColor_=c.opt(r.rootForma_,(function(e){return e.style.colors.theoColor(g.ColorRole.FieldPrimary)})),r.testColor_=F.TheoColor.init_5344(e.purple_),new A.EnterGridLayoutModeAction},function(){return new A.SetGridParametersAction(NaN,8)},function(){return new f.ApplyColorAction([r.rootForma_],[r.testColor_],!1,0)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.testPage_=o.firstPage,this.rootForma_=c.opt(this.testPage_,(function(e){return e.root}))},validateAfterActionSequence:function(e,t){var o=c.opt(this.rootForma_,(function(e){return e.style.colors.theoColor(g.ColorRole.FieldPrimary)}));XCTAssertEqual(o,this.testColor_)},validateAfterUndo:function(e,t){var o=c.opt(this.rootForma_,(function(e){return e.style.colors.theoColor(g.ColorRole.FieldPrimary)}));XCTAssertEqual(o,this.oldColor_)},validateAfterRedo:function(e,t){var o=c.opt(this.rootForma_,(function(e){return e.style.colors.theoColor(g.ColorRole.FieldPrimary)}));XCTAssertEqual(o,this.testColor_)}}}),e}(),l.ApplyColorThemeTest=(i=function(){this.actionSequence_ApplyColorTheme=[],this.testDoc_=null,this.page_=null,this.themeColors_=[],d.ActionTestBase.call(this)},c.defineClass({name:"ApplyColorThemeTest",ctor:i,superName:"ActionTestBase",props:{verifyColors:function(e){for(var t=0,o=c.clone(this.page_.colorLibraryController.getTheoColorsUsedInDocument()),n=c.iter(o);!n.done;n.next()){var r=n.value;(r.isBrandkitPrimaryColor()||r.isBrandkitSecondaryColor()||r.isBrandkitShade())&&(t+=1)}e?XCTAssertTrue(t>0):XCTAssertEqual(t,0)},populateActionSequence:function(e,t,o){var n=this;this.installBrandkit(o);for(var r=C.Host.brandkitManager.fakeBrandkitForElementsForTesting,i=c.clone(h.BrandingFacade.getBrandkitColorsForUI(r,null)),a=c.iter(i);!a.done;a.next()){var s=a.value[0];this.themeColors_.push(s)}return m.CorePromise.resolve(e.concat([function(){return new y.ApplyColorThemeAction(n.themeColors_,"brandkit-for-actions",n.page_,!0)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.page_=o.firstPage},validateAfterActionSequence:function(e,t){this.verifyColors(!0)},validateAfterUndo:function(e,t){this.verifyColors(!1)},validateAfterRedo:function(e,t){this.verifyColors(!0)},shutdown:function(e,t,o){d.ActionTestBase.prototype.shutdown.call(this,e,t,o),this.removeBrandkit(o)}}}),i),l.ApplyColorThemeWithShuffleTest=(a=function(){this.actionSequence_ApplyColorThemeWithShuffle=[],this.testDoc_=null,this.page_=null,this.themeColors_=[],this.colorDictionary_={},this.colorRelationshipTestUtils_=new l.ColorRelationshipTestUtils,this.colorPaletteRelationshipBefore_=null,this.colorPaletteRelationshipAfter_=null,d.ActionTestBase.call(this)},c.defineClass({name:"ApplyColorThemeWithShuffleTest",ctor:a,superName:"ActionTestBase",props:{gatherColors:function(){var e={},t=c.opt(this.page_,(function(e){return e.root}));return c.opt(t,(function(t){return t.visitAll(T.FormaTraversal.PreOrder,(function(t){if(null!=t.style.colors.colorID(g.ColorRole.FieldPrimary)){var o,n=null;c.as(t.controller,v.TypeLockupController)&&(n=t.style.colors.theoColor(g.ColorRole.FieldPrimary)),c.as(t.controller,S.ShapeController)&&(n=t.style.colors.theoColor(g.ColorRole.FieldPrimary)),null!=(o=c.opt(n,(function(e){return e.asString})))&&(e[t.formaID]=o)}}))})),e},gatherSparkColors:function(){var e={},t=c.opt(this.page_,(function(e){return e.root}));return c.opt(t,(function(t){return t.visitAll(T.FormaTraversal.PreOrder,(function(t){var o;null!=t.style.colors.colorID(g.ColorRole.FieldPrimary)&&null!=c.opt(t.style.colors.theoColor(g.ColorRole.FieldPrimary),(function(e){return e.sparkElementID}))&&null!=(o=c.opt(t.style.colors.theoColor(g.ColorRole.FieldPrimary),(function(e){return e.asString})))&&(e[t.formaID]=o)}))})),e},verifyShuffledColors:function(e,t){for(var o=0,n=c.iter(e);!n.done;n.next()){var r,i=n.key,a=n.value;null!=(r=t[i])&&a!=r&&(o+=1)}c.toDouble(o)/c.toDouble(c.count(e))<=.15&&C.Host.logging.info("verifyShuffledColors diffCount "+o+" and count "+c.count(e)),XCTAssertTrue(c.toDouble(o)/c.toDouble(c.count(e))>.15)},verifyColorBeforeAfterPreservation:function(){var e,t,o,n;(e=this.testDoc_)&&(this.colorPaletteRelationshipAfter_=c.clone(this.colorRelationshipTestUtils_.getCurrentPaletteMapping(e)),(t=this.colorPaletteRelationshipBefore_)&&(o=this.colorPaletteRelationshipAfter_)&&null!=(n=this.colorRelationshipTestUtils_.checkOverlapBetweenTwoPaletteMappings(t,o))?XCTAssertTrue(n>=.8,"score: "+c.toString(n)+" below threshold:"+c.toString(.8)):XCTFail("Unknown error, value was nil"))},populateActionSequence:function(e,t,o){var n=this;this.installBrandkit(o);for(var r=C.Host.brandkitManager.fakeBrandkitForElementsForTesting,i=c.iter(r.colors);!i.done;i.next()){var a=i.value;this.themeColors_.push(F.TheoColor.init_bb45(a))}return m.CorePromise.resolve(e.concat([function(){return new y.ApplyColorThemeAction(n.themeColors_,"brandkit-for-actions",n.page_,!0)},function(){return n.colorDictionary_=c.clone(n.gatherColors()),new y.ApplyColorThemeAction(n.themeColors_,"brandkit-for-actions",n.page_,!0)}]))},setUpActionSequence:function(e,t,o){var n;this.testDoc_=o,this.page_=o.firstPage,(n=this.testDoc_)&&(this.colorPaletteRelationshipBefore_=c.clone(this.colorRelationshipTestUtils_.getCurrentPaletteMapping(n)))},validateAfterActionSequence:function(e,t){var o=c.clone(this.gatherColors());this.verifyShuffledColors(this.colorDictionary_,o),this.verifyColorBeforeAfterPreservation()},validateAfterUndo:function(e,t){var o=c.clone(this.gatherSparkColors());XCTAssertEqual(c.count(o),0),this.verifyColorBeforeAfterPreservation()},validateAfterRedo:function(e,t){var o=c.clone(this.gatherColors());this.verifyShuffledColors(this.colorDictionary_,o),this.verifyColorBeforeAfterPreservation()},shutdown:function(e,t,o){d.ActionTestBase.prototype.shutdown.call(this,e,t,o),this.removeBrandkit(o)}}}),a),l.ModifyColorThemeTest=function(){var e=function e(){this.actionSequence_ModifyColorTheme=[function(){return new p.AddIconContentAction(e.originalIconURL_,_.MediaMetadata.init_4d41(),null,void 0,void 0,null)}],this.testDoc_=null,this.testPage_=null,this.testColor_=null,this.oldIconColor_=null,this.iconColorKey_="",this.themeColors_=[],d.ActionTestBase.call(this)},t={};return c.defineClass({name:"ModifyColorThemeTest",ctor:e,superName:"ActionTestBase",statics:{originalIconURL_:"",darkBlue_:{get:function(){return void 0===t.darkBlue_&&(t.darkBlue_=new P.SolidColor(1/255,1/255,164/255,1)),t.darkBlue_}}},props:{iconForma:{get:function(){return c.first(c.opt(c.as(this.getActionResult(0),u.FormaActionResult),(function(e){return e.formae})))}},populateActionSequence:function(t,o,n){var r=this;this.installBrandkit(n);for(var i=C.Host.brandkitManager.fakeBrandkitForElementsForTesting,a=c.iter(i.colors);!a.done;a.next()){var s=a.value;this.themeColors_.push(F.TheoColor.init_bb45(s))}return m.CorePromise.resolve(t.concat([function(){return new y.ApplyColorThemeAction(r.themeColors_,"brandkit-for-actions",r.testPage_,!1)},function(){return r.oldIconColor_=c.opt(c.opt(r.iconForma,(function(e){return e.style})),(function(e){return e.colors.theoColor(g.ColorRole.FieldPrimary)})),r.iconColorKey_=c.opt(c.opt(r.iconForma,(function(e){return e.style})),(function(e){return e.colors.colorID(g.ColorRole.FieldPrimary)})),r.testColor_=F.TheoColor.init_5344(e.darkBlue_),new y.ModifyColorThemeAction(r.testColor_,r.iconColorKey_,r.testPage_)}]))},setUpActionSequence:function(t,o,n){var r;this.testDoc_=n,this.testPage_=n.firstPage,null!=(r=this.urlForAsset("dog1.svg"))&&(e.originalIconURL_=r)},validateAfterActionSequence:function(e,t){var o=c.opt(c.opt(this.iconForma,(function(e){return e.style})),(function(e){return e.colors.theoColor(g.ColorRole.FieldPrimary)}));XCTAssertEqual(o,this.testColor_);var n=c.opt(c.opt(this.iconForma,(function(e){return e.style})),(function(e){return e.colors.colorID(g.ColorRole.FieldPrimary)}));XCTAssertEqual(n,this.iconColorKey_)},validateAfterUndo:function(e,t){XCTAssertEqual(c.opt(this.iconForma,(function(e){return e.parent})),null)},validateAfterRedo:function(e,t){var o=c.opt(c.opt(this.iconForma,(function(e){return e.style})),(function(e){return e.colors.theoColor(g.ColorRole.FieldPrimary)}));XCTAssertEqual(o,this.testColor_);var n=c.opt(c.opt(this.iconForma,(function(e){return e.style})),(function(e){return e.colors.colorID(g.ColorRole.FieldPrimary)}));XCTAssertEqual(n,this.iconColorKey_)},shutdown:function(e,t,o){d.ActionTestBase.prototype.shutdown.call(this,e,t,o),this.removeBrandkit(o)}}}),e}(),l.ColorRelationshipTestUtils=(s=function(){},c.defineClass({name:"ColorRelationshipTestUtils",ctor:s,props:{getCurrentPaletteMapping:function(e){return e.firstPage.colorLibraryController.enteredPalettePicker(),e.firstPage.colorLibraryController.returnCurrentPaletteMapping()},checkOverlapBetweenTwoPaletteMappings:function(e,t){for(var o=null,n=0,r=0,i=c.iter(c.keys(e));!i.done;i.next()){var a,s=i.value;if(null!=(a=this.findCorrespondingMappingKey(e[s],t)))for(var l=c.iter(e[s]);!l.done;l.next()){var u=l.value;u.length>1&&(t[a].includes(u)?(n+=1,r+=1):n+=1)}else n+=e[s].length}return n>0&&(o=c.toDouble(r)/c.toDouble(n)),o},getAverageArrayDouble:function(e){for(var t=0,o=0,n=0,r=c.iter(e);!r.done;r.next()){var i=r.value;isNaN(i)||(t+=i,o+=1)}return c.opt(C.Host.logging,(function(e){return e.info("Sum: "+c.toString(t))})),c.opt(C.Host.logging,(function(e){return e.info("Count: "+c.toString(o))})),o>0&&(n=t/c.toDouble(o)),n},printPaletteMapping:function(e){for(var t=[],o=c.iter(c.keys(e));!o.done;o.next()){for(var n=o.value,r=n+":",i=c.iter(e[n]);!i.done;i.next())r+=i.value+"\n";t.push(r)}for(var a=c.iter(t);!a.done;a.next()){var s=a.value;c.opt(C.Host.logging,(function(e){return e.info(s)}))}},findCorrespondingMappingKey:function(e,t){for(var o=null,n={},r=c.iter(c.keys(t));!r.done;r.next())for(var i=r.value,a=c.iter(e);!a.done;a.next()){var s=a.value;t[i].includes(s)&&(c.keys(n).includes(i)?n[i]=n[i]+1:n[i]=1)}for(var l=0,u=c.iter(c.keys(n));!u.done;u.next())n[i=u.value]>l&&(o=i,l=n[i]);return o}}}),s)},md5b:function(e,t,o){var n,r,i,a,s=t,l=o("oAGj"),c=o("c9Jm"),u=o("yGNn"),p=o("Pil/"),d=o("pnSN"),h=o("H1Z2"),f=o("c+uM"),m=o("tGKA"),g=o("cRpU"),y=o("Vm85"),T=o("8t9B"),A=o("oKlP"),C=o("sIWg");s.MoveHandleTest=(n=function(){this.actionSequence_MoveHandle=[],this.formaToMove_=null,this.delta_=new A.TheoPoint(5,-5),this.initialBounds_=C.TheoRect.Zero,this.postMoveBounds_=C.TheoRect.Zero,c.ActionTestBase.call(this)},l.defineClass({name:"MoveHandleTest",ctor:n,superName:"ActionTestBase",props:{tearDown:function(){this.formaToMove_=null,c.ActionTestBase.prototype.tearDown.call(this)},findFormaToMove:function(e){return l.last(this.allSelectableFormae(e,(function(e){return e instanceof d.GroupForma&&e.controller.kind==T.TypeLockupController.KIND})))},canRunActionSequence:function(e,t,o){return null!=this.findFormaToMove(o)},populateActionSequence:function(e,t,o){var n=this;return this.formaToMove_=this.findFormaToMove(o),XCTAssertNotNil(this.formaToMove_),null!=this.formaToMove_&&(o.controller.selection.replaceSelection(this.formaToMove_),this.initialBounds_=this.formaToMove_.finalFrame),u.CorePromise.resolve([function(){return new h.MoveHandleAction(n.formaToMove_,n.delta_,n.initialBounds_.center,1)}])},validateAfterActionSequence:function(e,t){this.postMoveBounds_=this.formaToMove_.finalFrame,XCTAssertFalse(this.postMoveBounds_.equal(this.initialBounds_))},validateAfterUndo:function(e,t){var o=this.formaToMove_.finalFrame;XCTAssertTrue(this.initialBounds_.equal(o))},validateAfterRedo:function(e,t){var o=this.formaToMove_.finalFrame;XCTAssertTrue(o.equal(this.postMoveBounds_))}}}),n),s.ResizeHandleTest=(r=function(){this.actionSequence_ResizeHandleTracking=[],this.actionSequence_ResizeHandleLeading=[],this.actionSequence_ResizeHandleCorner=[],this.formaToResize_=null,this.trackingSpot_=new A.TheoPoint(1,.5),this.leadingSpot_=new A.TheoPoint(.5,1),this.cornerSpot_=new A.TheoPoint(1,1),this.initialBounds_=C.TheoRect.Zero,this.postResizeBounds_=C.TheoRect.Zero,c.ActionTestBase.call(this)},l.defineClass({name:"ResizeHandleTest",ctor:r,superName:"ActionTestBase",props:{tearDown:function(){this.formaToResize_=null,c.ActionTestBase.prototype.tearDown.call(this)},findFormaToResize:function(e){return l.last(this.allSelectableFormae(e,(function(e){return e instanceof d.GroupForma&&e.controller.kind==T.TypeLockupController.KIND})))},canRunActionSequence:function(e,t,o){return null!=this.findFormaToResize(o)},populateActionSequence:function(e,t,o){var n=this;this.formaToResize_=this.findFormaToResize(o),XCTAssertNotNil(this.formaToResize_),null!=this.formaToResize_&&(o.controller.selection.replaceSelection(this.formaToResize_),this.initialBounds_=this.formaToResize_.finalFrame);var r=!1,i=this.cornerSpot_,a=new C.TheoRect(this.initialBounds_.minX,this.initialBounds_.minY,this.initialBounds_.minX+100,this.initialBounds_.minY+100);return"actionSequence_ResizeHandleTracking"==t?(i=this.trackingSpot_,r=!0):"actionSequence_ResizeHandleLeading"==t&&(i=this.leadingSpot_,r=!0),u.CorePromise.resolve([function(){return new h.ResizeHandleAction(n.formaToResize_,i,A.TheoPoint.ZERO,a,r)}])}}}),r),s.ResizeLockupHorizontallyTest=(i=function(){this.actionSequence_ResizeLockupWider_Right=[],this.actionSequence_ResizeLockupNarrower_Right=[],this.actionSequence_ResizeLockupWider_Left=[],this.actionSequence_ResizeLockupNarrower_Left=[],this.lockupForma_=null,this.initialFontSize_=0,this.initialBounds_=C.TheoRect.Zero,c.ActionTestBase.call(this)},l.defineClass({name:"ResizeLockupHorizontallyTest",ctor:i,superName:"ActionTestBase",props:{tearDown:function(){this.lockupForma_=null,c.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){return this.lockupForma_=l.last(this.allSelectableFormae(o,(function(e){return y.TextFacade.getLayoutForForma(e)==f.LockupLayout.Standard}))),null!=this.lockupForma_},prepareDocument:function(e,t){var o,n,r=[];if((o=this.lockupForma_)&&(n=e.controller)){var i=y.TextFacade.getAlignmentForForma(o),a=i==f.LockupAlignment.Right?f.LockupAlignment.Left:f.LockupAlignment.Right;n.selection.replaceSelection(o),r.push((function(){return new g.ChangeTextLayoutAndAlignmentAction(f.LockupLayout.Standard,a)})),r.push((function(){return new g.ChangeTextLayoutAndAlignmentAction(f.LockupLayout.Standard,i)}))}return u.CorePromise.resolve(r)},populateActionSequence:function(e,t,o){var n,r,i;if((n=this.lockupForma_)&&(r=n.bounds)&&(i=o.controller)){this.initialFontSize_=this.getFontSize();var a=t.includes("Right")?new A.TheoPoint(1,.5):new A.TheoPoint(0,.5),s=t.includes("Right")?new A.TheoPoint(0,.5):new A.TheoPoint(1,.5),c=t.includes("Wider")?r.width+100:Math.max(r.width-100,20),d=C.TheoRect.fromXYWH(r.minX,r.minY,c,r.height);return this.initialBounds_=r,i.selection.replaceSelection(n),l.opt(n.controller,(function(e){return e.onEvent(new p.BeginFormaResizeEvent(n,a))})),u.CorePromise.resolve([function(){return new h.ResizeHandleAction(n,a,s,d)}])}return XCTAssertFalse(!0),u.CorePromise.reject(null)},getFontSize:function(){var e;return(e=l.opt(l.as(l.opt(this.lockupForma_,(function(e){return e.controller})),T.TypeLockupController),(function(e){return e.getCurrentFontSize()})))||null!=e?e:0},validateAfterActionSequence:function(e,t){var o;(o=l.opt(this.lockupForma_,(function(e){return e.bounds})))?(t.includes("Wider")?XCTAssertTrue(o.width>=this.initialBounds_.width-.01):XCTAssertTrue(o.width<=this.initialBounds_.width+.01),XCTAssertEqual(this.getFontSize(),this.initialFontSize_,.01)):XCTAssertFalse(!0)},validateAfterUndo:function(e,t){var o;(o=l.opt(this.lockupForma_,(function(e){return e.bounds})))?(XCTAssertEqual(o.width,this.initialBounds_.width),XCTAssertEqual(this.getFontSize(),this.initialFontSize_,.01)):XCTAssertFalse(!0)},validateAfterRedo:function(e,t){var o;(o=l.opt(this.lockupForma_,(function(e){return e.bounds})))?(t.includes("Wider")?XCTAssertTrue(o.width>=this.initialBounds_.width-.01):XCTAssertTrue(o.width<=this.initialBounds_.width+.01),XCTAssertEqual(this.getFontSize(),this.initialFontSize_,.01)):XCTAssertFalse(!0)}}}),i),s.RotateHandleTest=(a=function(){this.actionSequence_RotateHandle=[],this.formaToRotate_=null,this.delta_=new A.TheoPoint(5,-5),this.initialPlacement_=m.Matrix2D.Identity,this.postRotatePlacement_=m.Matrix2D.Identity,c.ActionTestBase.call(this)},l.defineClass({name:"RotateHandleTest",ctor:a,superName:"ActionTestBase",props:{tearDown:function(){this.formaToRotate_=null,c.ActionTestBase.prototype.tearDown.call(this)},findFormaToRotate:function(e){return l.last(this.allSelectableFormae(e,(function(e){return e instanceof d.GroupForma&&e.controller.kind==T.TypeLockupController.KIND&&1==e.placement.transformValues.rotCosine})))},canRunActionSequence:function(e,t,o){return null!=this.findFormaToRotate(o)},populateActionSequence:function(e,t,o){var n=this;this.formaToRotate_=this.findFormaToRotate(o),XCTAssertNotNil(this.formaToRotate_);var r=A.TheoPoint.ZERO;return null!=this.formaToRotate_&&(o.controller.selection.replaceSelection(this.formaToRotate_),this.initialPlacement_=this.formaToRotate_.placement,r=this.formaToRotate_.frame.center),u.CorePromise.resolve([function(){return new h.RotateHandleAction(n.formaToRotate_,Math.PI/4,r,n.initialPlacement_,!0)}])},validateAfterActionSequence:function(e,t){this.postRotatePlacement_=this.formaToRotate_.placement,XCTAssertTrue(Math.abs(this.postRotatePlacement_.transformValues.rotCosine-.707)<.01),XCTAssertTrue(Math.abs(this.postRotatePlacement_.transformValues.rotSine-.707)<.01)},validateAfterUndo:function(e,t){var o=this.formaToRotate_.placement;XCTAssertTrue(this.initialPlacement_.equal(o))},validateAfterRedo:function(e,t){var o=this.formaToRotate_.placement;XCTAssertTrue(o.equal(this.postRotatePlacement_))}}}),a)},mj5y:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("tGKA"),l=o("jLWG"),c=o("rKjb"),u=o("WGnI"),p=o("zW52"),d=o("sIWg");r.PGMUtils=(n=function(){},i.defineClass({name:"PGMUtils",ctor:n,statics:{calcBounds:function(e,t){var o,r,s;return(o=i.as(e,u.PGMLeaf))?t.transformRect(o.bounds):(r=i.as(e,c.PGMComposite))?(s=i.as(e,l.PGMClip))?s.clipBounds:n.calcGroupBounds(r,t):(a.LegacyCoreAssert.fail("unexpected node type",void 0,"PGMUtils.calcBounds","PGMUtils.swift",33),null)},calcGroupBounds:function(e,t){var o=null;return e.children.forEach((function(e){var r;(r=n.calcBounds(e.child,t.concat(e.compositing.placement)))&&(o=null==o?r:o.unionWith(r))})),o},calcXBoundsForRef:function(e){return new p.PGMTransformedBounds(e.compositing.placement,n.calcBounds(e.child,s.Matrix2D.Identity)||d.TheoRect.Zero)},calculateDuration:function(e){var t=0;return e.visit((function(e){for(var o=i.iter(e.animations.animations);!o.done;o.next()){var n=o.value;t=Math.max(t,n.timeFn.domain.end-n.timeFn.domain.start)}for(var r=i.iter(e.child.animations.animations);!r.done;r.next())n=r.value,t=Math.max(t,n.timeFn.domain.end-n.timeFn.domain.start)})),t},stringify:function(e){var t,o,r;if(null==e)return"nil";if(t=i.as(e,["Array","Any"]))return"["+t.map((function(e){return n.stringify(e)}),this).join(", ")+"]";if(o=i.as(e,["Dictionary","String","Any"])){for(var a=[],s=i.iter(o);!s.done;s.next()){var l=s.key,c=s.value;a.push(l+": "+n.stringify(c))}return"{"+a.join(",")+"}"}return null!=(r=i.as(e,"String"))?"'"+r+"'":i.toString(e)}}}),n)},n3Td:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("WF+G"),l=o("fNpk");i.HostFSFolderNullImpl=(n=function(){},r={},a.defineClass({name:"HostFSFolderNullImpl",ctor:n,statics:{INSTANCE:{get:function(){return void 0===r.INSTANCE&&(r.INSTANCE=new n),r.INSTANCE}},_implements:function(e){return"HostFSEntity"==e||"HostFSFolder"==e}},props:{parent:{get:function(){return null}},filename:{get:function(){return""}},absPath:{get:function(){return s.CorePath.ROOT}},find:function(e){return e(this)?this:null},createFolder:function(e){return l.LegacyCoreAssert.fail("createFolder not implemented on null file/folder",void 0,"HostFSFolderNullImpl.createFolder","HostFileSystemNullImpl.swift",36),null},createFile:function(e){return l.LegacyCoreAssert.fail("createFile not implemented on null file/folder",void 0,"HostFSFolderNullImpl.createFile","HostFileSystemNullImpl.swift",42),null},delete:function(e){return l.LegacyCoreAssert.fail("delete not implemented on null file/folder",void 0,"HostFSFolderNullImpl.delete","HostFileSystemNullImpl.swift",48),!1}}}),n)},n6Je:function(e,t,o){var n=t,r=o("oAGj");n.HostLocaleProtocol=r.defineProtocol("HostLocaleProtocol",{getDecimalSeparator:"() -> String",formatNumber:"(Double, Integer) -> String",convertStringToNumber:"(String) -> Double",getLocalizedDefaultDocumentName:"() -> String"})},n8f2:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("dmHI"),l=o("9MJV"),c=o("smUN"),u=o("V93b");r.PGMMimicFilterNode=(n=function(e,t,o,n){var r;(r=i.as(t.child,s.PGMFilter))?this._spec=r.spec:(a.LegacyCoreAssert.fail("wrong pgm node type",void 0,"PGMMimicFilterNode.init","PGMMimicFilterNode.swift",21),this._spec=c.PGMNullFilterSpec.INSTANCE),u.PGMMimicGroupNode.call(this,e,t,o,n)},i.defineClass({name:"PGMMimicFilterNode",ctor:n,superName:"PGMMimicGroupNode",statics:{PROP_SPEC:"spec"},props:{importProperties:function(){var e;this.startPropertyMutation(),(e=i.as(this.ref.child,s.PGMFilter))?this.spec=e.spec:a.LegacyCoreAssert.fail("wrong pgm node type",void 0,"PGMMimicFilterNode.importProperties","PGMMimicFilterNode.swift",33),this.endPropertyMutation()},applyAnimation:function(e,t){var o;u.PGMMimicGroupNode.prototype.applyAnimation.call(this,e,t),(o=i.as(e,l.PGMFilterAnimation))&&(this.spec=o.interpolate(t))},spec:{get:function(){return this._spec},set:function(e){e!==this._spec&&(this._spec=e,this.mutateProperty(n.PROP_SPEC))}}}}),n)},oAGj:function(e,t,o){var n,r,i,a;try{a=o("C42b")}catch(e){console.log("Could not find CoreRandom. Will fall back to Math.Random for xplr.shuffleInPlace")}function s(e){var t=e.sprintf,o={info:function(e){console.log("CORE INFO: "+e)},warning:function(e){console.log("CORE WARNING: "+e)},error:function(e,t){console.log("CORE ERROR: "+e,t)}};function n(e){return e?function(t,o){return e(t,o)?-1:1}:function(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e<t?-1:1}}Array.prototype.includes||(Array.prototype.includes=function(e){return this.indexOf(e)>=0}),String.prototype.includes||(String.prototype.includes=function(e){return this.indexOf(e)>=0}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),Array.prototype.find||(Array.prototype.find=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,o=Object(this),n=o.length>>>0,r=arguments[1],i=0;i<n;i++)if(t=o[i],e.call(r,t,i,o))return t});var r=function(e){this.range=e,this.count=Math.ceil((e.end-e.begin)/e.increment),e.closed&&(e.end-e.begin)%e.increment==0&&(this.count+=1),this.setIndex(0)};r.prototype.next=function(){this.setIndex(this.index+1)},r.prototype.setIndex=function(e){this.index=e,this.done=this.index>=this.count;var t=this.range.isReversed?this.count-1-this.index:this.index;this.value=this.range.begin+t*this.range.increment};var i=function(e,t,o,n,r){this.begin=e,this.end=t,this.closed=o,this.increment=n||1,this.isReversed=!0===r};i.prototype.asArray=function(){for(var e=[],t=new r(this);!t.done;)e.push(t.value),t.next();return e},i.prototype.applyToArray=function(e){return 1!==this.increment||this.isReversed?this.asArray().filter((function(t){return t>=0&&t<e.length})).map((function(t){return e[t]})):e.slice(this.begin,this.end+(this.closed?1:0))},i.prototype.reversed=function(){return new i(this.begin,this.end,this.closed,this.increment,!this.isReversed)};var s=function(e){this._array=e,this._index=0,this._count=e.length,this.done=0===e.length,this.value=!this.done&&e[0]};s.prototype.next=function(){this._index++,this.done=this._index>=this._count,this.value=!this.done&&this._array[this._index]};var l=function(e,t){if(this._array=[],t)for(var o in e)this._array.push({key:parseInt(o),value:e[o]});else for(var o in e)this._array.push({key:o,value:e[o]});this._index=0,this.done=0===this._array.length,this.key=!this.done&&this._array[0].key,this.value=!this.done&&this._array[0].value};l.prototype.next=function(){this._index++,this.done=this._index>=this._array.length,this.key=!this.done&&this._array[this._index].key,this.value=!this.done&&this._array[this._index].value};class c{constructor(e,t){for(var o in this._name=e,this._def=t,this._rdef={},t){var n=t[o];this[o]=n,this._rdef[n]=o}}toCaseValue(e){return void 0!==this._rdef[e]?e:null}isCaseValue(e){return void 0!==this._rdef[e]}}function u(e){var t=e.length,o=[];o.length=t;for(var n=t;n--;)o[n]={offset:n,element:e[n]};return o}var p="undefined"!=typeof performance?performance.now.bind(performance):Date.now.bind(Date);return{classes:{},protocols:{},enums:{},classDependencies:{},cloneReporter:null,M_PI:Math.PI,M_E:Math.E,opt:function(e,t){return null!=e?t(e):null},defineClass:function(e){var t=this;return this.requireClass(e.name,e.superName,(function(n){function r(e,t,o,n){for(var r in e){var i={enumerable:!0},a=e[r];"object"==typeof a&&a&&(a.get||a.set)?(a.get&&(o[r]=i.get=a.get),a.set&&(n[r]=i.set=a.set)):(i.value=a,i.writable=!0),t[r]=i}return t}var i={_getters:{value:{},enumerable:!0},_setters:{value:{},enumerable:!0},_staticGetters:{value:{},enumerable:!0},_staticSetters:{value:{},enumerable:!0}};r(e.statics,i,i._staticGetters.value,i._staticSetters.value);var a=r(e.props,{},i._getters.value,i._setters.value);e.superName||(a.setValue={value:function(e,t){this[t]=e},enumerable:!0}),function(e,t,n){for(var r in e){"function"==typeof e[r]&&"init_"==r.substr(0,5)&&(t[r]={enumerable:!0,value:function(e,t){return function(){var n=new e;return n[t]?n[t].apply(n,arguments):o.error("uh oh, no matching init function ("+t+")"),n}}(n,r)})}}(e.props,i,e.ctor),Object.defineProperties(e.ctor,i),e.ctor.prototype=Object.create(n?n.prototype:Object.prototype,a),e.ctor.prototype.constructor=e.ctor,n&&(t.inheritGetterSetters(e.ctor,n),t.inheritStatics(e.ctor,n)),t.registerClass(e.name,e.ctor)})),e.ctor},inheritGetterSetters:function(e,t){var o={};if(t._getters)for(var n in e._getters||(e._getters={}),e._setters||(e._setters={}),t._getters){var r=t._getters[n],i=t._setters&&t._setters[n];(r&&!e._getters[n]||i&&!e._setters[n])&&(o[n]={enumerable:!0},r&&(o[n].get=e._getters[n]=e._getters[n]||r),i&&(o[n].set=e._setters[n]=e._setters[n]||i))}Object.defineProperties(e.prototype,o)},inheritStatics:function(e,t){var n=e._inherited={};for(var r in t)if(!e.hasOwnProperty(r))try{if(t._inherited&&t._inherited[r])n[r]=t._inherited[r];else if(t._staticGetters&&t._staticGetters[r]){if(n[r]={enumerable:!0},t._staticGetters&&t._staticGetters[r]){var i=t._staticGetters[r];n[r].get=function(){return i()}}if(t._staticSetters&&t._staticSetters[r]){var a=t._staticSetters[r];n[r].set=function(e){a(e)}}}else"function"==typeof t[r]?n[r]={enumerable:!0,value:t[r]}:n[r]={enumerable:!0,get:function(){return t[r]},set:function(e){t[r]=e}}}catch(e){o.error("inheritStatics",e)}Object.defineProperties(e,n)},defineProtocol:function(e,t){return this.protocols[e]=t,t._isProtocol=e,t},defineEnum:function(e,t){var o=new c(e,t);return this.enums[e]=o,o},defctor:function(e){},super_init:function(e,t,o){t.call(e);for(var n=[],r=3;r<arguments.length;r++)n.push(arguments[r]);o.apply(e,n)},is:function(e,t){var n=typeof t;if("string"===n)switch(t){case"Array":return Array.isArray(e);case"Dictionary":return"object"==typeof e;case"Double":case"Int":return"number"==typeof e;case"String":return"string"==typeof e;case"Bool":return"boolean"==typeof e;case"Function":return"function"==typeof e;case"Any":return void 0!==e;case"Object":return"object"==typeof e;case"AnyObject":return null!=e;default:return o.error("why checking type "+t),!1}if(Array.isArray(t)){if("Array"===t[0])return e&&Array.isArray(e)&&(0==e.length||this.is(e[0],t[1]));if("Dictionary"===t[0]&&e&&"object"==typeof e){for(var r in e)return this.is(r,t[1])&&this.is(e[r],t[2]);return!0}return!1}return"object"===n&&t._isProtocol?e&&e.constructor&&e.constructor._implements&&e.constructor._implements(t._isProtocol):t instanceof c?t.isCaseValue(e):e instanceof t},as:function(e,t){return this.is(e,t)?e:null},nilc:function(e,t){return void 0!==e&&null!=e?e:"function"==typeof t?t():t},requireClass:function(e,t,o){if(t)if(this.classes[t])o(this.classes[t]);else{var n=this.classDependencies[t];n?n.push(o):this.classDependencies[t]=[o]}else o(null)},registerClass:function(e,t){this.classes[e]=t;var o=this.classDependencies[e];if(o)for(;o.length>0;)o.shift()(t)},assert:function(e){},iter:function(e,t){return e instanceof i?new r(e):Array.isArray(e)?new s(e):new l(e,t)},stride:function(e,t,o){return new i(e,t,!1,o,!1)},each:function(e,t){if("object"==typeof e)for(var o in e)t(o,e[o])},count:function(e){if(Array.isArray(e))return e.length;if("object"==typeof e){var t=0;for(var o in e)t++;return t}return-1},dict:function(e){for(var t={},o=0;o<e.length;o+=2)t[e[o]]=e[o+1];return t},toDouble:function(e){if("number"==typeof e)return e;if("string"==typeof e){var t=parseFloat(e);return isNaN(t)?null:t}return 0},toString:function(e){if(arguments.length>1&&"string"==typeof e)try{return t.apply(t,arguments)}catch(e){o.error("string format error "+e)}return e+""},toStringFromCharCodes:function(e,t){if(t===e.length)return String.fromCharCode(...e);var o=e.slice(0,t);return String.fromCharCode(...o)},toInt:function(e){if("number"==typeof e)return e<0?-Math.floor(-e):Math.floor(e);if("string"==typeof e){var t=parseInt(e);return isNaN(t)?null:t}return 0},modulo:function(e,t){return e-Math.floor(e/t)*t},toUInt32:function(e){return this.modulo(this.toInt(e),Math.pow(2,32))},toUInt16:function(e){return this.modulo(this.toInt(e),Math.pow(2,16))},isInfinite:function(e){return!isNaN(e)&&!isFinite(e)},randu:function(e){return Math.floor(Math.random()*e)},keys:function(e,t){var o=Object.keys(e||{});if("numeric"===t)for(var n=o.length;n--;)o[n]=parseFloat(o[n]);return o},values:function(e){return Object.values(e||{})},eachValue:function(e,t){for(var o in e)t(e[o])},indexForKey:function(e,t){var o=0;for(var n in e){if(n===t)return o;o++}return null},removeKey:function(e,t){var o=e[t];return delete e[t],void 0===o?null:o},gvar:function(e,t,o){var n,r={};r[t]={enumerable:!0,get:function(){return void 0===n&&(n=o()),n},set:function(e){n=e}},Object.defineProperties(e,r)},chars:function(e){var t=e.length,o=[];o.length=t;for(var n=0;n<t;n++)o[n]=e[n];return o},utf16s:function(e){var t=e.length,o=[];o.length=t;for(var n=0;n<t;n++)o[n]=e.charCodeAt(n);return o},range:function(e,t,o){return new i(e,t,o)},rand:function(){return 2147483647*Math.random()},isEmpty:function(e){return"string"!=typeof e||0===e.length},eq:function(e,t,o){return null==t||null==o?t==o:e(t,o)},clone:function(e,t){var o,n,r=this.cloneReporter;return r&&(r.before(e,t),o=p()),null==e?n=null:Array.isArray(e)?(n=e.slice()).isValueType=e.isValueType:"function"==typeof e.clone?n=e.clone():"object"==typeof e&&(n=Object.assign({},e)),r&&r.after(e,t,p()-o),n},repeat:function(e,t){var o,n=[];for(o=0;o<t;o++)Array.isArray(e)&&e.isValueType?n.push(this.clone(e)):Array.isArray(e)&&0==e.length?n.push([]):n.push(e);return n.isValueType=!0,n},toArray:function(e){if(Array.isArray(e)){var t=e.concat();return t.isValueType=!0,t}if(e instanceof i)return e.asArray();var o=[e];return o.isValueType=!0,o},indexOf:function(e,t){var o=e.indexOf(t);return o<0?null:o},containsEq:function(e,t,o){return null!=this.indexOfEq(e,t,o)},indexOfEq:function(e,t,o){for(var n=0;n<e.length;n++)if(o(e[n],t))return n;return null},toSequence:u,toCharSequence:u,enumerate:function(e){var t={};return e.forEach((function(e,o){t[o]=e})),t},append:function(e,t){t.forEach((function(t){e.push(t)}))},remove:function(e,t){var o=e.indexOf(t);o>=0&&e.splice(o,1)},removeAll:function(e){for(prop in e)delete e[prop]},sort:function(e,t){return e.concat().sort(n(t))},sortInPlace:function(e,t){return e.sort(n(t))},first:function(e){return e.length>0?e[0]:null},last:function(e){return e.length>0?e[e.length-1]:null},min:function(e){var t=Math.min.apply(null,e);return isFinite(t)?t:null},max:function(e){var t=Math.max.apply(null,e);return isFinite(t)?t:null},slicerange:function(e,t){return t.applyToArray(e)},dropFirst:function(e,t){return void 0===t&&(t=1),t>=e.length?[]:e.slice(t)},dropLast:function(e,t){return void 0===t&&(t=1),t>=e.length?[]:e.slice(0,e.length-t)},rangeOfString:function(e,t){var o=e.indexOf(t);return o<0?null:new i(o,o+t.length,!1)},shuffleInPlace:function(e){for(var t,o,n=0;n<e.length-1;n+=1)t=a?a.CoreRandom.nextIntUniform(e.length-n)+n:Math.floor(Math.random()*(e.length-n))+n,o=e[n],e[n]=e[t],e[t]=o;return e},elementsEqual:function(e,t){if(null===e)throw new Error("Source array cannot be null.");return null!==t&&e.length===t.length&&e.every((e,o)=>e===t[o])},shuffle:function(e){return this.shuffleInPlace(e.concat())},reverse:function(e){return e.concat().reverse()},joinArrays:function(e,t){return 0===e.length?[]:e.reduce((function(e,o){return e?e.concat(t).concat(o):o}))},setLog:function(e){o=e},info:function(e){o.info(e)},warning:function(e){o.warn(e)},error:function(e,t){o.error(e,t)},replaceAll:function(e,t,o){return e.split(t).join(o)},bind:function(e,t){return e[t].bind(e)},zip:function(e,t){var o,n=[],r=Math.min(e.length,t.length);for(o=0;o<r;o++)n.push([e[o],t[o]]);return n}}}t.nodeName,r=[o("l77X")],void 0===(i="function"==typeof(n=s)?n.apply(t,r):n)||(e.exports=i)},oKlP:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("gXiO"),l=o("fNpk");i.TheoPoint=(n=function(e,t){this.x=e,this.y=t,s.CoreObject.call(this)},r={},a.defineClass({name:"TheoPoint",ctor:n,superName:"CoreObject",statics:{ZERO:{get:function(){return void 0===r.ZERO&&(r.ZERO=new n(0,0)),r.ZERO}},INVALID:{get:function(){return void 0===r.INVALID&&(r.INVALID=new n(NaN,NaN)),r.INVALID}},decodeJson:function(e){if(null==e)return null;var t=a.as(e,["Array","Any"]);if(null==t||2!=t.length)return l.LegacyCoreAssert.fail("TheoPoint.decodeJson: data is not an array with 2 elements",void 0,"TheoPoint.decodeJson","TheoPoint.swift",112),null;var o=a.as(t[0],"Double"),r=a.as(t[1],"Double");return null==o||null==r?(l.LegacyCoreAssert.fail("Point.decodeJson: data is not an array with 2 numbers",void 0,"TheoPoint.decodeJson","TheoPoint.swift",120),null):new n(o,r)}},props:{finite:{get:function(){return isFinite(this.x)&&isFinite(this.y)}},isValidPoint:{get:function(){return!isNaN(this.x)&&!isNaN(this.y)}},multiply:function(e){return new n(this.x*e,this.y*e)},multiplyPoint:function(e){return new n(this.x*e.x,this.y*e.y)},divide:function(e){return new n(1*this.x/e,1*this.y/e)},dividePoint:function(e){return new n(this.x/e.x,this.y/e.y)},isEqual:function(e){var t;return!!(t=a.as(e,n))&&this.equal(t)},equal:function(e){return this.x==e.x&&this.y==e.y},equalWithAccuracy:function(e,t){return Math.abs(this.x-e.x)<t&&Math.abs(this.y-e.y)<t},add:function(e){return new n(this.x+e.x,this.y+e.y)},subtract:function(e){return new n(this.x-e.x,this.y-e.y)},distanceTo:function(e){var t=this.subtract(e);return Math.sqrt(t.dotProduct(t))},dotProduct:function(e){return this.x*e.x+this.y*e.y},crossProduct:function(e){return this.x*e.y-this.y*e.x},length:function(){return this.distanceTo(n.ZERO)},invert:function(){return new n(-this.x,-this.y)},interpolate:function(e,t){return new n(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)},encode:function(){return l.LegacyCoreAssert.fail("TheoPoint: Use encodeJson(), not encode()",void 0,"TheoPoint.encode","TheoPoint.swift",103),[]},description:{get:function(){return"("+this.x+", "+this.y+")"}}}}),n),i._minus_TheoPoint_TheoPoint=function(e,t){return e.subtract(t)},i._plus_TheoPoint_TheoPoint=function(e,t){return e.add(t)},i._negate_TheoPoint=function(e){return e.invert()},i._asterisk_Double_TheoPoint=function(e,t){return t.multiply(e)},i._slash_TheoPoint_Double=function(e,t){return e.divide(t)}},oSam:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"SolidColor":{"className":"SolidColor","type":"object","properties":{"red":{"type":"number"},"green":{"type":"number"},"blue":{"type":"number"},"alpha":{"type":"number"}},"required":["red","green","blue","alpha"]},"TheoColor":{"className":"TheoColor","type":"object","properties":{"red":{"type":"number","description":"rgbcolor.red"},"green":{"type":"number","description":"rgbcolor.green"},"blue":{"type":"number","description":"rgbcolor.blue"},"alpha":{"type":"number","description":"rgbcolor.alpha"},"sparkElementID":{"type":"string"},"sparkRoles":{"type":"array","items":{"type":"string"}}},"required":["red","green","blue","alpha"]},"ColorSwatch":{"className":"ColorSwatch","type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"numTags":{"type":"integer"}},"patternProperties":{"key-[0-9]*":{"type":"string","description":"tags_[key-N] = value-N"},"value-[0-9]*":{"type":"string","description":"tags_[key-N] = value-N"}},"required":["id","path"]},"ColorSwatchTypes":{"oneOf":[{"$ref":"#/definitions/SimpleSwatch"}]},"ColorThemeDocument":{"className":"ColorThemeDocument","type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["colortheme"]},"type":{"type":"string","enum":["application/vnd.adobe.theo.color+dcx"]},"children":{"type":"array","items":{"$ref":"#/definitions/ColorSwatchTypes"}}},"required":["id","path","type"]},"ColorLibrary":{"className":"ColorLibrary","type":"object","properties":{"palette:id":{"anyOf":[{"type":"string"},{"type":"integer"}]},"entries":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"color":{"$ref":"#/definitions/TheoColor"}}}}}},"SimpleSwatch":{"className":"SimpleSwatch","allOf":[{"$ref":"#/definitions/ColorSwatch"},{"properties":{"kind":{"type":"string","enum":["simple"]},"color":{"$ref":"#/definitions/SolidColor"}}}]},"ColorTableEntry":{"className":"ColorTableEntry","type":"object","properties":{"color-id":{"type":"string"},"color":{"$ref":"#/definitions/SolidColor"},"theme-index":{"type":"integer"}}},"ColorRole":{"type":"string","enum":["field-primary","field-secondary","border"]},"ColorTable":{"className":"ColorTable","type":"object","properties":{"entries":{"type":"array","items":{"type":"object","properties":{"role":{"$ref":"#/definitions/ColorRole"},"color-id":{"type":"string"},"color":{"$ref":"#/definitions/SolidColor"},"theme-index":{"type":"integer"}}}}}}}}')},oTkQ:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("c9Jm"),s=o("vV1H");r.FlipTest=(n=function(){this.actionSequence_FlipVertical=[function(){return new s.FlipAction(!0)}],this.actionSequence_FlipHorizontal=[function(){return new s.FlipAction(!1)}],this.formaeToFlip_=[],this.initialTransforms_=[],this.vertical_=!1,a.ActionTestBase.call(this)},i.defineClass({name:"FlipTest",ctor:n,superName:"ActionTestBase",props:{setUpActionSequence:function(e,t,o){var n;this.formaeToFlip_=i.clone(this.allSelectableFormae(o,(function(e){return!(!(n=i.opt(e.controller,(function(e){return e.flippable})))&&null==n)&&n}))),this.vertical_="actionSequence_FlipVertical"==t,this.initialTransforms_=this.formaeToFlip_.map((function(e){return e.totalPlacement}),this),o.controller.selection.replaceSelectionWithFormae(this.formaeToFlip_)},validateAfterActionSequence:function(e,t){for(var o=i.iter(i.range(0,this.formaeToFlip_.length,!1));!o.done;o.next()){var n=o.value;XCTAssertEqual(this.formaeToFlip_[n].totalPlacement.extractedScale.scale,this.initialTransforms_[n].scaleXY(this.vertical_?1:-1,this.vertical_?-1:1).extractedScale.scale)}},validateAfterUndo:function(e,t){for(var o=i.iter(i.range(0,this.formaeToFlip_.length,!1));!o.done;o.next()){var n=o.value;XCTAssertEqual(this.formaeToFlip_[n].totalPlacement.extractedScale.scale,this.initialTransforms_[n].extractedScale.scale)}},validateAfterRedo:function(e,t){for(var o=i.iter(i.range(0,this.formaeToFlip_.length,!1));!o.done;o.next()){var n=o.value;XCTAssertEqual(this.formaeToFlip_[n].totalPlacement.extractedScale.scale,this.initialTransforms_[n].scaleXY(this.vertical_?1:-1,this.vertical_?-1:1).extractedScale.scale)}},tearDown:function(){this.formaeToFlip_=[],a.ActionTestBase.prototype.tearDown.call(this)}}}),n)},oghX:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"FontDescriptor":{"className":"FontDescriptor","type":"object","properties":{"postscript-name":{"type":"string"}},"required":["postscript-name"]},"TheoFont":{"className":"TheoFont","type":"object","properties":{"postscript-name":{"type":"string"},"sparkElementID":{"type":"string"},"sparkRoles":{"type":"array","items":{"type":"string"}}},"required":["postscript-name"]},"TextRange":{"type":"array","items":{"type":"integer"},"maxItems":2,"minItems":2},"TextAttribute":{"className":"TextAttribute","type":"object","properties":{"start":{"type":"integer"},"length":{"type":"integer"},"value":{"type":["string","object","number","integer"]}},"required":["start","length","value"]},"TextAttributeTypes":{"oneOf":[{"$ref":"#/definitions/UTF16Attribute"},{"$ref":"#/definitions/FontDescriptorAttribute"},{"$ref":"#/definitions/FontSizeAttribute"},{"$ref":"#/definitions/FontColorAttribute"},{"$ref":"#/definitions/FontStrokeColorAttribute"},{"$ref":"#/definitions/FontStrokeWidthAttribute"},{"$ref":"#/definitions/TextLookAttribute"},{"$ref":"#/definitions/TrackingAttribute"}]},"UTF16Attribute":{"className":"UTF16Attribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"string"}}}]},"FontDescriptorAttribute":{"className":"FontDescriptorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"#/definitions/FontDescriptor"}}}]},"FontSizeAttribute":{"className":"FontSizeAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"number"}}}]},"FontColorAttribute":{"className":"FontColorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"Color.json#/definitions/SolidColor"}}}]},"FontStrokeColorAttribute":{"className":"FontStrokeColorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"Color.json#/definitions/SolidColor"}}}]},"FontStrokeWidthAttribute":{"className":"FontStrokeWidthAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"number"}}}]},"TextLookAttribute":{"className":"TextLookAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"integer"}}}]},"TrackingAttribute":{"className":"TrackingAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"number"}}}]},"TextModel":{"className":"TextModel","type":"object","properties":{"text":{"type":"array","items":{"$ref":"#/definitions/UTF16Attribute"},"maxItems":1},"font-name":{"type":"array","items":{"$ref":"#/definitions/FontDescriptorAttribute"},"maxItems":1},"font-size":{"type":"array","items":{"$ref":"#/definitions/FontSizeAttribute"},"maxItems":1},"font-color":{"type":"array","items":{"$ref":"#/definitions/FontColorAttribute"},"maxItems":1},"font-strokecolor":{"type":"array","items":{"$ref":"#/definitions/FontStrokeColorAttribute"},"maxItems":1},"font-strokewidth":{"type":"array","items":{"$ref":"#/definitions/FontStrokeWidthAttribute"},"maxItems":1},"text-look":{"type":"array","items":{"$ref":"#/definitions/TextLookAttribute"},"maxItems":1},"tracking":{"type":"array","items":{"$ref":"#/definitions/TrackingAttribute"},"maxItems":1}}},"ContentTextModel":{"className":"ContentTextModel","type":"object","properties":{"text":{"type":"array","items":{"$ref":"#/definitions/UTF16Attribute"},"maxItems":1}}}}}')},pxaJ:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"SolidColor":{"className":"SolidColor","type":"object","properties":{"red":{"type":"number"},"green":{"type":"number"},"blue":{"type":"number"},"alpha":{"type":"number"}},"required":["red","green","blue","alpha"]},"TheoColor":{"className":"TheoColor","type":"object","properties":{"red":{"type":"number","description":"rgbcolor.red"},"green":{"type":"number","description":"rgbcolor.green"},"blue":{"type":"number","description":"rgbcolor.blue"},"alpha":{"type":"number","description":"rgbcolor.alpha"},"sparkElementID":{"type":"string"},"sparkRoles":{"type":"array","items":{"type":"string"}}},"required":["red","green","blue","alpha"]},"ColorSwatch":{"className":"ColorSwatch","type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"numTags":{"type":"integer"}},"patternProperties":{"key-[0-9]*":{"type":"string","description":"tags_[key-N] = value-N"},"value-[0-9]*":{"type":"string","description":"tags_[key-N] = value-N"}},"required":["id","path"]},"ColorSwatchTypes":{"oneOf":[{"$ref":"#/definitions/SimpleSwatch"}]},"ColorThemeDocument":{"className":"ColorThemeDocument","type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["colortheme"]},"type":{"type":"string","enum":["application/vnd.adobe.theo.color+dcx"]},"children":{"type":"array","items":{"$ref":"#/definitions/ColorSwatchTypes"}}},"required":["id","path","type"]},"ColorLibrary":{"className":"ColorLibrary","type":"object","properties":{"palette:id":{"anyOf":[{"type":"string"},{"type":"integer"}]},"entries":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"color":{"$ref":"#/definitions/TheoColor"}}}}}},"SimpleSwatch":{"className":"SimpleSwatch","allOf":[{"$ref":"#/definitions/ColorSwatch"},{"properties":{"kind":{"type":"string","enum":["simple"]},"color":{"$ref":"#/definitions/SolidColor"}}}]},"ColorTableEntry":{"className":"ColorTableEntry","type":"object","properties":{"color-id":{"type":"string"},"color":{"$ref":"#/definitions/SolidColor"},"theme-index":{"type":"integer"}}},"ColorRole":{"type":"string","enum":["field-primary","field-secondary","border"]},"ColorTable":{"className":"ColorTable","type":"object","properties":{"entries":{"type":"array","items":{"type":"object","properties":{"role":{"$ref":"#/definitions/ColorRole"},"color-id":{"type":"string"},"color":{"$ref":"#/definitions/SolidColor"},"theme-index":{"type":"integer"}}}}}}}}')},qEGv:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("iCxV"),l=o("fNpk"),c=o("djwB"),u=o("rtbu"),p=o("W6ub"),d=o("bAjp"),h=o("f/aw"),f=o("bJhu"),m=o("Zifs"),g=o("sIWg");i.PGMMimicTextNode=(n=function e(t,o,n,r){var i;(i=a.as(o.child,d.PGMText))?(this._text=i.text,this._bounds=i.bounds,this._style=i.style,this._renderRuns=i.renderRuns):(l.LegacyCoreAssert.fail("wrong pgm node type",void 0,"PGMMimicTextNode.init","PGMMimicTextNode.swift",55),this._text="",this._bounds=g.TheoRect.Zero,this._style=e.BAD_STYLE,this._renderRuns=p.PGMRenderRuns.EMPTY),u.PGMMimicNode.call(this,t,o,n,r)},r={},a.defineClass({name:"PGMMimicTextNode",ctor:n,superName:"PGMMimicNode",statics:{PROP_TEXT:"text",PROP_BOUNDS:"bounds",PROP_STYLE:"style",PROP_RENDERRUNS:"renderRuns",PROP_STYLE_FONT:"style/font",PROP_STYLE_FILL_COLOR:"style/fill-color",PROP_STYLE_STROKE_COLOR:"style/stroke-color",PROP_STYLE_STROKE_WIDTH:"style/stroke-width",PROP_STYLE_TRACKING:"style/tracking",BAD_FONT:{get:function(){return void 0===r.BAD_FONT&&(r.BAD_FONT=new c.PGMFont("","","",0,"",1,1,0)),r.BAD_FONT}},BAD_STYLE:{get:function(){return void 0===r.BAD_STYLE&&(r.BAD_STYLE=new f.PGMTextStyle(n.BAD_FONT,null,null,0,0)),r.BAD_STYLE}}},props:{importProperties:function(){var e;this.startPropertyMutation(),(e=a.as(this.ref.child,d.PGMText))?(this.text=e.text,this.bounds=e.bounds,this.style=e.style,this.renderRuns=e.renderRuns):l.LegacyCoreAssert.fail("wrong pgm node type",void 0,"PGMMimicTextNode.importProperties","PGMMimicTextNode.swift",73),this.endPropertyMutation()},applyAnimation:function(e,t){var o;if(u.PGMMimicNode.prototype.applyAnimation.call(this,e,t),o=a.as(e,h.PGMTextAnimation)){var n=o.interpolate(t);this.style=n.style,this.renderRuns=n.renderRuns}},calculateMarkedBounds:function(){var e=this;return a.opt(s.Host.textModelUtils,(function(t){return t.measureDrawBounds(e.text,e.fontSize,e.style)}))||this.bounds.outsetXY(100,100)},text:{get:function(){return this._text},set:function(e){e!=this._text&&(this._text=e,this.mutateProperty(n.PROP_TEXT))}},bounds:{get:function(){return this._bounds},set:function(e){e.equal(this._bounds)||(this._bounds=e,this.mutateProperty(n.PROP_BOUNDS),this.invalidateMarkedBounds())}},style:{get:function(){return this._style},set:function(e){if(!e.isEqualTo(this._style)){var t=this._style;this._style=e;var o=!1;t.font.postScriptName!=e.font.postScriptName&&(this.mutateProperty(n.PROP_STYLE_FONT),o=!0),a.eq(m._equality_SolidColor_SolidColor,t.fillColor,e.fillColor)||(this.mutateProperty(n.PROP_STYLE_FILL_COLOR),null!=t.fillColor&&null!=e.fillColor||this.mutateProperty(n.PROP_STYLE_STROKE_WIDTH),o=!0),a.eq(m._equality_SolidColor_SolidColor,t.strokeColor,e.strokeColor)||(this.mutateProperty(n.PROP_STYLE_STROKE_COLOR),o=!0),t.strokeWidth!=e.strokeWidth&&(this.mutateProperty(n.PROP_STYLE_STROKE_WIDTH),o=!0),t.tracking!=e.tracking&&(this.mutateProperty(n.PROP_STYLE_TRACKING),o=!0),o&&this.mutateProperty(n.PROP_STYLE)}}},renderRuns:{get:function(){return this._renderRuns},set:function(e){e.isEqualTo(this._renderRuns)||(this._renderRuns=e,this.mutateProperty(n.PROP_RENDERRUNS))}},fontSize:{get:function(){var e=this._style.font,t=e.ascentRatio+e.descentRatio;return l.LegacyCoreAssert.isTrue(t>0,"bad font metrics",void 0,"PGMMimicTextNode","PGMMimicTextNode.swift",177),t>0?this.bounds.height/t:this.bounds.height}},baselineOrigin:{get:function(){var e=this._style.font,t=e.ascentRatio+e.descentRatio;return l.LegacyCoreAssert.isTrue(t>0,"bad font metrics",void 0,"PGMMimicTextNode","PGMMimicTextNode.swift",190),this.bounds.evalXY(0,e.ascentRatio/t)}}}}),n)},qWkq:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("c9Jm"),l=o("yGNn"),c=o("FNB+"),u=o("y/On"),p=o("9Lk3"),d=o("6Rk9"),h=o("sIWg");i.GroupTest=(n=function(){this.actionSequence_Group=[function(){return new u.GroupAction}],this.formaeToGroup_=[],this.initialBounds_=h.TheoRect.Zero,this.testDoc_=null,s.ActionTestBase.call(this)},a.defineClass({name:"GroupTest",ctor:n,superName:"ActionTestBase",props:{setUpActionSequence:function(e,t,o){this.formaeToGroup_=a.clone(this.allSelectableFormae(o,(function(e){return 1==e.controller.floating}))),XCTAssertNotNil(this.formaeToGroup_),this.testDoc_=o,this.formaeToGroup_.length>1&&(o.controller.selection.replaceSelectionWithFormae(this.formaeToGroup_),this.initialBounds_=d.GeometryFacade.getFormaeBounds(this.formaeToGroup_,!0))},validateAfterActionSequence:function(e,t){this.validateGrouping(!0)},validateAfterUndo:function(e,t){var o,n=d.GeometryFacade.getFormaeBounds(this.formaeToGroup_,!0);XCTAssertTrue(this.initialBounds_.equal(n));for(var r=a.iter(this.formaeToGroup_);!r.done;r.next()){var i=r.value;XCTAssertFalse(i.controller.userGroupMember),XCTAssertTrue(i.parent.controller.kind==p.GridController.KIND)}if(this.formaeToGroup_.length>1){var s=!1;a.opt(this.formaeToGroup_[0].root,(function(e){return e.visitAll(c.FormaTraversal.PreOrder,(function(e){((o=a.opt(e.controller,(function(e){return e.userGroupMember})))||null!=o)&&o&&(s=!0)}))})),XCTAssertFalse(s)}},validateAfterRedo:function(e,t){this.validateGrouping(!1)},validateGrouping:function(e){var t=d.GeometryFacade.getFormaeBounds(this.formaeToGroup_,!0);if(XCTAssertTrue(this.initialBounds_.equalWithAccuracy(t,.01)),this.formaeToGroup_.length>1){var o=this.formaeToGroup_[0].parent;XCTAssertTrue(o.controller.userGroup);for(var n=a.iter(this.formaeToGroup_);!n.done;n.next()){var r=n.value;XCTAssertTrue(r.controller.userGroupChild),XCTAssertTrue(r.parent==o)}if(e){XCTAssertTrue(1==this.testDoc_.controller.selection.selectedCountInDocument);var i=this.testDoc_.controller.selection.formaAt(0);XCTAssertTrue(i.controller.userGroup)}}},tearDown:function(){this.formaeToGroup_=[],s.ActionTestBase.prototype.tearDown.call(this)}}}),n),i.UngroupTest=(r=function(){this.actionSequence_Ungroup=[function(){return new u.UngroupAction}],this.formaeToGroup_=[],this.initialBounds_=h.TheoRect.Zero,this.root_=null,this.testDoc_=null,s.ActionTestBase.call(this)},a.defineClass({name:"UngroupTest",ctor:r,superName:"ActionTestBase",props:{prepareDocument:function(e,t){this.root_=e.firstPage.root,this.formaeToGroup_=a.clone(this.allSelectableFormae(e,(function(e){return 1==e.controller.floating}))),XCTAssertNotNil(this.formaeToGroup_),this.formaeToGroup_.length>0&&(e.controller.selection.replaceSelectionWithFormae(this.formaeToGroup_),this.initialBounds_=d.GeometryFacade.getFormaeBounds(this.formaeToGroup_,!0));var o=[function(){return new u.GroupAction}];return l.CorePromise.resolve(o)},setUpActionSequence:function(e,t,o){this.testDoc_=o},validateAfterActionSequence:function(e,t){this.validateNoGrouping(!0)},validateAfterUndo:function(e,t){this.validateGrouping()},validateAfterRedo:function(e,t){this.validateNoGrouping(!1)},validateGrouping:function(){if(this.formaeToGroup_.length>1){var e=this.formaeToGroup_[0].parent;XCTAssertTrue(e.controller.userGroup);for(var t=a.iter(this.formaeToGroup_);!t.done;t.next()){var o=t.value;XCTAssertTrue(o.controller.userGroupChild),XCTAssertTrue(o.parent==e)}}},validateNoGrouping:function(e){var t,o=d.GeometryFacade.getFormaeBounds(this.formaeToGroup_,!0);XCTAssertTrue(this.initialBounds_.equalWithAccuracy(o,.01));for(var n=a.iter(this.formaeToGroup_);!n.done;n.next()){var r=n.value;XCTAssertFalse(r.controller.userGroupMember),XCTAssertTrue(r.parent.controller.kind==p.GridController.KIND)}if(this.formaeToGroup_.length>1){var i=!1;a.opt(this.formaeToGroup_[0].root,(function(e){return e.visitAll(c.FormaTraversal.PreOrder,(function(e){((t=a.opt(e.controller,(function(e){return e.userGroupMember})))||null!=t)&&t&&(i=!0)}))})),XCTAssertFalse(i),e&&XCTAssertTrue(this.testDoc_.controller.selection.selectedCountInDocument==this.formaeToGroup_.length)}},tearDown:function(){this.formaeToGroup_=[],this.root_=null,s.ActionTestBase.prototype.tearDown.call(this)}}}),r)},qyrT:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("Zifs"),s=o("x4Gy"),l=o("uUew");r.PROPERTY_RUNSTART="run-start",r.PROPERTY_RUNEND="run-end",r.PROPERTY_RUNCOLOR="run-color",r.PGMSolidColorRuns=(n=function(){this.privateColorRuns_=new s.SolidColorRuns},i.defineClass({name:"PGMSolidColorRuns",ctor:n,superName:"CoreObject",statics:{decode:function(e){var t,o=n.init_d41d();if(t=e)for(var s=i.iter(t);!s.done;s.next()){var c,u,p,d,h=s.value;if((c=i.as(h,["Dictionary","String","Any"]))&&null!=(u=i.as(c[r.PROPERTY_RUNSTART],"Int"))&&null!=(p=i.as(c[r.PROPERTY_RUNEND],"Int"))&&(d=a.SolidColor.decodeJson(i.as(c[r.PROPERTY_RUNCOLOR],"AnyObject")))){var f=new l.TextRange(u,p);o.apply(d,f)}}return o}},props:{init_d41d:function(){},init_3338:function(e){this.privateColorRuns_=e.clone()},apply:function(e,t){this.privateColorRuns_.apply(e,t)},interpolate:function(e,t){var o=new s.SolidColorRuns;return o.applyNewAlpha(this.privateColorRuns_,t),n.init_3338(o)},runArrays:{get:function(){return this.privateColorRuns_.runArrays}},asString:{get:function(){return this.privateColorRuns_.asString}},encode:function(){for(var e=[],t=i.iter(this.runArrays);!t.done;t.next()){var o=t.value,n={};n[r.PROPERTY_RUNSTART]=o.range.start,n[r.PROPERTY_RUNEND]=o.range.end,n[r.PROPERTY_RUNCOLOR]=o.attr.encodeJson(),e.push(n)}return e}}}),n)},rKjb:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("tGKA"),l=o("jLWG"),c=o("dmHI"),u=o("sq5L"),p=o("hauK"),d=o("Aj79"),h=o("g6aL");r.PGMComposite=(n=function(e,t,o,n,r){this.children=i.clone(r),p.PGMNode.call(this,e,t,o,n)},i.defineClass({name:"PGMComposite",ctor:n,superName:"PGMNode",statics:{PROP_CHILDREN:"children",decodeNode:function(e,t,o,r,i,a,s){var u;if(null!=(u=e[n.PROP_CHILDREN]))switch(t){case"pgm-group":if(p=n.decodeChildren(u,a,s))return h.PGMSimpleGroup.decodeComposite(e,o,r,i,p,s);break;case"pgm-filter":if(p=n.decodeChildren(u,a,s))return c.PGMFilter.decodeComposite(e,o,r,i,p,s);break;case"pgm-clip":var p;if(p=n.decodeChildren(u,a,s))return l.PGMClip.decodeComposite(e,o,r,i,p,s);break;default:return null}return null},decodeChildren:function(e,t,o){var n;if(n=i.as(e,["Array","Any"])){for(var r=[],a=i.iter(n);!a.done;a.next()){var s,l=a.value;if(!(s=d.PGMReference.decode(i.as(l,["Dictionary","String","Any"]),t,o)))return null;r.push(s)}return r}return null!=e&&o.error(u.PGMError.BAD_CHILDREN_ENTRY,"Expected 'children' to be an array of dictionaries."),null}},props:{visit:function(e){e(this);for(var t=i.iter(this.children);!t.done;t.next())t.value.child.visit(e)},visitByRef:function(e){for(var t=i.iter(this.children);!t.done;t.next())t.value.visit(e)},visitEx:function(e,t,o,n,r){if(void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=s.Matrix2D.Identity),void 0===r&&(r=s.Matrix2D.Identity),!e(this,n,r))return this;if(null!=t&&!t(this,n,r))return null;for(var a=null,l=i.iter(this.children);!l.done;l.next()){var c=l.value;if(null!=(a=c.child.visitEx(e,t,o,c.compositing.placement,r.concat(c.compositing.placement))))break}return null!=o&&o(this),a},indexOfChild:function(e){for(var t=i.iter(i.range(0,this.children.length,!1));!t.done;t.next()){var o=t.value;if(this.children[o].child.entity==e)return o}return null},encode:function(){var e=p.PGMNode.prototype.encode.call(this),t=[];e[n.PROP_CHILDREN]=t;for(var o=i.iter(this.children);!o.done;o.next()){var r=o.value;t.push(r.encode())}return e},withEntityAndChildren:function(e,t){return a.LegacyCoreAssert.fail("subclass must implement",void 0,"PGMComposite.withEntityAndChildren","PGMComposite.swift",131),this},isEqualTo:function(e){if(e===this)return!0;var t;if(t=i.as(e,n)){if(!p.PGMNode.prototype.isEqualTo.call(this,e))return!1;if(t.children.length!=this.children.length)return!1;for(var o=i.iter(i.range(0,this.children.length,!1));!o.done;o.next()){var r=o.value;if(!this.children[r].isEqualTo(t.children[r]))return!1}return!0}return!1}}}),n)},rtbu:function(e,t,o){var n,r,i,a,s=t,l=o("oAGj"),c=o("gXiO"),u=o("iCxV"),p=o("PCN2"),d=o("fNpk"),h=o("tGKA"),f=o("jfma"),m=o("sHEF"),g=o("WUDy"),y=o("zW52"),T=o("sIWg");s.PGMMimicMutation=(n=function(){},r={},l.defineClass({name:"PGMMimicMutation",ctor:n,statics:{CATEGORY_HIERARCHY:"hierarchy/",CATEGORY_COMPOSITING:"compositing/",CATEGORY_PROPERTY:"property/",COMPOSITING_PLACEMENT:{get:function(){return void 0===r.COMPOSITING_PLACEMENT&&(r.COMPOSITING_PLACEMENT=n.CATEGORY_COMPOSITING+"placement"),r.COMPOSITING_PLACEMENT}},COMPOSITING_BLENDMODE:{get:function(){return void 0===r.COMPOSITING_BLENDMODE&&(r.COMPOSITING_BLENDMODE=n.CATEGORY_COMPOSITING+"blend-mode"),r.COMPOSITING_BLENDMODE}},COMPOSITING_OPACITY:{get:function(){return void 0===r.COMPOSITING_OPACITY&&(r.COMPOSITING_OPACITY=n.CATEGORY_COMPOSITING+"opacity"),r.COMPOSITING_OPACITY}},COMPOSITING_CTM:{get:function(){return void 0===r.COMPOSITING_CTM&&(r.COMPOSITING_CTM=n.CATEGORY_COMPOSITING+"ctm"),r.COMPOSITING_CTM}},HIERARCHY_CREATED:{get:function(){return void 0===r.HIERARCHY_CREATED&&(r.HIERARCHY_CREATED=n.CATEGORY_HIERARCHY+"created"),r.HIERARCHY_CREATED}},HIERARCHY_PARENT:{get:function(){return void 0===r.HIERARCHY_PARENT&&(r.HIERARCHY_PARENT=n.CATEGORY_HIERARCHY+"parent"),r.HIERARCHY_PARENT}},HIERARCHY_BECAME_ROOT:{get:function(){return void 0===r.HIERARCHY_BECAME_ROOT&&(r.HIERARCHY_BECAME_ROOT=n.CATEGORY_HIERARCHY+"became-root"),r.HIERARCHY_BECAME_ROOT}},HIERARCHY_REMOVED:{get:function(){return void 0===r.HIERARCHY_REMOVED&&(r.HIERARCHY_REMOVED=n.CATEGORY_HIERARCHY+"removed"),r.HIERARCHY_REMOVED}},HIERARCHY_CHILDREN:{get:function(){return void 0===r.HIERARCHY_CHILDREN&&(r.HIERARCHY_CHILDREN=n.CATEGORY_HIERARCHY+"children"),r.HIERARCHY_CHILDREN}}}}),n),s.PGMMimicNode=(i=function e(t,o,n,r){this._binding=new p.PGMNullMimicNodeBinding,this._isRoot=!1,this._parent=null,this._compositing=f.PGMCompositingParams.DEFAULT,this._ctm=h.Matrix2D.Identity,this._ctmLocalDirty=!0,this._animations=[],this._animationsByType={},this._mutatedProperties=null,this._mutations=[],this._markedBounds=null,this._markedBoundsValid=!1,this.oldState=m.PGMMimicDisplayState.EMPTY,this.newState=m.PGMMimicDisplayState.EMPTY,this.clientData=null,this._document=t,this._options=n,this._ref=o,this._compositing=o.compositing,this.id=e.makeUniqueID(),c.CoreObject.call(this),this.importAnimations(),this._binding=t.client.bindNode(this,r),this.recordMutation(s.PGMMimicMutation.HIERARCHY_CREATED)},l.defineClass({name:"PGMMimicNode",ctor:i,superName:"CoreObject",statics:{PROP_MARKED_BOUNDS:"marked-bounds",nextID_:1,makeUniqueID:function(){var e="M"+i.nextID_;return i.nextID_+=1,e}},props:{document:{get:function(){return d.LegacyCoreAssert.isTrue(null!=this._document,"Using a node after document has been destroyed. Let's crash!",void 0,"PGMMimicNode","PGMMimicNode.swift",134),this._document}},binding:{get:function(){return this._binding}},markedBounds:{get:function(){if(this._markedBoundsValid)return this._markedBounds;var e=this.calculateMarkedBounds();return T.TheoRect.equal(e,this._markedBounds)||(this._markedBounds=e,this.mutateProperty(i.PROP_MARKED_BOUNDS)),this._markedBoundsValid=!0,this._markedBounds}},markedBoundsInDocumentSpace:{get:function(){var e;return(e=this.markedBounds)?this.ctm.transformRect(e):null}},invalidateMarkedBounds:function(e){void 0===e&&(e=!0),e?this._markedBoundsValid&&(this._markedBoundsValid=!1,l.opt(this._parent,(function(e){return e.invalidateMarkedBounds(!0)}))):l.opt(this._parent,(function(e){return e.invalidateMarkedBounds(!0)}))},calculateMarkedBounds:function(){return l.opt(u.Host.logging,(function(e){return e.warning("subclass did not handle calculateMarkedBounds; will be empty")})),null},newConform:function(e,t,o){this.oldState=e,this.newState=t,this._options=o,this._mutations.splice(0)},recordMutation:function(e){this._options.provideEndConformSummary&&!this._mutations.includes(e)&&this._mutations.push(e)},endConformSummary:function(e){return!!(e||this._mutations.length>0)&&(this.binding.endConformSummary(this,this._mutations,e),!0)},parent:{get:function(){return this._parent}},setAsChildOf:function(e){e!=this._parent&&(this.recordMutation(s.PGMMimicMutation.HIERARCHY_PARENT),this.document.nodeReparented(this),this._parent=e,this._isRoot=!1,this._ctmLocalDirty=!0)},setAsRoot:function(){this._isRoot||(this.recordMutation(s.PGMMimicMutation.HIERARCHY_PARENT),this.recordMutation(s.PGMMimicMutation.HIERARCHY_BECAME_ROOT),this.document.nodeReparented(this),this._parent=null,this._isRoot=!0,this._ctmLocalDirty=!0)},setAsDetached:function(){this.recordMutation(s.PGMMimicMutation.HIERARCHY_PARENT),this.recordMutation(s.PGMMimicMutation.HIERARCHY_REMOVED),this._parent=null,this._isRoot=!1},ref:{get:function(){return this._ref},set:function(e){e!==this._ref&&(this._ref=e,this.importAnimations())}},compositing:{get:function(){return this._compositing},set:function(e){if(e!==this._compositing){var t=!1;this._compositing.placement.equal(e.placement)||(this.recordMutation(s.PGMMimicMutation.COMPOSITING_PLACEMENT),this._ctmLocalDirty=!0,this.invalidateMarkedBounds(!1),this.document.nodePlacementChanged(this),this._binding.changePlacement(this,this._compositing.placement,e.placement),t=!0),this._compositing.blendMode!=e.blendMode&&(this.recordMutation(s.PGMMimicMutation.COMPOSITING_BLENDMODE),this._binding.changeBlendMode(this,this._compositing.blendMode,e.blendMode),t=!0),this._compositing.opacity!=e.opacity&&(this.recordMutation(s.PGMMimicMutation.COMPOSITING_OPACITY),this._binding.changeOpacity(this,this._compositing.opacity,e.opacity),t=!0),t&&this._binding.changeCompositing(this,this._compositing,e),this._compositing=e}}},ctm:{get:function(){return this._ctm},set:function(e){this.recordMutation(s.PGMMimicMutation.COMPOSITING_CTM),this._binding.changeCTM(this,this._ctm,e),this._ctm=e,this._ctmLocalDirty=!1}},animations:{get:function(){return this._animations}},isCTMDirty:{get:function(){return this._ctmLocalDirty||this.hasCTMLocalDirtyAncestor}},isCTMLocalDirty:{get:function(){return this._ctmLocalDirty}},hasCTMLocalDirtyAncestor:{get:function(){var e;return!!(e=this.parent)&&(e.isCTMLocalDirty||e.hasCTMLocalDirtyAncestor)}},importAnimations:function(){var e=this,t=this._animations.length>0;this._animations.splice(0),this.ref.animations.forEach((function(t){return e._animations.push(t)})),this.ref.child.animations.forEach((function(t){return e._animations.push(t)})),this._animationsByType={};for(var o=l.iter(this._animations);!o.done;o.next()){var n=o.value;this._animationsByType[n.type]=l.clone(this._animationsByType[n.type]||[]),this._animationsByType[n.type].push(n)}var r=this._animations.length>0;t!=r&&this.document.nodeHasAnimationChanged(this,r)},visit:function(e){return e(this)?this:null},visitPostOrder:function(e){return e(this)?this:null},destroy:function(){this.removeFromTree(),this._binding.destroy(this)},removeFromTree:function(){var e;(e=this.parent)?e.removeChild(this):this.document.root===this&&(this.document.root=null)},updateCTM:function(){var e;(e=this.parent)?this.ctm=this.compositing.placement.concat(e.ctm):this.ctm=this.compositing.placement},getStaticCTM:function(){for(var e=this.ref.compositing.placement,t=this.parent;null!=t;)e=e.concat(t.ref.compositing.placement),t=t.parent;return e},importProperties:function(){},changeProperties:function(e){e.length>0&&this._binding.changeProperties(this,e)},applyAnimations:function(e,t){for(var o=l.iter(this._animationsByType);!o.done;o.next()){var n,r,i=o.value;(n=i.find((function(e){return e.timeFn.domain.contains(t)}),this))?this.applyAnimation(n,t):(r=i.find((function(t){return t.timeFn.domain.contains(e)}),this))&&this.restoreAfterAnimation(r)}},applyAnimation:function(e,t){var o,n;(o=l.as(e,y.PGMTransformAnimation))?this.compositing=this.compositing.withPlacement(o.interpolate(t)):(n=l.as(e,g.PGMOpacityAnimation))&&(this.compositing=this.compositing.withOpacity(n.interpolate(t)))},restoreAfterAnimation:function(e){e instanceof y.PGMTransformAnimation?this.compositing=this.compositing.withPlacement(this.ref.compositing.placement):e instanceof g.PGMOpacityAnimation&&(this.compositing=this.compositing.withOpacity(this.ref.compositing.opacity))},startPropertyMutation:function(){this._mutatedProperties=[]},endPropertyMutation:function(){null!=this._mutatedProperties&&(this._mutatedProperties.length>0&&this.changeProperties(this._mutatedProperties),this._mutatedProperties=null)},mutateProperty:function(e){this.recordMutation(s.PGMMimicMutation.CATEGORY_PROPERTY+e),null!=this._mutatedProperties?this._mutatedProperties.push(e):this.changeProperties([e])}}}),i),s.PGMNullMimicNode=(a=function(e,t,o,n){s.PGMMimicNode.call(this,e,t,o,n)},l.defineClass({name:"PGMNullMimicNode",ctor:a,superName:"PGMMimicNode"}),a)},s3Tu:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("tlHl"),s=o("hauK");r.PGMVideo=(n=function e(t,o,n,r,i,s,l){this.offset=s,this.posterTime=l,a.PGMMedia.call(this,e.TYPE,t,o,n,r,i)},i.defineClass({name:"PGMVideo",ctor:n,superName:"PGMMedia",statics:{TYPE:"pgm-video",PROP_OFFSET:"offset",PROP_POSTER_TIME:"poster-time"},props:{withEntity:function(e){return new n(e,this.meta,this.animations,this.bounds,this.contentID,this.offset,this.posterTime)},encode:function(){var e=a.PGMMedia.prototype.encode.call(this);return e[s.PGMNode.PROP_TYPE]=n.TYPE,e[n.PROP_OFFSET]=this.offset,e[n.PROP_POSTER_TIME]=this.posterTime,e}}}),n)},sHEF:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("sq5L");i.PGMMimicDisplayState=(n=function(e,t){this.graph=e,this.time=t},r={},a.defineClass({name:"PGMMimicDisplayState",ctor:n,statics:{EMPTY:{get:function(){return void 0===r.EMPTY&&(r.EMPTY=new n(s.PGMGraph.EMPTY,0)),r.EMPTY}}},props:{equals:function(e){return this.time==e.time&&this.graph===e.graph}}}),n)},sIWg:function(e,t,o){var n,r,i,a=t,s=o("oAGj"),l=o("gXiO"),c=o("fNpk"),u=o("tGKA"),p=o("3DEm"),d=o("MnRR"),h=o("oKlP"),f=o("1NAc");a.TheoRect=(n=function(e,t,o,n){this.minX=p.MathUtils.minDouble(e,o),this.minY=p.MathUtils.minDouble(t,n),this.maxX=p.MathUtils.maxDouble(e,o),this.maxY=p.MathUtils.maxDouble(t,n),l.CoreObject.call(this)},r={},s.defineClass({name:"TheoRect",ctor:n,superName:"CoreObject",statics:{Zero:{get:function(){return void 0===r.Zero&&(r.Zero=new n(0,0,0,0)),r.Zero}},Huge:{get:function(){return void 0===r.Huge&&(r.Huge=new n(-Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)),r.Huge}},ONE_BY_ONE:{get:function(){return void 0===r.ONE_BY_ONE&&(r.ONE_BY_ONE=new n(0,0,1,1)),r.ONE_BY_ONE}},fromXYWH:function(e,t,o,r){return new n(e,t,e+o,t+r)},fromXYXY:function(e,t,o,r){return new n(e,t,o,r)},fromXXYY:function(e,t,o,r){return new n(e,o,t,r)},fromPoints:function(e,t){return new n(e.x,e.y,t.x,t.y)},fromSize:function(e){return n.fromXYWH(0,0,e.width,e.height)},equal:function(e,t){return null==e==(null==t)&&(null==e||e.equal(t))},boundsOfPoints:function(e){var t=null;if(0==e.length);else if(1==e.length)t=new n(e[0].x,e[0].y,e[0].x,e[0].y);else{for(var o=0,r=0,i=0,a=0,l=!0,c=s.iter(e);!c.done;c.next()){var u=c.value;l?(o=u.x,i=u.x,r=u.y,a=u.y,l=!1):(o=p.MathUtils.minDouble(u.x,o),r=p.MathUtils.minDouble(u.y,r),i=p.MathUtils.maxDouble(u.x,i),a=p.MathUtils.maxDouble(u.y,a))}t=new n(o,r,i,a)}return t},unionOfRects:function(e){for(var t=null,o=s.iter(e);!o.done;o.next()){var r=o.value;t=n.unionOf(t,r)}return t},unionOf:function(e,t){return null==e?t:null==t?e:new n(p.MathUtils.minDouble(e.minX,t.minX),p.MathUtils.minDouble(e.minY,t.minY),p.MathUtils.maxDouble(e.maxX,t.maxX),p.MathUtils.maxDouble(e.maxY,t.maxY))},fromString:function(e){var t=e.split(",");return 4==t.length?n.fromXXYY(s.toDouble(t[0]),s.toDouble(t[1]),s.toDouble(t[2]),s.toDouble(t[3])):null},fromArray:function(e){if(4!=e.length)return c.LegacyCoreAssert.fail("TheoRect.fromArray: Array does not have 4 elements",void 0,"TheoRect.fromArray","TheoRect.swift",468),null;var t=s.as(e[0],"Double"),o=s.as(e[1],"Double"),r=s.as(e[2],"Double"),i=s.as(e[3],"Double");return null==t||null==o||null==r||null==i?(c.LegacyCoreAssert.fail("Rect.fromArray: Array is not 4 doubles",void 0,"TheoRect.fromArray","TheoRect.swift",478),null):new n(t,o,r,i)},decodeJson:function(e){return null==e?null:s.is(e,["Array","Any"])?n.fromArray(e):s.is(e,"String")?n.fromString(e):(c.LegacyCoreAssert.fail("TheoRect.decodeJson: Not an array or a string",void 0,"TheoRect.decodeJson","TheoRect.swift",526),null)},RectanglesIntersect:function(e,t,o,n,r){return a.RectanglesIntersect_(e,t,o,n,r)},PointInCommon_:function(e,t,o,n){for(var r=[],i=s.iter(s.range(0,5,!1));!i.done;i.next())r.push(new h.TheoPoint(0,0));return a.RectanglesIntersect_(e,t,o,r,n)},InteriorPointInCommon:function(e,t,o){return n.PointInCommon_(e,t,o,(function(e,t){return e<t}))},PointInCommon:function(e,t,o){return n.PointInCommon_(e,t,o,(function(e,t){return e<=t}))},JustTouch:function(e,t,o,n){return a.JustTouch_(e,t,o,n)},MakeIntersectOrAbut:function(e,t,o){return a.MakeIntersect_(e,t,o,0,(function(e,t){return e<=t}))},MakeInteriorsIntersect:function(e,t,o){return a.MakeIntersect_(e,t,o,5,(function(e,t){return e<t}))}},props:{evalUUVV:function(e,t,o,r){return n.fromPoints(this.evalXY(e,o),this.evalXY(t,r))},width:{get:function(){return this.maxX-this.minX}},height:{get:function(){return this.maxY-this.minY}},size:{get:function(){return new f.TheoSize(this.width,this.height)}},containsPoint:function(e){return e.x>=this.minX&&e.y>=this.minY&&e.x<=this.maxX&&e.y<=this.maxY},eval:function(e){return this.evalXY(e.x,e.y)},evalPts:function(e){for(var t=[],o=s.iter(e);!o.done;o.next()){var n=o.value;t.push(this.evalXY(n.x,n.y))}return t},evalXY:function(e,t){return new h.TheoPoint((1-e)*this.minX+e*this.maxX,(1-t)*this.minY+t*this.maxY)},locatePoint:function(e){return this.locate(e.x,e.y)},locate:function(e,t){return new h.TheoPoint((e-this.minX)/(this.maxX-this.minX),(t-this.minY)/(this.maxY-this.minY))},evalRect:function(e){var t=this.evalXY(e.minX,e.minY),o=this.evalXY(e.maxX,e.maxY);return new n(t.x,t.y,o.x,o.y)},area:{get:function(){return(this.maxX-this.minX)*(this.maxY-this.minY)}},aspectRatio:{get:function(){return this.width/this.height}},similarity:function(e){var t=this.aspectRatio,o=e.aspectRatio,n=Math.atan(t)/Math.PI,r=Math.atan(o)/Math.PI;return Math.abs(n-r)},midX:{get:function(){return(this.minX+this.maxX)/2}},midY:{get:function(){return(this.minY+this.maxY)/2}},origin:{get:function(){return new h.TheoPoint(this.minX,this.minY)}},center:{get:function(){return this.evalXY(.5,.5)}},equal:function(e){return this.minX==e.minX&&this.maxX==e.maxX&&this.minY==e.minY&&this.maxY==e.maxY},equalWithAccuracy:function(e,t){return Math.abs(this.minX-e.minX)<t&&Math.abs(this.maxX-e.maxX)<t&&Math.abs(this.minY-e.minY)<t&&Math.abs(this.maxY-e.maxY)<t},fitAspectRatioWithin:function(e){var t=null;return t=this.aspectRatio<e?new f.TheoSize(this.width,this.width/e):new f.TheoSize(e*this.height,this.height),c.LegacyCoreAssert.isTrue(t.width<=this.width+.01,"fit aspect ratio within exceeded width",void 0,"TheoRect.fitAspectRatioWithin","TheoRect.swift",173),c.LegacyCoreAssert.isTrue(t.height<=this.height+.01,"fit aspect ratio within exceeded height",void 0,"TheoRect.fitAspectRatioWithin","TheoRect.swift",174),t},expandToFit:function(e){return this.containsPoint(e)?this:new n(p.MathUtils.minDouble(e.x,this.minX),p.MathUtils.minDouble(e.y,this.minY),p.MathUtils.maxDouble(e.x,this.maxX),p.MathUtils.maxDouble(e.y,this.maxY))},contains:function(e){var t=this.intersectionWith(e);return null!=t&&t.equalWithAccuracy(e,.001)},intersects:function(e){return p.MathUtils.maxDouble(e.minX,this.minX)<p.MathUtils.minDouble(e.maxX,this.maxX)&&p.MathUtils.maxDouble(e.minY,this.minY)<p.MathUtils.minDouble(e.maxY,this.maxY)},intersectionWith:function(e){return this.intersects(e)?new n(p.MathUtils.maxDouble(e.minX,this.minX),p.MathUtils.maxDouble(e.minY,this.minY),p.MathUtils.minDouble(e.maxX,this.maxX),p.MathUtils.minDouble(e.maxY,this.maxY)):null},unionWith:function(e){return n.unionOf(this,e)},withInsets:function(e){return new n(p.MathUtils.minDouble(this.minX+e.left,this.maxX-e.right),p.MathUtils.minDouble(this.minY+e.top,this.maxY-e.bottom),p.MathUtils.maxDouble(this.minX+e.left,this.maxX-e.right),p.MathUtils.maxDouble(this.minY+e.top,this.maxY-e.bottom))},verticalLine:function(e){return new d.TheoLine(this.evalXY(e,0),this.evalXY(e,1))},horizontalLine:function(e){return new d.TheoLine(this.evalXY(0,e),this.evalXY(1,e))},interpolateWith:function(e,t){return new n(this.minX*(1-t)+e.minX*t,this.minY*(1-t)+e.minY*t,this.maxX*(1-t)+e.maxX*t,this.maxY*(1-t)+e.maxY*t)},L1Distance:function(e){var t=-1*p.MathUtils.minDouble(e.maxX-this.minX,this.maxX-e.minX),o=-1*p.MathUtils.minDouble(e.maxY-this.minY,this.maxY-e.minY);return p.MathUtils.maxDouble(0,p.MathUtils.maxDouble(t,o))},xDistance:function(e,t){void 0===t&&(t=!0);var o=-1*p.MathUtils.minDouble(e.maxX-this.minX,this.maxX-e.minX);return t?p.MathUtils.maxDouble(0,o):o},yDistance:function(e,t){void 0===t&&(t=!0);var o=-1*p.MathUtils.minDouble(e.maxY-this.minY,this.maxY-e.minY);return t?p.MathUtils.maxDouble(0,o):o},transform:function(e){return e.transformRect(this)},points:{get:function(){return[new h.TheoPoint(this.minX,this.minY),new h.TheoPoint(this.minX,this.maxY),new h.TheoPoint(this.maxX,this.minY),new h.TheoPoint(this.maxX,this.maxY)]}},interpolate:function(e,t){function o(e,t,o){return e+(t-e)*o}return new n(o(this.minX,e.minX,t),o(this.minY,e.minY,t),o(this.maxX,e.maxX,t),o(this.maxY,e.maxY,t))},rounded:function(){return new n(Math.round(this.minX),Math.round(this.minY),Math.round(this.maxX),Math.round(this.maxY))},floored:function(){return new n(Math.floor(this.minX),Math.floor(this.minY),Math.floor(this.maxX),Math.floor(this.maxY))},snapped:function(){return n.fromXYWH(Math.round(this.minX),Math.round(this.minY),Math.round(this.width),Math.round(this.height))},insetXY:function(e,t){return new n(this.minX+e,this.minY+t,this.maxX-e,this.maxY-t)},insetRel:function(e,t,o,r){return n.fromXXYY(this.minX+this.width*e,this.maxX-this.width*t,this.minY+this.height*o,this.maxY-this.height*r)},scaleXY:function(e,t,o){void 0===o&&(o=new h.TheoPoint(.5,.5));var r=n.fromXYWH(this.minX,this.minY,this.width*e,this.height*t);return r.transform(u.Matrix2D.translation(this.eval(o).subtract(r.eval(o))))},scale:function(e,t){return void 0===t&&(t=new h.TheoPoint(.5,.5)),this.scaleXY(e,e,t)},outsetXY:function(e,t){return new n(this.minX-e,this.minY-t,this.maxX+e,this.maxY+t)},offset:function(e){return new n(this.minX+e.x,this.minY+e.y,this.maxX+e.x,this.maxY+e.y)},offsetXY:function(e,t){return new n(this.minX+e,this.minY+t,this.maxX+e,this.maxY+t)},multiplyXY:function(e,t){return n.fromXYWH(this.minX*e,this.minY*t,this.width*e,this.height*t)},moveToPoint:function(e,t){var o=this.evalXY(t.x,t.y),n=e.subtract(o);return this.offset(n)},split:function(e,t,o){void 0===o&&(o=null);var r=[],i=0,a=0,l=0;if(null!=o){for(var u=s.iter(o);!u.done;u.next())l+=u.value;if(e!=o.length)return c.LegacyCoreAssert.fail("num regions must match weight vector",void 0,"TheoRect.split","TheoRect.swift",422),r}for(var p=t?this.width/s.toDouble(e):this.width,d=t?this.height:this.height/s.toDouble(e),h=s.iter(s.range(0,e,!1));!h.done;h.next()){var f,m=h.value;(f=o)&&(p=t?this.width*(f[m]/l):this.width,d=t?this.height:this.height*(f[m]/l)),t?r.push(new n(this.minX+i,this.minY,this.minX+i+p,this.maxY)):r.push(new n(this.minX,this.minY+a,this.maxX,this.minY+a+d)),i+=p,a+=d}return r},asString:{get:function(){return" x: "+s.toString(Math.round(100*this.minX)/100)+" "+s.toString(Math.round(100*this.maxX)/100)+", y:"+s.toString(Math.round(100*this.minY)/100)+" "+s.toString(Math.round(100*this.maxY)/100)}},asIntString:{get:function(){return" x: "+s.toString(Math.round(this.minX))+" "+s.toString(Math.round(this.maxX))+", y:"+s.toString(Math.round(this.minY))+" "+s.toString(Math.round(this.maxY))}},description:{get:function(){return this.asString}},encode:function(){return c.LegacyCoreAssert.fail("TheoRect: Use encodeJson(), not encode()",void 0,"TheoRect.encode","TheoRect.swift",531),[]},encodeJson:function(){return c.LegacyCoreAssert.isFalse(isNaN(this.minX),"Can't persist NaN minX value",void 0,"TheoRect.encodeJson","TheoRect.swift",536),c.LegacyCoreAssert.isFalse(isNaN(this.minY),"Can't persist NaN minY value",void 0,"TheoRect.encodeJson","TheoRect.swift",537),c.LegacyCoreAssert.isFalse(isNaN(this.maxX),"Can't persist NaN maxX value",void 0,"TheoRect.encodeJson","TheoRect.swift",538),c.LegacyCoreAssert.isFalse(isNaN(this.maxY),"Can't persist NaN maxY value",void 0,"TheoRect.encodeJson","TheoRect.swift",539),s.as([this.minX,this.minY,this.maxX,this.maxY],"AnyObject")},maximumSpan:function(e){var t=this,o=function(o,n){return e.transformLinear(t.evalXY(o,n))},n=0,r=function(e,t){var r=o(e,t),i=o(1-e,1-t),a=function(e,t){var a,s,l=(a=o(e,t),s=i,new d.TheoLine(a,s)),c=l.locate(r);if(-1e-7<c&&c<1+1e-7){var u=l.eval(c),p=h._minus_TheoPoint_TheoPoint(u,r).length(),f=h._minus_TheoPoint_TheoPoint(u,i).length();n=Math.max(n,p,f)}};a(e,1-t),a(1-e,t)};return r(0,0),r(1,0),n}}}),n),a.RectanglesIntersect_=function(e,t,o,n,r){c.LegacyCoreAssert.isTrue(e.minX<=e.maxX&&e.minY<=e.maxY&&o.minX<=o.maxX&&o.minY<=o.maxY,"rectangle width/height negative",void 0,"RectanglesIntersect_","TheoRect.swift",643);var i=function(o,n){return t.transformPoint(e.evalXY(o,n))},l=0,u=0;function p(e,t){var o=a.rect_contains_point(t,e,l,u,r),n=o.result,i=o.horz,s=o.vert;return l=i,u=s,n}if(p(i(.5,.5),o))return!0;if(l=0,u=0,n[0]=i(0,0),p(n[0],o))return!0;if(n[2]=i(1,1),p(n[2],o))return!0;if(t.preservesBoxes)return!!a.rects_intersect(new a.TheoRect(n[0].x,n[0].y,n[2].x,n[2].y),o,r)||(n[1]=i(1,0),n[3]=i(0,1),n[4]=n[0],!1);if(n[1]=i(1,0),p(n[1],o))return!0;if(n[3]=i(0,1),p(n[3],o))return!0;if(n[4]=n[0],4==l||-4==l||4==u||-4==u)return!1;c.LegacyCoreAssert.isTrue(0!=t.determinant,"rectangle intersection should've been determined by now if transformation matrix determinant were 0",void 0,"RectanglesIntersect_","TheoRect.swift",697);var f=t.inverse,m=function(e,t){return f.transformPoint(o.evalXY(e,t))};if(p(f.transformPoint(o.center),e))return!0;var g=[new h.TheoPoint(0,0),new h.TheoPoint(0,0),new h.TheoPoint(0,0),new h.TheoPoint(0,0),new h.TheoPoint(0,0)];if(g[0]=m(0,0),p(g[0],e))return!0;if(g[1]=m(1,0),p(g[1],e))return!0;if(g[2]=m(1,1),p(g[2],e))return!0;if(g[3]=m(0,1),p(g[3],e))return!0;g[4]=g[0];var y=[new h.TheoPoint(0,0),new h.TheoPoint(0,0),new h.TheoPoint(0,0),new h.TheoPoint(0,0),new h.TheoPoint(0,0)];y[0]=e.evalXY(0,0),y[1]=e.evalXY(1,0),y[2]=e.evalXY(1,1),y[3]=e.evalXY(0,1),y[4]=y[0];for(var T=s.iter(s.range(0,4,!1));!T.done;T.next())for(var A=T.value,C=s.iter(s.range(0,4,!1));!C.done;C.next()){var _=C.value,S=a.segment_intersection(g[A],g[A+1],y[_+1],y[_]),P=S[0],F=S[1];if(isNaN(P)){var v=function(e,t,o){return new d.TheoLine(e,t).locate(o)};if(P=v(g[A],g[A+1],y[_]),r(0,P)&&r(P,1))return!0;if(P=v(g[A],g[A+1],y[_+1]),r(0,P)&&r(P,1))return!0;if(P=v(y[_],y[_+1],g[A]),r(0,P)&&r(P,1))return!0;if(P=v(y[_],y[_+1],g[A+1]),r(0,P)&&r(P,1))return!0}else if(r(0,P)&&r(P,1)&&r(0,F)&&r(F,1))return!0}return!1},a.rect_contains_point=function(e,t,o,n,r){var i=o,a=n,s=!1;if(r(e.minX,t.x)?r(t.x,e.maxX)?s=!0:i+=1:i-=1,r(e.minY,t.y)){if(r(t.y,e.maxY))return{result:s,horz:i,vert:a};a+=1}else a-=1;return{result:!1,horz:i,vert:a}},a.rects_intersect=function(e,t,o){return o(t.minX,e.maxX)&&o(e.minX,t.maxX)&&o(e.minY,t.maxY)&&o(t.minY,e.maxY)},a.rect_contains_rect=function(e,t,o){return o(e.minY,t.minY)&&o(t.maxY,e.maxY)&&o(e.minX,t.minX)&&o(t.maxX,e.maxX)},a.subnormal_skipping_nextafter=function(e,t){return e},a.local_next_after=function(e,t,o){void 0===o&&(o=1);for(var n=e,r=o;r>0;)n=a.subnormal_skipping_nextafter(n,t),r-=1;return n},a.rectangle_inset=function(e,t){for(var o=e.minX,n=e.maxX,r=e.minY,i=e.maxY,s=t;s>0;)o=a.local_next_after(o,n,1),n=a.local_next_after(n,o,1),r=a.local_next_after(r,i,1),i=a.local_next_after(i,r,1),s-=1;return new a.TheoRect(o,r,n,i)},a.rectangle_outset=function(e,t){var o=a.local_next_after(e.minX,-1/0,t),n=a.local_next_after(e.minY,-1/0,t),r=a.local_next_after(e.maxX,1/0,t),i=a.local_next_after(e.maxY,1/0,t);return new a.TheoRect(o,n,r,i)},a.segment_intersection=function(e,t,o,n){var r,i,a=t.subtract(e),s=n.subtract(o),l=e.subtract(o),u=s.crossProduct(a),p=l.crossProduct(s),d=l.crossProduct(a);return 0==u?0==p?(c.LegacyCoreAssert.isTrue(0==d,"non-zero cross product for parallel colinear segments",void 0,"segment_intersection","TheoRect.swift",899),r=NaN,i=NaN):a.dotProduct(s)>0?(r=1/0,i=1/0):(r=-1/0,i=-1/0):(r=p/u,i=d/u),[r,i]},a.JustTouch_=function(e,t,o,n){var r=function(e,t,o,n){for(var r,i=1/0,l=new h.TheoPoint(0,0),f=[new h.TheoPoint(0,0),new h.TheoPoint(1,0),new h.TheoPoint(1,1),new h.TheoPoint(0,1)].map(s.bind(e,"eval"),this).map(s.bind(t,"transformPoint"),this),m=[new h.TheoPoint(0,0),new h.TheoPoint(1,0),new h.TheoPoint(1,1),new h.TheoPoint(0,1),new h.TheoPoint(0,0)].map(s.bind(o,"eval"),this).map(s.bind(n,"transformPoint"),this),g=[],y=s.iter(s.range(0,5,!1));!y.done;y.next())g.push(new h.TheoPoint(0,0));for(var T=s.iter(f);!T.done;T.next())for(var A=T.value,C=s.iter(s.range(0,4,!1));!C.done;C.next()){var _=C.value,S=new d.TheoLine(m[_],m[_+1]);!function(r){var s=A,c=h._minus_TheoPoint_TheoPoint(S.eval(r),s),u=function(e){return e.evalUUVV(1e-9,1-1e-9,1e-9,1-1e-9)};if(!a.RectanglesIntersect_(u(e),t.translate(c).concat(n.inverse),u(o),g,(function(e,t){return e<=t}))){var p=c.dotProduct(c);p<i&&(i=p,l=c)}}((r=S.locate(A),p.MathUtils.minDouble(p.MathUtils.maxDouble(0,r),1)))}return c.LegacyCoreAssert.isTrue(i<1/0,"unable to find translation to make rectangles just touch?",void 0,"JustTouch_","TheoRect.swift",959),u.Matrix2D.translation(l)},i=function(e){return e.tx*e.tx+e.ty*e.ty},l=r(e,t,o,n),f=r(o,n,e,t).inverse;return i(l)<i(f)?l:f},a.MutableRect=(i=function(e,t,o,n){this.minX=e,this.minY=t,this.maxX=o,this.maxY=n},s.defineClass({name:"MutableRect",ctor:i,statics:{fromTheoRect:function(e){return new i(e.minX,e.minY,e.maxX,e.maxY)}},props:{width:{get:function(){return this.maxX-this.minX}},height:{get:function(){return this.maxY-this.minY}},midX:{get:function(){return(this.minX+this.maxX)/2}},midY:{get:function(){return(this.minY+this.maxY)/2}},eval:function(e){return this.evalUV(e.x,e.y)},evalUV:function(e,t){return new h.TheoPoint((1-e)*this.minX+e*this.maxX,(1-t)*this.minY+t*this.maxY)},asTheoRect:{get:function(){return new a.TheoRect(this.minX,this.minY,this.maxX,this.maxY)}},clone:function(){return new i(this.minX,this.minY,this.maxX,this.maxY)}}}),i),a.MakeIntersect_=function(e,t,o,n,r){for(var i=o,l=[],u=s.iter(s.range(0,5,!1));!u.done;u.next())l.push(new h.TheoPoint(0,0));if(a.TheoRect.RectanglesIntersect(e,t,i,l,r))return i;var f=t.transformRect(e),m=s.clone(new a.MutableRect(i.minX,i.minY,i.maxX,i.maxY));r(m.minX,f.maxX)||(m.minX=f.maxX,m.minX=a.local_next_after(m.minX,-1/0,n)),r(f.minX,m.maxX)||(m.maxX=f.minX,m.maxX=a.local_next_after(m.maxX,1/0,n)),r(m.minY,f.maxY)||(m.minY=f.maxY,m.minY=a.local_next_after(m.minY,-1/0,n)),r(f.minY,m.maxY)||(m.maxY=f.minY,m.maxY=a.local_next_after(m.maxY,1/0,n));var g=function(e){return e.evalUUVV(-1e-9,1+1e-9,-1e-9,1+1e-9)};if(a.TheoRect.PointInCommon_(e,t,g(m.asTheoRect),r))return m.asTheoRect;c.LegacyCoreAssert.isTrue(f.midX!=m.midX,"midX values match but rectangles don't intersect?",void 0,"MakeIntersect_","TheoRect.swift",1031),c.LegacyCoreAssert.isTrue(f.midY!=m.midY,"midY values match but rectangles don't intersect?",void 0,"MakeIntersect_","TheoRect.swift",1032),i=m.asTheoRect;for(var y=function(e,t){return new h.TheoPoint(e,t)},T=function(o){return t.transformPoint(e.eval(o))},A=function(e){return i.eval(e)},C=function(e){return p.MathUtils.minDouble(p.MathUtils.maxDouble(0,e),1)},_=[y(0,0),y(1,0),y(1,1),y(0,1),y(0,0)],S=function(e,t){for(var o=1/0,n=[y(0,0),y(0,0)],r=s.iter(s.range(0,4,!1));!r.done;r.next())for(var i=r.value,a=A(_[i]),l=s.iter(s.range(0,4,!1));!l.done;l.next()){var u=l.value,p=new d.TheoLine(T(_[u]),T(_[u+1])),f=C(p.locate(a)),m=h._minus_TheoPoint_TheoPoint(p.eval(f),a),g=m.dotProduct(m);g<o&&(o=g,n=[_[i],_[u]])}return c.LegacyCoreAssert.isTrue(o<1/0,"unable to find closest pair of rect points?",void 0,"MakeIntersect_","TheoRect.swift",1060),n}(),P=S[0],F=S[1],v=A(P),R=y(1,1).subtract(P),b=A(R),E=A(y(P.x,R.y)),N=A(y(R.x,P.y)),k=1/0,D=v,I=s.iter(s.range(0,4,!1));!I.done;I.next()){var M=I.value;if(_[M]!=y(1,1).subtract(F)){var x=new d.TheoLine(T(_[M]),T(_[M+1])),w=function(e){var t=a.segment_intersection(e,v,x.p1,x.p2),o=t[0],n=t[1];if(o>=1&&n>=0&&n<=1){var r=x.eval(C(n)),i=a.TheoRect.fromPoints(r,b).area;i<k&&(k=i,D=r)}};w(E),w(N)}}if(n>0){var O=a.local_next_after(D.x,0==R.x?1/0:-1/0,n),L=a.local_next_after(D.y,0==R.y?1/0:-1/0,n);D=new h.TheoPoint(O,L)}var B=a.TheoRect.fromPoints(b,D);return c.LegacyCoreAssert.isTrue(a.rect_contains_rect(g(B),i,(function(e,t){return e<=t})),"MakeIntersect_ result should contain r2_",void 0,"MakeIntersect_","TheoRect.swift",1106),B}},sJQG:function(e,t,o){var n,r,i=t,a=o("oAGj");i.PGMRange=(n=function(e,t){this.start=e,this.end=t},r={},a.defineClass({name:"PGMRange",ctor:n,statics:{UNIT:{get:function(){return void 0===r.UNIT&&(r.UNIT=new n(0,1)),r.UNIT}},PROP_START:"start",PROP_END:"end",decode:function(e){var t,o;return null!=(t=a.as(a.opt(e,(function(e){return e[n.PROP_START]})),"Double"))&&null!=(o=a.as(a.opt(e,(function(e){return e[n.PROP_END]})),"Double"))?0==t&&1==o?n.UNIT:new n(t,o):null}},props:{boundedU:function(e){return e<=this.start?0:e>=this.end?1:(e-this.start)/(this.end-this.start)},applyU:function(e){return this.start+e*(this.end-this.start)},isEqualTo:function(e){return this===e||this.start==e.start&&this.end==e.end},contains:function(e){return e>=this.start&&e<=this.end},encode:function(){var e={};return e[n.PROP_START]=this.start,e[n.PROP_END]=this.end,e}}}),n)},sRQj:function(e,t,o){var n,r,i,a,s,l=t,c=o("oAGj"),u=o("iCxV");l.MockAuthoringContextManager=(n=function(e){this._mockDefaultBrandID=null,this.mockAuthoringContexts=c.clone(e)},c.defineClass({name:"MockAuthoringContextManager",ctor:n,statics:{_implements:function(e){return"IAuthoringContextManager"==e}},props:{authoringContexts:{get:function(){return this.mockAuthoringContexts}},authoringContext:function(e){var t=c.clone(this.mockAuthoringContexts.filter((function(t){return t.id==e}),this));return 0==t.length?null:t[0]},getOwnedAuthoringContextIDs:function(){return this.mockAuthoringContexts.filter((function(e){return e.ownedByCurrentUser}),this).map((function(e){return e.id}),this)},createAuthoringContext:function(e,t){return t&&0!=this.mockAuthoringContexts.length?null:l.MockAuthoringContext.init_44fd(e,"id-"+e,[],[],[])},mockDefaultBrandID:{get:function(){return this._mockDefaultBrandID},set:function(e){this._mockDefaultBrandID=e}},getDefaultBrandIdFromServer:function(){return this.mockDefaultBrandID}}}),n),l.MockAuthoringContext=(r=function(){this._id="",this._name="",this._urn="",this._isDefault=!1,this._activated=!1,this._isMinimal=!1,this._isValidVersion=!0},c.defineClass({name:"MockAuthoringContext",ctor:r,statics:{_implements:function(e){return"IAuthoringContext"==e}},props:{init_d41d:function(){this._activated=!1,this._colors=[],this._fonts=[],this._logos=[],this._ownedByCurrentUser=!0},init_44fd:function(e,t,o,n,r,i){void 0===i&&(i=!0),this._name=e,this._id=t,this._colors=c.clone(o),this._fonts=c.clone(n),this._logos=c.clone(r),this._ownedByCurrentUser=i,this._activated=r.length>0&&o.length>0&&n.length>0,this._urn="fake urn:name:"+this._name+":id:"+this._id},id:{get:function(){return this._id}},contextID:{get:function(){return this._id}},name:{get:function(){return this._name},set:function(e){this._name=e}},urn:{get:function(){return this._urn}},activated:{get:function(){return this._activated},set:function(e){this._activated=e}},isDefault:{get:function(){return this._isDefault},set:function(e){this._isDefault=e}},isMinimal:{get:function(){return this._isMinimal}},isValidVersion:{get:function(){return this._isValidVersion}},ownedByCurrentUser:{get:function(){return this._ownedByCurrentUser},set:function(e){this._ownedByCurrentUser=e}},colors:{get:function(){return this._colors}},fonts:{get:function(){return this._fonts}},logos:{get:function(){return this._logos},set:function(e){this._logos=c.clone(e)}},isBrandkitComplete:function(){return 1!=u.Host.brandkitManager.shouldForceIncompleteBrand&&this.colors.length>0&&this.fonts.length>0&&this.logos.length>0}}}),r),l.MockAuthoringContextColor=(i=function(e,t,o,n,r,i){this._id="",this._r=0,this._g=0,this._b=0,this._a=0,this._id=e,this._roles=c.clone(t),this._r=o,this._g=n,this._b=r,this._a=i},c.defineClass({name:"MockAuthoringContextColor",ctor:i,statics:{_implements:function(e){return"IAuthoringContextColor"==e}},props:{id:{get:function(){return this._id}},acRoles:{get:function(){return this._roles}},red:{get:function(){return this._r}},green:{get:function(){return this._g}},blue:{get:function(){return this._b}},alpha:{get:function(){return this._a}}}}),i),l.MockAuthoringContextFont=(a=function(e,t,o){this._id="UNKNOWN",this._roles=[],this._source="",this._id=e,this._roles.push(t),this._desc=o,this._source="mock-font"},c.defineClass({name:"MockAuthoringContextFont",ctor:a,statics:{_implements:function(e){return"IAuthoringContextFont"==e}},props:{id:{get:function(){return this._id}},acRoles:{get:function(){return this._roles}},sourceType:{get:function(){return this._source},set:function(e){this._source=e}},descriptor:{get:function(){return this._desc}}}}),a),l.MockAuthoringContextLogo=(s=function(e,t,o,n,r){this._id="",this._url="",this._roles=[],this._width=0,this._height=0,this._id=e,this._url=t,this._roles.push(o),this._width=n,this._height=r},c.defineClass({name:"MockAuthoringContextLogo",ctor:s,statics:{_implements:function(e){return"IAuthoringContextLogo"==e}},props:{id:{get:function(){return this._id}},acRoles:{get:function(){return this._roles}},acName:{get:function(){return"Mock logo"}},url:{get:function(){return this._url}},pixelWidth:{get:function(){return this._width}},pixelHeight:{get:function(){return this._height}},mimeType:{get:function(){return"image/png"}}}}),s)},sWrh:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("sq5L"),l=o("jSYS"),c=o("KB91"),u=o("BnJw"),p=o("sJQG"),d=o("/eOI");r.PGMUnaryFunction=(n=function(e,t,o){this.type=e,this.domain=t,this.range=o},i.defineClass({name:"PGMUnaryFunction",ctor:n,statics:{PROP_TYPE:"type",PROP_DOMAIN:"domain",PROP_RANGE:"range",decode:function(e,t){var o,r,a,h;if(!(o=e))return null;if(null==(r=i.as(o[n.PROP_TYPE],"String"))||!(a=p.PGMRange.decode(i.as(o[n.PROP_DOMAIN],["Dictionary","String","Any"])))||!(h=p.PGMRange.decode(i.as(o[n.PROP_RANGE],["Dictionary","String","Any"]))))return t.error(s.PGMError.BAD_FUNCTION,"PGMUnaryFunction.decode: missing valid type, domain, or range"),null;switch(r){case"pgm-linear-function":return l.PGMLinearFunction.decodeFn(e,a,h);case"pgm-sine-easing-fn":return d.PGMSineEasingFunction.decodeFn(e,a,h);case"pgm-periodic-fn":return u.PGMPeriodicFunction.decodeFn(e,a,h);case"pgm-looping-function":return c.PGMLoopingFunction.decodeFn(e,a,h,t);default:return t.error(s.PGMError.BAD_FUNCTION,"PGMUnaryFunction.decode: type "+r+" not recognized"),null}}},props:{apply:function(e){return a.LegacyCoreAssert.fail("unimplemented apply()",void 0,"PGMUnaryFunction.apply","PGMUnaryFunction.swift",32),0},encode:function(){var e={};return e[n.PROP_TYPE]=this.type,e[n.PROP_DOMAIN]=this.domain.encode(),e[n.PROP_RANGE]=this.range.encode(),e},isEqualTo:function(e){return e.domain.isEqualTo(this.domain)&&e.range.isEqualTo(this.range)}}}),n)},smUN:function(e,t,o){var n,r,i,a=t,s=o("oAGj"),l=o("fNpk"),c=o("WjWV"),u=o("Iv44"),p=o("GDe9"),d=o("ZTPx"),h=o("+ASD"),f=o("jfiy"),m=o("sq5L"),g=o("vTQu"),y=o("dz2e"),T=o("JQ9Y");a.PGMFilterSpec=(n=function(e){this.type=e},s.defineClass({name:"PGMFilterSpec",ctor:n,statics:{PROP_TYPE:"pgm-filter-spec",decode:function(e,t){var o,r;if(o=e)if(null!=(r=s.as(o[n.PROP_TYPE],"String")))switch(r){case"NONE":return a.PGMNullFilterSpec.INSTANCE;case"PGMColorTransformFilterSpec":return d.PGMColorTransformFilterSpec.decodeSpec(e,t);case"PGMBlendFilterSpec":return c.PGMBlendFilterSpec.decodeSpec(e,t);case"PGMDuotoneFilterSpec":return h.PGMDuotoneFilterSpec.decodeSpec(e,t);case"PGMFillFilterSpec":return f.PGMFillFilterSpec.decodeSpec(e,t);case"PGMOverlayFilterSpec":return y.PGMOverlayFilterSpec.decodeSpec(e,t);case"PGMScreenFilterSpec":return T.PGMScreenFilterSpec.decodeSpec(e,t);case"PGMMaskFilterSpec":return g.PGMMaskFilterSpec.decodeSpec(e,t);case"PGMBlurFilterSpec":return u.PGMBlurFilterSpec.decodeSpec(e,t);case"PGMColorAdjustmentFilterSpec":return p.PGMColorAdjustmentFilterSpec.decodeSpec(e,t);default:t.error(m.PGMError.BAD_FILTER_SPEC,"PGMFilterSpec.decode unrecognized filter spec: "+r)}else t.error(m.PGMError.BAD_FILTER_SPEC,"PGMFilterSpec: missing type property");return null}},props:{encode:function(){var e={};return e[n.PROP_TYPE]=this.type,e},interpolate:function(e,t){return this},isEqualTo:function(e){return l.LegacyCoreAssert.fail("subclass of PGMFilterSpec must implement isEqualTo",void 0,"PGMFilterSpec.isEqualTo","PGMFilterSpec.swift",80),!1}}}),n),a.PGMNullFilterSpec=(r=function e(){a.PGMFilterSpec.call(this,e.TYPE)},i={},s.defineClass({name:"PGMNullFilterSpec",ctor:r,superName:"PGMFilterSpec",statics:{TYPE:"NONE",INSTANCE:{get:function(){return void 0===i.INSTANCE&&(i.INSTANCE=new r),i.INSTANCE}}}}),r)},sq5L:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("iCxV"),l=o("fNpk"),c=o("rKjb"),u=o("djS+"),p=o("YFY8"),d=o("euLT"),h=o("Aj79"),f=o("b94u"),m=o("sIWg");i.PGMGraphVersion=a.defineEnum("PGMGraphVersion",{FirstPublicRelease:1e3}),i.PGMError=a.defineEnum("PGMError",{NO_VERSION:"NO_VERSION",BREAKING_VERSION:"BREAKING_VERSION",NO_ROOT_ENTITY:"NO_ROOT_ENTITY",CYCLIC_GRAPH:"CYCLIC_GRAPH",MISSING_ENTITY:"MISSING_ENTITY",MISSING_TEXT_STYLE:"MISSING_TEXT_STYLE",MISSING_FONT:"MISSING_FONT",UNKNOWN_ANIMATION:"UNKNOWN_ANIMATION",UNKNOWN_NODE_TYPE:"UNKNOWN_NODE_TYPE",UNKNOWN_MEDIA_TYPE:"UNKNOWN_MEDIA_TYPE",BAD_TEXT_STYLE:"BAD_TEXT_STYLE",BAD_FONT:"BAD_FONT",BAD_ANIMATION:"BAD_ANIMATION",BAD_TRANSFORM_ANIMATION:"BAD_TRANSFORM_ANIMATION",BAD_SHAPE:"BAD_SHAPE",BAD_MEDIA:"BAD_MEDIA",BAD_TEXT_ANIMATION:"BAD_TEXT_ANIMATION",BAD_REFERENCE:"BAD_REFERENCE",BAD_SHAPE_ANIMATION:"BAD_SHAPE_ANIMATION",BAD_NODE:"BAD_NODE",BAD_TEXT:"BAD_TEXT",BAD_FILTER_ANIMATION:"BAD_FILTER_ANIMATION",BAD_OPACITY_ANIMATION:"BAD_OPACITY_ANIMATION",BAD_CHILDREN_ENTRY:"BAD_CHILDREN_ENTRY",BAD_FILTER_SPEC:"BAD_FILTER_SPEC",BAD_CLIP:"BAD_CLIP",BAD_FUNCTION:"BAD_FUNCTION",BAD_TRANSFORMED_BOUNDS:"BAD_TRANSFORMED_BOUNDS"}),i.IPGMLog=a.defineProtocol("IPGMLog",{info:"(String) -> Void",warn:"(String) -> Void",error:"(PGMError, String) -> Void"}),i.PGMLogToCoreAssert=(n=function(e){this.prefix=e},r={},a.defineClass({name:"PGMLogToCoreAssert",ctor:n,statics:{INSTANCE:{get:function(){return void 0===r.INSTANCE&&(r.INSTANCE=new n("PGM: ")),r.INSTANCE}},_implements:function(e){return"IPGMLog"==e}},props:{info:function(e){var t=this;a.opt(s.Host.logging,(function(o){return o.info(t.prefix+e)}))},warn:function(e){var t=this;a.opt(s.Host.logging,(function(o){return o.info(t.prefix+"WARNING: "+e)}))},error:function(e,t){l.LegacyCoreAssert.fail(this.prefix+"ERROR_"+e+": "+t,void 0,"PGMLogToCoreAssert.error","PGMGraph.swift",75)}}}),n),i.PGMGraph=function(){var e=function e(t,o,n,r){this.root=t,this.rootRef=new h.PGMReference(t),this.bounds=o,this.duration=n,this.resources=r,this.canBeEncoded=e.validate(t)},t={};return a.defineClass({name:"PGMGraph",ctor:e,superName:"CoreObject",statics:{CURRENT_VERSION:{get:function(){return void 0===t.CURRENT_VERSION&&(t.CURRENT_VERSION=i.PGMGraphVersion.FirstPublicRelease),t.CURRENT_VERSION}},PROP_VERSION:"version",PROP_ROOT_ENTITY:"root-entity",PROP_ENTITIES:"entities",PROP_TEXT_STYLES:"text-styles",PROP_FONTS:"fonts",PROP_DURATION:"duration",PROP_BOUNDS:"bounds",PROP_RESOURCES:"resources",EMPTY:{get:function(){return void 0===t.EMPTY&&(t.EMPTY=new e(new d.PGMNullNode("root"),m.TheoRect.ONE_BY_ONE,0,f.PGMResourceProviderList.EMPTY)),t.EMPTY}},validate:function(e){var t={};return function e(o){var n;if(t[o.entity]=o,n=a.as(o,c.PGMComposite))for(var r=a.iter(n.children);!r.done;r.next()){var i,s=r.value;if(i=t[s.child.entity]){if(i!==s.child)return l.LegacyCoreAssert.fail("entity is used by more than one distinct node; graph will not persist properly",{entity:s.child.entity},"PGMGraph.validate","PGMGraph.swift",134),!1}else if(!e(s.child))return!1}return!0}(e)},decode:function(e,t){return void 0===t&&(t=null),new u.PGMGraphDecoder(e).decode(t||i.PGMLogToCoreAssert.INSTANCE)}},props:{visitByRef:function(e){e(this.rootRef),this.root.visitByRef(e)},findReferencesToEntity:function(e){var t=[];return this.visitByRef((function(o){o.child.entity==e&&t.push(o)})),t},encode:function(){return p.PGMGraphEncoder.encode(this)},isEqualTo:function(e){return e===this||this.duration==e.duration&&this.bounds.equal(e.bounds)&&this.root.isEqualTo(e.root)&&this.resources.isEqualTo(e.resources)},withRoot:function(t){return t===this.root?this:new e(t,this.bounds,this.duration,this.resources)},withBounds:function(t){return t.equal(this.bounds)?this:new e(this.root,t,this.duration,this.resources)},withDuration:function(t){return t==this.duration?this:new e(this.root,this.bounds,t,this.resources)},withResources:function(t){return t===this.resources?this:new e(this.root,this.bounds,this.duration,t)}}}),e}()},"t+nd":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("yGNn"),s=o("GINV");r.StorageSpecAdobeFont=(n=function e(t){this.fontID=t,s.StorageSpec.call(this,e.KIND)},i.defineClass({name:"StorageSpecAdobeFont",ctor:n,superName:"StorageSpec",statics:{KIND:"adobe-font",KEY_FONT_ID:"font-id",decodeSpec:function(e){var t;return null!=(t=i.as(e[n.KEY_FONT_ID],"String"))?new n(t):null}},props:{encode:function(){var e={};return e[s.StorageSpec.KEY_KIND]=n.KIND,e[n.KEY_FONT_ID]=this.fontID,e},read:function(){return a.CorePromise.reject("StorageSpecAdobeFont: read is a todo")},canRead:function(){return!0},readUsingContext:function(e){return this.read()}}}),n)},tGKA:function(e,t,o){var n,r,i,a,s=t,l=o("oAGj"),c=o("gXiO"),u=o("6ZWm"),p=o("iCxV"),d=o("fNpk"),h=o("3DEm"),f=o("oKlP"),m=o("sIWg");s.flip_affects_only_yscale=!1,s.TransformValuesOrdering=l.defineEnum("TransformValuesOrdering",{SKRT:0,RKST:1}),s.TransformValues=(n=function(e,t,o,n,r,i,a,s){this.ordering=e,this.xscale=t,this.yscale=o,this.skew=n,this.rotCosine=r,this.rotSine=i,this.tx=a,this.ty=s,c.CoreObject.call(this)},l.defineClass({name:"TransformValues",ctor:n,superName:"CoreObject",props:{description:{get:function(){var e=Math.acos(-1);return"sx: "+this.xscale+", sy: "+this.yscale+", angle: "+180*Math.atan2(this.rotSine,this.rotCosine)/e+" degs, skew: "+this.skew+", tx: "+this.tx+", ty: "+this.ty}}}}),n),s.ExtractedScale=(r=function(e,t){this.matrix=e,this.scale=t,c.CoreObject.call(this)},l.defineClass({name:"ExtractedScale",ctor:r,superName:"CoreObject"}),r),s.Matrix2D=(i=function(e,t,o,n,r,i){this.transformValuesRKST_=null,this.transformValues_=null,this.extractedScale_=null,this.inverse_=null,d.LegacyCoreAssert.isFalse(isNaN(e)||isNaN(t)||isNaN(o)||isNaN(n)||isNaN(r)||isNaN(i),"Matrix initialized with NaN values",void 0,"Matrix2D.init","Matrix2D.swift",78),d.LegacyCoreAssert.isFalse(l.isInfinite(e)||l.isInfinite(t)||l.isInfinite(o)||l.isInfinite(n)||l.isInfinite(r)||l.isInfinite(i),"Matrix initialized with infinite values",void 0,"Matrix2D.init","Matrix2D.swift",79),this.a=e,this.b=t,this.c=o,this.d=n,this.tx=r,this.ty=i,this.isIdentity=1==e&&0==t&&0==o&&1==n&&0==r&&0==i,c.CoreObject.call(this),0==this.determinant&&l.opt(p.Host.logging,(function(e){return e.warning("Creating a singular Matrix2D")}))},a={},l.defineClass({name:"Matrix2D",ctor:i,superName:"CoreObject",statics:{Identity:{get:function(){return void 0===a.Identity&&(a.Identity=new i(1,0,0,1,0,0)),a.Identity}},concat2:function(e,t){return new i(e.a*t.a+e.b*t.c,e.a*t.b+e.b*t.d,e.c*t.a+e.d*t.c,e.c*t.b+e.d*t.d,e.tx*t.a+e.ty*t.c+t.tx,e.tx*t.b+e.ty*t.d+t.ty)},scalingXYfromPoint:function(e,t,o){return i.translation(e.multiply(-1)).scaleXY(t,o).translate(e)},translation:function(e){return i.translationXY(e.x,e.y)},translationXY:function(e,t){return new i(1,0,0,1,e,t)},scaling:function(e){return i.scalingXY(e.x,e.y)},scalingXY:function(e,t){return new i(e,0,0,t,0,0)},uniformScaling:function(e){return new i(e,0,0,e,0,0)},rotation:function(e,t){var o=e,n=t,r=o*o+t*t;return 1!=r&&(o/=r=Math.sqrt(r),n/=r),new i(o,n,-n,o,0,0)},skewing:function(e){return new i(1,0,e,1,0,0)},fromArray:function(e){if(6!=e.length)return d.LegacyCoreAssert.fail("Matrix2D.decodeJson: Array doesn't have 6 elements.",void 0,"Matrix2D.fromArray","Matrix2D.swift",421),i.Identity;var t=l.as(e[0],"Double"),o=l.as(e[1],"Double"),n=l.as(e[2],"Double"),r=l.as(e[3],"Double"),a=l.as(e[4],"Double"),s=l.as(e[5],"Double");return null==t||null==o||null==n||null==r||null==a||null==s?(d.LegacyCoreAssert.fail("Matrix2D.decodeJson: Array doesn't have 6 numeric elements.",void 0,"Matrix2D.fromArray","Matrix2D.swift",432),i.Identity):new i(t,o,n,r,a,s)},decodeJson:function(e){var t;return(t=l.as(e,["Array","Any"]))?i.fromArray(t):i.Identity},calculateResizeTransform:function(e,t,o,n){var r=i.translation(f._negate_TheoPoint(e.eval(o)));if(n!=u.FitType.None){var a=t.width/e.width,l=t.height/e.height;n==u.FitType.ProportionalFit?l=a=Math.min(a,l):n==u.FitType.ProportionalFill&&(l=a=Math.max(a,l)),r=s._asterisk_Matrix2D_Matrix2D(r,i.scalingXY(a,l))}return r=s._asterisk_Matrix2D_Matrix2D(r,i.translation(t.eval(o)))}},props:{equal:function(e){return this.a==e.a&&this.b==e.b&&this.c==e.c&&this.d==e.d&&this.tx==e.tx&&this.ty==e.ty},finite:{get:function(){return isFinite(this.a)&&isFinite(this.b)&&isFinite(this.c)&&isFinite(this.d)&&isFinite(this.tx)&&isFinite(this.ty)}},determinant:{get:function(){return this.a*this.d-this.b*this.c}},preservesBoxes:{get:function(){return 0==this.b&&0==this.c||0==this.a&&0==this.d}},preservesBoxesNoSwap:{get:function(){return Math.abs(this.b)<1e-4&&Math.abs(this.c)<1e-4}},transformValues:{get:function(){return null==this.transformValues_&&(this.transformValues_=this.calculateTransformValuesSKRT()),this.transformValues_}},transformValuesRKST:{get:function(){return null==this.transformValuesRKST_&&(this.transformValuesRKST_=this.calculateTransformValuesRKST()),this.transformValuesRKST_}},extractedScale:{get:function(){return null==this.extractedScale_&&(this.extractedScale_=this.calculateExtractedScale()),this.extractedScale_}},precat:function(e){return i.concat2(e,this)},concat:function(e){return i.concat2(this,e)},translate:function(e){return this.concat(i.translation(e))},translateXY:function(e,t){return this.concat(i.translationXY(e,t))},scaleXY:function(e,t){return this.concat(i.scalingXY(e,t))},scaleXYfromPoint:function(e,t,o){return this.concat(i.scalingXYfromPoint(e,t,o))},rotate:function(e,t){return this.concat(i.rotation(e,t))},rotateTo:function(e,t){var o=e,n=t,r=e*e+t*t;1!=r&&(o/=r=Math.sqrt(r),n/=r);var a=this.transformValues,s=a.rotCosine,l=a.rotSine;return this.concat(new i(s,-l,l,s,0,0)).concat(new i(o,n,-n,o,0,0))},scaleTo:function(e,t){var o=this.transformValues,n=o.rotCosine,r=o.rotSine,a=this.concat(new i(n,-r,r,n,0,0));return a=(a=a.concat(new i(1,0,-o.skew,1,0,0))).concat(new i(1/o.xscale,0,0,1/o.yscale,0,0)),a=(a=(a=(a=new i(1,0,0,1,a.tx,a.ty)).concat(new i(e,0,0,t,0,0))).concat(new i(1,0,o.skew,1,0,0))).concat(new i(n,r,-r,n,0,0))},skewTo:function(e){var t=this.transformValues,o=t.rotCosine,n=t.rotSine,r=this.concat(new i(o,-n,n,o,0,0));return r=r.concat(new i(1,0,-t.skew,1,0,0)),r=(r=(r=new i(r.a,0,0,r.d,r.tx,r.ty)).concat(new i(1,0,e,1,0,0))).concat(new i(o,n,-n,o,0,0))},translateTo:function(e,t){return new i(this.a,this.b,this.c,this.d,e,t)},inverse:{get:function(){return null==this.inverse_&&(this.inverse_=this.calculateInverse()),this.inverse_}},transformPoint:function(e){return new f.TheoPoint(e.x*this.a+e.y*this.c+this.tx,e.x*this.b+e.y*this.d+this.ty)},transformLinear:function(e){return new f.TheoPoint(e.x*this.a+e.y*this.c,e.x*this.b+e.y*this.d)},transformRect:function(e){if(this.isIdentity)return e;var t=e.minX*this.a+e.minY*this.c+this.tx,o=e.minX*this.b+e.minY*this.d+this.ty,n=e.maxX*this.a+e.minY*this.c+this.tx,r=e.maxX*this.b+e.minY*this.d+this.ty,i=e.minX*this.a+e.maxY*this.c+this.tx,a=e.minX*this.b+e.maxY*this.d+this.ty,s=e.maxX*this.a+e.maxY*this.c+this.tx,l=e.maxX*this.b+e.maxY*this.d+this.ty;return new m.TheoRect(Math.min(Math.min(Math.min(t,n),i),s),Math.min(Math.min(Math.min(o,r),a),l),Math.max(Math.max(Math.max(t,n),i),s),Math.max(Math.max(Math.max(o,r),a),l))},transformPoints:function(e){for(var t=[],o=l.iter(e);!o.done;o.next()){var n=o.value;t.push(this.transformPoint(n))}return t},interpolateWith:function(e,t){return new i(this.a*(1-t)+e.a*t,this.b*(1-t)+e.b*t,this.c*(1-t)+e.c*t,this.d*(1-t)+e.d*t,this.tx*(1-t)+e.tx*t,this.ty*(1-t)+e.ty*t)},averageTranslationScale:function(e){if(0==l.toDouble(e.length))return l.opt(p.Host.logging,(function(e){return e.warning("averageTranslationScale: No matrices to average.")})),i.Identity;for(var t=[],o=[],n=[],r=[],a=l.iter(e);!a.done;a.next()){var s=a.value;t.push(s.tx),o.push(s.ty),n.push(s.a),r.push(s.d)}var c=h.MathUtils.getMean(t),u=h.MathUtils.getMean(o),d=h.MathUtils.getGeometricMean(n),f=h.MathUtils.getGeometricMean(r);return new i(d,0,0,f,c,u)},asArray:{get:function(){return[this.a,this.b,this.c,this.d,this.tx,this.ty]}},encode:function(){return d.LegacyCoreAssert.fail("Matrix2D: Use encodeJson(), not encode()",void 0,"Matrix2D.encode","Matrix2D.swift",453),[]},encodeJson:function(){return d.LegacyCoreAssert.isFalse(isNaN(this.a),"Can't persist NaN a value",void 0,"Matrix2D.encodeJson","Matrix2D.swift",458),d.LegacyCoreAssert.isFalse(isNaN(this.b),"Can't persist NaN b value",void 0,"Matrix2D.encodeJson","Matrix2D.swift",459),d.LegacyCoreAssert.isFalse(isNaN(this.c),"Can't persist NaN c value",void 0,"Matrix2D.encodeJson","Matrix2D.swift",460),d.LegacyCoreAssert.isFalse(isNaN(this.d),"Can't persist NaN d value",void 0,"Matrix2D.encodeJson","Matrix2D.swift",461),d.LegacyCoreAssert.isFalse(isNaN(this.tx),"Can't persist NaN tx value",void 0,"Matrix2D.encodeJson","Matrix2D.swift",462),d.LegacyCoreAssert.isFalse(isNaN(this.ty),"Can't persist NaN ty value",void 0,"Matrix2D.encodeJson","Matrix2D.swift",463),l.as([this.a,this.b,this.c,this.d,this.tx,this.ty],"AnyObject")},calculateTransformValuesSKRT:function(){var e=0,t=0,o=0,n=0,r=0,i=this.a*this.a+this.b*this.b;n=0==this.b?Math.abs(this.a):0==this.a?Math.abs(this.b):1==i?1:Math.sqrt(i);var a=this.a*this.d-this.b*this.c;return d.LegacyCoreAssert.isTrue(0==a||a<0||a>0,"determinant should be a number",void 0,"Matrix2D.calculateTransformValuesSKRT","Matrix2D.swift",495),!s.flip_affects_only_yscale&&a<0&&this.a<0&&(n=-n),0==a?(e=0,0!=n||(0==this.c&&0==this.d?(t=1,o=0,n=0,r=0):(n=0,0==this.c?(r=this.d,t=1,o=0):0==this.d?(r=this.c,t=0,o=-1):(r=Math.sqrt(this.c*this.c+this.d*this.d),t=this.d/r,o=-this.c/r)))):(e=(this.a*this.c+this.b*this.d)/a,t=this.a/n,o=this.b/n,1==t?o=0:1==o?t=0:-1==t?o=0:-1==o?t=0:0==o?t=t>0?1:-1:0==t&&(o=o>0?1:-1),r=i==a?n:i==-a?-n:0==this.b?this.a/n*this.d:0==this.a?-this.b/n*this.c:a/n),new s.TransformValues(s.TransformValuesOrdering.SKRT,n,r,e,t,o,this.tx,this.ty)},calculateTransformValuesRKST:function(){var e=0,t=0,o=0,n=0,r=0,i=this.b*this.b+this.d*this.d;r=0==this.b?Math.abs(this.d):0==this.d?Math.abs(this.b):1==i?1:Math.sqrt(i);var a=this.a*this.d-this.b*this.c;return d.LegacyCoreAssert.isTrue(0==a||a<0||a>0,"determinant should be a number",void 0,"Matrix2D.calculateTransformValuesRKST","Matrix2D.swift",609),a<0&&this.d<0&&(r=-r),0==a?(e=0,0!=r||(0==this.c&&0==this.d?(t=1,o=0,n=0,r=0):(n=0,0==this.c?(r=this.d,t=1,o=0):0==this.d?(r=this.c,t=0,o=-1):(r=Math.sqrt(this.c*this.c+this.d*this.d),t=this.d/r,o=-this.c/r)))):(e=(this.a*this.b+this.c*this.d)/a,t=this.d/r,o=this.b/r,1==t?o=0:1==o?t=0:-1==t?o=0:-1==o?t=0:0==o?t=t>0?1:-1:0==o&&(o=o>0?1:-1),n=i==a?r:i==-a?-r:0==this.b?this.d/r*this.a:0==this.d?-this.b/r*this.c:a/r),new s.TransformValues(s.TransformValuesOrdering.RKST,n,r,e,t,o,this.tx,this.ty)},calculateExtractedScale:function(){var e=this.transformValues,t=1,o=1,n=e.xscale,r=e.yscale;n<0&&(t=-1,n=-n),r<0&&(o=-1,r=-r);var a=this;return 1==n&&1==r||(a=new i(t,0,0,o,0,0).concat(new i(1,0,e.skew,1,0,0)).concat(new i(e.rotCosine,e.rotSine,-e.rotSine,e.rotCosine,0,0)).concat(i.translationXY(e.tx,e.ty))),new s.ExtractedScale(a,new f.TheoPoint(n,r))},calculateInverse:function(){var e=this.determinant;if(0==e)return null;var t=1/e;return new i(t*this.d,t*-this.b,t*-this.c,t*this.a,t*(this.c*this.ty-this.d*this.tx),t*(this.b*this.tx-this.a*this.ty))},asString:{get:function(){return"a: "+this.a+",b: "+this.b+",c: "+this.c+",d: "+this.d+",tx: "+this.tx+",ty: "+this.ty}},description:{get:function(){var e=this.transformValues;return"["+l.toDouble(this.a)+" "+l.toDouble(this.b)+" "+l.toDouble(this.c)+" "+l.toDouble(this.d)+" "+l.toDouble(this.tx)+" "+l.toDouble(this.ty)+"]sx: "+l.toDouble(e.xscale)+", sy: "+l.toDouble(e.yscale)+", angle: "+l.toDouble(180*Math.atan2(e.rotSine,e.rotCosine)/Math.acos(-1))+", skew: "+l.toDouble(e.skew)}}}}),i),s._equality_Matrix2D_Matrix2D=function(e,t){return e.equal(t)},s._asterisk_Matrix2D_Matrix2D=function(e,t){return s.Matrix2D.concat2(e,t)},s._asterisk_TheoRect_Matrix2D=function(e,t){return t.transformRect(e)},s._asterisk_TheoPoint_Matrix2D=function(e,t){return t.transformPoint(e)}},tlHl:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("xcIW"),s=o("sq5L"),l=o("bauG"),c=o("WGnI"),u=o("ZA1K"),p=o("s3Tu");r.PGMMedia=(n=function(e,t,o,n,r,i){this.contentID=i,c.PGMLeaf.call(this,e,t,o,n,r)},i.defineClass({name:"PGMMedia",ctor:n,superName:"PGMLeaf",statics:{PROP_CONTENT_ID:"content-id",decodeLeaf:function(e,t,o,r,c,d,h){var f,m,g;if(null!=(g=i.as(e[n.PROP_CONTENT_ID],"String")))switch(t){case"pgm-image":return new l.PGMImage(o,r,c,d,g);case"pgm-video":var y=(f=i.as(e[p.PGMVideo.PROP_OFFSET],"Double"))||null!=f?f:0,T=(m=i.as(e[p.PGMVideo.PROP_POSTER_TIME],"Double"))||null!=m?m:0;return new p.PGMVideo(o,r,c,d,g,y,T);case"pgm-audio":return new a.PGMAudio(o,r,c,g);case"pgm-svg":return new u.PGMSVG(o,r,c,d,g);default:return h.error(s.PGMError.UNKNOWN_MEDIA_TYPE,"not a valid media type: "+t),null}return h.error(s.PGMError.BAD_MEDIA,"missing content-id on media type"),null}},props:{isEqualTo:function(e){return this===e||!!(t=i.as(e,n))&&this.contentID==t.contentID&&c.PGMLeaf.prototype.isEqualTo.call(this,e);var t},encode:function(){var e=c.PGMLeaf.prototype.encode.call(this);return e[n.PROP_CONTENT_ID]=this.contentID,e}}}),n)},"tvh+":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("0GlD"),s=o("ko5Z"),l=o("SDMx"),c=o("xB/a"),u=o("fNpk");r.CoreContent=(n=function(e,t,o){void 0===o&&(o=null),this.kind=e,this.contentType=t,this.etag=o},i.defineClass({name:"CoreContent",ctor:n,statics:{KEY_KIND:"kind",KEY_CONTENT_TYPE:"content-type",KEY_ETAG:"etag",KEY_DATA:"data",decode:function(e){var t,o;if(null!=(t=i.as(e[n.KEY_KIND],"String"))&&null!=(o=i.as(e[n.KEY_CONTENT_TYPE],"String"))){var r=i.as(e[n.KEY_ETAG],"String");switch(t){case"json":return l.CoreContentJSON.decodePayload(e,o,r);case"string":return c.CoreContentString.decodePayload(e,o,r);case"binary":return a.CoreContentBinary.decodePayload(e,o,r);case"base64":return s.CoreContentBase64.decodePayload(e,o,r);default:return u.LegacyCoreAssert.fail("kind not recognized",{kind:t},"CoreContent.decode","CoreContent.swift",79),null}}return u.LegacyCoreAssert.fail("kind not encoded",void 0,"CoreContent.decode","CoreContent.swift",85),null}},props:{encode:function(){var e={};return e[n.KEY_KIND]=this.kind,e[n.KEY_CONTENT_TYPE]=this.contentType,null!=this.etag&&(e[n.KEY_ETAG]=this.etag),this.encodePayload(e),e},encodePayload:function(e){u.LegacyCoreAssert.fail("subclass must implement",void 0,"CoreContent.encodePayload","CoreContent.swift",57)},isEqualTo:function(e){return this.kind==e.kind&&this.contentType==e.contentType&&this.etag==e.etag}}}),n)},uYSz:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("yGNn"),s=o("fNpk"),l=o("GINV");r.StorageSpecExternalCC=(n=function e(t,o,n,r,i,a,c){s.LegacyCoreAssert.isTrue(null!=n||null!=r,"must specify either component ID or name",void 0,"StorageSpecExternalCC.init","StorageSpecExternalCC.swift",44),s.LegacyCoreAssert.isTrue(null==n||null==r,"cannot specify both component ID and name",void 0,"StorageSpecExternalCC.init","StorageSpecExternalCC.swift",45),this.syncGroup=t,this.documentID=o,this.componentID=n,this.componentName=r,this.contentType=i,this.version=a,this.etag=c,l.StorageSpec.call(this,e.KIND)},i.defineClass({name:"StorageSpecExternalCC",ctor:n,superName:"StorageSpec",statics:{KIND:"external-cc",BRANDKIT_SYNC_GROUP:"adobe-spark-authoring-contexts",POST_DOCUMENTS_SYNC_GROUP:"adobe-theo",KEY_SYNC_GROUP:"sync-group",KEY_DOCUMENT_ID:"document-id",KEY_COMPONENT_ID:"component-id",KEY_COMPONENT_NAME:"component-name",KEY_COMPONENT_VERSION:"component-version",KEY_CONTENT_TYPE:"content-type",KEY_ETAG:"etag",decodeSpec:function(e){var t,o;if(null!=(o=i.as(e[n.KEY_DOCUMENT_ID],"String"))){var r=(t=i.as(e[n.KEY_SYNC_GROUP],"String"))||null!=t?t:n.BRANDKIT_SYNC_GROUP;return new n(r,o,i.as(e[n.KEY_COMPONENT_ID],"String"),i.as(e[n.KEY_COMPONENT_NAME],"String"),i.as(e[n.KEY_CONTENT_TYPE],"String"),i.as(e[n.KEY_COMPONENT_VERSION],"Int"),i.as(e[n.KEY_ETAG],"String"))}return s.LegacyCoreAssert.fail("missing required parameters",void 0,"StorageSpecExternalCC.decodeSpec","StorageSpecExternalCC.swift",73),null}},props:{encode:function(){var e,t,o={};return o[l.StorageSpec.KEY_KIND]=n.KIND,o[n.KEY_SYNC_GROUP]=this.syncGroup,o[n.KEY_DOCUMENT_ID]=this.documentID,null!=(e=this.componentID)&&(o[n.KEY_COMPONENT_ID]=e),null!=(t=this.componentName)&&(o[n.KEY_COMPONENT_NAME]=t),null!=this.contentType&&(o[n.KEY_CONTENT_TYPE]=this.contentType),null!=this.version&&(o[n.KEY_COMPONENT_VERSION]=this.version),null!=this.etag&&(o[n.KEY_ETAG]=this.etag),o},isEqualTo:function(e){var t;return e===this||!!(t=i.as(e,n))&&this.syncGroup==t.syncGroup&&this.documentID==t.documentID&&this.componentID==t.componentID&&this.componentName==t.componentName&&this.contentType==t.contentType&&this.version==t.version&&this.etag==t.etag&&l.StorageSpec.prototype.isEqualTo.call(this,e)},canRead:function(){return!0},readUsingContext:function(e){var t;return null!=(t=this.componentID)?e.ccAPI.readComponent(this.syncGroup,this.documentID,t):a.CorePromise.reject("no support for reading named entities yet")},canWrite:function(){return!0},writeUsingContext:function(e,t){var o;return null!=(o=this.componentID)?null!=t.etag?e.ccAPI.updateComponent(this.syncGroup,this.documentID,o,t):e.ccAPI.pushNewComponent(this.syncGroup,this.documentID,o,t):a.CorePromise.reject("no support for writing named entities yet")}}}),n)},umUn:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("Zifs");r.PROPERTY_SPARK_ELEMENTID="sparkElementID",r.PROPERTY_SPARK_ROLES="sparkRoles",r.SHADE_ROLE_PREFIX="shade-",r.TheoColor=(n=function(){},i.defineClass({name:"TheoColor",ctor:n,superName:"CoreObject",statics:{SPARK_COLOR_ROLE_PRIMARY:{get:function(){return"base-color"}},SPARK_COLOR_ROLE_SECONDARY:{get:function(){return"color"}},SPARK_COLOR_ROLE_SHADE0:{get:function(){return"shade-0"}},SPARK_COLOR_ROLE_SHADE1:{get:function(){return"shade-1"}},SPARK_COLOR_ROLE_SHADE2:{get:function(){return"shade-2"}},SPARK_COLOR_ROLE_SHADE3:{get:function(){return"shade-3"}},SPARK_COLOR_ROLE_SHADE4:{get:function(){return"shade-4"}},SPARK_COLOR_ROLE_SHADE5:{get:function(){return"shade-5"}},SPARK_COLOR_ROLE_SHADE6:{get:function(){return"shade-6"}},decodeJson:function(e){if(null==e)return null;var t=i.as(e,["Dictionary","String","Any"]);if(null==t)return a.LegacyCoreAssert.fail("SolidColor.decodeJson: object passed isn't a dictionary",void 0,"TheoColor.decodeJson","TheoColor.swift",146),null;var o=s.SolidColor.decodeJson(e);if(null!=o){var l=i.as(t[r.PROPERTY_SPARK_ELEMENTID],"String"),c=i.clone(i.as(t[r.PROPERTY_SPARK_ROLES],["Array","String"]));return n.init_5344(o,l,c)}return null}},props:{init_5344:function(e,t,o){void 0===t&&(t=null),void 0===o&&(o=null),this.rgbColor=e,this.sparkElementID=t,this.sparkRoles=i.clone(o)},init_bb45:function(e){var t=new s.SolidColor(e.red/255,e.green/255,e.blue/255,e.alpha);this.rgbColor=t,this.sparkElementID=e.id,this.sparkRoles=i.clone(e.acRoles)},getBrandkitShadeRole:function(){if(null==this.sparkRoles)return null;for(var e=i.iter(this.sparkRoles);!e.done;e.next()){var t=e.value;switch(t){case"shade-0":case"shade-1":case"shade-2":case"shade-3":case"shade-4":case"shade-5":case"shade-6":return t;default:continue}}return null},isBrandkitPrimaryColor:function(){if(null==this.sparkRoles)return!1;for(var e=i.iter(this.sparkRoles);!e.done;e.next())switch(e.value){case"base-color":return!0;default:continue}return!1},isBrandkitSecondaryColor:function(){if(null==this.sparkRoles)return!1;for(var e=i.iter(this.sparkRoles);!e.done;e.next())switch(e.value){case"color":return!0;default:continue}return!1},isBrandkitShade:function(){if(null==this.sparkRoles)return!1;for(var e=i.iter(this.sparkRoles);!e.done;e.next())switch(e.value){case"shade-0":case"shade-1":case"shade-2":case"shade-3":case"shade-4":case"shade-5":case"shade-6":return!0;default:continue}return!1},isBrandkitColor:function(){return null!=this.sparkRoles||null!=this.sparkElementID},encodeJson:function(){var e=this.rgbColor.encodeJson();return null!=this.sparkElementID&&(e[r.PROPERTY_SPARK_ELEMENTID]=this.sparkElementID),null!=this.sparkRoles&&(e[r.PROPERTY_SPARK_ROLES]=i.clone(this.sparkRoles)),e},asString:{get:function(){var e;return"Color: "+this.rgbColor.asString+", id: "+((e=this.sparkElementID)||null!=e?e:"")}},isEqual:function(e){var t;return!!(t=i.as(e,n))&&i.eq(s._equality_SolidColor_SolidColor,t.rgbColor,this.rgbColor)&&t.sparkElementID==this.sparkElementID}}}),n),r._equality_TheoColor_TheoColor=function(e,t){return e.isEqual(t)}},"uv/Z":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"TheoPath":{"className":"TheoPath","type":"object","properties":{"type":{"type":"string","enum":["empty","rect","ellipse","arbitrary"]}}},"TheoPathTypes":{"oneOf":[{"$ref":"#/definitions/TheoEmptyPath"},{"$ref":"#/definitions/TheoRectanglePath"},{"$ref":"#/definitions/TheoEllipsePath"},{"$ref":"#/definitions/TheoArbitraryPath"}]},"TheoEmptyPath":{"className":"TheoEmptyPath","allOf":[{"$ref":"#/definitions/TheoPath"},{"className":"TheoEmptyPath","properties":{"type":{"enum":["empty"]}}}]},"TheoRectanglePath":{"className":"TheoRectanglePath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["rect"]},"coords":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoEllipsePath":{"className":"TheoEllipsePath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["ellipse"]},"coords":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoArbitraryPath":{"className":"TheoArbitraryPath","allOf":[{"$ref":"#/definitions/TheoPath"},{"properties":{"type":{"enum":["arbitrary"]},"fillRule":{"type":"string","enum":["none","nonzero","evenodd"]},"endType":{"type":"string","enum":["butt","round","square"]},"joinType":{"type":"string","enum":["miter","round","bevel"]},"strokeWeight":{"type":"number"},"miterLimit":{"type":"number"},"ops":{"type":"array","items":{"oneOf":[{"type":"string"},{"type":"number"}]}}}}]},"TheoArtworkNode":{"className":"TheoArtworkNode","type":"object","properties":{"type":{"type":"string"}},"required":["type"]},"TheoArtworkNodeTypes":{"oneOf":[{"$ref":"#/definitions/TheoArtworkShape"},{"$ref":"#/definitions/TheoArtworkClipGroup"},{"$ref":"#/definitions/TheoArtworkGroup"}]},"TheoArtworkShape":{"className":"TheoArtworkShape","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["shape"]},"path":{"$ref":"#/definitions/TheoPathTypes"},"paths":{"type":"array","items":{"$ref":"#/definitions/TheoPathTypes"}},"fill-color-role":{"$ref":"Color.json#/definitions/ColorRole"},"stroke-color-role":{"$ref":"Color.json#/definitions/ColorRole"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"stroke-color":{"$ref":"Color.json#/definitions/SolidColor"},"stroke-width":{"type":"number","default":0},"override-bounds":{"$ref":"Root.json#/definitions/TheoRect"}}}]},"TheoArtworkGroup":{"className":"TheoArtworkGroup","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["group"]},"stroke-width":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"},"description":"The constant in code is defined as PROPERTY_NODES but its value is \\"stroke-width\\""}}}]},"TheoArtworkClipGroup":{"className":"TheoArtworkClipGroup","allOf":[{"$ref":"#/definitions/TheoArtworkNode"},{"properties":{"type":{"enum":["clip-group"]},"path":{"$ref":"#/definitions/TheoPathTypes"},"stroke-width":{"type":"array","items":{"$ref":"#/definitions/TheoArtworkNodeTypes"},"description":"The constant in code is defined as PROPERTY_NODES but its value is \\"stroke-width\\""}}}]}}}')},vMj0:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"Forma":{"className":"Forma","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"placement":{"$ref":"Root.json#/definitions/Matrix2D"},"animation":{"$ref":"Animation.json#/definitions/FormaAnimation"},"moveable":{"type":"boolean"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"controller-kind":{"type":"string","default":""},"controller-metadata":{"$ref":"#/definitions/ControllerMetadata"},"intent":{"type":"string","enum":["logo","pattern","icon","floating-shape","grid-cell","sticker","floating-image","temp-image-crop","temp-image-refine-cutout","image-mask","inferred-temp-group","user-group","cutout-mask"]},"source":{"type":"string"},"tags":{"type":"object","patternProperties":{"^.*$":{"type":"string"}}}},"required":["id","path","placement"]}]},"ControllerMetadata":{"className":"ControllerMetadata","type":"object","properties":{"size":{"$ref":"Root.json#/definitions/TheoSize"},"backing-shape-id":{"type":"string"},"content-id":{"type":"string"},"wrapper-id":{"type":"string"},"highlightMethod":{"type":"integer"},"charstyle-ranges":{"type":"object","properties":{"Highlight":{"type":"array","items":{"type":"integer"}}}},"weighted-ranges":{"type":"array","items":{"type":"integer"}}}},"NonRootFormaTypes":{"oneOf":[{"$ref":"#/definitions/GroupForma"},{"$ref":"#/definitions/TextForma"},{"$ref":"#/definitions/ShapeForma"},{"$ref":"#/definitions/FrameForma"},{"$ref":"#/definitions/ImageForma"},{"$ref":"#/definitions/VectorForma"},{"$ref":"#/definitions/VideoForma"},{"$ref":"#/definitions/SmartGroupForma"}]},"GroupFormaBase":{"allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"character-styles":{"type":"object","description":"lockupStyle.characterStyles","patternProperties":{"^.*$":{"$ref":"Styles.json#/definitions/LockupStyle"}}},"character-ranges":{"type":"object","description":"lockupStyle.characterStyles","patternProperties":{"^.*$":{"type":"array","items":{"type":"integer"}}}},"children":{"type":"array","items":{"$ref":"#/definitions/NonRootFormaTypes"}}}}]},"GroupForma":{"className":"GroupForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"kind":{"enum":["group"]}},"required":["kind"]}]},"RootForma":{"className":"RootForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"root-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"kind":{"enum":["Root"]}},"required":["kind"]}]},"FrameForma":{"className":"FrameForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"clipmode":{"type":"boolean","default":true},"cropRatioId":{"type":"string","default":"Free"},"kind":{"enum":["Frame"]}},"required":["kind"]}]},"SmartGroupForma":{"className":"SmartGroupForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"kind":{"enum":["smart-group"]}},"required":["kind"]}]},"ImageFormaBase":{"allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"image-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"content-id":{"type":"string","default":""}}}]},"ImageForma":{"className":"ImageForma","allOf":[{"$ref":"#/definitions/ImageFormaBase"},{"properties":{"kind":{"enum":["Image"]}},"required":["kind"]}]},"VideoForma":{"className":"VideoForma","allOf":[{"$ref":"#/definitions/ImageFormaBase"},{"properties":{"video-content-id":{"type":"string","default":""},"kind":{"enum":["Video"]}},"required":["kind"]}]},"ShapeForma":{"className":"ShapeForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"artwork":{"$ref":"Artwork.json#/definitions/TheoArtworkNodeTypes"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"content-id":{"type":"string","default":""},"shape-id":{"type":"string"},"size":{"$ref":"Root.json#/definitions/TheoSize"},"slice-box":{"$ref":"Root.json#/definitions/TheoRect"},"content-region":{"$ref":"Root.json#/definitions/TheoRect"},"text-box":{"$ref":"Root.json#/definitions/TheoRect"},"prescale":{"type":"number"},"kind":{"enum":["Shape"]}},"required":["kind"]}]},"TextForma":{"className":"TextForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"text":{"$ref":"Text.json#/definitions/TextModel"},"text-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"range-in-lockup":{"$ref":"Text.json#/definitions/TextRange"},"row-index":{"type":"integer","default":0},"kind":{"enum":["Text"]}},"required":["text","kind"]}]},"VectorForma":{"className":"VectorForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"content-id":{"type":"string","default":""},"size":{"$ref":"Root.json#/definitions/TheoSize"},"color":{"$ref":"Color.json#/definitions/SolidColor"},"kind":{"enum":["Vector"]}},"required":["kind"]}]},"FormaPageManifestData":{"className":"FormaPageManifestData","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["forma-document"]},"kind":{"type":"string"},"size":{"$ref":"Root.json#/definitions/TheoSize"},"size-id":{"type":"string","default":"Instagram"}}}]},"FormaPage":{"className":"FormaPage","allOf":[{"$ref":"#/definitions/FormaPageManifestData"},{"type":"object","properties":{"template-id":{"type":"string","default":""},"original-size-id":{"type":"string","default":"Unknown"},"custom-size-format":{"type":"integer","default":0},"custom-size-ppi":{"type":"number","default":300},"export-data":{"$ref":"#/definitions/FormaPageExportData"},"color-library":{"$ref":"Color.json#/definitions/ColorLibrary"},"children":{"type":"array","items":{"$ref":"#/definitions/RootForma"},"maxItems":1}},"manifest-properties":["size","size-id","original-size-id"],"required":["id","color-library","size-id"]}]},"FormaPageExportData":{"className":"FormaPageExportData","type":"object","properties":{"dimensions":{"$ref":"Root.json#/definitions/TheoSize"},"format":{"type":"integer","default":0},"ppi":{"type":"number"}}}}}')},vPou:function(e,t,o){var n=t,r=o("oAGj");n.HapticStyle=r.defineEnum("HapticStyle",{LightFeedback:0,MediumFeedback:1,HeavyFeedback:2}),n.HostDeviceUtilsProtocol=r.defineProtocol("HostDeviceUtilsProtocol",{prepareHapticFeedback:"(HapticStyle) -> Void",triggerHapticFeedback:"() -> Void"})},vTQu:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("smUN"),l=o("sq5L"),c=o("Zifs");r.PGMMaskFilterSpec=(n=function e(t){void 0===t&&(t=c.SolidColor.BLACK),this.matte=t,s.PGMFilterSpec.call(this,e.TYPE)},i.defineClass({name:"PGMMaskFilterSpec",ctor:n,superName:"PGMFilterSpec",statics:{TYPE:"PGMMaskFilterSpec",PROP_MATTE:"matte",decodeSpec:function(e,t){var o;return(o=c.SolidColor.decodeJson(i.as(e[n.PROP_MATTE],"AnyObject")))?new n(o):(t.error(l.PGMError.BAD_FILTER_SPEC,"PGMMaskFilterSpec: missing parameter(s)"),null)}},props:{encode:function(){var e=s.PGMFilterSpec.prototype.encode.call(this);return e[n.PROP_MATTE]=this.matte.encodeJson(),e},isEqualTo:function(e){return this===e||!!(t=i.as(e,n))&&i.eq(c._equality_SolidColor_SolidColor,this.matte,t.matte);var t},interpolate:function(e,t){return t<=0?this:t>=1?e:(o=i.as(e,n))?new n(this.matte.interpolate(o.matte,t)):(a.LegacyCoreAssert.fail("can't interpolate to a different function spec type",void 0,"PGMMaskFilterSpec.interpolate","PGMMaskFilterSpec.swift",64),this);var o}}}),n)},"wD4/":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"ImageFilter":{"className":"ImageFilter","type":"object","properties":{"kind":{"type":"string"},"name":{"type":"string","default":""}}},"ImageFilterTypes":{"oneOf":[{"$ref":"#/definitions/AlphaBlendFilter"},{"$ref":"#/definitions/CompositeFilter"}]},"AlphaBlendFilter":{"className":"AlphaBlendFilter","allOf":[{"$ref":"#/definitions/ImageFilter"},{"properties":{"kind":{"enum":["AlphaBlend"]},"mix":{"type":"number"},"filter1":{"$ref":"#/definitions/ImageFilterTypes"},"filter2":{"$ref":"#/definitions/ImageFilterTypes"}},"required":["kind"]}]},"CompositeFilter":{"className":"CompositeFilter","allOf":[{"$ref":"#/definitions/ImageFilter"},{"properties":{"kind":{"enum":["CompositeFilter"]},"mix":{"type":"number","default":1},"blend":{"type":"string","default":"normal"},"grayscale":{"type":"boolean","default":false},"contrast":{"type":"number","default":1},"color-operation":{"type":"string","default":""},"saturation-offset":{"type":"number","default":0},"brightness-offset":{"type":"number","default":0},"blur-radius":{"type":"number","default":0},"reduce-contrast":{"type":"boolean","description":"If true, contrast == 0.5"}},"required":["kind"]}]}}}')},"wH/i":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("fNpk"),s=o("5D0C"),l=o("7hc0"),c=o("KB91");r.PGMMediaPlayAnimation=(n=function e(t){s.PGMAnimation.call(this,e.TYPE,t)},i.defineClass({name:"PGMMediaPlayAnimation",ctor:n,superName:"PGMAnimation",statics:{TYPE:"pgm-anim-media-play",decodeAnimation:function(e,t,o){return new n(t)}},props:{encode:function(){return s.PGMAnimation.prototype.encode.call(this)},interpolate:function(e){a.LegacyCoreAssert.isTrue(this.timeFn.domain.contains(e),"time to interpolate not within time function domain",void 0,"PGMMediaPlayAnimation.interpolate","PGMMediaPlayAnimation.swift",58);var t,o=l.PGMAnimationUtils.bound01(this.timeFn.apply(e));return(t=i.as(this.timeFn,c.PGMLoopingFunction))?t.applyU(o):this.timeFn.domain.applyU(o)-this.timeFn.domain.start}}}),n)},wRT5:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"ContentNode":{"className":"ContentNode","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"tags":{"type":"object","patternProperties":{"^.*$":{"type":"string"}}}},"required":["id","path"]}]},"NonRootContentNodeTypes":{"oneOf":[{"$ref":"#/definitions/GroupContentNode"},{"$ref":"#/definitions/ImageContentNode"},{"$ref":"#/definitions/TextContentNode"},{"$ref":"#/definitions/VectorContentNode"},{"$ref":"#/definitions/VideoContentNode"}]},"GroupContentNodeBase":{"allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"children":{"type":"array","items":{"$ref":"#/definitions/NonRootContentNodeTypes"}}}}]},"GroupContentNode":{"className":"GroupContentNode","allOf":[{"$ref":"#/definitions/GroupContentNodeBase"},{"properties":{"kind":{"enum":["group"]}},"required":["kind"]}]},"RootContentNode":{"className":"RootContentNode","allOf":[{"$ref":"#/definitions/GroupContentNodeBase"},{"properties":{"kind":{"enum":["root"]}},"required":["kind"]}]},"ImageColorData":{"className":"ImageColorData","type":"object","properties":{"red":{"type":"number"},"green":{"type":"number"},"blue":{"type":"number"},"alpha":{"type":"number"},"coverage":{"type":"number"}}},"ImageContentNode":{"className":"ImageContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["image"]},"pixel-width":{"type":"integer"},"pixel-height":{"type":"integer"},"image-has_alpha":{"type":"boolean"},"image-color-data":{"type":"array","items":{"$ref":"#/definitions/ImageColorData"}},"saliency-width":{"type":"integer"},"saliency-height":{"type":"integer"},"saliency-data":{"type":"array","items":{"type":"number"}},"edge-data":{"type":"array","items":{"type":"number"}},"focus-region":{"$ref":"Root.json#/definitions/TheoRect"}},"required":["kind"]}]},"TextContentNode":{"className":"TextContentNode","allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"kind":{"enum":["text"]},"text-model":{"$ref":"Text.json#/definitions/ContentTextModel"}},"manifest-properties":["text-model"],"required":["kind"]}]},"MediaMetadata":{"className":"MediaMetadata","type":"object","properties":{"search":{"type":"string"},"type":{"type":"string"},"source_name":{"type":"string"},"source_url":{"type":"string"},"owner":{"type":"string"},"asset_id":{"type":"string"},"creator_user_id":{"type":"string"},"creator_display_name":{"type":"string"},"design_intent":{"type":"string"},"source":{"type":"string"},"photo_name":{"type":"string"},"tags":{"type":"string"},"library_id":{"type":"string"},"library_name":{"type":"string"},"created_date":{"type":"number"},"modified_date":{"type":"number"},"search_props":{"type":"string"},"stock_collection_type":{"type":"string"}}},"URLBasedContentNode":{"className":"URLBasedContentNode","allOf":[{"$ref":"#/definitions/ContentNode"},{"properties":{"data-url":{"type":"string"},"mimetype":{"type":"string"},"element-id":{"type":"string"},"roles":{"type":"array","items":{"type":"string"}},"components":{"type":"array","items":{"type":"object","properties":{"url":{"type":"string"},"id":{"type":"string"},"length":{"type":"integer"},"name":{"type":"string"},"path":{"type":"string"},"mimeType":{"type":"string"},"etag":{"type":"string"}}},"maxItems":1},"media-metadata":{"$ref":"#/definitions/MediaMetadata"},"local-identifier":{"type":"string"}},"manifest-properties":["media-metadata"]}]},"VectorContentNode":{"className":"VectorContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["vector"]},"size":{"$ref":"Root.json#/definitions/TheoSize"}},"required":["kind"]}]},"VideoContentNode":{"className":"VideoContentNode","allOf":[{"$ref":"#/definitions/URLBasedContentNode"},{"properties":{"kind":{"enum":["video"]},"width":{"type":"integer"},"height":{"type":"integer"},"duration":{"$ref":"Root.json#/definitions/TheoTime"},"original-duration":{"$ref":"Root.json#/definitions/TheoTime"},"offset-in-original":{"$ref":"Root.json#/definitions/TheoTime"},"time-samples":{"type":"array","items":{"$ref":"Root.json#/definitions/TheoTime"}}},"required":["kind"]}]}}}')},wYGt:function(e,t,o){var n,r,i,a,s,l,c,u,p,d,h,f,m,g=t,y=o("oAGj"),T=o("Tq01"),A=o("wpCo"),C=o("4mEG"),_=o("c9Jm"),S=o("CWW7"),P=o("yGNn"),F=o("jo4Y"),v=o("FNB+"),R=o("cmoc"),b=o("pnSN"),E=o("iCxV"),N=o("xWmh"),k=o("bqbo"),D=o("U010"),I=o("fdtz"),M=o("lmwz"),x=o("c+uM"),w=o("VkKB"),O=o("djAF"),L=o("cRpU"),B=o("Vm85"),G=o("8t9B"),q=o("RkYL"),j=o("LGJg"),X=o("zjod");g.AddTextTest=(n=function(){this.actionSequence_AddText=[function(){return new C.AddTextContentAction("Dog")}],this.text_="Dog",this.rootForma_=null,_.ActionTestBase.call(this)},y.defineClass({name:"AddTextTest",ctor:n,superName:"ActionTestBase",props:{hasText:function(){var e=this,t=!1;return y.opt(this.rootForma_,(function(o){return o.visitAll(v.FormaTraversal.PreOrder,(function(o){var n,r;(n=y.as(o,b.GroupForma))&&(r=y.as(n.controller,G.TypeLockupController))&&r.text==e.text_&&(t=!0)}))})),t},setUpActionSequence:function(e,t,o){this.rootForma_=o.firstPage.root},validateAfterActionSequence:function(e,t){XCTAssertTrue(this.hasText())},validateAfterUndo:function(e,t){XCTAssertFalse(this.hasText())},validateAfterRedo:function(e,t){XCTAssertTrue(this.hasText())}}}),n),g.AddTextOverImageBackgroundTest=(r=function(){this.text_="Lorem ipsum dolor set",this.actionSequence_AddText=[function(){return new C.AddTextContentAction("Lorem ipsum dolor set")}],this.rootForma_=null,_.ActionTestBase.call(this)},y.defineClass({name:"AddTextOverImageBackgroundTest",ctor:r,superName:"ActionTestBase",props:{canRunActionSequence:function(e,t,o){return y.clone(o.firstPage.root.filterWithCallback((function(e){return M.ImageFacade.isPotentialBackgroundImage(e)}))).length>0},hasText:function(){var e=this,t=!1;return y.opt(this.rootForma_,(function(o){return o.visitAll(v.FormaTraversal.PreOrder,(function(o){var n,r;(n=y.as(o,b.GroupForma))&&(r=y.as(n.controller,G.TypeLockupController))&&r.text==e.text_&&(t=!0)}))})),t},prepareDocument:function(e,t){this.rootForma_=e.firstPage.root;var o=y.clone(e.firstPage.root.filterWithCallback((function(e){return M.ImageFacade.isPotentialBackgroundImage(e)})));XCTAssertTrue(o.length>0);var n=function(){var t=y.clone(e.firstPage.root.filterWithCallback((function(e){return null!=e.controller&&e.controller.floating})));return new F.DeleteAction(t,!0)};if(o.length>0){var r=o.shift(),i=function(){return y.opt(e.controller,(function(e){return e.selection.replaceSelection(r)})),new k.SetImageAsBackgroundAction};return o.length>0?P.CorePromise.resolve([function(){return new F.DeleteAction(o,!0)},i,n]):P.CorePromise.resolve([i,n])}return P.CorePromise.resolve([n])},validateAfterActionSequence:function(e,t){XCTAssertTrue(this.hasText())},validateAfterUndo:function(e,t){XCTAssertFalse(this.hasText())},validateAfterRedo:function(e,t){XCTAssertTrue(this.hasText())}}}),r),g.ReplaceTextTest=(i=function(){this.actionSequence_ReplaceText=[],this.initialText_="Initial...",this.finalText_="Final!",this.rootForma_=null,_.ActionTestBase.call(this)},y.defineClass({name:"ReplaceTextTest",ctor:i,superName:"ActionTestBase",props:{textForma:{get:function(){return y.first(y.opt(y.as(this.getActionResult(0),T.FormaActionResult),(function(e){return e.formae})))}},hasInitialText:function(){var e=this,t=!1;return y.opt(this.rootForma_,(function(o){return o.visitAll(v.FormaTraversal.PreOrder,(function(o){var n,r;(n=y.as(o,b.GroupForma))&&(r=y.as(n.controller,G.TypeLockupController))&&r.text==e.initialText_&&(t=!0)}))})),t},hasFinalText:function(){var e=this,t=!1;return y.opt(this.rootForma_,(function(o){return o.visitAll(v.FormaTraversal.PreOrder,(function(o){var n,r;(n=y.as(o,b.GroupForma))&&(r=y.as(n.controller,G.TypeLockupController))&&r.text==e.finalText_&&(t=!0)}))})),t},populateActionSequence:function(e,t,o){var n=this;return P.CorePromise.resolve(e.concat([function(){return new C.AddTextContentAction(n.initialText_)},function(){return new L.SetTextAction(n.finalText_,n.textForma)}]))},setUpActionSequence:function(e,t,o){this.rootForma_=o.firstPage.root},validateAfterActionSequence:function(e,t){XCTAssertTrue(this.hasFinalText()),XCTAssertFalse(this.hasInitialText())},validateAfterUndo:function(e,t){XCTAssertFalse(this.hasFinalText()),XCTAssertFalse(this.hasInitialText())},validateAfterRedo:function(e,t){XCTAssertTrue(this.hasFinalText()),XCTAssertFalse(this.hasInitialText())}}}),i),g.ReplaceTextTestStrategies=(a=function(){this.actionSequence_ReplaceAuto=[],this.actionSequence_ReplacePreventOverlap=[],this.actionSequence_ReplacePreserveWidth=[],this.actionSequence_ReplaceBalanced=[],_.ActionTestBase.call(this)},y.defineClass({name:"ReplaceTextTestStrategies",ctor:a,superName:"ActionTestBase",statics:{suffixText_:" more words.\n And then some."},props:{tearDown:function(){this.lockupForma_=null,_.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(e,t,o){var n;return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(o,(function(e){return y.opt(e.controller,(function(e){return e.kind==G.TypeLockupController.KIND}))}))),null!=this.lockupForma_&&!("actionSequence_ReplaceBalanced"==t&&((n=y.opt(y.opt(this.lockupForma_,(function(e){return e.controller})),(function(e){return e.userGroupChild})))||null!=n)&&n)},prepareDocument:function(e,t){var o=this,n=[];return"actionSequence_ReplaceBalanced"==t&&B.TextFacade.getLayoutForForma(this.lockupForma_)!=x.LockupLayout.Standard&&n.push((function(){return y.opt(e.controller,(function(e){return e.selection.replaceSelection(o.lockupForma_)})),new L.ChangeTextLayoutAndAlignmentAction(x.LockupLayout.Standard,x.LockupAlignment.Center)})),P.CorePromise.resolve(n)},populateActionSequence:function(e,t,o){var n=this;return P.CorePromise.resolve(e.concat([function(){var e,r=n.lockupForma_.controller.text+a.suffixText_;switch(t){case"actionSequence_ReplaceAuto":e=B.ReplaceTextStrategy.Auto;break;case"actionSequence_ReplacePreventOverlap":e=B.ReplaceTextStrategy.PreventOverlap;break;case"actionSequence_ReplacePreserveWidth":e=B.ReplaceTextStrategy.PreserveWidth;break;case"actionSequence_ReplaceBalanced":e=B.ReplaceTextStrategy.Balanced;break;default:e=B.ReplaceTextStrategy.Auto}return y.opt(o.controller,(function(e){return e.selection.replaceSelection(n.lockupForma_)})),new L.SetTextAction(r,n.lockupForma_,void 0,e)}]))}}}),a),g.AddImageTest=(s=function(){this.actionSequence_AddImage=[],this.imageURL_="",this.imageMimeType_="",this.imageWidth_=0,this.imageHeight_=0,this.rootForma_=null,_.ActionTestBase.call(this)},y.defineClass({name:"AddImageTest",ctor:s,superName:"ActionTestBase",props:{hasImage:function(){var e=this,t=!1;return y.opt(this.rootForma_,(function(o){return o.visitAll(v.FormaTraversal.PreOrder,(function(o){var n,r;(n=y.as(o,I.ImageForma))&&(r=n.contentNode)&&r.url==e.imageURL_&&r.mimeType==e.imageMimeType_&&r.pixelWidth==e.imageWidth_&&r.pixelHeight==e.imageHeight_&&(t=!0)}))})),t},populateActionSequence:function(e,t,o){var n=this,r=o.firstPage;return this.imageDataForAsset("dog1.jpeg").then((function(e){var t;if(t=y.as(e,N.ActionTestImageData)){var o=new S.AddFormaParams(T.ControllerSettingsBehaviorEnum.SetControllerSettings);return n.imageURL_=t.url,n.imageMimeType_="image/jpeg",n.imageWidth_=t.width,n.imageHeight_=t.height,P.CorePromise.resolve([function(){return new C.AddImageContentAction(r,n.imageURL_,n.imageMimeType_,n.imageWidth_,n.imageHeight_,!1,w.MediaMetadata.init_4d41(),null,null,o)}])}return XCTFail("Could not get image data for AddImageTest"),P.CorePromise.resolve([])}))},setUpActionSequence:function(e,t,o){this.rootForma_=o.firstPage.root},validateAfterActionSequence:function(e,t){XCTAssertTrue(this.hasImage())},validateAfterUndo:function(e,t){XCTAssertFalse(this.hasImage())},validateAfterRedo:function(e,t){XCTAssertTrue(this.hasImage())}}}),s),g.ReplaceImageTest=(l=function(){this.originalImageURL_="",this.originalImageMimeType_="",this.originalImageWidth_=0,this.originalImageHeight_=0,this.replacementImageURL_="",this.replacementImageMimeType_="",this.replacementImageWidth_=0,this.replacementImageHeight_=0,this.rootForma_=null,this.testPage_=null,this.actionSequence_ReplaceImage=[],_.ActionTestBase.call(this)},y.defineClass({name:"ReplaceImageTest",ctor:l,superName:"ActionTestBase",props:{imageForma:{get:function(){return y.first(y.opt(y.as(this.getActionResult(0),T.FormaActionResult),(function(e){return e.formae})))}},hasImage:function(){var e=this,t=!1;return y.opt(this.rootForma_,(function(o){return o.visitAll(v.FormaTraversal.PreOrder,(function(o){var n,r;(n=y.as(o,I.ImageForma))&&(r=n.contentNode)&&(XCTAssertNotEqual(e.originalImageURL_,r.url),r.url==e.replacementImageURL_&&r.mimeType==e.replacementImageMimeType_&&r.pixelWidth==e.replacementImageWidth_&&r.pixelHeight==e.replacementImageHeight_&&(t=!0))}))})),t},populateActionSequence:function(e,t,o){var n,r=this,i=o.firstPage;return this.imageDataForAsset("dog1.jpeg").then((function(t){var o;return(o=y.as(t,N.ActionTestImageData))?(r.originalImageURL_=o.url,r.originalImageMimeType_="image/jpeg",r.originalImageWidth_=o.width,r.originalImageHeight_=o.height,r.imageDataForAsset("bird_in_snow.jpg").then((function(t){var o;return(o=y.as(t,N.ActionTestImageData))?(r.replacementImageURL_=o.url,r.replacementImageMimeType_="image/jpeg",r.replacementImageWidth_=o.width,r.replacementImageHeight_=o.height,P.CorePromise.resolve(e.concat([function(){var e=new S.AddFormaParams(T.ControllerSettingsBehaviorEnum.SetControllerSettings);return new C.AddImageContentAction(i,r.originalImageURL_,r.originalImageMimeType_,r.originalImageWidth_,r.originalImageHeight_,!1,w.MediaMetadata.init_4d41(),null,null,e)},function(){XCTAssertTrue(!(!(n=y.opt(y.opt(r.imageForma,(function(e){return e.controller})),(function(e){return e.replaceable})))&&null==n)&&n);var e=new S.AddFormaParams(T.ControllerSettingsBehaviorEnum.SetControllerSettings,!1,r.imageForma);return new C.AddImageContentAction(i,r.replacementImageURL_,r.replacementImageMimeType_,r.replacementImageWidth_,r.replacementImageHeight_,!1,w.MediaMetadata.init_4d41(),null,null,e)}]))):(XCTFail("Could not get image data for second image in ReplaceImageTest"),P.CorePromise.resolve([]))}))):(XCTFail("Could not get image data for first image in ReplaceImageTest"),P.CorePromise.resolve([]))}))},setUpActionSequence:function(e,t,o){this.rootForma_=o.firstPage.root,this.testPage_=o.firstPage},validateAfterActionSequence:function(e,t){XCTAssertTrue(this.hasImage())},validateAfterUndo:function(e,t){XCTAssertFalse(this.hasImage())},validateAfterRedo:function(e,t){XCTAssertTrue(this.hasImage())}}}),l),g.ReplaceExistingImageTest=(c=function(){this.actionSequence_ReplaceExistingImage=[],this.actionSequence_ReplaceExistingCutoutImage=[],this.frameForma_=null,_.ActionTestBase.call(this)},y.defineClass({name:"ReplaceExistingImageTest",ctor:c,superName:"ActionTestBase",props:{canRunActionSequence:function(e,t,o){return this.frameForma_=y.as(y.last(this.allSelectableFormae(o,(function(e){return e.isImage()}))),R.FrameForma),null!=this.frameForma_},prepareDocument:function(e,t){var o=this,n=[];if("actionSequence_ReplaceExistingCutoutImage"==t&&M.ImageFacade.getCutoutModeForForma(this.frameForma_)==D.CutoutMode.Off){var r=D.ImageCutoutLibrary.getImageCutout(D.CutoutMode.BackgroundRemoval);n.push((function(){return new k.SetImageCutoutAction(o.frameForma_,r,D.ImageCutoutModelLibrary.CURRENT_MODEL,void 0,60)}))}return P.CorePromise.resolve(n)},populateActionSequence:function(e,t,o){var n=this,r=o.firstPage;return this.imageDataForAsset("dog1.jpeg").then((function(t){var o;return(o=y.as(t,N.ActionTestImageData))?e.concat([function(){var e=new S.AddFormaParams(T.ControllerSettingsBehaviorEnum.SetControllerSettings,!1,n.frameForma_);return new C.AddImageContentAction(r,o.url,"image/jpeg",o.width,o.height,!1,w.MediaMetadata.init_4d41(),null,null,e)}]):(XCTFail("Could not get image data for replacement image in ReplaceExistingImageTest"),P.CorePromise.resolve([]))}))}}}),c),g.AddIconTest=(u=function(){this.actionSequence_AddIcon=[],this.iconURL_="",this.rootForma_=null,_.ActionTestBase.call(this)},y.defineClass({name:"AddIconTest",ctor:u,superName:"ActionTestBase",props:{hasIcon:function(){var e=this,t=!1;return y.opt(this.rootForma_,(function(o){return o.visitAll(v.FormaTraversal.PreOrder,(function(o){var n,r;(n=y.as(o,O.ShapeForma))&&(r=y.as(n.contentNode,j.VectorContentNode))&&r.url==e.iconURL_&&(t=!0)}))})),t},populateActionSequence:function(e,t,o){var n,r=this;return null!=(n=this.urlForAsset("dog1.svg"))?(this.iconURL_=n,P.CorePromise.resolve([function(){return new C.AddIconContentAction(r.iconURL_,w.MediaMetadata.init_4d41(),null,void 0,void 0,null)}])):(XCTFail("Could not get Icon URL for AddIconTest"),P.CorePromise.resolve([]))},setUpActionSequence:function(e,t,o){this.rootForma_=o.firstPage.root},validateAfterActionSequence:function(e,t){XCTAssertTrue(this.hasIcon())},validateAfterUndo:function(e,t){XCTAssertFalse(this.hasIcon())},validateAfterRedo:function(e,t){XCTAssertTrue(this.hasIcon())}}}),u),g.ReplaceIconTest=(p=function(){this.actionSequence_ReplaceIcon=[],this.rootForma_=null,this.iconForma_=null,_.ActionTestBase.call(this)},y.defineClass({name:"ReplaceIconTest",ctor:p,superName:"ActionTestBase",statics:{originalIconURL_:"",replacementIconURL_:""},props:{hasIcon:function(){var e=!1;return y.opt(this.rootForma_,(function(t){return t.visitAll(v.FormaTraversal.PreOrder,(function(t){var o,n;(o=y.as(t,O.ShapeForma))&&(n=y.as(o.contentNode,j.VectorContentNode))&&n.url==p.replacementIconURL_&&(e=!0)}))})),e},populateActionSequence:function(e,t,o){var n,r=this;return P.CorePromise.resolve(e.concat([function(){return XCTAssertTrue(!(!(n=y.opt(y.opt(r.iconForma_,(function(e){return e.controller})),(function(e){return e.replaceable})))&&null==n)&&n),new C.AddIconContentAction(p.replacementIconURL_,w.MediaMetadata.init_4d41(),r.iconForma_,void 0,void 0,null)}]))},prepareDocument:function(e,t){var o,n;return this.rootForma_=e.firstPage.root,null!=(o=this.urlForAsset("dog1.svg"))&&null!=(n=this.urlForAsset("fork_and_spoon.svg"))&&(p.originalIconURL_=o,p.replacementIconURL_=n,XCTAssertNotEqual(p.originalIconURL_,p.replacementIconURL_)),P.CorePromise.resolve([function(){return new C.AddIconContentAction(p.originalIconURL_,w.MediaMetadata.init_4d41(),null,void 0,void 0,null)}])},setUpActionSequence:function(e,t,o){this.iconForma_=y.first(y.opt(y.as(this.lastActionResult,T.FormaActionResult),(function(e){return e.formae})))},validateAfterActionSequence:function(e,t){XCTAssertTrue(this.hasIcon())},validateAfterUndo:function(e,t){XCTAssertFalse(this.hasIcon())},validateAfterRedo:function(e,t){XCTAssertTrue(this.hasIcon())}}}),p),g.AddVideoTest=(d=function(){this.actionSequence_AddVideo=[],this.videoURL_="",this.trackWidth_=0,this.trackHeight_=0,this.duration_=q.TheoTime.Zero,this.times_=[],this.posterURL_=null,this.posterWidth_=0,this.posterHeight_=0,this.posterParams_=null,this.rootForma_=null,_.ActionTestBase.call(this)},y.defineClass({name:"AddVideoTest",ctor:d,superName:"ActionTestBase",props:{hasVideo:function(){var e=this,t=!1;return y.opt(this.rootForma_,(function(o){return o.visitAll(v.FormaTraversal.PreOrder,(function(o){var n,r;(n=y.as(o,X.VideoForma))&&(r=n.videoContentNode)&&r.url==e.videoURL_&&(t=!0)}))})),t},populateActionSequence:function(e,t,o){var n,r=this,i=o.firstPage;if(null!=(n=this.urlForAsset("spokes.gif"))){this.videoURL_=n,this.posterURL_=n;var a=this.posterURL_.split(".");a.length>0&&(a.pop(),this.posterURL_=a.join(".")+".png"),this.trackWidth_=480,this.trackHeight_=480,this.posterWidth_=480,this.posterHeight_=480;for(var s,l=7,c=y.iter(y.range(1,34,!0));!c.done;c.next())this.times_.push(new q.TheoTime(l,100)),l+=7;return this.duration_=new q.TheoTime(l,100),null!=(s=this.posterURL_)&&(this.posterParams_=new C.VideoPosterParams(s,"image/png",this.posterWidth_,this.posterHeight_)),P.CorePromise.resolve([function(){return new C.AddVideoContentAction(i,r.videoURL_,"image/gif",r.trackWidth_,r.trackHeight_,r.duration_,r.times_,r.posterParams_,!1,w.MediaMetadata.init_4d41(),null,null,null,S.AddFormaParams.DEFAULTS)}])}return XCTFail("Could not get Video URL for AddVideoTest"),P.CorePromise.resolve([])},setUpActionSequence:function(e,t,o){this.rootForma_=o.firstPage.root},validateAfterActionSequence:function(e,t){XCTAssertTrue(this.hasVideo())},validateAfterUndo:function(e,t){XCTAssertFalse(this.hasVideo())},validateAfterRedo:function(e,t){XCTAssertTrue(this.hasVideo())}}}),d),g.AddLogoTest=(h=function(){this.actionSequence_AddLogo=[],this.primaryLogoID_="",this.rootForma_=null,_.ActionTestBase.call(this)},y.defineClass({name:"AddLogoTest",ctor:h,superName:"ActionTestBase",props:{hasLogo:function(){var e=!1;return y.opt(this.rootForma_,(function(t){return t.visitAll(v.FormaTraversal.PreOrder,(function(t){var o;(o=y.as(t,I.ImageForma))&&o.contentNode&&o.isLogo()&&(e=!0)}))})),e},hasLogoWithID:function(e){var t=!1;return y.opt(this.rootForma_,(function(o){return o.visitAll(v.FormaTraversal.PreOrder,(function(o){var n,r;(n=y.as(o,I.ImageForma))&&(r=n.contentNode)&&r.sparkElementID==e&&n.isLogo()&&(t=!0)}))})),t},populateActionSequence:function(e,t,o){var n=this;return this.installBrandkit(o),P.CorePromise.resolve(e.concat([function(){var e=E.Host.brandkitManager.fakeBrandkitForElementsForTesting.logos[0];return n.primaryLogoID_=e.id,new C.AddLogoContentAction(o.firstPage,e,null,null)}]))},setUpActionSequence:function(e,t,o){this.rootForma_=o.firstPage.root},validateAfterActionSequence:function(e,t){XCTAssertTrue(this.hasLogoWithID(this.primaryLogoID_))},validateAfterUndo:function(e,t){XCTAssertFalse(this.hasLogo())},validateAfterRedo:function(e,t){XCTAssertTrue(this.hasLogoWithID(this.primaryLogoID_))},shutdown:function(e,t,o){_.ActionTestBase.prototype.shutdown.call(this,e,t,o),this.removeBrandkit(o)}}}),h),g.ReplaceLogoTest=(f=function(){this.actionSequence_ReplaceLogo=[],this.primaryLogoID_="",this.secondaryLogoID_="",this.rootForma_=null,_.ActionTestBase.call(this)},y.defineClass({name:"ReplaceLogoTest",ctor:f,superName:"ActionTestBase",props:{logoForma:{get:function(){return y.first(y.opt(y.as(this.getActionResult(0),T.FormaActionResult),(function(e){return e.formae})))}},hasLogo:function(){var e=!1;return y.opt(this.rootForma_,(function(t){return t.visitAll(v.FormaTraversal.PreOrder,(function(t){var o;(o=y.as(t,I.ImageForma))&&o.contentNode&&o.isLogo()&&(e=!0)}))})),e},hasLogoWithID:function(e){var t=!1;return y.opt(this.rootForma_,(function(o){return o.visitAll(v.FormaTraversal.PreOrder,(function(o){var n,r;(n=y.as(o,I.ImageForma))&&(r=n.contentNode)&&r.sparkElementID==e&&n.isLogo()&&(t=!0)}))})),t},populateActionSequence:function(e,t,o){var n=this;return this.installBrandkit(o),P.CorePromise.resolve(e.concat([function(){var e=E.Host.brandkitManager.fakeBrandkitForElementsForTesting.logos[0];n.primaryLogoID_=e.id;var t=E.Host.brandkitManager.fakeBrandkitForElementsForTesting.logos[1];return n.secondaryLogoID_=t.id,new C.AddLogoContentAction(o.firstPage,e,null,null)},function(){var e=E.Host.brandkitManager.fakeBrandkitForElementsForTesting.logos[1];return new C.AddLogoContentAction(o.firstPage,e,n.logoForma,null)}]))},setUpActionSequence:function(e,t,o){this.rootForma_=o.firstPage.root},validateAfterActionSequence:function(e,t){XCTAssertFalse(this.hasLogoWithID(this.primaryLogoID_)),XCTAssertTrue(this.hasLogoWithID(this.secondaryLogoID_))},validateAfterUndo:function(e,t){XCTAssertFalse(this.hasLogo())},validateAfterRedo:function(e,t){XCTAssertFalse(this.hasLogoWithID(this.primaryLogoID_)),XCTAssertTrue(this.hasLogoWithID(this.secondaryLogoID_))},shutdown:function(e,t,o){_.ActionTestBase.prototype.shutdown.call(this,e,t,o),this.removeBrandkit(o)}}}),f),g.AddBadgeTest=(m=function(){this.actionSequence_AddAtomicBadgeTest=[],this.actionSequence_AddGroupedBadgeTest=[],this.atomicBadgeDocPromise_=null,this.groupedBadgeDocPromise_=null,this.numLockups_=0,this.numGroups_=0,this.doc_=null,_.ActionTestBase.call(this)},y.defineClass({name:"AddBadgeTest",ctor:m,superName:"ActionTestBase",props:{canRunActionSequence:function(e,t,o){return"actionSequence_AddAtomicBadgeTest"==t?(this.atomicBadgeDocPromise_=E.Host.actionTesting.badgeDocument(!1),null!=this.atomicBadgeDocPromise_):(this.groupedBadgeDocPromise_=E.Host.actionTesting.badgeDocument(!0),null!=this.groupedBadgeDocPromise_)},populateActionSequence:function(e,t,o){return("actionSequence_AddAtomicBadgeTest"==t?this.atomicBadgeDocPromise_:this.groupedBadgeDocPromise_).then((function(e){return[function(){return new A.AddBadgeAction(e,void 0,"automation")}]}))},countLockupsAndGroups:function(e){var t=0,o=0;return e.firstPage.root.visitAll(v.FormaTraversal.PreOrder,(function(e){e.isTypeLockup()?t+=1:y.opt(e.controller,(function(e){return 1==e.userGroup}))&&(o+=1)})),[t,o]},setUpActionSequence:function(e,t,o){var n=this.countLockupsAndGroups(o);this.numLockups_=n[0],this.numGroups_=n[1],this.doc_=o},validateAfterActionSequence:function(e,t){var o=this.countLockupsAndGroups(this.doc_);"actionSequence_AddAtomicBadgeTest"==t?XCTAssertEqual(o[0],this.numLockups_+1):XCTAssertEqual(o[1],this.numGroups_+1)},validateAfterUndo:function(e,t){var o=this.countLockupsAndGroups(this.doc_);XCTAssertEqual(o[0],this.numLockups_),XCTAssertEqual(o[1],this.numGroups_)},validateAfterRedo:function(e,t){var o=this.countLockupsAndGroups(this.doc_);"actionSequence_AddAtomicBadgeTest"==t?XCTAssertEqual(o[0],this.numLockups_+1):XCTAssertEqual(o[1],this.numGroups_+1)}}}),m)},"xB/a":function(e,t,o){var n,r=t,i=o("oAGj"),a=o("tvh+"),s=o("fNpk");r.CoreContentString=(n=function e(t,o,n){void 0===n&&(n=null),this.data=t,a.CoreContent.call(this,e.KIND,o,n)},i.defineClass({name:"CoreContentString",ctor:n,superName:"CoreContent",statics:{KIND:"string",decodePayload:function(e,t,o){var r;return null!=(r=i.as(e[a.CoreContent.KEY_DATA],"String"))?new n(r,t,o):(s.LegacyCoreAssert.fail("missing payload",void 0,"CoreContentString.decodePayload","CoreContentString.swift",32),null)}},props:{encodePayload:function(e){e[a.CoreContent.KEY_DATA]=this.data},isEqualTo:function(e){var t;return!!(t=i.as(e,n))&&(this===e||this.data==t.data&&a.CoreContent.prototype.isEqualTo.call(this,e))}}}),n)},xWmh:function(e,t,o){var n,r=t,i=o("oAGj");r.ActionTestImageData=(n=function(e,t,o){this.url=e,this.width=t,this.height=o},i.defineClass({name:"ActionTestImageData",ctor:n}),n),r.HostActionTestingProtocol=i.defineProtocol("HostActionTestingProtocol",{allActionsEnabled:"Boolean",renderingEnabled:"Boolean",validationEnabled:"Boolean",undoEnabled:"Boolean",runTestsContainingString:"String",skipTestsContainingString:"String",workspace:"String",inputFolder:"String",outputFolder:"String",templateForDocument:"(TheoDocument) -> CorePromise",badgeDocument:"(Boolean) -> CorePromise",openDocument:"(String) -> TheoDocument",closeDocument:"(String) -> Void",awaitResult:"(CorePromise, (CorePromise) -> Void) -> Void",urlForAsset:"(String) -> String",imageDataForAsset:"(String) -> CorePromise",render:"(TheoDocument, String, String) -> Dictionary<String>",writeJsonToFile:"(Dictionary<String>, String) -> Void"})},xYeW:function(e,t,o){var n,r=t,i=o("oAGj");r.HostNetworkFormDatum=(n=function(e,t){void 0===t&&(t=null),this.data=e,this.fileName=t},i.defineClass({name:"HostNetworkFormDatum",ctor:n,superName:"CoreObject"}),n),r.HostDataProtocol=i.defineProtocol("HostDataProtocol",{getLength:"() -> Integer",contentType:"String",data:"Any",asUTF8String:"() -> CorePromise",asJSON:"() -> CorePromise"}),r.HostDataFactoryProtocol=i.defineProtocol("HostDataFactoryProtocol",{createFromString:"(String, String) -> HostDataProtocol",createFromCoreContent:"(CoreContent) -> HostDataProtocol",createFromFormData:"(Dictionary<String>) -> HostDataProtocol"})},xcIW:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("tlHl"),s=o("sIWg");r.PGMAudio=(n=function e(t,o,n,r){a.PGMMedia.call(this,e.TYPE,t,o,n,s.TheoRect.Zero,r)},i.defineClass({name:"PGMAudio",ctor:n,superName:"PGMMedia",statics:{TYPE:"pgm-audio"},props:{withEntity:function(e){return new n(e,this.meta,this.animations,this.contentID)}}}),n)},xm77:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("gXiO"),s=o("fNpk"),l=o("oKlP");r.TimingFunctionType=i.defineEnum("TimingFunctionType",{Linear:"Linear",EaseIn:"EaseIn",EaseOut:"EaseOut",EaseInOut:"EaseInOut",EaseOutExpo:"EaseOutExpo",Step:"Step",Step0:"Step0",Step1:"Step1"}),r.TheoTimingFunction=(n=function(e){this.timingType_=e,this.lookup_={},e==r.TimingFunctionType.Linear?this.points=[new l.TheoPoint(0,0),new l.TheoPoint(1,1)]:e==r.TimingFunctionType.Step||e==r.TimingFunctionType.Step0||e==r.TimingFunctionType.Step1?this.points=[new l.TheoPoint(.5,0)]:e==r.TimingFunctionType.EaseIn?this.points=[new l.TheoPoint(.42,0),new l.TheoPoint(1,1)]:e==r.TimingFunctionType.EaseOut?this.points=[new l.TheoPoint(0,0),new l.TheoPoint(.58,1)]:e==r.TimingFunctionType.EaseOutExpo?this.points=[new l.TheoPoint(.215,.61),new l.TheoPoint(.355,1)]:e==r.TimingFunctionType.EaseInOut?this.points=[new l.TheoPoint(.42,0),new l.TheoPoint(.58,1)]:(this.points=[],s.LegacyCoreAssert.fail("Invalid timing function",void 0,"TheoTimingFunction.init","TheoTimingFunction.swift",54)),a.CoreObject.call(this)},i.defineClass({name:"TheoTimingFunction",ctor:n,superName:"CoreObject",props:{evalT:function(e){var t=this.points[0].multiply(3*(1-e)*(1-e)*e),o=this.points[1].multiply(3*(1-e)*e*e),n=new l.TheoPoint(1,1).multiply(e*e*e);return t.add(o).add(n)},evalX:function(e,t){if(void 0===t&&(t=.001),e<0||e>1)return s.LegacyCoreAssert.fail("TheoRect.fromArray: Array does not have 4 elements",void 0,"TheoTimingFunction.evalX","TheoTimingFunction.swift",72),e;if(this.timingType_==r.TimingFunctionType.Step)return this.points[0].x>e?0:1;if(this.timingType_==r.TimingFunctionType.Step0)return 0==this.points[0].x?0:1;if(this.timingType_==r.TimingFunctionType.Step1)return 1==this.points[0].x?1:0;var o;if(null!=(o=this.lookup_[e]))return o;var n=0,i=1,a=.5,l=this.evalT(n);if(Math.abs(l.x-e)<t)return this.lookup_[e]=l.y,l.y;var c=this.evalT(i);if(Math.abs(c.x-e)<t)return this.lookup_[e]=c.y,c.y;for(var u=this.evalT(a);Math.abs(u.x-e)>t;)e>u.x?n=a:i=a,a=(n+i)/2,u=this.evalT(a);return this.lookup_[e]=u.y,u.y}}}),n)},yjxF:function(e,t,o){var n,r,i=t,a=o("oAGj");i.PGMNodeMetadata=(n=function(e,t){this.id=e,this.part=t},r={},a.defineClass({name:"PGMNodeMetadata",ctor:n,statics:{EMPTY:{get:function(){return void 0===r.EMPTY&&(r.EMPTY=new n("","")),r.EMPTY}},PROP_ID:"id",PROP_PART:"part",decode:function(e,t){var o,r,i;if(i=e){var s=(o=a.as(i[n.PROP_ID],"String"))||null!=o?o:"",l=(r=a.as(i[n.PROP_PART],"String"))||null!=r?r:"";return""==s&&""==l?n.EMPTY:new n(s,l)}return n.EMPTY}},props:{isEmpty:function(){return""==this.id&&""==this.part},isEqualTo:function(e){return e===this||this.id==e.id&&this.part==e.part},encode:function(){var e={};return e[n.PROP_ID]=this.id,e[n.PROP_PART]=this.part,e}}}),n)},yvDn:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("fNpk");i.CoreErrorObject=(n=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),this.message=e,this.isAllowed_=t},a.defineClass({name:"CoreErrorObject",ctor:n,superName:"CoreObject",props:{isAllowedError:{get:function(){return this.isAllowed_}},equals:function(e){return s.LegacyCoreAssert.fail("This method needs to be overridden",void 0,"CoreErrorObject.equals","CoreErrorObject.swift",29),!1}}}),n),i.CoreStringError=(r=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),i.CoreErrorObject.call(this,e,t)},a.defineClass({name:"CoreStringError",ctor:r,superName:"CoreErrorObject",props:{errorMessage:{get:function(){return a.as(this.message,"String")}},equals:function(e){var t;return!!(t=a.as(e,r))&&this.errorMessage==t.errorMessage}}}),r)},zIaq:function(e,t,o){var n,r,i,a,s,l,c=t,u=o("oAGj"),p=o("c9Jm"),d=o("hJqd"),h=o("kYI4"),f=o("yGNn"),m=o("ascj"),g=o("iCxV"),y=o("DP9v"),T=o("Vm85");c.BrandifyTest=(n=function(){this.actionSequence_Brandify=[],this.testDoc_=null,this.page_=null,this.initialRootColor_=null,this.docHasText_=!1,p.ActionTestBase.call(this)},u.defineClass({name:"BrandifyTest",ctor:n,superName:"ActionTestBase",props:{hasText:function(e){for(var t=!1,o=u.iter(e.firstPage.root.filterWithCallback((function(e){return e.isTypeLockup()})));!o.done;o.next()){t=!0;break}return t},allTextBranded:function(e){for(var t,o=!0,n=u.iter(e.firstPage.root.filterWithCallback((function(e){return e.isTypeLockup()})));!n.done;n.next()){var r=n.value,i=T.TextFacade.getFontForForma(r);if(!(t=u.isEmpty(u.opt(i,(function(e){return e.getSparkFontRole()}))))&&null==t||t){o=!1;break}}return o},verifyColors:function(){var e=this.page_.root.style.colors.color(m.ColorRole.FieldPrimary);XCTAssertTrue(null!=e);for(var t=0,o=0,n=0,r=u.clone(this.page_.colorLibraryController.getTheoColorsUsedInDocument()),i=u.iter(r);!i.done;i.next()){var a=i.value;a.isBrandkitPrimaryColor()&&(t+=1),a.isBrandkitSecondaryColor()&&(o+=1),a.isBrandkitShade()&&(n+=1)}XCTAssertEqual(t,0),XCTAssertEqual(o,0),XCTAssertTrue(r.length>0),XCTAssertTrue(n>0);var s=u.clone(h.BrandingFacade.getDocumentBrandedElementsUsage(this.testDoc_,!1,!0));XCTAssertTrue(s.includes("color"))},populateActionSequence:function(e,t,o){var n=this;return this.docHasText_=this.hasText(o),this.installBrandkit(o),f.CorePromise.resolve(e.concat([function(){return new d.BrandifyAction(g.Host.brandkitManager.fakeBrandkitForElementsForTesting,n.docHasText_,!0,!0)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.page_=o.firstPage,this.initialRootColor_=this.page_.root.style.colors.color(m.ColorRole.FieldPrimary)},validateAfterActionSequence:function(e,t){XCTAssertTrue(h.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_STAMP_ID])),XCTAssertFalse(h.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_PRIMARY_ID])),this.docHasText_?(XCTAssertTrue(h.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID])),XCTAssertTrue(this.allTextBranded(this.testDoc_))):XCTAssertFalse(h.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID])),this.verifyColors()},validateAfterUndo:function(e,t){XCTAssertFalse(h.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_PRIMARY_ID,this.FAKE_LOGO_ELEMENT_STAMP_ID])),XCTAssertFalse(h.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID,this.FAKE_FONT_ELEMENT_BODY_ID]))},validateAfterRedo:function(e,t){XCTAssertTrue(h.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_STAMP_ID])),XCTAssertFalse(h.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_PRIMARY_ID])),this.docHasText_?(XCTAssertTrue(h.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID])),XCTAssertTrue(this.allTextBranded(this.testDoc_))):XCTAssertFalse(h.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID])),this.verifyColors()},shutdown:function(e,t,o){p.ActionTestBase.prototype.shutdown.call(this,e,t,o),this.removeBrandkit(o)}}}),n),c.AddBrandTest=(r=function(){this.actionSequence_AddBrand=[],this.testDoc_=null,this.page_=null,this.initialRootColor_=null,this.docHasText_=!1,this.addedBrandName="",this.addedBrandURN="",p.ActionTestBase.call(this)},u.defineClass({name:"AddBrandTest",ctor:r,superName:"ActionTestBase",props:{hasText:function(e){for(var t=!1,o=u.iter(e.firstPage.root.filterWithCallback((function(e){return e.isTypeLockup()})));!o.done;o.next()){t=!0;break}return t},allTextBranded:function(e){for(var t,o=!0,n=u.iter(e.firstPage.root.filterWithCallback((function(e){return e.isTypeLockup()})));!n.done;n.next()){var r=n.value,i=T.TextFacade.getFontForForma(r);if(!(t=u.isEmpty(u.opt(i,(function(e){return e.getSparkFontRole()}))))&&null==t||t){o=!1;break}}return o},verifyColors:function(){var e=this.page_.root.style.colors.color(m.ColorRole.FieldPrimary);XCTAssertTrue(null!=e),XCTAssertFalse(e.isEqual(this.initialRootColor_));for(var t=0,o=0,n=0,r=u.clone(this.page_.colorLibraryController.getTheoColorsUsedInDocument()),i=u.iter(r);!i.done;i.next()){var a=i.value;a.isBrandkitPrimaryColor()&&(t+=1),a.isBrandkitSecondaryColor()&&(o+=1),a.isBrandkitShade()&&(n+=1)}XCTAssertEqual(t,0),XCTAssertEqual(o,0),XCTAssertTrue(r.length>0),XCTAssertTrue(n>0);var s=u.clone(h.BrandingFacade.getDocumentBrandedElementsUsage(this.testDoc_,!1,!0));XCTAssertTrue(s.includes("color"))},populateActionSequence:function(e,t,o){var n=this;return this.docHasText_=this.hasText(o),this.installBrandkit(o),f.CorePromise.resolve(e.concat([function(){return new d.BrandifyAction(g.Host.brandkitManager.fakeBrandkitForElementsForTesting,n.docHasText_,!0,!0)},function(){return n.installSecondBrandkit(n.testDoc_),n.addedBrandName=g.Host.brandkitManager.fakeBrandkitForElementsForTesting.name,n.addedBrandURN=g.Host.brandkitManager.fakeBrandkitForElementsForTesting.urn,new d.AddBrandingAction(g.Host.brandkitManager.fakeBrandkitForElementsForTesting)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.page_=o.firstPage,this.initialRootColor_=this.page_.root.style.colors.color(m.ColorRole.FieldPrimary)},validateAfterActionSequence:function(e,t){XCTAssertTrue(h.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_PRIMARY_ID_2])),this.docHasText_?(XCTAssertTrue(h.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID_2])),XCTAssertTrue(this.allTextBranded(this.testDoc_))):XCTAssertFalse(h.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID_2])),XCTAssertTrue(this.testDoc_.authoringContextName==this.addedBrandName),XCTAssertTrue(this.testDoc_.authoringContextURN==this.addedBrandURN),this.verifyColors()},validateAfterUndo:function(e,t){XCTAssertFalse(h.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_PRIMARY_ID,this.FAKE_LOGO_ELEMENT_STAMP_ID])),XCTAssertFalse(h.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID,this.FAKE_FONT_ELEMENT_BODY_ID])),XCTAssertTrue(""==this.testDoc_.authoringContextName),XCTAssertTrue(""==this.testDoc_.authoringContextURN)},validateAfterRedo:function(e,t){XCTAssertTrue(h.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_PRIMARY_ID_2])),this.docHasText_?(XCTAssertTrue(h.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID_2])),XCTAssertTrue(this.allTextBranded(this.testDoc_))):XCTAssertFalse(h.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID_2])),XCTAssertTrue(this.testDoc_.authoringContextName==this.addedBrandName),XCTAssertTrue(this.testDoc_.authoringContextURN==this.addedBrandURN),this.verifyColors()},shutdown:function(e,t,o){p.ActionTestBase.prototype.shutdown.call(this,e,t,o),this.removeBrandkit(o)}}}),r),c.RemoveBrandingTest=(i=function(){this.actionSequence_RemoveBranding=[],this.testDoc_=null,this.page_=null,p.ActionTestBase.call(this)},u.defineClass({name:"RemoveBrandingTest",ctor:i,superName:"ActionTestBase",props:{verifyColors:function(e){for(var t=0,o=0,n=0,r=u.clone(this.page_.colorLibraryController.getTheoColorsUsedInDocument()),i=u.iter(r);!i.done;i.next()){var a=i.value;a.isBrandkitPrimaryColor()&&(t+=1),a.isBrandkitSecondaryColor()&&(o+=1),a.isBrandkitShade()&&(n+=1)}if(XCTAssertEqual(t,0),XCTAssertEqual(o,0),e){var s=u.clone(h.BrandingFacade.getDocumentBrandedElementsUsage(this.testDoc_,!1,!0));XCTAssertTrue(s.includes("color"))}else XCTAssertEqual(n,0);XCTAssertTrue(r.length>0)},populateActionSequence:function(e,t,o){return this.installBrandkit(o),f.CorePromise.resolve(e.concat([function(){return new d.BrandifyAction(g.Host.brandkitManager.fakeBrandkitForElementsForTesting,!0,!0,!0)},function(){return new d.RemoveBrandingAction}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.page_=o.firstPage},validateAfterActionSequence:function(e,t){var o=h.BrandingFacade.isDocumentBranded(this.testDoc_,!0);XCTAssertTrue(0==o),this.verifyColors(!0)},validateAfterUndo:function(e,t){var o=h.BrandingFacade.isDocumentBranded(this.testDoc_,!0);XCTAssertTrue(0==o),this.verifyColors(!1)},validateAfterRedo:function(e,t){var o=h.BrandingFacade.isDocumentBranded(this.testDoc_,!0);XCTAssertTrue(0==o),this.verifyColors(!0)},shutdown:function(e,t,o){p.ActionTestBase.prototype.shutdown.call(this,e,t,o),this.removeBrandkit(o)}}}),i),c.RemoveExistingBrandingTest=(a=function(){this.actionSequence_RemoveBranding=[],this.testDoc_=null,this.page_=null,this.initialBrandName="",this.initialBrandURN="",p.ActionTestBase.call(this)},u.defineClass({name:"RemoveExistingBrandingTest",ctor:a,superName:"ActionTestBase",props:{prepareDocument:function(e,t){var o=this;return this.installBrandkit(e),f.CorePromise.resolve([function(){return o.initialBrandName=g.Host.brandkitManager.fakeBrandkitForElementsForTesting.name,o.initialBrandURN=g.Host.brandkitManager.fakeBrandkitForElementsForTesting.urn,new d.BrandifyAction(g.Host.brandkitManager.fakeBrandkitForElementsForTesting,!0,!0,!0)}])},populateActionSequence:function(e,t,o){return f.CorePromise.resolve(e.concat([function(){return new d.RemoveBrandingAction}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.page_=o.firstPage},validateAfterActionSequence:function(e,t){var o=h.BrandingFacade.isDocumentBranded(this.testDoc_,!0);XCTAssertTrue(0==o),XCTAssertTrue(""==this.testDoc_.authoringContextName),XCTAssertTrue(""==this.testDoc_.authoringContextURN)},validateAfterUndo:function(e,t){var o=h.BrandingFacade.isDocumentBranded(this.testDoc_,!0);XCTAssertTrue(1==o),XCTAssertTrue(this.testDoc_.authoringContextName==this.initialBrandName),XCTAssertTrue(this.testDoc_.authoringContextURN==this.initialBrandURN)},validateAfterRedo:function(e,t){var o=h.BrandingFacade.isDocumentBranded(this.testDoc_,!0);XCTAssertTrue(0==o),XCTAssertTrue(""==this.testDoc_.authoringContextName),XCTAssertTrue(""==this.testDoc_.authoringContextURN)},shutdown:function(e,t,o){p.ActionTestBase.prototype.shutdown.call(this,e,t,o),this.removeBrandkit(o)}}}),a),c.ChangeBrandingTestToNone=(s=function(){this.actionSequence_ChangeBrandingToNone=[],this.testDoc_=null,this.page_=null,p.ActionTestBase.call(this)},u.defineClass({name:"ChangeBrandingTestToNone",ctor:s,superName:"ActionTestBase",props:{verifyColors:function(e){for(var t=0,o=0,n=0,r=u.clone(this.page_.colorLibraryController.getTheoColorsUsedInDocument()),i=u.iter(r);!i.done;i.next()){var a=i.value;a.isBrandkitPrimaryColor()&&(t+=1),a.isBrandkitSecondaryColor()&&(o+=1),a.isBrandkitShade()&&(n+=1)}if(XCTAssertEqual(t,0),XCTAssertEqual(o,0),e){var s=u.clone(h.BrandingFacade.getDocumentBrandedElementsUsage(this.testDoc_,!1,!0));XCTAssertTrue(s.includes("color"))}else XCTAssertEqual(n,0);XCTAssertTrue(r.length>0)},populateActionSequence:function(e,t,o){return this.installBrandkit(o),f.CorePromise.resolve(e.concat([function(){return new d.BrandifyAction(g.Host.brandkitManager.fakeBrandkitForElementsForTesting,!0,!0,!0)},function(){return new d.ChangeBrandingAction(null,g.Host.brandkitManager.fakeBrandkitForElementsForTesting.id,y.MultiBrandFacade.activeBrandkitID)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.page_=o.firstPage},validateAfterActionSequence:function(e,t){var o=h.BrandingFacade.isDocumentBranded(this.testDoc_,!0);XCTAssertTrue(0==o),this.verifyColors(!0),XCTAssertTrue(null==y.MultiBrandFacade.getBrand(this.testDoc_))},validateAfterUndo:function(e,t){var o=h.BrandingFacade.isDocumentBranded(this.testDoc_,!0);XCTAssertTrue(0==o),this.verifyColors(!1)},validateAfterRedo:function(e,t){var o=h.BrandingFacade.isDocumentBranded(this.testDoc_,!0);XCTAssertTrue(0==o),this.verifyColors(!0),XCTAssertTrue(null==y.MultiBrandFacade.getBrand(this.testDoc_))},shutdown:function(e,t,o){p.ActionTestBase.prototype.shutdown.call(this,e,t,o),this.removeBrandkit(o)}}}),s),c.ChangeBrandingTest=(l=function(){this.actionSequence_AddBrand=[],this.testDoc_=null,this.page_=null,this.initialRootColor_=null,this.docHasText_=!1,this.initialBrandName="",this.initialBrandURN="",this.finalBrandName="",this.finalBrandURN="",p.ActionTestBase.call(this)},u.defineClass({name:"ChangeBrandingTest",ctor:l,superName:"ActionTestBase",props:{hasText:function(e){for(var t=!1,o=u.iter(e.firstPage.root.filterWithCallback((function(e){return e.isTypeLockup()})));!o.done;o.next()){t=!0;break}return t},allTextBranded:function(e){for(var t,o=!0,n=u.iter(e.firstPage.root.filterWithCallback((function(e){return e.isTypeLockup()})));!n.done;n.next()){var r=n.value,i=T.TextFacade.getFontForForma(r);if(!(t=u.isEmpty(u.opt(i,(function(e){return e.getSparkFontRole()}))))&&null==t||t){o=!1;break}}return o},verifyColors:function(){var e=this.page_.root.style.colors.color(m.ColorRole.FieldPrimary);XCTAssertTrue(null!=e),XCTAssertFalse(e.isEqual(this.initialRootColor_));for(var t=0,o=0,n=0,r=u.clone(this.page_.colorLibraryController.getTheoColorsUsedInDocument()),i=u.iter(r);!i.done;i.next()){var a=i.value;a.isBrandkitPrimaryColor()&&(t+=1),a.isBrandkitSecondaryColor()&&(o+=1),a.isBrandkitShade()&&(n+=1)}XCTAssertEqual(t,0),XCTAssertEqual(o,0),XCTAssertTrue(r.length>0),XCTAssertTrue(n>0);var s=u.clone(h.BrandingFacade.getDocumentBrandedElementsUsage(this.testDoc_,!1,!0));XCTAssertTrue(s.includes("color"))},prepareDocument:function(e,t){var o=this;return this.installBrandkit(e),f.CorePromise.resolve([function(){return o.initialBrandName=g.Host.brandkitManager.fakeBrandkitForElementsForTesting.name,o.initialBrandURN=g.Host.brandkitManager.fakeBrandkitForElementsForTesting.urn,new d.BrandifyAction(g.Host.brandkitManager.fakeBrandkitForElementsForTesting,!0,!0,!0)}])},populateActionSequence:function(e,t,o){var n=this;return this.docHasText_=this.hasText(o),f.CorePromise.resolve(e.concat([function(){var e=g.Host.brandkitManager.fakeBrandkitForElementsForTesting.id;return n.installSecondBrandkit(n.testDoc_),n.finalBrandName=g.Host.brandkitManager.fakeBrandkitForElementsForTesting.name,n.finalBrandURN=g.Host.brandkitManager.fakeBrandkitForElementsForTesting.urn,new d.ChangeBrandingAction(g.Host.brandkitManager.fakeBrandkitForElementsForTesting,e,y.MultiBrandFacade.activeBrandkitID)}]))},setUpActionSequence:function(e,t,o){this.testDoc_=o,this.page_=o.firstPage,this.initialRootColor_=this.page_.root.style.colors.color(m.ColorRole.FieldPrimary)},validateAfterActionSequence:function(e,t){XCTAssertTrue(h.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_PRIMARY_ID_2])),this.docHasText_?XCTAssertTrue(h.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID_2])):XCTAssertFalse(h.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID_2])),XCTAssertTrue(this.testDoc_.authoringContextName==this.finalBrandName),XCTAssertTrue(this.testDoc_.authoringContextURN==this.finalBrandURN),this.verifyColors()},validateAfterUndo:function(e,t){XCTAssertTrue(h.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_PRIMARY_ID,this.FAKE_LOGO_ELEMENT_STAMP_ID])),XCTAssertTrue(h.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID,this.FAKE_FONT_ELEMENT_BODY_ID])),XCTAssertTrue(this.testDoc_.authoringContextName==this.initialBrandName),XCTAssertTrue(this.testDoc_.authoringContextURN==this.initialBrandURN)},validateAfterRedo:function(e,t){XCTAssertTrue(h.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_PRIMARY_ID_2])),this.docHasText_?XCTAssertTrue(h.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID_2])):XCTAssertFalse(h.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID_2])),XCTAssertTrue(this.testDoc_.authoringContextName==this.finalBrandName),XCTAssertTrue(this.testDoc_.authoringContextURN==this.finalBrandURN),this.verifyColors()},shutdown:function(e,t,o){p.ActionTestBase.prototype.shutdown.call(this,e,t,o),this.removeBrandkit(o)}}}),l)},zIi2:function(e,t,o){var n=t,r=o("oAGj");n.HostSchemaProtocol=r.defineProtocol("HostSchemaProtocol",{rootFile:"String",getRoot:"(Integer) -> Dictionary<String>",getFiles:"(Integer) -> Dictionary<String>",matches:"(String, String) -> Boolean"})},zW52:function(e,t,o){var n,r,i=t,a=o("oAGj"),s=o("tGKA"),l=o("5D0C"),c=o("7hc0"),u=o("sq5L"),p=o("sIWg");i.PGMTransformedBounds=(n=function(e,t){this.placement=e,this.bounds=t},a.defineClass({name:"PGMTransformedBounds",ctor:n,statics:{PROP_PLACEMENT:"placement",PROP_BOUNDS:"bounds",decode:function(e,t){var o,r,i;return(o=e)?null!=(r=o[n.PROP_PLACEMENT])&&(i=p.TheoRect.decodeJson(a.as(o[n.PROP_BOUNDS],"AnyObject")))?new n(s.Matrix2D.decodeJson(a.as(r,"AnyObject")),i):(t.error(u.PGMError.BAD_TRANSFORMED_BOUNDS,"PGMTransformedBounds.decode: missing placement or bounds"),null):null}},props:{encode:function(){var e={};return e[n.PROP_PLACEMENT]=this.placement.encodeJson(),e[n.PROP_BOUNDS]=this.bounds.encodeJson(),e},isEqualTo:function(e){return this===e||this.placement.equal(e.placement)&&this.bounds.equal(e.bounds)}}}),n),i.PGMTransformAnimation=(r=function e(t,o,n){this.startXBounds=o,this.endXBounds=n,l.PGMAnimation.call(this,e.TYPE,t)},a.defineClass({name:"PGMTransformAnimation",ctor:r,superName:"PGMAnimation",statics:{TYPE:"PGMTransformAnimation",PROP_START_XBOUNDS:"start-xbounds",PROP_END_XBOUNDS:"end-xbounds",decodeAnimation:function(e,t,o){var n,s;return(n=i.PGMTransformedBounds.decode(a.as(e[r.PROP_START_XBOUNDS],["Dictionary","String","Any"]),o))&&(s=i.PGMTransformedBounds.decode(a.as(e[r.PROP_END_XBOUNDS],["Dictionary","String","Any"]),o))?new r(t,n,s):(o.error(u.PGMError.BAD_TRANSFORM_ANIMATION,"Couldn't decode required parameter(s)"),null)}},props:{encode:function(){var e=l.PGMAnimation.prototype.encode.call(this);return e[r.PROP_START_XBOUNDS]=this.startXBounds.encode(),e[r.PROP_END_XBOUNDS]=this.endXBounds.encode(),e},isEqualTo:function(e){return this===e||!!(t=a.as(e,r))&&this.startXBounds.isEqualTo(t.startXBounds)&&this.endXBounds.isEqualTo(t.endXBounds)&&l.PGMAnimation.prototype.isEqualTo.call(this,e);var t},interpolate:function(e){return c.PGMAnimationUtils.interpolateBetweenXFormedBounds(this.startXBounds,this.endXBounds,c.PGMAnimationUtils.bound01(this.timeFn.apply(e)))}}}),r)},zbBQ:function(e,t,o){var n,r=t,i=o("oAGj"),a=o("gXiO"),s=o("Q0b+"),l=o("sHEF");r.PGMMimicDocument=(n=function(e){this.oldState=l.PGMMimicDisplayState.EMPTY,this.newState=l.PGMMimicDisplayState.EMPTY,this._binding=new s.PGMNullDocumentMimicBinding,this._root=null,this._dirtyLocalCTMNodes=[],this._animationNodes=[],this.client=e,a.CoreObject.call(this),this._binding=e.bindDocument(this)},i.defineClass({name:"PGMMimicDocument",ctor:n,superName:"CoreObject",props:{binding:{get:function(){return this._binding}},beginConform:function(e,t){this._dirtyLocalCTMNodes.splice(0),this.oldState=e,this.newState=t,this._binding.beginConform(this,e,t)},endConform:function(e,t){this._binding.endConform(this,e,t)},dirtyLocalCTMNodes:{get:function(){return this._dirtyLocalCTMNodes}},nodePlacementChanged:function(e){this._dirtyLocalCTMNodes.push(e)},nodeReparented:function(e){this._dirtyLocalCTMNodes.push(e)},nodeHasAnimationChanged:function(e,t){t?this._animationNodes.push(e):i.remove(this._animationNodes,e)},nodesWithAnimations:{get:function(){return this._animationNodes}},root:{get:function(){return this._root},set:function(e){this._binding.setRoot(this,e),i.opt(this._root,(function(e){return e.setAsDetached()})),i.opt(e,(function(e){return e.setAsRoot()})),this._root=e}}}}),n)},zls0:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"FontDescriptor":{"className":"FontDescriptor","type":"object","properties":{"postscript-name":{"type":"string"}},"required":["postscript-name"]},"TheoFont":{"className":"TheoFont","type":"object","properties":{"postscript-name":{"type":"string"},"sparkElementID":{"type":"string"},"sparkRoles":{"type":"array","items":{"type":"string"}}},"required":["postscript-name"]},"TextRange":{"type":"array","items":{"type":"integer"},"maxItems":2,"minItems":2},"TextAttribute":{"className":"TextAttribute","type":"object","properties":{"start":{"type":"integer"},"length":{"type":"integer"},"value":{"type":["string","object","number","integer"]}},"required":["start","length","value"]},"TextAttributeTypes":{"oneOf":[{"$ref":"#/definitions/UTF16Attribute"},{"$ref":"#/definitions/FontDescriptorAttribute"},{"$ref":"#/definitions/FontSizeAttribute"},{"$ref":"#/definitions/FontColorAttribute"},{"$ref":"#/definitions/FontStrokeColorAttribute"},{"$ref":"#/definitions/FontStrokeWidthAttribute"},{"$ref":"#/definitions/TextLookAttribute"},{"$ref":"#/definitions/TrackingAttribute"}]},"UTF16Attribute":{"className":"UTF16Attribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"string"}}}]},"FontDescriptorAttribute":{"className":"FontDescriptorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"#/definitions/FontDescriptor"}}}]},"FontSizeAttribute":{"className":"FontSizeAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"number"}}}]},"FontColorAttribute":{"className":"FontColorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"Color.json#/definitions/SolidColor"}}}]},"FontStrokeColorAttribute":{"className":"FontStrokeColorAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"$ref":"Color.json#/definitions/SolidColor"}}}]},"FontStrokeWidthAttribute":{"className":"FontStrokeWidthAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"number"}}}]},"TextLookAttribute":{"className":"TextLookAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"integer"}}}]},"TrackingAttribute":{"className":"TrackingAttribute","allOf":[{"$ref":"#/definitions/TextAttribute"},{"properties":{"value":{"type":"number"}}}]},"TextModel":{"className":"TextModel","type":"object","properties":{"text":{"type":"array","items":{"$ref":"#/definitions/UTF16Attribute"},"maxItems":1},"font-name":{"type":"array","items":{"$ref":"#/definitions/FontDescriptorAttribute"},"maxItems":1},"font-size":{"type":"array","items":{"$ref":"#/definitions/FontSizeAttribute"},"maxItems":1},"font-color":{"type":"array","items":{"$ref":"#/definitions/FontColorAttribute"},"maxItems":1},"font-strokecolor":{"type":"array","items":{"$ref":"#/definitions/FontStrokeColorAttribute"},"maxItems":1},"font-strokewidth":{"type":"array","items":{"$ref":"#/definitions/FontStrokeWidthAttribute"},"maxItems":1},"text-look":{"type":"array","items":{"$ref":"#/definitions/TextLookAttribute"},"maxItems":1},"tracking":{"type":"array","items":{"$ref":"#/definitions/TrackingAttribute"},"maxItems":1}}},"ContentTextModel":{"className":"ContentTextModel","type":"object","properties":{"text":{"type":"array","items":{"$ref":"#/definitions/UTF16Attribute"},"maxItems":1}}}}}')},zzgZ:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","definitions":{"Forma":{"className":"Forma","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string"},"placement":{"$ref":"Root.json#/definitions/Matrix2D"},"animation":{"$ref":"Animation.json#/definitions/FormaAnimation"},"moveable":{"type":"boolean"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"controller-kind":{"type":"string","default":""},"controller-metadata":{"$ref":"#/definitions/ControllerMetadata"}},"required":["id","path","placement"]}]},"ControllerMetadata":{"className":"ControllerMetadata","type":"object","properties":{"size":{"$ref":"Root.json#/definitions/TheoSize"},"backing-shape-id":{"type":"string"},"content-id":{"type":"string"},"wrapper-id":{"type":"string"},"highlightMethod":{"type":"integer"},"charstyle-ranges":{"type":"object","properties":{"Highlight":{"type":"array","items":{"type":"integer"}}}}}},"NonRootFormaTypes":{"oneOf":[{"$ref":"#/definitions/GroupForma"},{"$ref":"#/definitions/TextForma"},{"$ref":"#/definitions/ShapeForma"},{"$ref":"#/definitions/FrameForma"},{"$ref":"#/definitions/ImageForma"},{"$ref":"#/definitions/VectorForma"},{"$ref":"#/definitions/VideoForma"},{"$ref":"#/definitions/SmartGroupForma"}]},"GroupFormaBase":{"allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"character-styles":{"type":"object","description":"lockupStyle.characterStyles","patternProperties":{"^.*$":{"$ref":"Styles.json#/definitions/LockupStyle"}}},"character-ranges":{"type":"object","description":"lockupStyle.characterStyles","patternProperties":{"^.*$":{"type":"array","items":{"type":"integer"}}}},"children":{"type":"array","items":{"$ref":"#/definitions/NonRootFormaTypes"}}}}]},"GroupForma":{"className":"GroupForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"kind":{"enum":["group"]}},"required":["kind"]}]},"RootForma":{"className":"RootForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"root-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"kind":{"enum":["Root"]}},"required":["kind"]}]},"FrameForma":{"className":"FrameForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"bounds":{"$ref":"Root.json#/definitions/TheoRect"},"clipmode":{"type":"boolean","default":true},"kind":{"enum":["Frame"]}},"required":["kind"]}]},"SmartGroupForma":{"className":"SmartGroupForma","allOf":[{"$ref":"#/definitions/GroupFormaBase"},{"properties":{"kind":{"enum":["smart-group"]}},"required":["kind"]}]},"ImageFormaBase":{"allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"image-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"content-id":{"type":"string","default":""}}}]},"ImageForma":{"className":"ImageForma","allOf":[{"$ref":"#/definitions/ImageFormaBase"},{"properties":{"kind":{"enum":["Image"]}},"required":["kind"]}]},"VideoForma":{"className":"VideoForma","allOf":[{"$ref":"#/definitions/ImageFormaBase"},{"properties":{"video-content-id":{"type":"string","default":""},"kind":{"enum":["Video"]}},"required":["kind"]}]},"ShapeForma":{"className":"ShapeForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"artwork":{"$ref":"Artwork.json#/definitions/TheoArtworkNodeTypes"},"style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"content-id":{"type":"string","default":""},"shape-id":{"type":"string"},"size":{"$ref":"Root.json#/definitions/TheoSize"},"slice-box":{"$ref":"Root.json#/definitions/TheoRect"},"content-region":{"$ref":"Root.json#/definitions/TheoRect"},"text-box":{"$ref":"Root.json#/definitions/TheoRect"},"prescale":{"type":"number"},"kind":{"enum":["Shape"]}},"required":["kind"]}]},"TextForma":{"className":"TextForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"text":{"$ref":"Text.json#/definitions/TextModel"},"text-style":{"$ref":"Styles.json#/definitions/FormaStyleTypes"},"fill-color":{"$ref":"Color.json#/definitions/SolidColor"},"range-in-lockup":{"$ref":"Text.json#/definitions/TextRange"},"row-index":{"type":"integer","default":0},"kind":{"enum":["Text"]}},"required":["text","kind"]}]},"VectorForma":{"className":"VectorForma","allOf":[{"$ref":"#/definitions/Forma"},{"properties":{"content-id":{"type":"string","default":""},"size":{"$ref":"Root.json#/definitions/TheoSize"},"color":{"$ref":"Color.json#/definitions/SolidColor"},"kind":{"enum":["Vector"]}},"required":["kind"]}]},"FormaPage":{"className":"FormaPage","allOf":[{"$ref":"Root.json#/definitions/LinkedObject"},{"type":"object","properties":{"id":{"type":"string"},"path":{"type":"string","enum":["forma-document"]},"kind":{"type":"string"},"template-id":{"type":"string","default":""},"size":{"$ref":"Root.json#/definitions/TheoSize"},"size-id":{"type":"string","default":"Instagram"},"export-data":{"$ref":"#/definitions/FormaPageExportData"},"color-library":{"$ref":"Color.json#/definitions/ColorLibrary"},"children":{"type":"array","items":{"$ref":"#/definitions/RootForma"},"maxItems":1}},"required":["id","color-library","size-id"]}]},"FormaPageExportData":{"className":"FormaPageExportData","type":"object","properties":{"dimensions":{"$ref":"Root.json#/definitions/TheoSize"},"format":{"type":"integer","default":0},"ppi":{"type":"number"}}}}}')}}]);
//# sourceMappingURL=theo-core-80b327bc.js.map