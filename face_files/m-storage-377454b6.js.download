(window.webpackJsonp=window.webpackJsonp||[]).push([["m-storage"],{1006:function(e,t,r){var o,n;o=[r(2),r(6),r(1),r(10),r(63),r(14)],void 0===(n=function(e,t,r,o,n,s){"use strict";var i=[];function a(e){for(var t=i.length-1;t>=0;t--)i[t]===e&&i.splice(t,1)}return new(t.Model.extend({_execute:function(t){i.push(t),t.promises=[],t.fnExe(t),r.allSettled(t.promises).then(function(r){var i=[];e.each(r,(function(e){"fulfilled"!==e.state&&i.push(e.reason)})),0===i.length?(marvel.logger.debug("transaction success: "+t.name),a(t),t.deferred&&t.deferred.resolve(r)):(a(t),t.deferred&&t.deferred.reject(i),o.checkIsOffline().then(function(r){r||!t.fnErr||"function"!=typeof t.fnErr?t.retry?(t.count=t.count||1,r?marvel.logger.warn("TBD: retry after coming back online"):(marvel.logger.warn("Transaction: retrying "+t.name+" ("+t.count+") after a failure."),e.delay(function(){if(t.count<t.retry)t.count++,this._execute(t);else{var e=!1;marvel.logger.warn("Transaction "+t.name+" failed after "+t.retry+" retries. Informing user",i),"Save Slate"===t.name?n.showConfirm(s.getString("save-project-error-title"),s.getString("save-project-error-text"),{okText:s.getString("save-project-error-action-refresh"),cancelText:s.getString("save-project-error-action-retry"),okHandler:function(){e=!0,window.location.reload()}.bind(this)}).then(function(){e||this._execute(t)}.bind(this)).done():n.showAlert("Oops!","Something is wrong ["+t.name+" failed].  Upon dismissing this message your browser will refresh.").then((function(){window.location.reload()}))}}.bind(this),500*Math.pow(2,t.count)))):r?marvel.logger.warn("Transaction failure not shown "+t.name):(marvel.logger.warn("Transaction "+t.name+" failed, informing user",i),n.showAlert("Oops!","Something is wrong ["+t.name+" failed].  Upon dismissing this message your browser will refresh.").then((function(){window.location.reload()}))):t.fnErr(i)}.bind(this)))}.bind(this))},inProgress:function(){return i.length>0},execute:function(e,t,o,n){marvel.logger.debug("Transaction.execute("+e+")");var s={fnExe:o,fnErr:n,name:e,retry:t,deferred:r.defer()};return this._execute(s),s.deferred.promise}}))}.apply(t,o))||(e.exports=n)},3465:function(e,t,r){var o,n;o=[r(2)],void 0===(n=function(e){"use strict";var t=!1;function r(){t||(t=!0)}return{applyPatches:r,setStorageInstance:function(e){e,r()}}}.apply(t,o))||(e.exports=n)},715:function(e,t,r){var o,n;o=[r(7),r(2),r(1),r(1006),r(10),r(0)],void 0===(n=function(e,t,r,o,n,s){"use strict";return{initializeStorage:function(){var e;return this.dcx=new this.AdobeDCX({xhrBaseBranchSupport:!0}),this.dcxService=this.dcx.createHTTPService((function(t){n.getAccessToken().then((function(r){r===e?(this.logger.error("Storage rejected our token, but IMS says it's valid, giving up!"),t.setAuthToken()):(e=r,t.setAuthToken(r))}))})),n.getAccessToken().then(function(e){this.dcxService.setAuthToken(e),this.dcxService.setApiKey(s.key);var t=this.storageServer;this.dcxSession=this.dcx.createStorageSession(this.dcxService,"https://"+t),this.dcxSession.getCompositeManifestHref=function(e,t,r){r(null,"/id/"+e._assetId+"/:manifest")};var r=this.AdobeDCXUtil.endPointOf,o=this.AdobeDCXUtil.appendPathElements;this.dcxSession._resolveUrl=function(e){return r(e)?(e.indexOf("cc-api-storage")>=0&&e.indexOf("-creativesdk")<0&&(e=e.replace("cc-api-storage","cc-api-storage-creativesdk")),e):o(this._server,e)}.bind(this.dcxSession),this.dcxSession.getHrefForComposite=function(e,r){return e.href?e.href:this.AdobeDCXUtil.appendPathElements(t,"assets",r,e.id)}.bind(this);return this.dcxSession._getComponentHref=function(e,t,r,o){var n={assetId:e,component_id:t};void 0!==r&&(n.version=r);var s=this.AdobeDCXUtil.expandURITemplate("id/{+assetId}{;version}{?component_id}",n);return s?o(void 0,s):o(new this.AdobeDCXError(this.AdobeDCXError.UNEXPECTED_RESPONSE,"An error occurred when attempting expand manifest URI template."))}.bind(this),this.storageEnabled=!0,this.enabledDefer.resolve(),marvel.events.trigger("storage-enabled",!0),!0}.bind(this))},waitForQuiet:function(e,t){var n=r.defer(),s=(new Date,function(){(t?t(e):e.isMidCommit()||e._commitQueue.length>0||o.inProgress())?window.setTimeout(s,50):n.resolve(e)});return s(),n.promise}}}.apply(t,o))||(e.exports=n)},716:function(e,t,r){var o,n;o=[r(7),r(2),r(1),r(1006),r(10),r(402),r(3465),r(25),r(19),r(130)],void 0===(n=function(e,t,r,o,n,s,i,a,d,c){"use strict";var l=d.SparkPerformanceTracker;function p(e){this.message=e,this.name="AbortError"}return p.prototype.toString=function(){return this.name+" "+this.message},{createAbortHelper:function(e,t){var r,o;if(e){if(!t)throw new Error("Abort helper cannot be created without a deferral.");e.aborted?t.reject(new p("The dcx operation aborted")):o=function(){r.abort(),t.reject(new p("The dcx operation aborted")),e.removeEventListener("abort",o)}}return{get aborted(){return e&&e.aborted},get requestContext(){return r},set requestContext(t){if(t){if(e&&!e.aborted){var n=r;r=t,n||e.addEventListener("abort",o)}}else window.marvel.logger.warn("The context was not valid")},reset:function(){r&&(e.removeEventListener("abort",o),r=void 0),t=void 0,e=void 0}}},installDCX3Shim:function(){i.setStorageInstance(this)},loadBaseBranch:function(e){var t=r.defer();try{e.loadBaseBranch((function(r,o){r?t.reject(r):(o._core._compositeAssetId=e.assetId,t.resolve(o))}))}catch(o){window.marvel.logger.error("dcx-storage-utils unexpected error in loadBaseBranch",o),t.reject(o)}return t.promise},deleteCompositeDoc:function(e,t){var r=e.get("syncGroupName"),o=e.get("id"),n=this.syncGroups[r];return n&&n.removeCompositeDoc(e),this._deleteComposite(r,o,t)},_deleteComposite:function(e,t,o){var n,s=r.defer();n=-1===t.search(/urn/)?this.AdobeDCXUtil.appendPathElements(this.dcxSession._server,"assets",e,t)+"?recursive=true&invocation_mode=sync":this.AdobeDCXUtil.appendPathElements(this.dcxSession._server,"id",t)+"?recursive=true&invocation_mode=sync",this.logger.info("Invoke DCX DELETE",n);var i=this.createAbortHelper(o,s);return i.aborted?s.promise:(i.requestContext=this.dcxSession._service.invoke("DELETE",n,{"If-match":"*"},void 0,void 0,function(e,t){i.reset(),e?(this.logger.error("Delete failed with "+e,e),s.reject(e)):s.resolve()}.bind(this)),s.promise)},pullComposite:function(e,t){return this._pullCompositeWithRetry(e,!1,t)},_pullCompositeWithRetry:function(e,t,o){var n="pullComposite";t&&(n="pullCompositeManifestOnly");var s=0;return c(this._pullComposite.bind(this,e,t,o),{maxAttempts:6,shouldRetry:this._isRetryableError,counter_cb:function(){s++},loggerFn:window.marvel.logger.info.bind(window.marvel.logger),logMessagePrefix:"[Core:ClientStorage] RETRY: "})().then(function(e){return s>0&&window.marvel.logger.info("[Core:ClientStorage] "+n+" succeeded after retry ("+s+")"),e}.bind(this)).catch(function(t){return this._isRetryableError(t)?window.marvel.logger.warn("[Core:ClientStorage] "+n+" gave up after retry",{projectId:e.id,href:e._href,error:t}):t&&"NO_COMPOSITE"===t.code?window.marvel.logger.info("[Core:ClientStorage] "+n+" encountered NO_COMPOSITE error",{projectId:e.id,href:e._href,error:t}):window.marvel.logger.error("[Core:ClientStorage] "+n+" error",{projectId:e.id,href:e._href,error:t}),r.reject(t)}.bind(this))},_isRetryableError:function(e){var t=e&&e.underlyingError||{},r=e.statusCode||t.response&&t.response.statusCode;return e&&(this.DCXRetryCodes().includes(e.code)||500==r||503==r||504==r)},_pullComposite:function(e,t,o){var n=r.defer();try{var s=this.createAbortHelper(o,n);if(s.aborted)return n.promise;s.requestContext=this.dcx.compositeXfer.pullCompositeManifestOnly(e,this.dcxSession,function(r,o){var i;s.reset(),r?n.reject(r):t?n.resolve(o):(i=o?e.resolvePullWithBranch(o):e.current,n.resolve(i))}.bind(this))}catch(i){n.reject(i)}return n.promise},pullCompositeManifestOnly:function(e,t){return this._pullCompositeWithRetry(e,!0,t)},pushComposite:function(e,t,o,n){var s=0,i=!1;return c(function(){return this._pushComposite(e,t,i||o,n)}.bind(this),{maxAttempts:6,shouldRetry:function(t){var r=this._isRetryableError(t);return!r&&t&&"INVALID_STATE"===t.code&&(r=!0,i=!0,this.logger.info("[Core:ClientStorage] pushComposite encountered INVALID_STATE, forcing push",{projectId:e.id,href:e._href,error:t})),r}.bind(this),counter_cb:function(){s++}})().then(function(e){return s>0&&this.logger.info("[Core:ClientStorage] pushComposite succeeded after retry ("+s+")"),e}.bind(this)).catch(function(t){return this._isRetryableError(t)?this.logger.warn("[Core:ClientStorage] pushComposite failed gave up after retry",{projectId:e.id,href:e._href,error:t}):!t||"UPDATE_CONFLICT"!==t.code&&"EXCEEDS_QUOTA"!==t.code?this.logger.error("[Core:ClientStorage] pushComposite failed not retryable",{projectId:e.id,href:e._href,error:t}):"EXCEEDS_QUOTA"===t.code?this.logger.warn("[Core:ClientStorage] pushComposite failed not retryable EXCEEDS_QUOTA",{projectId:e.id,href:e._href,error:t}):this.logger.info("[Core:ClientStorage] pushComposite encountered "+t.code,{projectId:e.id,href:e._href,error:t}),a.trackEvent("core:dcxClientSaveFailure",{},"core:storage"),r.reject(t)}.bind(this))},_pushComposite:function(e,t,o,n){var s=r.defer(),i=this.createAbortHelper(n,s);return i.aborted?s.promise:(e.href||(e.href=this.dcxSession.getHrefForComposite(e,t)),window.marvel.events.trigger("push-composite-start",{syncGroupName:t,composite:e,override:o}),i.requestContext=this.dcx.compositeXfer.pushComposite(e,!!o,this.dcxSession,function(t,r){if(i.reset(),t)s.reject(t);else{var o=e.acceptPush();s.resolve(o)}}.bind(this)),s.promise)},_convertCanvas:function(e){var t=r.defer();return e.canvas.toBlob(function(e){var r=URL.createObjectURL(e),o=document.createElement("img");o.onload=function(){t.resolve({blob:e,url:r,img:this})},o.onerror=function(){URL.revokeObjectURL(r),t.reject(new Error("StorageDCXUtilsMixin::_convertCanvas::newImage::onerror"))},o.src=r}.bind(this)),t.promise},pushCanvasComponent:function(e,t,r,o,n){return this._convertCanvas(e.copyFrom).then(function(s){return delete e.copyFrom,e.file=s.blob,this.pushComponent(e,t,r,o,n)}.bind(this))},_dataURLtoBlob:function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):window.unescape(e.split(",")[1]);for(var r=e.split(",")[0].split(":")[1].split(";")[0],o=new Uint8Array(t.length),n=0;n<t.length;n++)o[n]=t.charCodeAt(n);return new Blob([o],{type:r})},pushDataUrlComponent:function(e,t,r,o,n){return e.file=this._dataURLtoBlob(e.copyFrom.url),delete e.copyFrom,this.pushComponent(e,t,r,o,n)},pushComponentWithoutRetry:function(e,t,r,o,n){return this._pushComponent(e,t,r,o,n)},pushComponent:function(e,t,o,n,s){var i=0;return c(this._pushComponent.bind(this,e,t,o,n,s),{maxAttempts:6,shouldRetry:this._isRetryableError,counter_cb:function(){i++}})().then(function(e){return i>0&&this.logger.info("[Core:ClientStorage] pushComponent succeeded after retry ("+i+")",{projectId:t.id,assetId:t._assetId}),e}.bind(this)).catch(function(e){return this._isRetryableError(e)?this.logger.warn("[Core:ClientStorage] pushComponent failed gave up after retry",{projectId:t.id,href:t._href,error:e}):e&&"EXCEEDS_QUOTA"===e.code?this.logger.warn("[Core:ClientStorage] pushComponent failed not retryable EXCEEDS_QUOTA",{projectId:t.id,href:t._href,error:e}):e&&0===e.readyState?this.logger.info("[Core:ClientStorage] pushComponent failed readyState zero",{projectId:t.id,href:t._href,error:e,statusText:e.statusText}):e&&!0===e.isDownloadErr?this.logger.info("[Core:ClientStorage] pushComponent failed due to download failure",{projectId:t.id,href:t._href,error:e}):this.logger.error("[Core:ClientStorage] pushComponent failed not retryable",{projectId:t.id,href:t._href,error:e}),a.trackEvent("core:dcxClientSaveFailure",{},"core:storage"),r.reject(e)}.bind(this))},_pushComponent:function(e,t,o,n,s){var i,a,d,c,l=r.defer(),p=this.createAbortHelper(s,l);if(p.aborted)return l.promise;window.marvel.events.trigger("push-component-start",{syncGroupName:o,composite:t,componentAttrs:e,isUpdate:n});try{if(i=e.copyFrom){if("canvas"===i.source)return this.pushCanvasComponent(e,t,o,n);if("dataUrl"===i.source)return this.pushDataUrlComponent(e,t,o,n)}if(a=e.cover,c=function(r,o){if(p.reset(),r)return r.isDownloadErr?415===r.status||404===r.status||410===r.status?this.logger.warn("[Core:ClientStorage] Upload warning in download with"+r.message,{error:r,projectId:t.id,assetId:t._assetId}):this.logger.error("[Core:ClientStorage] Upload failed in download with "+r.message,{error:r,projectId:t.id,assetId:t._assetId}):this.logger.error("[Core:ClientStorage] Upload failed with "+r,{error:r,projectId:t.id,assetId:t._assetId}),l.reject(r);try{var s=t.current;if(n){var i=e.absolutePath||"/"+e.path;d=s.getComponentWithAbsolutePath(i),d=s.updateComponentWithUploadResults(d,o),l.resolve(d)}else d=s.addComponentWithUploadResults(e.name,e.relationship,e.path,e.parent||s.rootNode,o),l.resolve(d)}catch(a){this.logger.error("[Core:ClientStorage] uploadComplete error in _pushComponent:"+e.path+" "+e,{error:a,projectId:t.id,assetId:t._assetId}),a.uploadResults=o,l.reject(a)}}.bind(this),n){var u=e.absolutePath||"/"+e.path;if(d=t.current.getComponentWithAbsolutePath(u))i?this.transload(t,d,i,c):a?this.uploadCover(t,d,a,c):p.requestContext=this.dcx.compositeXfer.uploadComponent(d,e.file,t,this.dcxSession,c);else{var h="null component in pushComponent:"+e.path+" "+e,f=new Error(h);this.logger.error(h,{error:f,projectId:t.id,assetId:t._assetId}),l.reject(f)}}else i?this.transload(t,e.id,i,c,o):a?this.uploadCover(t,e.id,a,c):p.requestContext=this.dcx.compositeXfer.uploadNewComponent(e.file,e.type,t,e.id,this.dcxSession,c)}catch(g){this.logger.error("unexpected error caught in pushComponent",{error:g,projectId:t.id,assetId:t._assetId}),l.reject(g)}return l.promise},transload:function(r,o,s,i,a){var d,c,l,p=s.source;"string"==typeof o?l=o:o?(c=o,l=o.id):l=this.AdobeDCXUtil.generateUuid();var u=["image/png","image/jpeg"];switch(p){case"dooplo":d=s.assetId.replace(/^https?\:\/\/[^\.]*\.adobe\.io\/api\/v1\/assets\/([^\/]*)\/.*$/,"$1");break;case"dropbox":d=s.assetId.replace(/^https?\:\/\/[^\/]*\/db_files\/(.*)$/,"$1");break;case"lightroom":d=s.assetId.replace(/^https?\:\/\/[^\/]*\/lr_files\/(.*)$/,"$1");break;case"cc":d=s.assetId.replace(/^https?\:\/\/[^\/]*\/files\/(.*)$/,"$1");break;case"ccl":d=s.assetId;break;case"google drive":d=s.assetId,p="googleDrive";break;case"google photos":d=s.assetId,p="google";break;case"facebook":d=s.assetId,p="facebook";break;case"cp":d=s.assetId;break;case"cclight":case"cc light design assets":d=s.assetId,p="cclight",u=null;break;default:if(!p){var h=new Error("falsy imageSource in transload: "+p);return this.logger.error(h.message,{err:h,composite:r,copyFrom:s}),i(h)}d=s.assetId}r.href||(r.href=this.dcxSession.getHrefForComposite(r,a));var f={asset_id:d,path:r.href.replace(/^(?:[^\.]*\.adobe\.io)\/([^\#\?]*)([^\#]*)(.*)$/,"$1")+"/"+l,allowedTypes:u},g=this.AdobeDCXUtil.generateUuid(),m={method:"PUT",url:"/transload/"+p,dataType:"json",data:f,beforeSend:function(e){e.setRequestHeader("X-Request-Id",g)},success:function(e,t,o){if(200!=o.status)return i(new Error("Transload came back with "+o.status+" "+o.responseText));var n=this.createUploadResults(r.id,r.assetId),a=s.componentMimeType||e.type,d=this.createUploadRecord(l,o.getResponseHeader("etag"),o.getResponseHeader("x-latest-version"),e.md5,e.size,a);n.addUploadRecord(l,d),i(null,n)}.bind(this),error:function(e){try{var r=JSON.parse(e.responseText||e.response);e.isDownloadErr=r.isDownloadErr,e.message=r.error,e.imageService=p}catch(o){t.extend(e,{data:f,url:"/transload/"+p,requestId:g}),this.logger.error("Bad error response in transload",e)}return n.checkIsOffline(),i(e)}.bind(this)};c&&(m.headers={"If-Match":c.etag}),e.ajax(m)},upload:function(t,r,o,s){var i;i=o?o.id:this.AdobeDCXUtil.generateUuid();var a=new FormData;a.append("path",r.href.replace(/^https?\:\/\/[^\.]*\.adobe\.io\/([^\#\?]*)([^\#]*)(.*)$/,"$1")+"/"+i),a.append("file",t);var d={method:"PUT",url:"/transload/font",dataType:"json",data:a,processData:!1,contentType:!1,success:function(e,t,o){if(200!=o.status&&201!=o.status)return s(new Error("Upload came back with "+o.status+" "+o.responseText));var n=this.createUploadResults(r.id,r.assetId),a=this.createUploadRecord(i,o.getResponseHeader("etag"),o.getResponseHeader("x-latest-version"),e.md5,e.size,e.type);n.addUploadRecord(i,a),s(null,n)}.bind(this),error:function(e){return n.checkIsOffline(),s(e)}.bind(this)};o&&(d.headers={"If-Match":o.etag}),e.ajax(d)},uploadCover:function(t,r,o,n){var s,i;i="string"==typeof r?r:r?(s=r).id:o.target.split("/")[1];var a={method:"POST",url:"/cover",dataType:"json",data:{source_path:o.source,target_path:o.target,x:o.x,y:o.y,type:o.type},success:function(e,r,o){if(200!=o.status)return n(new Error("Cover came back with "+o.status+" "+o.responseText));var s=this.createUploadResults(t.id,t.assetId),a=this.createUploadRecord(i,o.getResponseHeader("etag"),o.getResponseHeader("x-latest-version"),e.md5,e.size,e.type);s.addUploadRecord(i,a),n(null,s)}.bind(this),error:function(e){return n(e)}};s&&(a.headers={"If-Match":s.etag}),e.ajax(a)},_stripEtag:function(e){return e&&0===e.indexOf('"')&&(e=e.substring(1)),e&&e.indexOf('"')===e.length-1&&(e=e.substring(0,e.length-1)),e},_privateGetComponentHref:function(e,t,o){var n=r.defer(),s=this.createAbortHelper(o,n);return s.aborted?n.promise:(s.requestContext=this.dcxSession.getComponentHref(t,void 0,(function(e,t){s.reset(),e?(window.marvel.logger.error("failed to get component href",e),n.reject(e)):n.resolve(t)})),n.promise)},getComponentRenditionHref:function(e,t,o,n){var s,i,a=r.defer();t instanceof this.AdobeDCXComponent?i="/"+(s=t).path:(i=t,s=e.current.getComponentWithAbsolutePath(i));var d=0;return c(this._getComponentRenditionHref.bind(this,s,i,o,n),{maxAttempts:6,shouldRetry:this._isRetryableError,counter_cb:function(){d++},loggerFn:window.marvel.logger.debug.bind(window.marvel.logger),logMessagePrefix:"[Core:ClientStorage] getComponentRenditionHref"})().then((function(t){window.marvel.logger.info("[Core:ClientStorage] getComponentRenditionHref succeeded",{compositeAssetId:e.assetId,compositeType:e.current.type,componentId:s.id,href:t,size:o,mime:n,retries:d}),a.resolve(t)})).catch((function(t){window.marvel.logger.error("[Core:ClientStorage] getComponentRenditionHref failed",{compositeAssetId:e.assetId,compositeType:e.current.type,componentId:s.id,size:o,mime:n,retries:d,error:t}),a.reject(t)})),a.promise},_getComponentRenditionHref:function(e,t,r,o){return new Promise(function(n,s){this.dcxSession.getComponentRenditionHref(e,e.version,r,function(r,i){var a;r?s(r):(0===(i=i.replace(this.storageServer,window.location.host)).indexOf(window.location.host+"/assets/")?(i=i.replace(/\/assets/,"/image_assets"),a=/^(https?\:\/\/[^\/]+\/image_assets\/[^\/]+\/[^\/]+)\/.*$/):(i=i.replace(/\/id/,"/image_assets"),window.marvel.logger.traceflow("dcx-3","getComponentRenditionHref "+JSON.stringify({href:i,componentId:e.id,etag:e.etag})),a=/^(https?\:\/\/[^\/]+\/id\/[^\/]+)\/.*$/),i=i.replace(a,"$1"+t+"?asset_id="+e.id+"&img_etag="+this._stripEtag(e.etag)+"&version="+e.version),o&&(i+="&mime="+encodeURIComponent(o)),n(i))}.bind(this))}.bind(this))},getComponent:function(e,t,o){var s,i,a=r.defer();return e instanceof this.AdobeDCXComponent?s=e:(i=e,s=t.current.getComponentWithAbsolutePath(i)),s?this._getComponentWithRetry(s,o).then(function(e){window.marvel.logger.info("[Core:ClientStorage] getComponent succeeded",{compositeAssetId:t.assetId,compositeType:t.current.type,componentId:s.id,retries:e.retries}),a.resolve(e.DCXResponse.response)}.bind(this)).catch(function(e){n.checkIsOffline().then((function(r){var o={compositeAssetId:t.assetId,compositeType:t.current.type,componentId:s.id,error:e.DCXError,retries:e.retries};r?window.marvel.logger.warn("[Core:ClientStorage] getComponent failed because we were offline",o):window.marvel.logger.error("[Core:ClientStorage] getComponent failed",o)})),a.reject(e.DCXError)}.bind(this)):a.resolve(),a.promise},_getComponentWithRetry:function(e,t){var r=0;return c(this._getComponent.bind(this,e,t),{maxAttempts:6,shouldRetry:this._isRetryableError,counter_cb:function(){r++},loggerFn:window.marvel.logger.debug.bind(window.marvel.logger),logMessagePrefix:"[Core:ClientStorage] getComponent"})().then((function(e){return{retries:r,DCXResponse:e}})).catch((function(e){var t=new Error("getComponent DCX failure after retries");throw t.retries=r,t.DCXError=e,t}))},_getComponent:function(e,t){var o=r.defer(),n=this.createAbortHelper(t,o);return n.aborted?o.promise:(n.requestContext=this.dcxSession.getComponent(e,"text",(function(e,t){if(n.reset(),e||200!==t.statusCode){var r=e||t;o.reject(r)}else o.resolve(t)})),l.measurePromise("StorageDCXUtils.getComponent:"+e.id,o.promise))}}}.apply(t,o))||(e.exports=n)},717:function(e,t,r){var o,n;o=[r(713)],void 0===(n=function(e){var t=e.AdobeDCXError;return{DCXRetryCodes:function(){return[t.NETWORK_ERROR,t.RETRYABLE_SERVER_ERROR,t.TIMED_OUT,t.UNEXPECTED_RESPONSE,t.COMPONENT_DOWNLOAD_ERROR,t.COMPONENT_UPLOAD_ERROR,t.UNEXPECTED,t.NO_COMPOSITE]}}}.apply(t,o))||(e.exports=n)}}]);
//# sourceMappingURL=m-storage-377454b6.js.map